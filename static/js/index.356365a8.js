(()=>{var e,t,a,s,i,n,r,o,l,d,c,u,h,p,m,g={2641(e,t,a){"use strict";a.d(t,{A:()=>s});let s={draggable:"draggable-tuKs7A",clickable:"clickable-oLol_o"}},47220(e,t,a){"use strict";a.d(t,{A:()=>s});let s={Application__main:"Application__main-FdQGjO",applicationMain:"Application__main-FdQGjO",WorkspaceParent:"WorkspaceParent-QJ2V4E",workspaceParent:"WorkspaceParent-QJ2V4E","bp6-tag":"bp6-tag-rL13Ap",bp6Tag:"bp6-tag-rL13Ap",badge:"badge-spGWMQ","bp6-overlay":"bp6-overlay-pigCzr",bp6Overlay:"bp6-overlay-pigCzr","bp6-popover-content":"bp6-popover-content-z2cOzW",bp6PopoverContent:"bp6-popover-content-z2cOzW","badge-tag":"badge-tag-_VS7zD",badgeTag:"badge-tag-_VS7zD","grading-overview-unfilterable-btns":"grading-overview-unfilterable-btns-opRvqf",gradingOverviewUnfilterableBtns:"grading-overview-unfilterable-btns-opRvqf","grading-overview-filterable-btns":"grading-overview-filterable-btns-dBjj2i",gradingOverviewFilterableBtns:"grading-overview-filterable-btns-dBjj2i","grading-badge":"grading-badge-VfDb9M",gradingBadge:"grading-badge-VfDb9M","grading-table-col-icons":"grading-table-col-icons-oxgIFP",gradingTableColIcons:"grading-table-col-icons-oxgIFP","grading-left-align":"grading-left-align-QRx3fq",gradingLeftAlign:"grading-left-align-QRx3fq","grading-default-headers":"grading-default-headers-FnJD_o",gradingDefaultHeaders:"grading-default-headers-FnJD_o","grading-table-header-individual":"grading-table-header-individual-rMo0p3",gradingTableHeaderIndividual:"grading-table-header-individual-rMo0p3","grading-table-rows":"grading-table-rows-tcwUSS",gradingTableRows:"grading-table-rows-tcwUSS","grading-filter-btn":"grading-filter-btn-hPYpCy",gradingFilterBtn:"grading-filter-btn-hPYpCy","grading-filter-btn-on":"grading-filter-btn-on-kGGjm1",gradingFilterBtnOn:"grading-filter-btn-on-kGGjm1","grading-def-cell":"grading-def-cell-qolE4X",gradingDefCell:"grading-def-cell-qolE4X","grading-def-cell-pointer":"grading-def-cell-pointer-x8_uV4",gradingDefCellPointer:"grading-def-cell-pointer-x8_uV4","grading-def-cell-selectable":"grading-def-cell-selectable-beKclP",gradingDefCellSelectable:"grading-def-cell-selectable-beKclP","grading-cell-align-left":"grading-cell-align-left-fUJg7W",gradingCellAlignLeft:"grading-cell-align-left-fUJg7W","grading-xp-cell":"grading-xp-cell-Qrq51E",gradingXpCell:"grading-xp-cell-Qrq51E"}},53301(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=53301,e.exports=t},4310(e,t,a){var s={"./java/lang/Object.js":["75838","70515"],"./java/lang/Thread.js":["68365","95934"],"./java/lang/reflect/Array.js":["46034","54479"],"./java/util/concurrent/atomic/AtomicLong.js":["71502","57315"],"./java/lang/Double.js":["37432","16385"],"./java/lang/Runtime.js":["95625","30226"],"./java/lang/Float.js":["60827","85480"],"./sun/misc/URLClassPath.js":["64171","13080"],"./sun/misc/Unsafe.js":["55441","13866"],"./sun/misc/VM.js":["51958","21403"],"./java/io/UnixFileSystem.js":["39300","1893"],"./java/lang/invoke/MethodHandleNatives.js":["25291","50136"],"./sun/reflect/NativeConstructorAccessorImpl.js":["16776","43537"],"./java/lang/System.js":["82476","53501"],"./java/io/FileOutputStream.js":["29810","29199"],"./sun/misc/Signal.js":["52875","74904"],"./java/io/FileInputStream.js":["20375","82172"],"./sun/reflect/Reflection.js":["4851","5072"],"./java/io/FileDescriptor.js":["89614","13827"],"./java/security/AccessController.js":["39385","14274"],"./sun/misc/Perf.js":["57136","20169"],"./java/lang/String.js":["85084","3373"],"./sun/reflect/NativeMethodAccessorImpl.js":["2349","12190"],"./java/lang/ClassLoader.js":["61994","92311"],"./java/lang/Class.js":["14337","61562"],"./java/lang/Throwable.js":["74205","51694"]};function i(e){if(!a.o(s,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=s[e],i=t[0];return a.e(t[1]).then(function(){return a(i)})}i.keys=()=>Object.keys(s),i.id=4310,e.exports=i},6636(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=6636,e.exports=t},29458(e,t,a){"use strict";a.d(t,{A:()=>l});var s=a(74848),i=a(31365),n=a(28761),r=a(79642);a(96540);let o={className:"",fullWidth:!1,iconOnRight:!1,intent:i.J.NONE,minimal:!0},l=({label:e="",icon:t,onClick:a,options:i={},isDisabled:l=!1})=>{let d={...o,...i},c=t&&(0,s.jsx)(n.I,{icon:t,color:d.iconColor}),u=l?r.A:r.$;return(0,s.jsx)(u,{disabled:l,fill:d.fullWidth,intent:d.intent,minimal:d.minimal,className:d.className,type:d.type,onClick:a,icon:!d.iconOnRight&&c,rightIcon:d.iconOnRight&&c,children:e})}},29890(e,t,a){"use strict";a.d(t,{A:()=>c});var s=a(74848),i=a(53991),n=a(46942),r=a.n(n),o=a(99418),l=a(96540),d=a(41552);let c=l.memo(e=>{let t=new d.Converter({tables:!0,simplifiedAutoLink:e.simplifiedAutoLink,strikethrough:e.strikethrough,tasklists:e.tasklists,openLinksInNewWindow:e.openLinksInNewWindow});return(0,s.jsx)("div",{className:r()(e.className?e.className:"md",i.RUNNING_TEXT),dangerouslySetInnerHTML:{__html:o.A.sanitize(t.makeHtml(e.content),{USE_PROFILES:{html:!0},ADD_ATTR:["target"]})}})})},14081(e,t,a){"use strict";a.d(t,{A:()=>x,j:()=>b});var s=a(74848),i=a(39798),n=a(79642),r=a(77555),o=a(11678),l=a(33114),d=a(96540),c=a(37982),u=a(37852);let h=l.l.ofType(),p=(e,{handleClick:t})=>(0,s.jsx)(i.D,{onClick:t,text:e.text},e.uuid),m=(e,t)=>t.text.toLowerCase().includes(e.toLowerCase()),g=l.l.ofType(),y=(e,{handleClick:t})=>(0,s.jsx)(i.D,{onClick:t,text:e.name||e.username},e.courseRegId),f=(e,t)=>[t.name,t.username,t.group].reduce((t,a)=>a?t||a.toLowerCase().includes(e.toLowerCase()):t,!1);function b(){(0,u.uT)("Goal updated")}let x=e=>{let{userState:t,hiddenState:a,studio:l,getUsers:b,updateGoalProgress:x}=e,v="Staff"===l?[...e.users].sort((e,t)=>null!=e.name&&null!=t.name?e.name.localeCompare(t.name):null==e.name?1:-1):e.users.filter(e=>e.group===l).sort((e,t)=>null!=e.name&&null!=t.name?e.name.localeCompare(t.name):null==e.name?1:-1);(0,d.useEffect)(()=>{b()},[b]);let A=(0,d.useContext)(c.xV).getAllGoals().filter(e=>"Manual"===e.meta.type),[T,w]=(0,d.useState)(void 0),[S,C]=t,[I,E]=(0,d.useState)(0),[_,j]=a;return(0,s.jsxs)("div",{className:"achievement-manual-editor",children:[(0,s.jsxs)("div",{className:"editor-section",children:[(0,s.jsx)("h3",{children:"User: "}),(0,s.jsx)(g,{filterable:!0,items:v,itemRenderer:y,itemPredicate:f,onItemSelect:C,noResults:(0,s.jsx)(i.D,{disabled:!0,text:"No matching user"}),children:(0,s.jsx)(n.$,{outlined:!0,text:S?S.name||S.username:"No User Selected",color:"White"})})]}),(0,s.jsxs)("div",{className:"editor-section",children:[(0,s.jsx)("h3",{children:"Goal: "}),(0,s.jsx)(h,{filterable:!0,items:A,itemRenderer:p,itemPredicate:m,onItemSelect:w,noResults:(0,s.jsx)(i.D,{disabled:!0,text:"No matching goal"}),children:(0,s.jsx)(n.$,{outlined:!0,text:T?T.text:"No Goal Selected",color:"White"})})]}),(0,s.jsxs)("div",{className:"editor-section",children:[(0,s.jsx)("h3",{children:"Count: "}),(0,s.jsx)(r.O,{value:I,min:0,allowNumericCharactersOnly:!0,minorStepSize:null,placeholder:"Count",onValueChange:E})]}),(0,s.jsx)("div",{className:"editor-section",children:(0,s.jsx)(n.$,{outlined:!0,text:"Update Goal",onClick:()=>{if(T&&S){let e={uuid:T.uuid,count:I<0?0:Math.floor(I),targetCount:T.targetCount,completed:I>=T.targetCount};x(S.courseRegId,e)}else T||(0,u.JB)("Goal not selected"),S||(0,u.JB)("User not selected")},intent:"primary"})}),(0,s.jsx)("div",{className:"editor-section",children:(0,s.jsx)(o.Sc,{checked:_,label:"View Hidden Achievements",onChange:()=>j(!_)})})]})}},83477(e,t,a){"use strict";a.d(t,{A:()=>c});var s=a(2543),i=a(66266),n=a(65334),r=a(37852),o=a(31789);class l{achievement;displayDeadline;xp;progressFrac;status;children;descendant;parents;constructor(e){const{deadline:t,prerequisiteUuids:a}=e;this.achievement=e,this.displayDeadline=t,this.xp=0,this.progressFrac=0,this.status="ACTIVE",this.children=new Set(a),this.descendant=new Set(a),this.parents=new Set}}class d{nodeList=new Map;goalList=new Map;textToUuid=new Map;titleToUuid=new Map;achievementsToDelete=[];goalsToDelete=[];constructor(e,t){this.nodeList=this.constructNodeList(e),this.goalList=this.constructGoalList(t),this.processNodes(),this.processGoals()}invalidGoal={uuid:"invalid",text:"invalid",achievementUuids:[],meta:{type:n.IW.MANUAL,targetCount:0},count:0,targetCount:0,completed:!1};invalidAchievement={uuid:"invalid",title:"invalid",xp:0,isVariableXp:!1,deadline:void 0,release:void 0,isTask:!1,position:0,prerequisiteUuids:[],goalUuids:[],cardBackground:"invalid",view:{coverImage:"invalid",description:"invalid",completionText:"invalid"}};getAllAchievements(){return[...this.nodeList.values()].map(e=>e.achievement)}getAllReleasedAchievements(){return[...this.nodeList.values()].filter(e=>"UNRELEASED"!==e.status).map(e=>e.achievement)}getAllCompletedAchievements(){return[...this.nodeList.values()].filter(e=>"COMPLETED"===e.status).map(e=>e.achievement)}getAllAchievementUuids(){return[...this.nodeList.keys()]}getAllGoals(){return[...this.goalList.values()]}getAllGoalUuids(){return[...this.goalList.keys()]}hasAchievement(e){return this.nodeList.has(e)}isPrerequisite(e){let t=this.nodeList.get(e);return!!t&&t.parents.size>0}getAchievement(e){let t=this.nodeList.get(e);return t?t.achievement:this.invalidAchievement}hasGoal(e){return this.goalList.has(e)}getGoal(e){return this.goalList.get(e)||this.invalidGoal}getGoalDefinition(e){return this.getGoal(e)}getGoalProgress(e){return this.getGoal(e)}getAchievementPositionByUuid(e){return this.getAchievement(e).position}getAchievementsToDelete(){return this.achievementsToDelete}getGoalsToDelete(){return this.goalsToDelete}resetToDelete(){this.achievementsToDelete=[],this.goalsToDelete=[]}getAchievementsByGoal(e){return this.getGoal(e).achievementUuids}listSortedAchievementUuids(){return this.getAllAchievements().sort((e,t)=>e.position-t.position).map(e=>e.uuid)}isInvalidGoal(e){return e===this.invalidGoal}isInvalidAchievement(e){return e===this.invalidAchievement}insertAchievement(e){let t=(0,i.A)();for(;this.nodeList.has(t);)t=(0,i.A)();return e.uuid=t,this.nodeList.set(t,new l(e)),this.processNodes(),this.normalizePositions(e.uuid,e.position),t}insertFakeAchievement(e){return this.nodeList.set(e.uuid,new l(e)),this.processNodes(),this.normalizePositions(e.uuid,e.position),e.uuid}insertGoalDefinition(e){let t=(0,i.A)();for(;this.goalList.has(t);)t=(0,i.A)();return e.uuid=t,this.goalList.set(t,{...e,...n.ss}),this.processGoals(),t}insertFakeGoalDefinition(e,t){return t?this.goalList.set(e.uuid,{...e,count:1,targetCount:1,completed:!0}):this.goalList.set(e.uuid,{...e,count:0,targetCount:1,completed:!1}),this.processGoals(),e.uuid}modifyAchievement(e){this.nodeList.set(e.uuid,new l(e)),this.processNodes(),this.normalizePositions(e.uuid,e.position)}modifyGoalDefinition(e){this.goalList.set(e.uuid,{...e,...n.ss}),this.processNodes(),this.processGoals()}modifyGoalProgress(e){let t=this.getGoal(e.uuid);if(this.isInvalidGoal(t))return;this.goalList.set(e.uuid,{...t,...e});let a=t.achievementUuids;for(let e in a){let t=this.nodeList.get(e);t&&(this.generateXp(t),this.generateProgressFrac(t),this.generateStatus(t))}}removeAchievement(e){this.nodeList.delete(e),this.nodeList.forEach((t,a)=>{let s;t.children.has(e)&&this.nodeList.set(a,(s=t.achievement.prerequisiteUuids.filter(t=>t!==e),t.achievement.prerequisiteUuids=s,new l(t.achievement)))}),this.achievementsToDelete.push(e),this.processNodes(),this.normalizePositions()}removeGoalDefinition(e){this.goalList.delete(e),this.nodeList.forEach(t=>{var a;let s;-1!==(s=(a=t).achievement.goalUuids.findIndex(t=>t===e))&&a.achievement.goalUuids.splice(s,1)}),this.goalsToDelete.push(e),this.processNodes(),this.processGoals()}listTaskUuids(){return this.getAllAchievements().filter(e=>e.isTask||this.isCompleted(e)).map(e=>e.uuid)}listSortedTaskUuids(){return this.getAllAchievements().filter(e=>e.isTask||this.isCompleted(e)).sort((e,t)=>e.position-t.position).map(e=>e.uuid)}listSortedReleasedTaskUuids(){return this.getAllReleasedAchievements().filter(e=>e.isTask||this.isCompleted(e)).sort((e,t)=>e.position-t.position).map(e=>e.uuid)}listAllSortedAchievementUuids(){return this.getAllAchievements().sort((e,t)=>e.position-t.position).map(e=>e.uuid)}isCompleted(e){let t=e.goalUuids.length,a=e.prerequisiteUuids.length;if(0===t&&0===a)return!1;for(let a=0;a<t;a++)if(!this.getGoal(e.goalUuids[a]).completed)return!1;for(let t=0;t<a;t++)if(!this.isCompleted(this.getAchievement(e.prerequisiteUuids[t])))return!1;return!0}listGoals(e){let{goalUuids:t}=this.getAchievement(e);return t.map(e=>this.getGoal(e))}listPrerequisiteGoals(e){let t=[];for(let a of this.getImmediateChildren(e)){let{goalUuids:e}=this.getAchievement(a);e.forEach(e=>t.push(e))}return t.map(e=>this.getGoal(e))}getUuidByText(e){return this.textToUuid.get(e)}getTextByUuid(e){return this.getGoal(e).text}getUuidByTitle(e){return this.titleToUuid.get(e)}getTitleByUuid(e){return this.getAchievement(e).title}getAchievementXp(e){let t=this.getAchievement(e);return t.isVariableXp?this.listGoals(t.uuid).reduce((e,t)=>e+t.count,0):t.xp}getTotalXp(){return this.getAllCompletedAchievements().reduce((e,t)=>e+this.getAchievementXp(t.uuid),0)}getProgressFrac(e){return this.nodeList.has(e)?this.nodeList.get(e).progressFrac:0}getStatus(e){return this.nodeList.has(e)?this.nodeList.get(e).status:"ACTIVE"}getDisplayDeadline(e){return this.nodeList.has(e)?this.nodeList.get(e).displayDeadline:void 0}isImmediateChild(e,t){return!!this.nodeList.has(e)&&this.nodeList.get(e).children.has(t)}getImmediateChildren(e){return this.nodeList.has(e)?this.nodeList.get(e).children:new Set}isDescendant(e,t){return!!this.nodeList.has(e)&&this.nodeList.get(e).descendant.has(t)}getDescendants(e){return this.nodeList.has(e)?this.nodeList.get(e).descendant:new Set}getDescendantXp(e){let t=this.getAchievementXp(e);return this.getDescendants(e).forEach(e=>{this.isCompleted(this.getAchievement(e))&&(t+=this.getAchievementXp(e))}),t}listAvailablePrerequisiteUuids(e){return this.getAllAchievementUuids().filter(t=>t!==e&&!this.isDescendant(e,t)&&!this.isDescendant(t,e))}processNodes(){this.titleToUuid=new Map,this.nodeList.forEach(e=>{let{title:t,uuid:a}=e.achievement;this.titleToUuid.set(t,a),e.achievement.prerequisiteUuids=(0,s.uniq)(e.achievement.prerequisiteUuids),e.achievement.goalUuids=(0,s.uniq)(e.achievement.goalUuids),this.generateParentReference(e),this.generateDescendant(e),this.generateDisplayDeadline(e),this.generateXp(e),this.generateProgressFrac(e),this.generateStatus(e)})}processGoals(){this.textToUuid=new Map,this.goalList.forEach(e=>{let{text:t,uuid:a}=e;this.textToUuid.set(t,a),e.achievementUuids=(0,s.uniq)(e.achievementUuids)})}constructNodeList(e){let t=new Map;return e.forEach(e=>t.set(e.uuid,new l((0,s.cloneDeep)(e)))),t}constructGoalList(e){let t=new Map;return e.forEach(e=>t.set(e.uuid,(0,s.cloneDeep)(e))),t}generateParentReference(e){for(let t of e.children)this.nodeList.get(t)?.parents.add(e.achievement.uuid)}generateDescendant(e){for(let t of e.descendant){if(t===e.achievement.uuid){let{title:t}=e.achievement;(0,r.mn)(`Circular dependency detected in achievement ${t}`,3e4)}for(let a of this.getDescendants(t))e.descendant.add(a)}}generateDisplayDeadline(e){let t=[];for(let a of e.descendant){let e=this.getAchievement(a).deadline;t.push(e)}e.displayDeadline=t.reduce((e,t)=>void 0===t||(0,o._d)(t)?e:void 0===e||(0,o._d)(e)||t<e?t:e,e.displayDeadline)}generateXp(e){let{goalUuids:t,isVariableXp:a}=e.achievement;e.xp=t.reduce((e,t)=>e&&this.getGoal(t).completed,!0)?a?t.reduce((e,t)=>e+this.getGoal(t).count,0):e.achievement.xp:0}generateProgressFrac(e){let{goalUuids:t}=e.achievement;if(0===t.length)e.progressFrac=0;else{let a=t.reduce((e,t)=>e+this.getGoal(t).count,0),s=t.reduce((e,t)=>e+this.getGoal(t).targetCount,0);e.progressFrac=Math.min(0===s?0:a/s,1)}}generateStatus(e){let t=this.isCompleted(e.achievement),a=(0,o.OZ)(e.achievement.release),s=!(0,o._d)(e.displayDeadline);e.status=t?"COMPLETED":a?s?"ACTIVE":"EXPIRED":"UNRELEASED"}normalizePositions(e,t){let a=1;if(this.getAllAchievements().filter(e=>e.isTask).filter(e=>e.position>=0).sort((e,t)=>e.position-t.position).forEach(e=>e.position=a++),this.getAllAchievements().filter(e=>!e.isTask).forEach(e=>e.position=0),e&&t&&0!==t){let a=this.getAchievement(e),s=a.position;if(s!==t){let e=this.getAllAchievements().find(e=>e.position===t);e&&(e.position=s,a.position=t)}}}}let c=d},31789(e,t,a){"use strict";a.d(t,{CC:()=>c,GG:()=>l,It:()=>h,N6:()=>u,OZ:()=>o,Zw:()=>d,_d:()=>r});var s=a(74353),i=a.n(s);let n=new Date,r=e=>void 0!==e&&e<=n,o=e=>void 0===e||e<=n,l=(e,t)=>{if(void 0===e&&void 0===t)return!0;let a=new Date,s=100*a.getHours()+a.getMinutes(),i=void 0===e?void 0:100*e.getHours()+e.getMinutes(),n=void 0===t?void 0:100*t.getHours()+t.getMinutes();return void 0===i?s<=n:void 0===n?s>=i:i>=n?s<=n||s>=i:s<=n&&s>=i},d=e=>void 0===e?0:e.getTime()-n.getTime(),c=e=>void 0===e?"":i()(e).format("D MMMM YYYY HH:mm"),u=e=>void 0===e?"":i()(e).format("HH:mm"),h=e=>{if(void 0===e)return"Unlimited";if(r(e))return"Expired";let t=i()(),a=Math.ceil(i()(e).diff(t,"weeks",!0)),s=Math.ceil(i()(e).diff(t,"days",!0)),n=Math.ceil(i()(e).diff(t,"hours",!0));return a>1?a+" Weeks":s>1?s+" Days":n>1?n+" Hours":"1 Hour"}},61499(e,t,a){"use strict";a.d(t,{BM:()=>P,Fc:()=>m,HR:()=>V,HU:()=>f,Jm:()=>R,Kd:()=>E,Kl:()=>C,Kn:()=>U,Ko:()=>J,L5:()=>x,MP:()=>M,O9:()=>F,Pu:()=>G,QR:()=>Y,Qm:()=>z,T_:()=>L,Xh:()=>h,Ye:()=>N,Zg:()=>O,eo:()=>w,f_:()=>A,gO:()=>p,hM:()=>T,h_:()=>S,iH:()=>b,js:()=>W,lU:()=>y,lr:()=>j,n6:()=>X,pL:()=>k,pb:()=>D,ph:()=>I,qq:()=>v,sQ:()=>B,tu:()=>H});var s,i,n=a(38786),r=a(76099),o=a(99475),l=a(48857),d=a(91948),c=a(27457),u=a(75580),h=((s={}).Student="student",s.Staff="staff",s.Admin="admin",s),p=((i={}).Standard="member",i.Moderator="moderator",i.Admin="admin",i);let m=["JavaScript","Scheme","Python","Java","C"],g=new Map([[n.Variant.TYPED,"Typed"],[n.Variant.WASM,"WebAssembly"],[n.Variant.NATIVE,"Native"],[n.Variant.EXPLICIT_CONTROL,"Explicit-Control"]]),y={chapter:n.Chapter.FULL_JS,variant:n.Variant.DEFAULT,displayName:"full JavaScript",mainLanguage:"JavaScript",supports:{dataVisualizer:!0,repl:!0}},f={chapter:n.Chapter.FULL_TS,variant:n.Variant.DEFAULT,displayName:"full TypeScript",mainLanguage:"JavaScript",supports:{dataVisualizer:!0,repl:!0}},b={chapter:n.Chapter.HTML,variant:n.Variant.DEFAULT,displayName:"HTML",mainLanguage:"JavaScript",supports:{}},x=[{chapter:n.Chapter.SCHEME_1,variant:n.Variant.EXPLICIT_CONTROL,displayName:"Scheme \xa71"},{chapter:n.Chapter.SCHEME_2,variant:n.Variant.EXPLICIT_CONTROL,displayName:"Scheme \xa72"},{chapter:n.Chapter.SCHEME_3,variant:n.Variant.EXPLICIT_CONTROL,displayName:"Scheme \xa73"},{chapter:n.Chapter.SCHEME_4,variant:n.Variant.EXPLICIT_CONTROL,displayName:"Scheme \xa74"},{chapter:n.Chapter.FULL_SCHEME,variant:n.Variant.EXPLICIT_CONTROL,displayName:"Full Scheme"}].map(e=>({...e,mainLanguage:"Scheme",supports:{repl:!0,cseMachine:!0}}));function v(e){return[n.Chapter.SCHEME_1,n.Chapter.SCHEME_2,n.Chapter.SCHEME_3,n.Chapter.SCHEME_4,n.Chapter.FULL_SCHEME].includes(e)}function A(e){return e==n.Variant.EXPLICIT_CONTROL}let T=[{chapter:n.Chapter.PYTHON_1,variant:n.Variant.DEFAULT,displayName:"Python \xa71"}].map(e=>({...e,mainLanguage:"Python",supports:{repl:!0}})),w=[{chapter:n.Chapter.FULL_JAVA,variant:n.Variant.DEFAULT,displayName:"Java",mainLanguage:"Java",supports:{cseMachine:!0}}],S=[{chapter:n.Chapter.FULL_C,variant:n.Variant.DEFAULT,displayName:"C",mainLanguage:"C",supports:{}}],C=(e,t=n.Variant.DEFAULT)=>j(e,t).displayName,I=[{chapter:n.Chapter.SOURCE_1,variant:n.Variant.DEFAULT},{chapter:n.Chapter.SOURCE_1,variant:n.Variant.TYPED},{chapter:n.Chapter.SOURCE_1,variant:n.Variant.WASM},{chapter:n.Chapter.SOURCE_1,variant:n.Variant.NATIVE},{chapter:n.Chapter.SOURCE_2,variant:n.Variant.DEFAULT},{chapter:n.Chapter.SOURCE_2,variant:n.Variant.TYPED},{chapter:n.Chapter.SOURCE_2,variant:n.Variant.NATIVE},{chapter:n.Chapter.SOURCE_3,variant:n.Variant.DEFAULT},{chapter:n.Chapter.SOURCE_3,variant:n.Variant.TYPED},{chapter:n.Chapter.SOURCE_3,variant:n.Variant.NATIVE},{chapter:n.Chapter.SOURCE_4,variant:n.Variant.DEFAULT},{chapter:n.Chapter.SOURCE_4,variant:n.Variant.TYPED},{chapter:n.Chapter.SOURCE_4,variant:n.Variant.NATIVE},{chapter:n.Chapter.SOURCE_4,variant:n.Variant.EXPLICIT_CONTROL}].map(e=>{let{chapter:t,variant:a}=e,s={};return s.dataVisualizer=t>=n.Chapter.SOURCE_2,s.substVisualizer=t<=n.Chapter.SOURCE_2&&(a===n.Variant.DEFAULT||a===n.Variant.NATIVE||a===n.Variant.TYPED),s.cseMachine=t>=n.Chapter.SOURCE_3,s.multiFile=t>=n.Chapter.SOURCE_2,s.repl=!0,{...e,displayName:`Source \xa7${t} ${g.get(a)??""}`.trim(),mainLanguage:"JavaScript",supports:s}}),E=e=>[n.Chapter.SOURCE_1,n.Chapter.SOURCE_2,n.Chapter.SOURCE_3,n.Chapter.SOURCE_4].includes(e),_=[...I,y,f,b,...x,...T,...w,...S],j=(e,t=n.Variant.DEFAULT)=>{let a=_.find(a=>a.chapter===e&&a.variant===t);if(!a)throw Error(`Language config not found for chapter ${e} variant ${t}`);return a},k=null,N={gradingSummary:{cols:[],rows:[]}},P={achievements:[],goals:[],users:[],assessmentOverviews:[]},R={paginatedUserXp:{rows:[],userCount:0},contestScore:[],contestPopularVote:[],code:"",contests:[],initialRun:{}},L={githubSaveInfo:{repoName:"",filePath:""},languageConfig:(()=>{let e=_.find(e=>e.chapter===d.A.defaultSourceChapter&&e.variant===d.A.defaultSourceVariant);if(!e)throw Error("Cannot find language config to match default chapter and variant");return e})()},M="// Type your program in here!",D=e=>({autogradingResults:[],context:(0,c.q6)(d.A.defaultSourceChapter,[],e,d.A.defaultSourceVariant),isFolderModeEnabled:!1,activeEditorTabIndex:0,editorTabs:[{filePath:["playground","sicp"].includes(e)?O(e):void 0,value:["playground","sourcecast"].includes(e)?M:"",highlightedLines:[],breakpoints:[]}],programPrependValue:"",programPostpendValue:"",editorSessionId:"",sessionDetails:null,isEditorReadonly:!1,editorTestcases:[],externalLibrary:u.O.NONE,execTime:1e3,output:[],replHistory:{browseIndex:null,records:[],originalValue:""},replValue:"",hasTokenCounter:!1,tokenCount:0,customNotification:"",sharedbConnected:!1,stepLimit:1e3,globals:[],isEditorAutorun:!1,isRunning:!1,isDebugging:!1,enableDebugging:!0,debuggerContext:{},lastDebuggerResult:void 0,files:{},updateUserRoleCallback:()=>{}}),O=e=>`${o.V[e]}/program.js`,U={assessment:{...D("assessment"),currentAssessment:void 0,currentQuestion:void 0,hasUnsavedChanges:!1},grading:{...D("grading"),submissionsTableFilters:{columnFilters:[]},currentSubmission:void 0,currentQuestion:void 0,hasUnsavedChanges:!1,columnVisiblity:[],requestCounter:0,allColsSortStates:{currentState:r.IP,sortBy:""},hasLoadedBefore:!1},playground:{...D("playground"),usingSubst:!1,usingCse:!1,updateCse:!0,usingUpload:!1,currentStep:-1,stepsTotal:0,breakpointSteps:[],changepointSteps:[],activeEditorTabIndex:0,editorTabs:[{filePath:O("playground"),value:M,highlightedLines:[],breakpoints:[]}]},sourcecast:{...D("sourcecast"),audioUrl:"",codeDeltasToApply:null,currentPlayerTime:0,description:null,inputToApply:null,playbackData:{init:{editorValue:"",chapter:n.Chapter.SOURCE_1,externalLibrary:u.O.NONE},inputs:[]},playbackDuration:0,playbackStatus:"paused",sourcecastIndex:null,title:null,uid:null},sourcereel:{...D("sourcereel"),playbackData:{init:{editorValue:"",chapter:n.Chapter.SOURCE_1,externalLibrary:u.O.NONE},inputs:[]},recordingStatus:"notStarted",timeElapsedBeforePause:0,timeResumed:0},sicp:{...D("sicp"),usingSubst:!1,usingCse:!1,updateCse:!0,usingUpload:!1,currentStep:-1,stepsTotal:0,breakpointSteps:[],changepointSteps:[],activeEditorTabIndex:0,editorTabs:[{filePath:O("sicp"),value:M,highlightedLines:[],breakpoints:[]}]},stories:{...D("stories")}},F={courses:[],group:null,gameState:{completed_quests:[],collectibles:{}},xp:0,story:{story:"",playStory:!1},assessments:{},assessmentOverviews:void 0,agreedToResearch:void 0,sessionId:Date.now(),githubOctokitObject:{octokit:void 0},gradingOverviews:void 0,students:void 0,teamFormationOverviews:void 0,gradings:{},notifications:[]},G={storyList:[],currentStoryId:null,currentStory:null,envs:{},storiesUsers:[]},z=(e,t,a)=>({context:(0,c.q6)(t,[],e,a),execTime:1e3,isRunning:!1,output:[],stepLimit:1e3,globals:[],usingSubst:!1,debuggerContext:{}}),H={inBrowserFileSystem:null},B={dynamicTabs:[],alerts:[]},V={assessment:B,grading:B,playground:B,sicp:B,sourcecast:B,sourcereel:B,stories:{}},J={isVscode:!1},W={selectedLanguageId:null,selectedEvaluatorId:null,languages:[],languageMap:{}},Y={plugins:[],pluginMap:{}},X={router:k,achievement:P,leaderboard:R,dashboard:N,playground:L,session:F,stories:G,workspaces:U,featureFlags:l.b0,fileSystem:H,sideContent:V,vscode:J,languageDirectory:W,pluginDirectory:Y}},97609(e,t,a){"use strict";a.d(t,{Ay:()=>r,C9:()=>n,je:()=>i});let s=(0,a(58683).Ej)("commons",{logOut:()=>({}),updateReactRouter:e=>e}),{logOut:i,updateReactRouter:n}=s,r=s},20857(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("interpreter",{handleConsoleLog:(e,...t)=>({logString:t,workspaceLocation:e}),evalInterpreterSuccess:(e,t)=>({type:"result",value:e,workspaceLocation:t}),evalTestcaseSuccess:(e,t,a)=>({type:"result",value:e,workspaceLocation:t,index:a}),evalTestcaseFailure:(e,t,a)=>({type:"errors",value:e,workspaceLocation:t,index:a}),evalInterpreterError:(e,t)=>({type:"errors",errors:e,workspaceLocation:t}),beginInterruptExecution:e=>({workspaceLocation:e}),endInterruptExecution:e=>({workspaceLocation:e}),beginDebuggerPause:e=>({workspaceLocation:e}),endDebuggerPause:e=>({workspaceLocation:e}),debuggerResume:e=>({workspaceLocation:e}),debuggerReset:e=>({workspaceLocation:e})})},46807(e,t,a){"use strict";a.d(t,{A:()=>o});var s=a(58683),i=a(55930),n=a(76099),r=a(5775);let o=(0,s.Ej)("session",{fetchAuth:(e,t)=>({code:e,providerId:t}),handleSamlRedirect:e=>({jwtCookie:e}),fetchUserAndCourse:()=>({}),fetchCourseConfig:()=>({}),fetchAssessment:(e,t)=>({assessmentId:e,assessmentPassword:t}),fetchAssessmentAdmin:(e,t)=>({assessmentId:e,courseRegId:t}),fetchAssessmentOverviews:()=>({}),fetchTotalXp:()=>({}),fetchTotalXpAdmin:e=>e,fetchGrading:e=>e,fetchGradingOverviews:(e=!0,t=(0,i.lu)(!1),a=(0,i.MY)(0,10),s={},r={currentState:n.IP,sortBy:""})=>({filterToGroup:e,publishedFilter:t,pageParams:a,filterParams:s,allColsSortStates:r}),fetchTeamFormationOverviews:(e=!0)=>e,fetchStudents:()=>({}),login:e=>e,logoutGoogle:()=>({}),loginGitHub:()=>({}),logoutGitHub:()=>({}),setTokens:({accessToken:e,refreshToken:t})=>({accessToken:e,refreshToken:t}),setUser:e=>e,setCourseConfiguration:e=>e,setCourseRegistration:e=>e,setAssessmentConfigurations:e=>e,setAdminPanelCourseRegistrations:e=>e,setGoogleUser:e=>e,setGitHubOctokitObject:e=>(0,r.g)(e||""),setGitHubAccessToken:e=>e,removeGitHubOctokitObjectAndAccessToken:()=>({}),submitAnswer:(e,t)=>({id:e,answer:t}),checkAnswerLastModifiedAt:(e,t,a)=>({id:e,lastModifiedAt:t,saveAnswer:a}),submitAssessment:e=>e,submitGrading:(e,t,a=0,s)=>({submissionId:e,questionId:t,xpAdjustment:a,comments:s}),submitGradingAndContinue:(e,t,a=0,s)=>({submissionId:e,questionId:t,xpAdjustment:a,comments:s}),reautogradeSubmission:e=>e,reautogradeAnswer:(e,t)=>({submissionId:e,questionId:t}),updateAssessmentOverviews:e=>e,updateTotalXp:e=>e,updateAssessment:e=>e,updateGradingOverviews:e=>e,fetchTeamFormationOverview:e=>({assessmentId:e}),createTeam:(e,t)=>({assessment:e,teams:t}),updateTeam:(e,t,a)=>({teamId:e,assessment:t,teams:a}),deleteTeam:e=>({teamId:e}),bulkUploadTeam:(e,t,a)=>({assessment:e,file:t,students:a}),updateTeamFormationOverviews:e=>e,updateTeamFormationOverview:e=>e,updateStudents:e=>e,updateGrading:(e,t)=>({submissionId:e,grading:t}),unsubmitSubmission:e=>({submissionId:e}),publishGrading:e=>({submissionId:e}),unpublishGrading:e=>({submissionId:e}),fetchNotifications:()=>({}),acknowledgeNotifications:e=>({withFilter:e}),updateNotifications:e=>e,updateLatestViewedCourse:e=>({courseId:e}),updateCourseConfig:e=>e,fetchAssessmentConfigs:()=>({}),updateAssessmentConfigs:e=>e,deleteAssessmentConfig:e=>e,fetchAdminPanelCourseRegistrations:()=>({}),updateUserRole:(e,t)=>({courseRegId:e,role:t}),deleteUserCourseRegistration:e=>({courseRegId:e}),updateCourseResearchAgreement:e=>({agreedToResearch:e}),updateStoriesUserRole:(e,t)=>({userId:e,role:t}),deleteStoriesUserUserGroups:e=>({userId:e})})},71251(e,t,a){"use strict";a.d(t,{A:()=>s});let s={...(0,a(58683).Ej)("vscode",{setVscode:0})}},75580(e,t,a){"use strict";a.d(t,{O:()=>i,r:()=>n});var s,i=((s={}).NONE="NONE",s.SOUNDS="SOUNDS",s.EV3="EV3",s);let n=new Map([["NONE",[]],["SOUNDS",[]]])},51085(e,t,a){"use strict";a.d(t,{Kh:()=>l,Ru:()=>i,S2:()=>r,VK:()=>d,bM:()=>o,yI:()=>n});var s=a(38786);let i=()=>({chapter:-1,external:{name:"NONE",symbols:[]},globals:[]}),n=()=>({type:"Missions",isManuallyGraded:!0,closeAt:"2100-12-01T00:00+08",coverImage:"https://fakeimg.pl/300/",id:-1,isPublished:!1,maxXp:0,earlySubmissionXp:0,openAt:"2000-01-01T00:00+08",title:"Insert title here",reading:"",shortSummary:"Insert short summary here",status:"not_attempted",story:"mission",isGradingPublished:!1,xp:0,maxTeamSize:1,hasVotingFeatures:!1,hoursBeforeEarlyXpDecay:0}),r=()=>({autogradingResults:[],answer:"// [Marking Scheme]\n// 1 mark for correct answer",lastModifiedAt:"2023-08-05T17:48:24.000000Z",content:"Enter content here",id:0,library:i(),graderLibrary:i(),prepend:"",solutionTemplate:"//This is a mock solution template",postpend:"",testcases:[],testcasesPrivate:[],type:"programming",xp:0,maxXp:0,blocking:!1}),o=()=>({type:"public",answer:"",score:0,program:""}),l=()=>({answer:3,content:"This is a mock MCQ question",choices:[{content:"A",hint:null},{content:"B",hint:null},{content:"C",hint:null},{content:"D",hint:null}],id:2,library:i(),graderLibrary:i(),type:"mcq",solution:0,xp:0,maxXp:0,blocking:!1}),d=()=>({type:"Missions",globalDeployment:{chapter:s.Chapter.SOURCE_1,external:{name:"NONE",symbols:[]},globals:[]},graderDeployment:i(),id:-1,longSummary:"Insert mission briefing here",missionPDF:"www.google.com",questions:[r()],title:"Insert title here"})},14873(e,t,a){"use strict";a.d(t,{$Z:()=>n,Ay:()=>l,LG:()=>i,PU:()=>r,UW:()=>o});let s=(0,a(58683).Ej)("collabEditing",{setEditorSessionId:(e,t)=>({workspaceLocation:e,editorSessionId:t}),setSessionDetails:(e,t)=>({workspaceLocation:e,sessionDetails:t}),setSharedbConnected:(e,t)=>({workspaceLocation:e,connected:t}),setUpdateUserRoleCallback:(e,t)=>({workspaceLocation:e,updateUserRoleCallback:t})}),{setEditorSessionId:i,setSessionDetails:n,setSharedbConnected:r,setUpdateUserRoleCallback:o}=s,l=s},61488(e,t,a){"use strict";a.d(t,{GP:()=>n,Iu:()=>d,lX:()=>l,mU:()=>o,tT:()=>r});var s=a(91948);let i=Object.freeze({"http:":"ws:","https:":"wss:"});function n(e,t){let a=new URL(e,s.A.sharedbBackendUrl);return t&&Object.keys(i).includes(a.protocol)&&(a.protocol=i[a.protocol]),a.toString()}function r(e){let t=window.location.href;return window.location.href.endsWith("/playground")&&(t+=`/${e}`),t}async function o(e){let t=await fetch(n(e));return t&&t.ok?t.json():null}async function l(e){let t=await fetch(s.A.sharedbBackendUrl,{method:"POST",body:JSON.stringify({contents:e}),headers:{"Content-Type":"application/json"}});if(!t||!t.ok)throw Error(t?`Could not create new session: ${await t.text()}`:"Unknown error creating session");return t.json()}async function d(e,t){let a=await fetch(n(e),{method:"PATCH",body:JSON.stringify({defaultReadOnly:t}),headers:{"Content-Type":"application/json"}});if(!a||!a.ok)throw Error(a?`Could not update session: ${await a.text()}`:"Unknown error updating session");return a.json()}},471(e,t,a){"use strict";a.d(t,{w:()=>l});var s=a(74848),i=a(92473),n=a(54348),r=a(9584);a(96540);var o=a(29458);let l=e=>{let t=e.isEntrypointFileDefined?"...or press shift-enter in the editor":"Open a file to evaluate the program with the file as the entrypoint";return(0,s.jsx)(i.m,{content:t,placement:n.yX.TOP,children:(0,s.jsx)(o.A,{label:"Run",icon:r.W.PLAY,onClick:e.handleEditorEval,options:{iconColor:e.color,className:e.className},isDisabled:!e.isEntrypointFileDefined})})}},98396(e,t,a){"use strict";a.d(t,{H:()=>c});var s=a(57415),i=a(82430),n=a(75580);let r={};function o(e){return e.length<=27?e:e.substring(0,24)+"..."}function l(e){return e in s.SourceDocumentation.ext_lib?{caption:o(e),value:e,meta:s.SourceDocumentation.ext_lib[e].meta,docHTML:s.SourceDocumentation.ext_lib[e].description}:{caption:o(e),value:e,meta:"const"}}for(let[e,t]of n.r)r[e]=t.map(l);for(let e of i.I)r[e.deviceLibraryName]=e.internalFunctions.map(l);let d={};Object.entries(s.SourceDocumentation.builtins).forEach(e=>{let[t,a]=e;d[t]=Object.entries(a).map(e=>{let[t,a]=e;return{caption:o(t),value:t,meta:a.meta,docHTML:a.description}})});let c={builtins:d,externalLibraries:r}},13226(e,t,a){"use strict";function s(e){return t=>t.featureFlags.modifiedFlags[e.flagName]||e.defaultValue}a.d(t,{I:()=>s})},48857(e,t,a){"use strict";a.d(t,{Qj:()=>l,b0:()=>n,Lq:()=>d,xb:()=>o});var s=a(96755);class i{_flagName;_defaultValue;_flagDesc;_callback;get flagName(){return this._flagName}get defaultValue(){return this._defaultValue}get flagDesc(){return this._flagDesc}onChange(e){return this._callback?.(e)}constructor(e,t,a,s){this._flagName=e,this._defaultValue=t,this._flagDesc=a,this._callback=s}}let n={modifiedFlags:{}},r=(0,s.Z0)({name:"featureFlags",initialState:n,reducers:{setFlag(e,t){e.modifiedFlags[t.payload.featureFlag.flagName]=t.payload.value},resetFlag(e,t){delete e.modifiedFlags[t.payload.featureFlag.flagName]}}}),o=r.actions,l=r.reducer;function d(e,t,a,s){return new i(e,t,a,s)}},54317(e,t,a){"use strict";a.r(t),a.d(t,{setInBrowserFileSystem:()=>s});let s=(0,a(96755).VP)("SET_IN_BROWSER_FILE_SYSTEM",e=>({payload:{inBrowserFileSystem:e}}))},72442(e,t,a){"use strict";a.d(t,{Xz:()=>c,_B:()=>d,j2:()=>o,xe:()=>r});var s=a(43627),i=a.n(s),n=a(99475);let r=(e,t)=>{let a=e=>new Promise((a,s)=>{t.readFile(e,"utf-8",(t,i)=>{t?s(t):void 0!==i&&a({path:e,contents:i})})}),s=e=>new Promise((n,r)=>{t.readdir(e,(o,l)=>{if(o)return void r(o);if(void 0===l)return;let d=[];for(let n of l){let r=i().join(e,n);d.push(new Promise((e,i)=>{t.lstat(r,(t,n)=>{t?i(t):void 0!==n&&(n.isFile()?e(a(r)):n.isDirectory()&&e(s(r)))})}))}Promise.all(d).then(e=>{n(e.flat())})})});return s(n.V[e]).then(e=>e.reduce((e,t)=>(e[t.path]=t.contents,e),{}))},o=async(e,t,a)=>{for(let[s,i]of(await l(t,n.V[e]),Object.entries(a)))await c(t,s,i)},l=(e,t)=>new Promise((a,s)=>{e.readdir(t,async(n,r)=>{n?s(n):void 0===r||Promise.all(r.map(a=>{let s=i().join(t,a);return new Promise((t,a)=>{e.lstat(s,async(i,n)=>{i?a(i):void 0!==n&&(n.isFile()?await new Promise((t,a)=>{e.unlink(s,e=>{e?a(e):t(!0)})}):n.isDirectory()&&await d(e,s),t(n))})})})).then(()=>a()).catch(e=>s(e))})}),d=(e,t)=>new Promise((a,s)=>{l(e,t).then(()=>{e.rmdir(t,e=>{e?s(e):a()})}).catch(e=>s(e))}),c=(e,t,a)=>new Promise((s,n)=>{let r=t.split(i().sep).filter(e=>""!==e);for(let t=1;t<r.length;t++){let a="/"+i().join(...r.slice(0,t));new Promise((t,s)=>{e.exists(a,i=>{i?t():e.mkdir(a,777,e=>{e?s(e):t()})})}).catch(e=>n(e))}e.writeFile(t,a,e=>{e?n(e):s()})})},19549(e,t,a){"use strict";a.d(t,{A:()=>n});var s=a(74848);a(96540);let i={display:"flex"},n=({justifyContent:e,alignItems:t,flexDirection:a,children:n,style:r,className:o})=>{let l={...r,justifyContent:e,alignItems:t,flexDirection:a};return(0,s.jsx)("div",{className:o,style:{...i,...l},children:n})}},97505(e,t,a){"use strict";a.d(t,{A:()=>d});var s=a(74848),i=a(61517),n=a(53991),r=a(46942),o=a.n(r);a(96540);let l={width:"max-content",margin:"auto 0"},d=({children:e,style:t,isSecondaryText:a,className:r})=>(0,s.jsx)(i.E,{className:o()(n.UI_TEXT,r,a&&n.TEXT_MUTED),style:{...l,...t},children:e})},86576(e,t,a){"use strict";a.d(t,{A:()=>n});var s=a(74848),i=a(95438);a(96540);let n=({bindings:e,children:t,style:a})=>{let n=(0,i.vA)(e);return(0,s.jsx)("div",{tabIndex:-1,onKeyDown:n,style:a,children:t})}},58683(e,t,a){"use strict";a.d(t,{Ej:()=>o,zA:()=>l});var s=a(96755),i=a(9208),n=a(84100),r=a(281);function o(e,t){return Object.entries(t).reduce((t,[a,i])=>({...t,[a]:"function"==typeof i?(0,s.VP)(`${e}/${a}`,(...e)=>({payload:i(...e)})):(0,s.VP)(`${e}/${a}`)}),{})}function l(e){return function*(){for(let[t,a]of(0,r.WP)(e))if(void 0!==a){if("function"==typeof a){yield(0,i.jP)(t,(0,n.bt)(a));continue}a.takeEvery&&(yield(0,i.jP)(t,(0,n.bt)(a.takeEvery))),a.takeLeading&&(yield(0,i.IJ)(t,(0,n.bt)(a.takeLeading))),a.takeLatest&&(yield(0,i.p8)(t,(0,n.bt)(a.takeLatest)))}}}},15361(e,t,a){"use strict";a.d(t,{A:()=>x,k:()=>b});var s=a(74848),i=a(51851),n=a(35537),r=a(46942),o=a.n(r),l=a(57415),d=a(38786),c=a(64936),u=a(96540),h=a(53991),p=a(70470),m=a(65021),g=a(12149);let y=e=>{let{onFocus:t,onBlur:a}=e,i=u.useRef(null),n=u.useRef(null),{isDesktopBreakpoint:r}=(0,g.Qs)(),l=e.handleBrowseHistoryDown,d=e.handleBrowseHistoryUp;return u.useEffect(()=>{if(!i.current)return;let e=i.current.editor;t&&e.on("focus",()=>t(e)),a&&e.on("blur",a)}),u.useEffect(()=>{n.current&&!e.disableScrolling&&(n.current.clientWidth>=window.innerWidth-50||n.current.scrollIntoView())}),(0,m.wC)(e.sourceChapter,e.sourceVariant,e.externalLibrary),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.default,{className:"repl-react-ace react-ace",mode:(0,m.xU)(e.sourceChapter,e.sourceVariant,e.externalLibrary),theme:"source",height:"1px",width:"100%",value:e.replValue,onChange:e.handleReplValueChange,commands:[{name:"browseHistoryDown",bindKey:{win:"Down",mac:"Down"},exec:l},{name:"browseHistoryUp",bindKey:{win:"Up",mac:"Up"},exec:d},{name:"evaluate",bindKey:{win:"Shift-Enter",mac:"Shift-Enter"},exec:()=>{e.handleReplEval(),n.current&&!e.disableScrolling&&n.current.scrollIntoView()}}],minLines:1,maxLines:20,fontSize:17,highlightActiveLine:!1,showGutter:!1,showPrintMargin:!1,setOptions:{fontFamily:"'Inconsolata', 'Consolas', monospace"},ref:i}),(0,s.jsx)("div",{className:o()(h.BUTTON_GROUP,h.DARK),children:e.replButtons}),r&&(0,s.jsx)("div",{ref:n})]})},f=({output:{value:e,consoleLogs:t}})=>{let a=u.useMemo(()=>(0,c.stringify)(e),[e]);return 0===t.length?(0,s.jsx)(i.Z,{children:(0,s.jsx)(n.AC,{className:"result-output",children:a})}):(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(n.AC,{className:"log-output",children:t.join("\n")}),(0,s.jsx)(n.AC,{className:"result-output",children:a})]})},b=e=>{switch(e.output.type){case"code":return(0,s.jsx)(i.Z,{children:(0,s.jsx)(n.AC,{className:"code-output",children:e.output.value})});case"running":return(0,s.jsx)(i.Z,{children:(0,s.jsx)(n.AC,{className:"log-output",children:e.output.consoleLogs.join("\n")})});case"result":if(e.usingSubst&&e.output.value instanceof Array)return(0,s.jsx)(i.Z,{children:(0,s.jsx)(n.AC,{className:"log-output",children:"Check out the Stepper tab!"})});if(e.isHtml)return(0,s.jsx)(i.Z,{children:(0,s.jsx)(n.AC,{className:"log-output",children:"Check out the HTML Display tab!"})});return(0,s.jsx)(f,{output:e.output});case"errors":if(0===e.output.consoleLogs.length)return(0,s.jsx)(i.Z,{children:(0,s.jsx)(n.AC,{className:"error-output",children:(0,l.parseError)(e.output.errors)})});return(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(n.AC,{className:"log-output",children:e.output.consoleLogs.join("\n")}),(0,s.jsx)("br",{}),(0,s.jsx)(n.AC,{className:"error-output",children:(0,l.parseError)(e.output.errors)})]});case"notification":return(0,s.jsx)(i.Z,{className:"notification-output-container",children:(0,s.jsx)(n.AC,{className:"notification-output",children:"\uD83D\uDCA1 "+e.output.consoleLog})});default:return(0,s.jsx)(i.Z,{children:"''"})}},x=e=>{let t=e.output.map((t,a)=>(0,s.jsx)(b,{output:t,usingSubst:e.usingSubst??!1,isHtml:e.sourceChapter===d.Chapter.HTML},a));return(0,s.jsx)("div",{className:"Repl",style:{display:e.hidden?"none":void 0},children:(0,s.jsxs)("div",{className:"repl-output-parent",children:[t,!e.inputHidden&&(0,s.jsx)(i.Z,{className:o()("repl-input-parent","row"),children:(0,s.jsx)(y,{...e})})]})})}},31230(e,t,a){"use strict";a.d(t,{rm:()=>J,Cd:()=>ea,F1:()=>O,XS:()=>w,ld:()=>ey,xt:()=>ev,KZ:()=>W,Li:()=>ec,f3:()=>eE,ms:()=>ei,Mo:()=>b,rW:()=>er,nn:()=>y,h4:()=>ep,aM:()=>eh,iW:()=>X,Qh:()=>M,G3:()=>ef,kw:()=>m,Uc:()=>eN,pG:()=>K,p3:()=>ed,dh:()=>eL,KK:()=>f,uH:()=>eo,Q5:()=>_,wh:()=>es,To:()=>q,MC:()=>eR,pE:()=>eu,qh:()=>eg,wz:()=>g,RM:()=>eS,tf:()=>B,tR:()=>z,aG:()=>eb,CF:()=>S,YF:()=>eT,WC:()=>C,le:()=>h,$S:()=>Y,mt:()=>x,VZ:()=>en,pt:()=>ew,ul:()=>ek,BR:()=>R,Yl:()=>eM,EG:()=>eP,VO:()=>eI,IB:()=>v,rj:()=>H,eq:()=>Z,Bd:()=>P,JQ:()=>ee,Kk:()=>E,Tr:()=>el,Qi:()=>k,d8:()=>em,nm:()=>Q,BY:()=>F,xf:()=>eG,aL:()=>U,Lf:()=>p,qW:()=>j,V_:()=>G,HL:()=>D,NJ:()=>L,Gc:()=>et,ar:()=>eC,Yq:()=>ex,$B:()=>ej,Dc:()=>N,UW:()=>V,$_:()=>A,YR:()=>I,gQ:()=>eO,DX:()=>T,mw:()=>eA,Gu:()=>e_});var s=a(9208),i=a(55930),n=a(21681),r=a(65334);let o=e=>({uuid:e.uuid||"",text:e.text||"",achievementUuids:e.achievementUuids,meta:"Event"===e.meta.type?{...e.meta,release:e.meta.release?new Date(e.meta.release):void 0,deadline:e.meta.deadline?new Date(e.meta.deadline):void 0,observeFrom:e.meta.observeFrom?new Date(e.meta.observeFrom):void 0,observeTo:e.meta.observeTo?new Date(e.meta.observeTo):void 0}:e.meta,count:e.count,targetCount:e.targetCount,completed:e.count>=e.targetCount});a(51085);var l=a(91948),d=a(37852),c=a(36896);let u=a(67063),h=async()=>await (0,c.Em)("","GET",{},l.A.backendUrl),p=async(e,t,a,s)=>{let i=await (0,c.Em)("auth/login","POST",{body:{code:e,provider:t,...a?{client_id:a}:{},...s?{redirect_uri:s}:{}},errorMessage:"Could not login. Please contact the module administrator.",withCredentials:!0});if(!i)return null;let n=await i.json();return{accessToken:n.access_token,refreshToken:n.refresh_token}},m=async e=>{let t=await (0,c.Em)("auth/refresh","POST",{body:{refresh_token:e}});if(!t)return null;let a=await t.json();return{accessToken:a.access_token,refreshToken:a.refresh_token}},g=async e=>{let t=await (0,c.Em)("user","GET",{...e});return t&&t.ok?await t.json():{user:null,courseRegistration:null,courseConfiguration:null,assessmentConfigurations:null}},y=async e=>{let t=await (0,c.Em)("user/latest_viewed_course","GET",{...e});return t&&t.ok?await t.json():{courseRegistration:null,courseConfiguration:null,assessmentConfigurations:null}},f=async(e,t)=>await (0,c.Em)("user/latest_viewed_course","PUT",{...e,body:{courseId:t},noHeaderAccept:!0}),b=async(e,t)=>await (0,c.Em)(`${eF()}/user/research_agreement`,"PUT",{...e,body:{agreedToResearch:t},noHeaderAccept:!0}),x=async(e,t)=>await (0,c.Em)("config/create","POST",{...e,body:{...t},noHeaderAccept:!0}),v=async e=>{let t=await (0,c.Em)(`${eF()}/config`,"GET",{...e});return t&&t.ok?t.json():null},A=async e=>{let t=await (0,c.Em)(`${eF()}/achievements`,"GET",{...e});return t&&t.ok?(await t.json()).map(e=>({uuid:e.uuid||"",title:e.title||"",xp:e.xp,isVariableXp:e.isVariableXp,deadline:null===e.deadline?void 0:new Date(e.deadline),release:null===e.release?void 0:new Date(e.release),isTask:e.isTask,position:e.position,prerequisiteUuids:e.prerequisiteUuids,goalUuids:e.goalUuids,cardBackground:e.cardBackground||"",view:{coverImage:e.view.coverImage||"",completionText:e.view.completionText||"",description:e.view.description||""}})):null},T=async(e,t)=>{let a=await (0,c.Em)(`${eF()}/admin/users/${t}/goals`,"GET",{...e});return a&&a.ok?(await a.json()).map(e=>o(e)):null},w=async e=>{let t=await (0,c.Em)(`${eF()}/self/goals`,"GET",{...e});return t&&t.ok?(await t.json()).map(e=>o(e)):null},S=async e=>{let t=await (0,c.Em)(`${eF()}/admin/users`,"GET",{...e});return t&&t.ok?(await t.json()).map(e=>({name:e.name,courseRegId:e.courseRegId,group:e.group,username:e.username})):null};async function C(e,t){return await (0,c.Em)(`${eF()}/admin/achievements`,"PUT",{accessToken:t.accessToken,body:{achievements:e.map(e=>({...e,deadline:e.deadline?e.deadline:null,release:e.release?e.release:null}))},noHeaderAccept:!0,refreshToken:t.refreshToken})}async function I(e,t){return await (0,c.Em)(`${eF()}/admin/goals`,"PUT",{accessToken:t.accessToken,body:{goals:e.map(e=>({targetCount:e.meta.type===r.IW.ASSESSMENT?1:e.meta.targetCount,meta:e.meta,text:e.text,type:e.meta.type,uuid:e.uuid}))},noHeaderAccept:!0,refreshToken:t.refreshToken})}let E=async(e,t)=>await (0,c.Em)(`${eF()}/self/goals/${e.uuid}/progress`,"POST",{...t,body:{progress:e},noHeaderAccept:!0}),_=async(e,t,a)=>await (0,c.Em)(`${eF()}/admin/users/${e}/goals/${t.uuid}/progress`,"POST",{...a,body:{progress:t},noHeaderAccept:!0}),j=async(e,t)=>await (0,c.Em)(`${eF()}/admin/achievements/${e}`,"DELETE",{...t,body:{uuid:e},noHeaderAccept:!0}),k=async(e,t)=>await (0,c.Em)(`${eF()}/admin/goals/${e}`,"DELETE",{...t,body:{uuid:e},noHeaderAccept:!0}),N=async e=>{let t=await (0,c.Em)(`${eF()}/assessments`,"GET",{...e});return t&&t.ok?(await t.json()).map(e=>(delete e.gradedCount,delete e.questionCount,e)):null},P=async(e,t)=>{let a;return(a=void 0!==t?await (0,c.Em)(`${eF()}/admin/users/${t}/total_xp`,"GET",{...e}):await (0,c.Em)(`${eF()}/user/total_xp`,"GET",{...e}))&&a.ok?await a.json():null},R=async e=>{let t=await (0,c.Em)(`${eF()}/leaderboards/xp_all`,"GET",{...e});return t&&t.ok?(await t.json()).users.map(e=>({rank:e.rank,name:e.name,username:e.username,xp:e.total_xp,avatar:"",achievements:""})):null},L=async(e,t,a)=>{let s=new URLSearchParams({offset:`${(e-1)*t}`,page_size:`${t}`}),i=await (0,c.Em)(`${eF()}/leaderboards/xp?${s.toString()}`,"GET",{...a});if(!i||!i.ok)return null;let n=await i.json();return{rows:n.users.map(e=>({rank:e.rank,name:e.name,username:e.username,xp:e.total_xp,avatar:"",achievements:""})),userCount:n.total_count}},M=async(e,t,a)=>{let s=new URLSearchParams({count:`${t}`}),i=await (0,c.Em)(`${eF()}/assessments/${e}/contest_score_leaderboard?${s.toString()}`,"GET",{...a});if(!i||!i.ok)return null;let n=await i.json();return n.leaderboard.map(e=>({rank:e.rank,name:e.student_name,username:e.student_username,score:e.final_score,avatar:"",code:e.answer,submissionId:e.submission_id,votingId:n.voting_id}))},D=async(e,t,a)=>{let s=new URLSearchParams({count:`${t}`}),i=await (0,c.Em)(`${eF()}/assessments/${e}/contest_popular_leaderboard?${s.toString()}`,"GET",{...a});if(!i||!i.ok)return null;let n=await i.json();return n.leaderboard.map(e=>({rank:e.rank,name:e.student_name,username:e.student_username,score:e.final_score,avatar:"",code:e.answer,submissionId:e.submission_id,votingId:n.voting_id}))},O=async e=>{let t=await (0,c.Em)(`${eF()}/all_contests`,"GET",{...e});return t&&t.ok?await t.json():null},U=async(e,t)=>{let a=await (0,c.Em)(`${eF()}/admin/users/${e}/assessments`,"GET",{...t});return a&&a.ok?(await a.json()).map(e=>(delete e.gradedCount,delete e.questionCount,e)):null},F=async(e,t,a,s)=>{let i;if(!(i=void 0!==a?await (0,c.Em)(`${eF()}/admin/users/${a}/assessments/${e}`,"GET",{...t}):void 0===s?await (0,c.Em)(`${eF()}/assessments/${e}`,"GET",{...t}):await (0,c.Em)(`${eF()}/assessments/${e}/unlock`,"POST",{...t,body:{password:s},errorMessage:"Incorrect password"}))||!i.ok)return window.history.back(),null;let n=await i.json();return n.questions=n.questions.map(e=>{if("programming"===e.type){let t=e;t.autogradingResults=t.autogradingResults||[],t.prepend=t.prepend||"",t.postpend=t.postpend||"",t.testcases=t.testcases||[],e=t}if("voting"===e.type){let t=e;t.prepend=t.prepend||"",t.postpend=t.postpend||""}return null===e.grader&&(delete e.grader,delete e.gradedAt),e.library.external.name=e.library.external.name.toUpperCase(),e.library.globals=Object.entries(e.library.globals).map(e=>{try{e[1]=window.eval(e[1])}catch(e){}return e}),e}),n},G=async(e,t,a)=>await (0,c.Em)(`${eF()}/assessments/question/${e}/answer`,"POST",{...a,body:"object"==typeof t?{answer:t}:{answer:`${t}`},noHeaderAccept:!0}),z=async(e,t,a)=>{let s=await (0,c.Em)(`${eF()}/assessments/question/${e}/answerLastModified`,"POST",{...a,body:{lastModifiedAt:t},noHeaderAccept:!0});return s?(await s.json()).lastModified:null},H=async(e,t)=>await (0,c.Em)(`${eF()}/assessments/${e}/submit`,"POST",{...t,noHeaderAccept:!0}),B=async(e,t,a,s,i,n)=>{let r=new URLSearchParams({...s,...i,...a,...n});r.append("group",`${t}`);let o=await (0,c.Em)(`${eF()}/admin/grading?${r.toString()}`,"GET",{...e});return o?eU(await o.json()):null},V=async e=>{let t=await (0,c.Em)(`${eF()}/admin/grading/all_submissions`,"GET",{...e});return t?eU(await t.json()):null},J=async e=>{let t=await (0,c.Em)(`${eF()}/admin/teams`,"GET",{...e});return t?(await t.json()).map(e=>({teamId:e.teamId,assessmentId:e.assessmentId,assessmentName:e.assessmentName,assessmentType:e.assessmentType,studentIds:e.studentIds,studentNames:e.studentNames})).sort((e,t)=>t.assessmentId-e.assessmentId):null},W=async(e,t)=>{let a=await (0,c.Em)(`${eF()}/team/${e}`,"GET",{...t});if(!a)return null;let s=await a.json();return{teamId:s.teamId,assessmentId:s.assessmentId,assessmentName:s.assessmentName,assessmentType:s.assessmentType,studentIds:s.studentIds,studentNames:s.studentNames}},Y=async(e,t,a)=>{let s={team:{assessment_id:e,student_ids:t.map(e=>e.map(e=>e?.value))}};return await (0,c.Em)(`${eF()}/admin/teams`,"POST",{body:s,...a})},X=async(e,t,a,s)=>{let i=[],n=await $(t),r=u.read(n,{type:"array"}),o=r.SheetNames[0],l=r.Sheets[o],d=u.utils.sheet_to_json(l,{header:1});for(let e=0;e<d.length;e++){let t=d[e],s=[];t.forEach(e=>{let t=a?.find(t=>t.username.trim()===e.trim());t&&s.push({label:t.name,value:t})}),i.push(s)}let h={team:{assessment_id:e,student_ids:i.map(e=>e.map(e=>e?.value))}};return await (0,c.Em)(`${eF()}/admin/teams`,"POST",{body:h,...s})},$=async e=>new Promise((t,a)=>{let s=new FileReader;s.onload=e=>{e.target?t(e.target.result):a(Error("Error reading file"))},s.onerror=e=>{a(Error("Error reading file"))},s.readAsArrayBuffer(e)}),Z=async(e,t,a,s)=>{let i={teamId:t,assessmentId:e,student_ids:a.map(e=>e.map(e=>e?.value))};return await (0,c.Em)(`${eF()}/admin/teams/${t}`,"PUT",{body:i,...s})},q=async(e,t)=>await (0,c.Em)(`${eF()}/admin/teams/${e}`,"DELETE",{body:{teamId:e},...t}),Q=async e=>{let t=await (0,c.Em)(`${eF()}/admin/users/teamformation`,"GET",{...e});return t&&t.ok?await t.json():null},K=async(e,t)=>{let a=await (0,c.Em)(`${eF()}/admin/grading/${e}`,"GET",{...t});if(!a)return null;let s=await a.json(),i=s.answers.map(e=>{let t,{id:a,student:s,question:i,grade:n,team:r}=e,o={id:a,question:{answer:i.answer,lastModifiedAt:i.lastModifiedAt,autogradingResults:i.autogradingResults||[],choices:i.choices,content:i.content,id:i.id,library:{chapter:(t=i.library).chapter,external:{name:t.external.name.toUpperCase(),symbols:t.external.symbols},execTimeMs:null==t.execTimeMs?void 0:t.execTimeMs,variant:null==t.variant?void 0:t.variant,globals:Object.entries(t.globals).map(e=>{try{e[1]=window.eval(e[1])}catch(e){}return e})},solution:e.solution||i.solution||null,solutionTemplate:i.solutionTemplate,prepend:i.prepend||"",postpend:i.postpend||"",testcases:i.testcases||[],type:i.type,maxXp:i.maxXp},student:s,team:r,grade:{xp:n.xp,xpAdjustment:n.xpAdjustment,comments:n.comments},ai_comments:e.ai_comments?.response?.split("|||")||[],prompts:e.prompts};return null!==e.grade.grader&&(o.grade.grader=e.grade.grader,o.grade.gradedAt=e.grade.gradedAt),o});return{enable_llm_grading:s.enable_llm_grading,answers:i,assessment:s.assessment}},ee=async(e,t,a,s,i)=>await (0,c.Em)(`${eF()}/admin/grading/${e}/${t}`,"POST",{...s,body:{grading:{xpAdjustment:a,comments:i}},noHeaderAccept:!0}),et=async(e,t)=>await (0,c.Em)(`${eF()}/admin/grading/${e}/autograde`,"POST",{...t,noHeaderAccept:!0}),ea=async(e,t,a)=>await (0,c.Em)(`${eF()}/admin/grading/${e}/${t}/autograde`,"POST",{...a,noHeaderAccept:!0}),es=async(e,t)=>await (0,c.Em)(`${eF()}/admin/grading/${e}/unsubmit`,"POST",{...t,noHeaderAccept:!0}),ei=async(e,t)=>await (0,c.Em)(`${eF()}/admin/grading/${e}/publish_grades`,"POST",{...t,noHeaderAccept:!0}),en=async(e,t)=>await (0,c.Em)(`${eF()}/admin/grading/${e}/publish_all_grades`,"POST",{...t,noHeaderAccept:!0}),er=async(e,t)=>await (0,c.Em)(`${eF()}/admin/grading/${e}/unpublish_grades`,"POST",{...t,noHeaderAccept:!0}),eo=async(e,t)=>await (0,c.Em)(`${eF()}/admin/grading/${e}/unpublish_all_grades`,"POST",{...t,noHeaderAccept:!0}),el=async e=>{let t=await (0,c.Em)(`${eF()}/notifications`,"GET",{...e}),a=[];return t&&t.ok?a=(await t.json()).map(e=>({id:e.id,type:e.type,assessment_id:e.assessment_id||void 0,assessment_type:e.assessment?e.assessment.type:void 0,assessment_title:e.assessment?e.assessment.title:void 0,submission_id:e.submission_id||void 0})):a},ed=async(e,t)=>await (0,c.Em)(`${eF()}/notifications/acknowledge`,"POST",{...e,body:{notificationIds:t}}),ec=async e=>{let t=await (0,c.Em)(`${eF()}/sourcecast`,"GET",{...e});return t&&t.ok?await t.json():null},eu=async(e,t,a,s,i,n)=>{let r=new FormData,o=Date.now().toString()+".wav";return r.append("sourcecast[title]",e),r.append("sourcecast[description]",t),r.append("sourcecast[uid]",a),r.append("sourcecast[audio]",s,o),r.append("sourcecast[playbackData]",JSON.stringify(i)),await (0,c.Em)(`${eF()}/admin/sourcecast`,"POST",{...n,body:r,noContentType:!0,noHeaderAccept:!0})},eh=async(e,t)=>await (0,c.Em)(`${eF()}/admin/sourcecast/${e}`,"DELETE",{...t,noHeaderAccept:!0}),ep=async(e,t)=>await (0,c.Em)(`${eF()}/admin/assessments/${e}/contest_calculate_score`,"POST",{...t}),em=async(e,t)=>await (0,c.Em)(`${eF()}/admin/assessments/${e}/contest_dispatch_xp`,"POST",{...t}),eg=async(e,t,a)=>{let s=new URLSearchParams({count:`${t}`}),i=await (0,c.Em)(`${eF()}/assessments/${e}/contest_score_leaderboard?${s.toString()}`,"GET",{...a});return i&&i.ok?(await i.json()).leaderboard.map(e=>({rank:e.rank,student_name:e.student_name,final_score:e.final_score,answer:e.answer,submission_id:e.submission_id})):null},ey=async(e,t,a)=>{let s=new URLSearchParams({count:`${t}`}),i=await (0,c.Em)(`${eF()}/assessments/${e}/contest_popular_leaderboard?${s.toString()}`,"GET",{...a});return i&&i.ok?(await i.json()).leaderboard.map(e=>({rank:e.rank,student_name:e.student_name,final_score:e.final_score,answer:e.answer,submission_id:e.submission_id})):null},ef=async(e,t,a)=>await (0,c.Em)(`${eF()}/admin/assessments/${e}`,"POST",{...a,body:t,noHeaderAccept:!0}),eb=async(e,t)=>await (0,c.Em)(`${eF()}/admin/assessments/${e}`,"DELETE",{...t,noHeaderAccept:!0}),ex=async(e,t,a,s)=>{let i=new FormData;return i.append("assessment[file]",e),i.append("forceUpdate",String(a)),i.append("assessmentConfigId",String(s)),await (0,c.Em)(`${eF()}/admin/assessments`,"POST",{...t,body:i,noContentType:!0,noHeaderAccept:!0})},ev=async e=>{let t=await (0,c.Em)(`${eF()}/admin/grading/summary`,"GET",{...e});return t&&t.ok?await t.json():null},eA=async(e,t)=>await (0,c.Em)(`${eF()}/admin/config`,"PUT",{...e,body:t,noHeaderAccept:!0}),eT=async e=>{let t=await (0,c.Em)(`${eF()}/admin/config/assessment_configs`,"GET",{...e});return t&&t.ok?await t.json():null},ew=async(e,t,a)=>await (0,c.Em)(`${null!=a?`courses/${a}`:eF()}/admin/config/assessment_configs`,"PUT",{...e,body:{assessmentConfigs:t},noHeaderAccept:!0}),eS=async(e,t)=>await (0,c.Em)(`${eF()}/admin/config/assessment_config/${t.assessmentConfigId}`,"DELETE",{...e,noHeaderAccept:!0}),eC=async(e,t)=>{let a=await (0,c.Em)(`${eF()}/admin/generate-comments/${t}`,"POST",{...e});return a&&a.ok?await a.json():null},eI=async(e,t,a)=>await (0,c.Em)(`${eF()}/admin/save-final-comment/${t}`,"POST",{body:{comment:a},...e}),eE=async e=>{let t=await (0,c.Em)(`${eF()}/admin/users`,"GET",{...e});return t&&t.ok?await t.json():null},e_=async(e,t,a)=>await (0,c.Em)(`${eF()}/admin/users`,"PUT",{...e,body:{users:t,provider:a},noHeaderAccept:!0}),ej=async(e,t,a)=>await (0,c.Em)(`${eF()}/admin/users/${t}/role`,"PUT",{...e,body:{role:a},noHeaderAccept:!0}),ek=async(e,t)=>await (0,c.Em)(`${eF()}/admin/users/${t}`,"DELETE",{...e,noHeaderAccept:!0});async function eN(e){let t=await (0,c.Em)("devices","GET",{accessToken:e.accessToken,refreshToken:e.refreshToken});return t&&t.ok?t.json():null}async function eP(e,t){let a=await (0,c.Em)(`devices/${e.id}/ws_endpoint`,"GET",{accessToken:t.accessToken,refreshToken:t.refreshToken});return a&&a.ok?a.json():null}async function eR(e,t){t=eD(t);let a=await (0,c.Em)("devices","POST",{accessToken:t.accessToken,refreshToken:t.refreshToken,body:e});if(!a)throw Error("Unknown error occurred.");if(!a.ok){let e=await a.text();throw Error(`Failed to register: ${e}`)}return a.json()}async function eL(e,t){t=eD(t);let a=await (0,c.Em)(`devices/${e.id}`,"POST",{accessToken:t.accessToken,refreshToken:t.refreshToken,body:{title:e.title}});if(!a)throw Error("Unknown error occurred.");if(!a.ok){let e=await a.text();throw Error(`Failed to edit: ${e}`)}return!0}async function eM(e,t){t=eD(t);let a=await (0,c.Em)(`devices/${e.id}`,"DELETE",{accessToken:t.accessToken,refreshToken:t.refreshToken});if(!a)throw Error("Unknown error occurred.");if(!a.ok){let e=await a.text();throw Error(`Failed to delete: ${e}`)}return!0}function eD(e){if(!(e=e||function(){let{accessToken:e,refreshToken:t}=n.M.getState().session;return e&&t?{accessToken:e,refreshToken:t}:void 0}()))throw Error("Not logged in.");return e}function*eO(e){if(!e)return void(yield(0,s.T1)(d.JB,"Couldn't reach our servers. Are you online?"));let t=yield e.text();t.length>100&&e.status&&(t=`Something went wrong (got ${e.status} response)`),yield(0,s.T1)(d.JB,t)}let eU=e=>({count:e.count,data:e.data.map(e=>({assessmentId:e.assessment.id,assessmentNumber:e.assessment.assessmentNumber,assessmentName:e.assessment.title,assessmentType:e.assessment.type,studentId:e.student?e.student.id:-1,studentName:e.student?e.student.name:void 0,studentNames:e.team?e.team.team_members.map(e=>e.name):void 0,studentUsername:e.student?e.student.username:void 0,studentUsernames:e.team?e.team.team_members.map(e=>e.username):void 0,submissionId:e.id,submissionStatus:e.status,groupName:e.student?e.student.groupName:"-",groupLeaderId:e.student?e.student.groupLeaderId:void 0,isGradingPublished:e.isGradingPublished,progress:(0,i.x6)(e.assessment.isManuallyGraded,e.isGradingPublished,e.status,e.gradedCount,e.assessment.questionCount),questionCount:e.assessment.questionCount,gradedCount:e.gradedCount,initialXp:e.xp,xpAdjustment:e.xpAdjustment,currentXp:e.xp+e.xpAdjustment,maxXp:e.assessment.maxXp,xpBonus:e.xpBonus}))}),eF=()=>{let e=n.M.getState().session.courseId;if(e)return`courses/${e}`;throw(0,d.JB)("No course selected!",1e3),Error("No course selected")},eG=()=>{let e=n.M.getState().session.courseId;if(e)return`${e}`;throw(0,d.JB)("No course selected!",1e3),Error("No course selected")}},84100(e,t,a){"use strict";a.d(t,{BI:()=>d,Iu:()=>l,bt:()=>r,ok:()=>o});var s=a(64251),i=a(9208);function n(e){s.Cp(e),console.error(e)}function r(e){return function*(...t){try{return yield*e(...t)}catch(e){n(e)}}}function o(e,t,...a){return(0,i.jP)(e,function*(...e){try{let a=t(...e);a&&"function"==typeof a.next&&"function"==typeof a.throw&&(yield*a)}catch(e){n(e)}},...a)}function*l(e,t){let a=yield(0,i.Lt)(t=>t.workspaces[e]);return t?t(a):a}function*d(e){return yield(0,i.Lt)(t=>t.stories.envs[e])}},64860(e,t,a){"use strict";a.d(t,{A:()=>h});var s=a(74848),i=a(92473),n=a(28761),r=a(10720),o=a(51851),l=a(11903),d=a(281),c=a(75780),u=a(70735);let h=({renderActiveTabPanelOnly:e,editorWidth:t,...a})=>(0,s.jsx)(u.A,{...a,children:({tabs:u,alerts:h,changeTabsCallback:p,selectedTab:m,height:g})=>(0,s.jsx)("div",{className:"side-content",children:(0,s.jsx)(o.Z,{children:(0,s.jsx)("div",{className:"side-content-tabs",children:(0,s.jsx)(l.t,{id:"side-content-tabs",onChange:p,renderActiveTabPanelOnly:e,selectedTabId:m,children:u.map(e=>{let o=(0,c.vU)(e);return((e,t,a,o,l)=>{let u=(0,c.vU)(e),h=(0,s.jsx)(i.m,{content:e.label,children:(0,s.jsx)("div",{className:(0,c.HD)(t),children:(0,s.jsx)(n.I,{icon:e.iconName,size:20})})}),p=(0,d.j)()({id:u,title:h,disabled:e.disabled,className:"side-content-tab"});if(!e.body)return(0,s.jsx)(r.o,{...p},u);let m=a?{...e.body,props:{...e.body.props,workspaceLocation:a,editorWidth:o,sideContentHeight:l}}:e.body,g=(0,s.jsx)("div",{className:"side-content-text",children:m});return(0,s.jsx)(r.o,{...p,panel:g},u)})(e,h.includes(o),a.workspaceLocation,t,g)})})})})})})},6261(e,t,a){"use strict";a.d(t,{Ay:()=>u,Qb:()=>i,SS:()=>d,cF:()=>n,k1:()=>c,kz:()=>r,tn:()=>o,wH:()=>l});let s=(0,a(58683).Ej)("sideContent",{beginAlertSideContent:(e,t)=>({id:e,workspaceLocation:t}),endAlertSideContent:(e,t)=>({id:e,workspaceLocation:t}),visitSideContent:(e,t,a)=>({newId:e,prevId:t,workspaceLocation:a}),removeSideContentAlert:(e,t)=>({id:e,workspaceLocation:t}),spawnSideContent:(e,t)=>({workspaceLocation:e,debuggerContext:t}),resetSideContent:e=>({workspaceLocation:e}),changeSideContentHeight:(e,t)=>({height:e,workspaceLocation:t})}),{beginAlertSideContent:i,endAlertSideContent:n,visitSideContent:r,removeSideContentAlert:o,spawnSideContent:l,resetSideContent:d,changeSideContentHeight:c}=s,u=s},75780(e,t,a){"use strict";a.d(t,{G0:()=>x,HD:()=>T,UK:()=>v,g$:()=>S,k9:()=>w,vU:()=>A});var s=a(80700),i=a(65212),n=a(57415),r=a(2543),o=a.n(r),l=a(4440),d=a.n(l),c=a(96540),u=a(74848),h=a(70470),p=a(40961),m=a(94201),g=a(61499),y=a(12149),f=a(6261);let b=e=>{let t={react:c,"react/jsx-runtime":u,"react-ace":h.default,"react-dom":p,"@blueprintjs/core":s,"@blueprintjs/icons":i,"js-slang":n,"js-slang/dist":n,lodash:o(),phaser:d()};if(!(e in t))throw Error(`Dynamic require of ${e} is not supported`);return t[e]};function x(e){let t=e?.context?.moduleContexts;return t?Object.values(t).flatMap(({tabs:e})=>e??[]).map(e=>{let{default:t}=e(b);return t}).filter(({toSpawn:t})=>!t||t(e)).map(t=>({...t,body:t.body(e),id:"module"})):[]}let v=e=>`${e}-icon`,A=e=>void 0===e.id||"module"===e.id?e.label:e.id,T=e=>`side-content-tooltip${e?" side-content-tab-alert":""}`,w=(e,t)=>{let[a,s]=S(e),{alerts:i,dynamicTabs:n,selectedTab:r,height:o}=(0,y.N4)(e=>"stories"===a?e.sideContent.stories[s]??{...g.sQ}:e.sideContent[a]),l=(0,m.wA)(),d=(0,c.useCallback)(t=>{("subst_visualiser"!==r&&"cse_machine"!==r||"mobile_editor_run"!==t)&&l((0,f.kz)(t,r,e))},[l,e,r]);return{alerts:i,dynamicTabs:n,selectedTab:r??t,setSelectedTab:d,height:o}},S=e=>e.startsWith("stories")?e.split(".",2):[e]},70735(e,t,a){"use strict";a.d(t,{A:()=>n});var s=a(96540),i=a(75780);function n({tabs:e,defaultTab:t,children:a,onChange:n,selectedTab:r,workspaceLocation:o}){let{alerts:l,height:d,dynamicTabs:c,setSelectedTab:u,selectedTab:h}=(0,i.k9)(o,t);return a({tabs:e?[...e.beforeDynamicTabs,...c,...e.afterDynamicTabs]:c,alerts:l,changeTabsCallback:(0,s.useCallback)((e,t,a)=>{n?n(e,t,a):u(e)},[n,u]),selectedTab:r??h,height:d})}},95120(e,t,a){"use strict";a.d(t,{Ay:()=>M,HR:()=>R});var s=a(74848),i=a(53991),n=a(2353),r=a(7496),o=a(92473),l=a(79642),d=a(11678),c=a(5193),u=a(9584),h=a(82960),p=a(46942),m=a.n(p),g=a(72635),y=a(38786),f=a(2543),b=a(96540),x=a(40503),v=a(94201),A=a(86576),T=a(15361),w=a(53351),S=a(15),C=a(96702),I=a(63557),E=a(91948),_=a(35905),j=a(6261),k=a(75780);class N extends b.Component{constructor(e){super(e),this.state={visualization:null,value:-1,width:this.calculateWidth(e.editorWidth),height:this.calculateHeight(e.sideContentHeight),lastStep:!1,stepLimitExceeded:!1,chapter:e.chapter},this.isJava()?I.L.init(e=>this.setState({visualization:e}),t=>{e.setEditorHighlightedLines(0,t)}):w.A.init(e=>{this.setState({visualization:e},()=>S.G.playAnimation()),e&&this.props.handleAlertSideContent()},this.state.width,this.state.height,t=>{e.setEditorHighlightedLines(0,t)},e=>{let t=this.state.value===this.props.stepsTotal;this.setState({stepLimitExceeded:!e&&t})})}isJava(){return this.props.chapter===y.Chapter.FULL_JAVA}calculateWidth(e){return Math.min(void 0===e?window.innerWidth-50:Math.min(5e3,window.innerWidth*(100-parseFloat(e))/100-50),5e3)}calculateHeight(e){return Math.min(window.innerWidth<E.A.mobileBreakpoint||void 0===e?window.innerHeight-150:e-150,5e3)}handleResize=(0,f.debounce)(()=>{let e=this.calculateWidth(this.props.editorWidth),t=this.calculateHeight(this.props.sideContentHeight);(e!==this.state.width||t!==this.state.height)&&(this.setState({height:t,width:e}),w.A.updateDimensions(e,t))},300);componentDidMount(){this.handleResize(),window.addEventListener("resize",this.handleResize),w.A.redraw()}componentWillUnmount(){this.handleResize.cancel(),window.removeEventListener("resize",this.handleResize)}componentDidUpdate(e){(e.sideContentHeight!==this.props.sideContentHeight||e.editorWidth!==this.props.editorWidth)&&this.handleResize(),e.needCseUpdate&&!this.props.needCseUpdate&&(this.stepFirst(),this.isJava()?I.L.clearCse():w.A.clearCse())}render(){let e=this.state.visualization?[["a",this.stepFirst],["f",this.stepNext],["b",this.stepPrevious],["e",this.stepLast(this.props.stepsTotal)]]:[["a",()=>{}],["f",()=>{}],["b",()=>{}],["e",()=>{}]];return(0,s.jsxs)(A.A,{bindings:e,style:{maxHeight:"100%",overflow:this.state.visualization?"hidden":"auto"},children:[(0,s.jsxs)("div",{className:m()("sa-substituter",i.DARK),children:[(0,s.jsx)(n.A,{disabled:!this.state.visualization,min:0,max:this.props.stepsTotal,onChange:this.sliderShift,onRelease:this.sliderRelease,value:this.state.value<0?0:this.state.value}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:this.isJava()?"center":"space-between",alignItems:"center"},children:[!this.isJava()&&(0,s.jsxs)(r.e,{children:[(0,s.jsx)(o.m,{content:"Control and Stash",compact:!0,children:(0,s.jsx)(l.A,{onMouseUp:()=>{this.state.visualization&&(w.A.toggleControlStash(),w.A.redraw())},icon:"layers",disabled:!this.state.visualization,children:(0,s.jsx)(d.Sc,{checked:w.A.getControlStash(),disabled:!this.state.visualization,style:{margin:0}})})}),(0,s.jsx)(o.m,{content:"Truncate Control",compact:!0,children:(0,s.jsx)(l.A,{onMouseUp:()=>{this.state.visualization&&(w.A.toggleStackTruncated(),w.A.redraw())},icon:"minimize",disabled:!this.state.visualization,children:(0,s.jsx)(d.Sc,{checked:w.A.getStackTruncated(),disabled:!this.state.visualization,style:{margin:0}})})}),(0,s.jsx)(o.m,{content:"Alignment",compact:!0,children:(0,s.jsx)(l.A,{onMouseUp:()=>{this.state.visualization&&(w.A.toggleCenterAlignment(),w.A.redraw())},icon:"eye-open",disabled:!this.state.visualization,children:(0,s.jsx)(d.Sc,{checked:w.A.getCenterAlignment(),disabled:!this.state.visualization,style:{margin:0}})})})]}),(0,s.jsxs)(r.e,{children:[(0,s.jsx)(l.$,{disabled:!this.state.visualization,icon:"double-chevron-left",onClick:this.stepPrevBreakpoint}),(0,s.jsx)(l.$,{disabled:!this.state.visualization,icon:"chevron-left",onClick:this.isJava()||w.A.getControlStash()?this.stepPrevious:this.stepPrevChangepoint}),(0,s.jsx)(l.$,{disabled:!this.state.visualization,icon:"chevron-right",onClick:this.isJava()||w.A.getControlStash()?this.stepNext:this.stepNextChangepoint}),(0,s.jsx)(l.$,{disabled:!this.state.visualization,icon:"double-chevron-right",onClick:this.stepNextBreakpoint})]}),!this.isJava()&&(0,s.jsxs)(r.e,{children:[(0,s.jsx)(o.m,{content:"Print",compact:!0,children:(0,s.jsx)(l.A,{onMouseUp:()=>{this.state.visualization&&(w.A.togglePrintableMode(),w.A.redraw())},icon:"print",disabled:!this.state.visualization,children:(0,s.jsx)(d.Sc,{disabled:!this.state.visualization,checked:w.A.getPrintableMode(),style:{margin:0}})})}),(0,s.jsx)(o.m,{content:"Save",compact:!0,children:(0,s.jsx)(l.A,{icon:"floppy-disk",disabled:!this.state.visualization,onClick:C.P.exportImage})})]})]})]})," ",this.state.visualization&&this.props.machineOutput.length&&"errors"===this.props.machineOutput[0].type?this.props.machineOutput.map((e,t)=>(0,s.jsx)(T.k,{output:e,usingSubst:!1,isHtml:!1},t)):(0,s.jsx)("div",{}),this.state.visualization?this.state.stepLimitExceeded?(0,s.jsxs)("div",{id:"cse-machine-default-text",className:i.RUNNING_TEXT,"data-testid":"cse-machine-default-text",children:["Maximum number of steps exceeded.",(0,s.jsx)(c.c,{}),"Please increase the step limit if you would like to see futher evaluation."]}):this.state.visualization:(0,s.jsx)(L,{isJava:this.isJava()}),(0,s.jsxs)(r.e,{vertical:!0,style:{position:"absolute",bottom:"20px",right:"20px"},children:[(0,s.jsx)(l.$,{icon:"plus",disabled:!this.state.visualization,onClick:()=>this.zoomStage(!0,5),style:{marginBottom:"5px",borderRadius:"3px"}}),(0,s.jsx)(l.$,{icon:"minus",disabled:!this.state.visualization,onClick:()=>this.zoomStage(!1,5),style:{borderRadius:"3px"}})]})]})}zoomStage=(e,t)=>{this.isJava()?I.L.zoomStage(e,t):C.P.zoomStage(e,t)};sliderRelease=e=>{e===this.props.stepsTotal?this.setState({lastStep:!0}):this.setState({lastStep:!1}),this.props.handleEditorEval()};sliderShift=e=>{this.props.handleStepUpdate(e),this.setState(t=>({value:e}))};stepPrevious=()=>{0!==this.state.value&&(this.sliderShift(this.state.value-1),this.sliderRelease(this.state.value-1))};stepNext=()=>{let e=this.props.stepsTotal;this.state.value!==e&&(this.sliderShift(this.state.value+1),this.sliderRelease(this.state.value+1),S.G.enableAnimations())};stepFirst=()=>{this.sliderShift(0),this.sliderRelease(0)};stepLast=e=>()=>{this.sliderShift(e),this.sliderRelease(e)};stepNextBreakpoint=()=>{for(let e of this.props.breakpointSteps)if(e>this.state.value){this.sliderShift(e),this.sliderRelease(e);return}this.sliderShift(this.props.stepsTotal),this.sliderRelease(this.props.stepsTotal)};stepPrevBreakpoint=()=>{for(let e=this.props.breakpointSteps.length-1;e>=0;e--){let t=this.props.breakpointSteps[e];if(t<this.state.value){this.sliderShift(t),this.sliderRelease(t);return}}this.sliderShift(0),this.sliderRelease(0)};stepNextChangepoint=()=>{for(let e of this.props.changepointSteps)if(e>this.state.value){this.sliderShift(e),this.sliderRelease(e);return}this.sliderShift(this.props.stepsTotal),this.sliderRelease(this.props.stepsTotal)};stepPrevChangepoint=()=>{for(let e=this.props.changepointSteps.length-1;e>=0;e--){let t=this.props.changepointSteps[e];if(t<this.state.value){this.sliderShift(t),this.sliderRelease(t);return}}this.sliderShift(0),this.sliderRelease(0)}}let P=(0,v.Ng)((e,t)=>{let a,[s]=(0,k.g$)(t.workspaceLocation);return a="sicp"===s?e.workspaces.sicp:e.workspaces.playground,{...t,stepsTotal:a.stepsTotal,currentStep:a.currentStep,breakpointSteps:a.breakpointSteps,changepointSteps:a.changepointSteps,needCseUpdate:a.updateCse,machineOutput:a.output,chapter:a.context.chapter}},(e,t)=>(0,h.zH)({handleEditorEval:()=>_.A.evalEditor(t.workspaceLocation),handleStepUpdate:e=>_.A.updateCurrentStep(e,t.workspaceLocation),handleAlertSideContent:()=>(0,j.Qb)("cse_machine",t.workspaceLocation),setEditorHighlightedLines:(e,a)=>_.A.setEditorHighlightedLinesControl(t.workspaceLocation,e,a)},e))(N),R=({href:e,children:t})=>(0,s.jsx)("a",{href:e,rel:"noopener noreferrer",target:"_blank",children:(0,s.jsx)("i",{children:t})}),L=({isJava:e})=>{let{t}=(0,x.Bd)("sideContent",{keyPrefix:"cseMachine"});return(0,s.jsxs)("div",{id:"cse-machine-default-text",className:i.RUNNING_TEXT,"data-testid":"cse-machine-default-text",children:[e?(0,s.jsxs)("span",{children:[(0,s.jsx)(x.x6,{ns:"sideContent",i18nKey:"cseMachine.csecDescription",components:[(0,s.jsx)(R,{href:"https://sourceacademy.org/sicpjs/3.2"})]})," ",(0,s.jsx)(x.x6,{ns:"sideContent",i18nKey:"cseMachine.javaCsec",components:[(0,s.jsx)(R,{href:"https://docs.sourceacademy.org/java_csec/"})]})]}):(0,s.jsx)("span",{children:(0,s.jsx)(x.x6,{ns:"sideContent",i18nKey:"cseMachine.cseDescription",components:[(0,s.jsx)(R,{href:"https://sourceacademy.org/sicpjs/3.2"})]})}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),t("instructions"),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(c.c,{}),t("shortcutsTitle"),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),t("shortcuts.a"),(0,s.jsx)("br",{}),t("shortcuts.e"),(0,s.jsx)("br",{}),t("shortcuts.f"),(0,s.jsx)("br",{}),t("shortcuts.b"),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),t("shortcutsNote")]})},M=e=>({label:(0,g.t)("sideContent:cseMachine.label"),iconName:u.W.GLOBE,body:(0,s.jsx)(P,{workspaceLocation:e}),id:"cse_machine"})},20314(e,t,a){"use strict";a.d(t,{A:()=>T});var s=a(74848),i=a(53991),n=a(79642),r=a(51851),o=a(9584),l=a(82960),d=a(46942),c=a.n(d),u=a(72635),h=a(96540),p=a(40503),m=a(94201),g=a(86576),y=a(12681);a(91948);var f=a(6261),b=a(95120);class x extends h.Component{constructor(e){super(e),this.state={steps:[],currentStep:0},y.A.init(e=>{this.state.steps.length>0&&this.props.alertSideContent(),this.setState({steps:e,currentStep:0})})}render(){let e=this.state.steps[this.state.currentStep],t=()=>0===this.state.currentStep,a=()=>!this.state.steps||this.state.currentStep===this.state.steps.length-1,l=[["ArrowLeft",this.onPrevButtonClick],["ArrowRight",this.onNextButtonClick]];return(0,s.jsx)(g.A,{bindings:l,children:(0,s.jsxs)("div",{className:c()("sa-data-visualizer",i.DARK),children:[this.state.steps.length>1?(0,s.jsxs)("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:10},children:[(0,s.jsx)(n.$,{style:{position:"absolute",left:0},large:!0,outlined:!0,icon:o.W.ARROW_LEFT,onClick:this.onPrevButtonClick,disabled:t(),children:"Previous"}),(0,s.jsxs)("h3",{className:i.TEXT_LARGE,children:["Call ",this.state.currentStep+1,"/",this.state.steps.length]}),(0,s.jsx)(n.$,{style:{position:"absolute",right:0},large:!0,outlined:!0,icon:o.W.ARROW_RIGHT,onClick:this.onNextButtonClick,disabled:a(),children:"Next"})]}):null,this.state.steps.length>0?(0,s.jsx)("div",{style:{display:"flex",flexDirection:"row",overflowX:"auto"},children:e?.map((t,a)=>(0,s.jsxs)("div",{style:{margin:e.length>1?0:"0 auto"},children:[" ",(0,s.jsxs)(r.Z,{style:{background:"#1a2530",padding:10},children:[e.length>1&&(0,s.jsxs)("h5",{className:c()(i.HEADING,i.MONOSPACE_TEXT),style:{marginTop:0,marginBottom:20,whiteSpace:"nowrap"},children:["Structure ",a+1]}),t]})]},a))},e.length):(0,s.jsx)(A,{})]})})}onPrevButtonClick=()=>{this.setState(e=>({currentStep:Math.max(0,e.currentStep-1)}))};onNextButtonClick=()=>{let e=this.state.steps.length-1;this.setState(t=>({currentStep:Math.min(e,t.currentStep+1)}))}}let v=(0,m.Ng)(null,(e,t)=>(0,l.zH)({alertSideContent:()=>(0,f.Qb)("data_visualizer",t.workspaceLocation)},e))(x),A=()=>{let{t:e}=(0,p.Bd)("sideContent",{keyPrefix:"dataVisualizer"});return(0,s.jsxs)("p",{id:"data-visualizer-default-text",className:i.RUNNING_TEXT,children:[e("defaultText"),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(p.x6,{ns:"sideContent",i18nKey:"dataVisualizer.instructions",components:[(0,s.jsxs)("code",{children:["draw_data(x",(0,s.jsx)("sub",{children:"1"}),", x",(0,s.jsx)("sub",{children:"2"}),", ... x",(0,s.jsx)("sub",{children:"n"}),")"]}),(0,s.jsxs)("code",{children:["x",(0,s.jsx)("sub",{children:"k"})]}),(0,s.jsxs)("code",{children:["k",(0,s.jsx)("sup",{children:"th"})]}),(0,s.jsx)("code",{children:"n"})]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(p.x6,{ns:"sideContent",i18nKey:"dataVisualizer.reference",components:[(0,s.jsx)(b.HR,{href:"https://sourceacademy.org/sicpjs/2.2"})]})]})},T=e=>({label:(0,u.t)("sideContent:dataVisualizer.label"),iconName:o.W.EYE_OPEN,body:(0,s.jsx)(v,{workspaceLocation:e}),id:"data_visualizer"})},40391(e,t,a){"use strict";a.d(t,{A:()=>p});var s=a(74848),i=a(9584),n=a(82960),r=a(72635),o=a(96540),l=a(40503),d=a(94201),c=a(6261);let u=/^Line \d+: /i,h=(0,d.Ng)(null,(e,t)=>(0,n.zH)({alertSideContent:()=>(0,c.Qb)("html_display",t.workspaceLocation)},e))(e=>{let{t}=(0,l.Bd)("sideContent",{keyPrefix:"htmlDisplay"}),{content:a,handleAddHtmlConsoleError:i,alertSideContent:n}=e;return(0,o.useEffect)(()=>{let e=e=>{let t=e.data;"string"==typeof t&&t.match(u)&&i(t)};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),(0,o.useEffect)(()=>{n()},[]),(0,s.jsx)("iframe",{className:"sa-html-display",title:t("title"),sandbox:"allow-scripts",srcDoc:a,src:"about:blank"})}),p=(e,t,a)=>({label:(0,r.t)("sideContent:htmlDisplay.label"),iconName:i.W.MODAL,body:(0,s.jsx)(h,{workspaceLocation:a,content:e.value,handleAddHtmlConsoleError:t}),id:"html_display"})},65021(e,t,a){"use strict";a.d(t,{wC:()=>l,xU:()=>d,KN:()=>c});var s=a(24564),i=a(38786),n=a(80952),r=a(75580),o=a(98396);a(87826),a(29072),a(80569),a(1766),a(40975),a(93534),a(24854),a(50447);let l=(e,t,a)=>{"function"!=typeof ace.define.modules[`ace/mode/${d(e,t,a)}`]?.Mode&&(e!==i.Chapter.FULL_JS?(0,s.HighlightRulesSelector)(e,t,a,o.H.externalLibraries[a]):function(e,t=i.Variant.DEFAULT,a="NONE",s=[]){let r=e.toString()+t+a;n.define("ace/mode/source_highlight_rules"+r,["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(t,a,s){let n=t("../lib/oop"),r=t("./doc_comment_highlight_rules").DocCommentHighlightRules,o=t("./text_highlight_rules").TextHighlightRules,l="[a-zA-Z\\$_\xa1-][a-zA-Z\\d\\$_\xa1-]*";i.Variant.DEFAULT,e.toString();let d=function(e){let t=this.createKeywordMapper({"variable.language":"implements|interface|package|private|protected|public|static|window|document",keyword:"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|isFinite|isNaN|parseFloat|parseInt|Math|this|arguments|prototypeyield|get|set|async|await|enum|eval|true|false|null|Infinity|NaN|undefined|break|case|continue|default|delete|do|else|finally|for|if|in|of|instanceof|new|return|switch|throw|try|typeof|while|with|debugger|escape|with|extends|super|export","storage.type":"const|let|var|function|import|class|catch","support.function":"alert"},"identifier"),a="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[r.getStartRule("doc-start"),u("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+l+")(\\.)(prototype)(\\.)("+l+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+l+")(\\.)("+l+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+l+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+l+")(\\.)("+l+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+l+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+l+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"from(?=\\s*('|\"))"},{token:"keyword",regex:"(?:case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void)\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:t,regex:l},{token:"variable.language",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+l+")(\\.)("+l+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"variable.language",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"variable.language.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:l},{regex:"",token:"empty",next:"no_regex"}],start:[r.getStartRule("doc-start"),u("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:l},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:a},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:a},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},e&&e.noES6||(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(e,t,a){if(this.next="{"==e?this.nextState:"","{"==e&&a.length)a.unshift("start",t);else if("}"==e&&a.length&&(a.shift(),this.next=a.shift(),-1!=this.next.indexOf("string")||-1!=this.next.indexOf("jsx")))return"paren.quasi.end";return"{"==e?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:a},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),e&&!1==e.jsx||c.call(this)),this.embedRules(r,"doc-",[r.getEndRule("no_regex")]),this.normalizeRules()};function c(){let e=l.replace("\\d","\\d\\-"),t={onMatch:function(e,t,a){let s="/"==e.charAt(1)?2:1;return 1==s?(t!=this.nextState?a.unshift(this.next,this.nextState,0):a.unshift(this.next),a[2]++):2==s&&t==this.nextState&&(a[1]--,(!a[1]||a[1]<0)&&(a.shift(),a.shift())),[{type:"meta.tag.punctuation."+(1==s?"":"end-")+"tag-open.xml",value:e.slice(0,s)},{type:"meta.tag.tag-name.xml",value:e.substr(s)}]},regex:"</?"+e,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(t);let a={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[a,t,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(e,t,a){return t==a[0]&&a.shift(),2==e.length&&(a[0]==this.nextState&&a[1]--,(!a[1]||a[1]<0)&&a.splice(0,2)),this.next=a[0]||"start",[{type:this.token,value:e}]},nextState:"jsx"},a,u("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:e},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},t],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function u(e){return[{token:"comment",regex:/\/\*/,next:[r.getTagRule(),{token:"comment",regex:"\\*\\/",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[r.getTagRule(),{token:"comment",regex:"$|^",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}n.inherits(d,o),a.SourceHighlightRules=d})}(e,t,a,o.H.externalLibraries[a]),(0,s.ModeSelector)(e,t,a))},d=(e,t,a)=>{switch(e){case i.Chapter.HTML:return"html";case i.Chapter.FULL_TS:return"typescript";case i.Chapter.PYTHON_1:case i.Chapter.PYTHON_2:case i.Chapter.PYTHON_3:case i.Chapter.PYTHON_4:case i.Chapter.FULL_PYTHON:return"python";case i.Chapter.SCHEME_1:case i.Chapter.SCHEME_2:case i.Chapter.SCHEME_3:case i.Chapter.SCHEME_4:case i.Chapter.FULL_SCHEME:return"scheme";case i.Chapter.FULL_JAVA:return"java";case i.Chapter.FULL_C:return"c_cpp";default:return`source${e}${t}${a}`}},c=e=>{switch(e){case"html":return{chapter:i.Chapter.HTML,variant:i.Variant.DEFAULT,library:r.O.NONE};case"typescript":return{chapter:i.Chapter.FULL_TS,variant:i.Variant.DEFAULT,library:r.O.NONE};case"python":return{chapter:i.Chapter.PYTHON_1,variant:i.Variant.DEFAULT,library:r.O.NONE};case"scheme":return{chapter:i.Chapter.FULL_SCHEME,variant:i.Variant.EXPLICIT_CONTROL,library:r.O.NONE};case"java":return{chapter:i.Chapter.FULL_JAVA,variant:i.Variant.DEFAULT,library:r.O.NONE};case"c_cpp":return{chapter:i.Chapter.FULL_C,variant:i.Variant.DEFAULT,library:r.O.NONE};default:{let t=e.match(/source(-?\d+)([a-z-]+)([A-Z]+)/);if(!t)throw Error("Invalid modeString");let[a,s,n,o]=t;return{chapter:"1"===s?i.Chapter.SOURCE_1:"2"===s?i.Chapter.SOURCE_2:"3"===s?i.Chapter.SOURCE_3:i.Chapter.SOURCE_4,variant:i.Variant[n]||i.Variant.DEFAULT,library:r.O[o]||r.O.NONE}}}}},17526(e,t,a){"use strict";a.d(t,{o:()=>E});var s=a(97609),i=a(20857),n=a(46807),r=a(14873),o=a(54317),l=a(6261),d=a(35905),c=a(50988),u=a(93732),h=a(49436),p=a(6670),m=a(1451),g=a(77080),y=a(25492),f=a(49540),b=a(27588),x=a(6428),v=a(54668),A=a(85988),T=a(30044),w=a(2282),S=a(76940),C=a(71251),I=a(48857);let E={...u.A,...f.A,...s.Ay,...r.Ay,...h.Ay,...i.A,...x.Ay,...n.A,...A.Ay,...T.Ay,...w.A,...d.A,...g.A,...y.A,...c.A,...b.A,...v.A,...o,...S.A,...l.Ay,...C.A,...l.Ay,...I.xb,...p.A,...m.A}},98227(e,t,a){"use strict";a.d(t,{K2:()=>n,fp:()=>r,mI:()=>i,xW:()=>o});var s=a(91948);function i(e,t){let a=s.A.authProviders.get(e);if(a)try{let i=new URL(a.endpoint);switch(a.type){case"OAUTH2":i.searchParams.set("redirect_uri",n(e,t));break;case"CAS":i.searchParams.set("service",n(e,t));break;case"SAML":i.searchParams.set("target_url",function(e){if(s.A.authProviders.get(e))return`${s.A.backendUrl}/v2/auth/saml_redirect?provider=${encodeURIComponent(e)}`}(e))}return i.toString()}catch(e){return a.endpoint||""}}function n(e,t){let a=s.A.authProviders.get(e);if(!a)return;let i=""===window.location.port?"":`:${window.location.port}`;return`${window.location.protocol}//${window.location.hostname}${i}${t?"/login/vscode_callback":"/login/callback"}${a.isDefault?"":"?provider="+encodeURIComponent(e)}`}function r(e){let t=s.A.authProviders.get(e);if(t)try{return new URL(t.endpoint).searchParams.get("client_id")||void 0}catch(e){return t.endpoint||void 0}}function o(){return[...s.A.authProviders.entries()].find(([e,{isDefault:t}])=>t)}},91948(e,t,a){"use strict";a.d(t,{A:()=>x});var s=a(38786);function i(e,t){return void 0===e&&void 0!==t?t:"string"==typeof e&&"TRUE"===e.toUpperCase()}a(98227);let n=i(void 0),r=parseInt("10000",10),o=i(void 0),l=i(void 0),d=i(void 0),c=s.Chapter.SOURCE_4,u=s.Variant.DEFAULT,h=i("TRUE",!0),p=parseInt("0"),m=new Map,g=!1,y=new Map;for(let e=1;;++e){let t={REACT_APP_GOOGLE_CLIENT_ID:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",REACT_APP_PLAYGROUND_ONLY:"TRUE",REACT_APP_GITHUB_CLIENT_ID:"85133e8db51d683d544b",REACT_APP_SHAREDB_BACKEND_URL:"https://api2.sourceacademy.nus.edu.sg/sharedb/",REACT_APP_GOOGLE_APP_ID:"838265856714",REACT_APP_GITHUB_OAUTH_PROXY_URL:"https://api2.sourceacademy.nus.edu.sg/github_oauth",REACT_APP_URL_SHORTENER_SIGNATURE:"5eef899abd",REACT_APP_SENTRY_DSN:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",REACT_APP_GOOGLE_API_KEY:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",REACT_APP_ENVIRONMENT:"pages",REACT_APP_VERSION:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_URL_SHORTENER_BASE:"https://share.sourceacademy.org/"}[`REACT_APP_NUS_SAML_PROVIDER${e}`];if(!t)break;g=!0;let a={REACT_APP_GOOGLE_CLIENT_ID:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",REACT_APP_PLAYGROUND_ONLY:"TRUE",REACT_APP_GITHUB_CLIENT_ID:"85133e8db51d683d544b",REACT_APP_SHAREDB_BACKEND_URL:"https://api2.sourceacademy.nus.edu.sg/sharedb/",REACT_APP_GOOGLE_APP_ID:"838265856714",REACT_APP_GITHUB_OAUTH_PROXY_URL:"https://api2.sourceacademy.nus.edu.sg/github_oauth",REACT_APP_URL_SHORTENER_SIGNATURE:"5eef899abd",REACT_APP_SENTRY_DSN:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",REACT_APP_GOOGLE_API_KEY:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",REACT_APP_ENVIRONMENT:"pages",REACT_APP_VERSION:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_URL_SHORTENER_BASE:"https://share.sourceacademy.org/"}[`REACT_APP_NUS_SAML_PROVIDER${e}_NAME`]||"Unnamed provider",s={REACT_APP_GOOGLE_CLIENT_ID:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",REACT_APP_PLAYGROUND_ONLY:"TRUE",REACT_APP_GITHUB_CLIENT_ID:"85133e8db51d683d544b",REACT_APP_SHAREDB_BACKEND_URL:"https://api2.sourceacademy.nus.edu.sg/sharedb/",REACT_APP_GOOGLE_APP_ID:"838265856714",REACT_APP_GITHUB_OAUTH_PROXY_URL:"https://api2.sourceacademy.nus.edu.sg/github_oauth",REACT_APP_URL_SHORTENER_SIGNATURE:"5eef899abd",REACT_APP_SENTRY_DSN:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",REACT_APP_GOOGLE_API_KEY:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",REACT_APP_ENVIRONMENT:"pages",REACT_APP_VERSION:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_URL_SHORTENER_BASE:"https://share.sourceacademy.org/"}[`REACT_APP_NUS_SAML_PROVIDER${e}_ENDPOINT`]||"";m.set(t,{name:a,endpoint:s,isDefault:!1,type:"SAML"}),y.set(t,{name:a,endpoint:s,isDefault:!1,type:"SAML"})}let f=!1,b=new Map;for(let e=1;;++e){let t={REACT_APP_GOOGLE_CLIENT_ID:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",REACT_APP_PLAYGROUND_ONLY:"TRUE",REACT_APP_GITHUB_CLIENT_ID:"85133e8db51d683d544b",REACT_APP_SHAREDB_BACKEND_URL:"https://api2.sourceacademy.nus.edu.sg/sharedb/",REACT_APP_GOOGLE_APP_ID:"838265856714",REACT_APP_GITHUB_OAUTH_PROXY_URL:"https://api2.sourceacademy.nus.edu.sg/github_oauth",REACT_APP_URL_SHORTENER_SIGNATURE:"5eef899abd",REACT_APP_SENTRY_DSN:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",REACT_APP_GOOGLE_API_KEY:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",REACT_APP_ENVIRONMENT:"pages",REACT_APP_VERSION:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_URL_SHORTENER_BASE:"https://share.sourceacademy.org/"}[`REACT_APP_OAUTH2_PROVIDER${e}`];if(!t)break;f=!0;let a={REACT_APP_GOOGLE_CLIENT_ID:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",REACT_APP_PLAYGROUND_ONLY:"TRUE",REACT_APP_GITHUB_CLIENT_ID:"85133e8db51d683d544b",REACT_APP_SHAREDB_BACKEND_URL:"https://api2.sourceacademy.nus.edu.sg/sharedb/",REACT_APP_GOOGLE_APP_ID:"838265856714",REACT_APP_GITHUB_OAUTH_PROXY_URL:"https://api2.sourceacademy.nus.edu.sg/github_oauth",REACT_APP_URL_SHORTENER_SIGNATURE:"5eef899abd",REACT_APP_SENTRY_DSN:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",REACT_APP_GOOGLE_API_KEY:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",REACT_APP_ENVIRONMENT:"pages",REACT_APP_VERSION:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_URL_SHORTENER_BASE:"https://share.sourceacademy.org/"}[`REACT_APP_OAUTH2_PROVIDER${e}_NAME`]||"Unnamed provider",s={REACT_APP_GOOGLE_CLIENT_ID:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",REACT_APP_PLAYGROUND_ONLY:"TRUE",REACT_APP_GITHUB_CLIENT_ID:"85133e8db51d683d544b",REACT_APP_SHAREDB_BACKEND_URL:"https://api2.sourceacademy.nus.edu.sg/sharedb/",REACT_APP_GOOGLE_APP_ID:"838265856714",REACT_APP_GITHUB_OAUTH_PROXY_URL:"https://api2.sourceacademy.nus.edu.sg/github_oauth",REACT_APP_URL_SHORTENER_SIGNATURE:"5eef899abd",REACT_APP_SENTRY_DSN:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",REACT_APP_GOOGLE_API_KEY:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",REACT_APP_ENVIRONMENT:"pages",REACT_APP_VERSION:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_URL_SHORTENER_BASE:"https://share.sourceacademy.org/"}[`REACT_APP_OAUTH2_PROVIDER${e}_ENDPOINT`]||"";m.set(t,{name:a,endpoint:s,isDefault:1===e,type:"OAUTH2"}),b.set(t,{name:a,endpoint:s,isDefault:1===e,type:"OAUTH2"})}for(let e=1;;++e){let t={REACT_APP_GOOGLE_CLIENT_ID:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",REACT_APP_PLAYGROUND_ONLY:"TRUE",REACT_APP_GITHUB_CLIENT_ID:"85133e8db51d683d544b",REACT_APP_SHAREDB_BACKEND_URL:"https://api2.sourceacademy.nus.edu.sg/sharedb/",REACT_APP_GOOGLE_APP_ID:"838265856714",REACT_APP_GITHUB_OAUTH_PROXY_URL:"https://api2.sourceacademy.nus.edu.sg/github_oauth",REACT_APP_URL_SHORTENER_SIGNATURE:"5eef899abd",REACT_APP_SENTRY_DSN:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",REACT_APP_GOOGLE_API_KEY:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",REACT_APP_ENVIRONMENT:"pages",REACT_APP_VERSION:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_URL_SHORTENER_BASE:"https://share.sourceacademy.org/"}[`REACT_APP_CAS_PROVIDER${e}`];if(!t)break;f=!0;let a={REACT_APP_GOOGLE_CLIENT_ID:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",REACT_APP_PLAYGROUND_ONLY:"TRUE",REACT_APP_GITHUB_CLIENT_ID:"85133e8db51d683d544b",REACT_APP_SHAREDB_BACKEND_URL:"https://api2.sourceacademy.nus.edu.sg/sharedb/",REACT_APP_GOOGLE_APP_ID:"838265856714",REACT_APP_GITHUB_OAUTH_PROXY_URL:"https://api2.sourceacademy.nus.edu.sg/github_oauth",REACT_APP_URL_SHORTENER_SIGNATURE:"5eef899abd",REACT_APP_SENTRY_DSN:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",REACT_APP_GOOGLE_API_KEY:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",REACT_APP_ENVIRONMENT:"pages",REACT_APP_VERSION:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_URL_SHORTENER_BASE:"https://share.sourceacademy.org/"}[`REACT_APP_CAS_PROVIDER${e}_NAME`]||"Unnamed provider",s={REACT_APP_GOOGLE_CLIENT_ID:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",REACT_APP_PLAYGROUND_ONLY:"TRUE",REACT_APP_GITHUB_CLIENT_ID:"85133e8db51d683d544b",REACT_APP_SHAREDB_BACKEND_URL:"https://api2.sourceacademy.nus.edu.sg/sharedb/",REACT_APP_GOOGLE_APP_ID:"838265856714",REACT_APP_GITHUB_OAUTH_PROXY_URL:"https://api2.sourceacademy.nus.edu.sg/github_oauth",REACT_APP_URL_SHORTENER_SIGNATURE:"5eef899abd",REACT_APP_SENTRY_DSN:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",REACT_APP_GOOGLE_API_KEY:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",REACT_APP_ENVIRONMENT:"pages",REACT_APP_VERSION:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_URL_SHORTENER_BASE:"https://share.sourceacademy.org/"}[`REACT_APP_CAS_PROVIDER${e}_ENDPOINT`]||"";m.set(t,{name:a,endpoint:s,isDefault:!1,type:"CAS"}),b.set(t,{name:a,endpoint:s,isDefault:!1,type:"CAS"})}for(let e=1;;++e){let t={REACT_APP_GOOGLE_CLIENT_ID:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",REACT_APP_PLAYGROUND_ONLY:"TRUE",REACT_APP_GITHUB_CLIENT_ID:"85133e8db51d683d544b",REACT_APP_SHAREDB_BACKEND_URL:"https://api2.sourceacademy.nus.edu.sg/sharedb/",REACT_APP_GOOGLE_APP_ID:"838265856714",REACT_APP_GITHUB_OAUTH_PROXY_URL:"https://api2.sourceacademy.nus.edu.sg/github_oauth",REACT_APP_URL_SHORTENER_SIGNATURE:"5eef899abd",REACT_APP_SENTRY_DSN:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",REACT_APP_GOOGLE_API_KEY:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",REACT_APP_ENVIRONMENT:"pages",REACT_APP_VERSION:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_URL_SHORTENER_BASE:"https://share.sourceacademy.org/"}[`REACT_APP_SAML_PROVIDER${e}`];if(!t)break;f=!0;let a={REACT_APP_GOOGLE_CLIENT_ID:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",REACT_APP_PLAYGROUND_ONLY:"TRUE",REACT_APP_GITHUB_CLIENT_ID:"85133e8db51d683d544b",REACT_APP_SHAREDB_BACKEND_URL:"https://api2.sourceacademy.nus.edu.sg/sharedb/",REACT_APP_GOOGLE_APP_ID:"838265856714",REACT_APP_GITHUB_OAUTH_PROXY_URL:"https://api2.sourceacademy.nus.edu.sg/github_oauth",REACT_APP_URL_SHORTENER_SIGNATURE:"5eef899abd",REACT_APP_SENTRY_DSN:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",REACT_APP_GOOGLE_API_KEY:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",REACT_APP_ENVIRONMENT:"pages",REACT_APP_VERSION:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_URL_SHORTENER_BASE:"https://share.sourceacademy.org/"}[`REACT_APP_SAML_PROVIDER${e}_NAME`]||"Unnamed provider",s={REACT_APP_GOOGLE_CLIENT_ID:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",REACT_APP_PLAYGROUND_ONLY:"TRUE",REACT_APP_GITHUB_CLIENT_ID:"85133e8db51d683d544b",REACT_APP_SHAREDB_BACKEND_URL:"https://api2.sourceacademy.nus.edu.sg/sharedb/",REACT_APP_GOOGLE_APP_ID:"838265856714",REACT_APP_GITHUB_OAUTH_PROXY_URL:"https://api2.sourceacademy.nus.edu.sg/github_oauth",REACT_APP_URL_SHORTENER_SIGNATURE:"5eef899abd",REACT_APP_SENTRY_DSN:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",REACT_APP_GOOGLE_API_KEY:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",REACT_APP_ENVIRONMENT:"pages",REACT_APP_VERSION:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_URL_SHORTENER_BASE:"https://share.sourceacademy.org/"}[`REACT_APP_SAML_PROVIDER${e}_ENDPOINT`]||"";m.set(t,{name:a,endpoint:s,isDefault:!1,type:"SAML"}),b.set(t,{name:a,endpoint:s,isDefault:!1,type:"SAML"})}let x={sourceAcademyVersion:"0168fa99b4e0a5ce6a352d1d5c53345ffd0d2d35-2026-03-01T08:07:30+00:00",sourceAcademyEnvironment:"pages",sourceAcademyDeploymentName:"Source Academy",showResearchPrompt:n,backendUrl:void 0,storiesBackendUrl:void 0,cadetLoggerUrl:void 0,useBackend:o,forwardLoadBalancerCookies:l,useEmptyAssetPrefix:d,defaultSourceChapter:c,defaultSourceVariant:u,defaultQuestionId:0,maxBrowseIndex:50,mobileBreakpoint:768,urlShortenerBase:"https://share.sourceacademy.org/",urlShortenerSignature:"5eef899abd",moduleBackendUrl:"https://source-academy.github.io/modules",authProviders:m,hasNusAuthProviders:g,nusAuthProviders:y,hasOtherAuthProviders:f,otherAuthProviders:b,playgroundOnly:h,sentryDsn:"https://54202d1388dd4c2eac9e9bfcba0d6dc8@o278059.ingest.sentry.io/5270681",googleClientId:"838265856714-jc03h28mknjbb0iju1k5rr7pdt95o5t2.apps.googleusercontent.com",googleApiKey:"AIzaSyBgG9d8W5W7h1ot0Lg6OWMv4QRiBjZEYRw",googleAppId:"838265856714",githubClientId:"85133e8db51d683d544b",githubOAuthProxyUrl:"https://api2.sourceacademy.nus.edu.sg/github_oauth",sharedbBackendUrl:"https://api2.sourceacademy.nus.edu.sg/sharedb/",cadetLoggerInterval:r,sicpBackendUrl:"https://sicp.sourceacademy.org/",javaPackagesUrl:"https://source-academy.github.io/modules/java/java-packages/src/",workspaceSettingsLocalStorageKey:"workspace-settings",collabSessionIdLocalStorageKey:"playground-session-id",caFulfillmentLevel:p,featureFlags:{enableSicpChatbot:i(void 0)}}},58049(e,t,a){"use strict";a.d(t,{A:()=>i});var s=a(96540);let i=function({children:e,text:t,onCopy:a}){let i=(0,s.useCallback)(async s=>{let i=!1;try{await navigator.clipboard.writeText(t),i=!0}catch(e){i=!1}a?.(t,i);let n=e?.props.onClick;"function"==typeof n&&n(s)},[a,t,e?.props]);return e?(0,s.cloneElement)(e,{onClick:i}):null}},63283(e,t,a){"use strict";a.d(t,{cu:()=>T,P_:()=>v,ug:()=>w,Yp:()=>S});var s=a(74848),i=a(31365),n=a(96540),r=a(5338),o=a(79642),l=a(45111),d=a(53991),c=a(31643),u=a(5960),h=a(46942),p=a.n(h);function m(e){let t=e.choices.map((t,a)=>(0,s.jsx)(o.$,{onClick:()=>e.onResponse&&e.onResponse(t.key),intent:t.intent,fill:e.largeButtons,className:p()(e.largeButtons&&"large-button-ksBJkq"),...t.props,children:t.label},a)),{escapeResponse:a}=e,i=void 0===a?void 0:()=>e.onResponse&&e.onResponse(a);return(0,s.jsxs)(l.l,{className:p()(d.DARK,"ConfirmDialog-Qme0qs"),title:e.title,isCloseButtonShown:void 0===e.title&&void 0,canEscapeKeyClose:!!i,onClose:i,isOpen:e.isOpen,icon:e.icon,...e.props,children:[(0,s.jsx)(c.R,{children:e.contents}),(0,s.jsx)(u.E,{actions:!e.largeButtons&&(0,s.jsx)(s.Fragment,{children:t}),children:e.largeButtons&&t})]})}var g=a(68464);function y(e){let{enterResponse:t,validationFunction:a}=e,r=n.useRef(null),[o,l]=n.useState(!a||a(e.defaultValue||""));n.useEffect(()=>{r.current&&l(!a||a(r.current.value))},[a]);let d=t=>{(t===e.escapeResponse||!a||a(r.current.value))&&e.onResponse(t,r.current?.value||"")},c=e.choices.map(e=>({...e,props:{...e.props,disabled:e.disableOnInvalid&&!o}})),u=t?e=>{13===e.keyCode&&d(t)}:void 0,h=a?e=>{a(e.target.value)!==o&&l(!o)}:void 0;return(0,s.jsx)(m,{...e,onResponse:d,choices:c,contents:(0,s.jsxs)(s.Fragment,{children:[e.contents,(0,s.jsx)(g.M,{autoFocus:!0,defaultValue:e.defaultValue,inputRef:r,onKeyDown:u,onChange:h,intent:o?i.J.NONE:i.J.DANGER})]})})}class f extends n.PureComponent{state={dialog:null,dialogOnClose:null};static create(){let e=document.createElement("div");document.body.appendChild(e);let t=(0,r.createRoot)(e),a=n.createRef();return t.render((0,s.jsx)(f,{ref:a})),a}show(e,t){this.setState(()=>({dialog:e,dialogOnClose:t||null}))}close(){this.state.dialogOnClose&&this.state.dialogOnClose(),this.setState(()=>({dialog:null,dialogOnClose:null}))}render(){return this.state.dialog}}let b=f.create();function x(){b.current.close()}function v(e,t){return new Promise((a,i)=>{var n;n=(0,s.jsx)(e,{...t(a)}),b.current.show(n,i)}).finally(x)}function A(e){return v(m,t=>({...e,onResponse:t,isOpen:!0}))}function T(e){return A({title:e.title,contents:e.contents,choices:[{key:!1,label:e.negativeLabel||"No"},{key:!0,label:e.positiveLabel||"Yes",intent:e.positiveIntent||i.J.SUCCESS,props:{type:"submit"}}],escapeResponse:!1,icon:e.icon,...e.props})}function w(e){return A({title:e.title,contents:e.contents,choices:[{key:!0,label:e.label||"OK",intent:i.J.PRIMARY,props:{type:"submit"}}],escapeResponse:!1,icon:"error",...e.props})}function S(e){return v(y,t=>({title:e.title,contents:e.contents,choices:[{key:!1,label:e.negativeLabel||"Cancel"},{key:!0,label:e.positiveLabel||"Accept",intent:i.J.SUCCESS,disableOnInvalid:!0}],escapeResponse:!1,enterResponse:!0,onResponse:(e,a)=>t({buttonResponse:e,value:a}),isOpen:!0,...e.props}))}},73768(e,t,a){"use strict";a.d(t,{A:()=>n});var s=a(64936);let i={log:e=>(...t)=>{e(t.map(e=>"string"==typeof e?e:(0,s.stringify)(e)).join(" "))}},n=new class{buffer;workspaceLocation;constructor(){this.buffer=[]}dump(){let e=[...this.buffer];return this.resetBuffer(),e}push(e,t){this.handleWorkspaceChange(t),this.buffer.push(e)}attachConsole(e){let t=t=>this.push(t,e),a={};return Object.entries(i).forEach(([e,s])=>{a[e]=console[e],console[e]=s(t)}),()=>{Object.entries(i).forEach(([e])=>{console[e]=a[e]})}}handleWorkspaceChange(e){this.hasWorkspace()&&e===this.workspaceLocation||(this.workspaceLocation=e,this.resetBuffer())}hasWorkspace(){return!!this.workspaceLocation}resetBuffer(){this.buffer=[]}}},5775(e,t,a){"use strict";a.d(t,{g:()=>i});var s=a(79827);function i(e){return new s.E({auth:e,userAgent:"Source Academy Playground",baseUrl:"https://api.github.com",log:{debug:()=>{},info:()=>{},warn:console.warn,error:console.error},request:{agent:void 0,fetch:void 0,timeout:0}})}},12149(e,t,a){"use strict";a.d(t,{Ge:()=>d,N4:()=>u,Qs:()=>p,Vc:()=>c,Xl:()=>h,bP:()=>l,c:()=>g,wV:()=>m});var s=a(86945),i=a(96540),n=a(94201),r=a(91948),o=a(69785);function l(e,t){let[a,s]=i.useState(t);return i.useEffect(()=>{(async()=>{s(await e())})()},[e]),{value:a,setValue:s}}function d(e){let[t,a]=i.useState(e);return{value:t,setValue:a,inputProps:{value:t,onChange:e=>{a(e.target.value)}}}}function c(e,t){let[a,s]=i.useState((0,o.R)(e,t));return i.useEffect(()=>{(0,o.Z)(e,a)},[e,a]),[a,s]}let u=n.d4,h=e=>{let[t,a]=i.useState(0),[s,n]=i.useState(0),r=i.useMemo(()=>new ResizeObserver((e,t)=>{if(1!==e.length)throw Error("Expected only a single HTML element to be observed by the ResizeObserver.");let s=e[0].contentRect;a(s.width),n(s.height)}),[]);return i.useEffect(()=>{let t=e.current;if(null!==t)return r.observe(t),()=>r.disconnect()},[e,r]),[t,s]},p=()=>{let e=(0,s.U)(`(max-width: ${r.A.mobileBreakpoint}px)`),t=(0,s.U)("(max-width: 48em)"),a=(0,s.U)("(min-width:48em) and (max-width:64em)");return{xs:t,sm:a,md:(0,s.U)("(min-width:64em) and (max-width:75em)"),lg:(0,s.U)("(min-width:75em)"),isMobileBreakpoint:e,isDesktopBreakpoint:void 0===e?void 0:!e}},m=()=>{let e=u(e=>e.session),t="string"==typeof e.name,a=!!e.role;return{...e,isEnrolledInACourse:a,isLoggedIn:t}},g=({throwWhenEmpty:e=!0}={})=>{let t=u(e=>e.session.accessToken),a=u(e=>e.session.refreshToken);if(e&&(!t||!a))throw Error("No access token or refresh token found");return{accessToken:t,refreshToken:a}}},27457(e,t,a){"use strict";a.d(t,{$L:()=>x,FX:()=>b,NK:()=>h,Pc:()=>c,Yn:()=>T,eq:()=>u,jP:()=>m,kd:()=>p,ms:()=>f,q6:()=>y,rh:()=>A,wA:()=>v});var s=a(72712),i=a(38786),n=a(64936),r=a(2543),o=a(53351),l=a(12681),d=a(73768);function c({context:e}){try{o.A.drawCse(e)}catch(e){throw console.error(e),Error("CSE machine is not enabled")}}function u(){if(window.Inspector)window.Inspector.highlightClean();else throw Error("Inspector not loaded")}function h(e){if(window.Inspector)window.Inspector.highlightLine(e);else throw Error("Inspector not loaded")}function p(){if(window.Inspector)window.Inspector.highlightCleanForControl();else throw Error("Inspector not loaded")}function m(e){if(window.Inspector)window.Inspector.highlightLineForControl(e);else throw Error("Inspector not loaded")}let g={display:function e(t,a,s){return e((void 0===a?"":a+" ")+(0,n.stringify)(t),"",s),t},rawDisplay:function(e,t,a){let s=(void 0===t?"":t+" ")+String(e);return d.A.push(s,a),e},prompt:function(e){return prompt(e)},alert:function(e){alert((0,n.stringify)(e))},visualiseList:function(...e){try{return l.A.drawData(e[0]),1===e[0].length?e[0][0]:e[0]}catch(e){throw console.log(e),Error("Data visualizer is not enabled")}}};function y(e,t,a,n=i.Variant.DEFAULT,r){return(0,s.default)(e,n,r,t,a,g)}function f(e){function t(){}t.prototype=e.runtime.environments[0].head;let a=new t,i=new Proxy(e.runtime.environments[0],{get:(e,t,s)=>"head"===t?a:e[t]}),n=new Proxy(e.runtime.environments,{get:(e,t,a)=>"0"===t?i:e[t]}),r=new Proxy(e.runtime,{get:(e,t,a)=>"environments"===t?n:e[t]}),o=new Proxy(e,{get(e,t,a){switch(t){case"chapter":return 4;case"runtime":return r;default:return e[t]}}});return(0,s.importBuiltins)(o,g),(0,s.defineBuiltin)(o,"makeUndefinedErrorFunction",e=>()=>{throw Error(`Name ${e} not declared.`)}),o}function b(e,t){let a=e.runtime.environments[0].head,s=t.runtime.environments[0].head;return(0,r.difference)((0,r.keys)(a),(0,r.keys)(s))}function x(e,t){return`const _____${t} = [${e.join(", ")}];`}function v(e,t){let a=`_____${t}`;return e.map((e,t)=>"makeUndefinedErrorFunction"===e?"":`const ${e} = ${a}[${t}];`).join("\n")}function A(e){return e.map(e=>"makeUndefinedErrorFunction"===e?"":`const ${e} = makeUndefinedErrorFunction('${e}');`).join("\n")}function T(e){return e.map(e=>"makeUndefinedErrorFunction"===e?"":`const ${e} : string = makeUndefinedErrorFunction('${e}');`).join("\n")}},69785(e,t,a){"use strict";a.d(t,{R:()=>s,Z:()=>i});let s=(e,t)=>{let a=window.localStorage.getItem(e);return a?JSON.parse(a):t},i=(e,t)=>{window.localStorage.setItem(e,JSON.stringify(t))}},29549(e,t,a){"use strict";a.d(t,{P:()=>i});var s=a(2543);let i=(e,t)=>s.isEqual(e,t)},42921(e,t,a){"use strict";a.d(t,{MH:()=>n,hM:()=>i,zS:()=>s});let s=e=>e.toLowerCase().replace(/\W+/g,"_"),i=e=>{if(void 0===e)return null;let t=parseInt(e,10);return Number.isInteger(t)?t:null},n=e=>void 0===e?null:"true"===e.toLowerCase()},36896(e,t,a){"use strict";let s;a.d(t,{Em:()=>m});var i=a(74848),n=a(79642),r=a(2543),o=a.n(r),l=a(70622),d=a(21681),c=a(31230),u=a(17526),h=a(91948),p=a(37852);let m=async(e,t,a,i)=>{h.A.forwardLoadBalancerCookies&&(a.withCredentials=!0);let n=g(t,a);try{let t=i||`${h.A.backendUrl}/v2/${e}`,r=await fetch(t,n);if(r.ok||409===r.status)return r;if(401!==r.status)return(0,p.JB)(a.errorMessage?a.errorMessage:A(r)),null;if(!a.refreshToken)return null;try{s||(s=(0,c.kw)(a.refreshToken));let t=await s;if(!t)throw Error("Invalid refreshed token");d.M.dispatch(u.o.setTokens(t));let i=o().cloneDeep(n);i.headers.set("Authorization",`Bearer ${t.accessToken}`);let r=await fetch(`${h.A.backendUrl}/v2/${e}`,i);if(r.ok)return r;if(401===r.status)throw Error("Invalid refreshed access token");return(0,p.JB)(a.errorMessage?a.errorMessage:A(r)),null}catch(e){return window.location.pathname.match(l.Su)?(0,p.JB)(x,-1,y):(d.M.dispatch(u.o.logOut()),(0,p.JB)(b,void 0,y)),null}finally{s=void 0}}catch(e){return(0,p.JB)(v,void 0,f),null}},g=(e,t)=>{let a=new Headers;t.noHeaderAccept||a.append("Accept","application/json"),t.accessToken&&a.append("Authorization",`Bearer ${t.accessToken}`);let s={method:e,headers:a};return t.body&&(t.noContentType?s.body=t.body:(a.append("Content-Type","application/json"),s.body=JSON.stringify(t.body))),t.withCredentials&&(s.credentials="include"),s},y="userSessionExpired",f="networkError",b="Please login again",x=(0,i.jsxs)("div",{children:["User session expired. Please copy your work and"," ",(0,i.jsx)(n.$,{onClick:()=>{d.M.dispatch(u.o.logOut()),(0,p.X8)(y)},children:"Relogin"})]}),v="Error while communicating with backend; check your network?",A=e=>`Error while communicating with backend: ${e.status} ${e.statusText}`},30796(e,t,a){"use strict";a.d(t,{pT:()=>D,kp:()=>M,fu:()=>U});var s=a(89027),i=a(10733),n=a(52894),r=a(61372),o=a(74848),l=a.t(o,2),d=a(83487),c=a(53991),u=a(51851),h=a(9584),p=a(38786),m=a(96540),g=a(70470),y=a(94201),f=a(61499),b=a(471),x=a(29458),v=a(20314),A=a(40391),T=a(64860),w=a(75780),S=a(91948),C=a(12149),I=a(35905),E=a(76940),_=a(75594),j=a(75580),k=a(15361),N=a(65021),P=a(39820);let R=e=>{let t=(0,y.wA)(),[a,s]=(0,m.useState)(e.content),[i,n]=(0,m.useState)(1/0),r=(0,C.N4)(e=>Object.keys(e.stories.envs)),l=function(e,t){for(let e of t.split("-")){let t=e.split(":");if("env"===t[0])return t.length>1?t[1]:""}}(0,e.commands),d=void 0===l?P.Kf:r.includes(l)?l:P.Kf,R=(0,C.N4)(e=>e.stories.envs[d]?.context.chapter||S.A.defaultSourceChapter),L=(0,C.N4)(e=>e.stories.envs[d]?.context.variant||S.A.defaultSourceVariant);(0,m.useEffect)(()=>{s(e.content)},[e.content]);let M=(0,C.N4)(e=>e.stories.envs[d]?.output||[]),{selectedTab:D,setSelectedTab:O}=(0,w.k9)(`stories.${d}`),U=m.useCallback((e,a,s)=>{t(E.A.toggleStoriesUsingSubst("subst_visualiser"===e,d)),O(e)},[]),F=d===P.Kf?(0,f.Kl)(R,L):d+" | "+(0,f.Kl)(R,L),G="subst_visualiser"===D,z={label:"Normal Output",iconName:h.W.PLAY,body:M.length>i?(0,o.jsx)("div",{className:"Repl",style:{margin:0},children:(0,o.jsxs)("div",{className:"repl-output-parent",children:[(0,o.jsx)("p",{className:c.RUNNING_TEXT,children:"Output:"}),(0,o.jsx)(k.k,{output:M[i],usingSubst:G})]})}):(0,o.jsx)("p",{className:c.RUNNING_TEXT,children:'Click "Run" in the top left to run some code!'}),id:"stories_run"},H={selectedTabId:D,onChange:U,tabs:{beforeDynamicTabs:m.useMemo(()=>{let e=[z];return R===p.Chapter.HTML?M.length>i&&"result"===M[i].type&&e.push((0,A.A)(M[i],e=>t(I.A.addHtmlConsoleError(e,"stories",d)),`stories.${d}`)):(R>=p.Chapter.SOURCE_2&&e.push((0,v.A)(`stories.${d}`)),R<=p.Chapter.SOURCE_2&&(L===p.Variant.DEFAULT||L===p.Variant.NATIVE)&&e.push((0,_.fM)(`stories.${d}`,M.slice(i)))),e},[R,L,M,t,d]),afterDynamicTabs:[]},workspaceLocation:`stories.${d}`},B=()=>{D&&U(D,D,{}),t(E.A.evalStory(d,a)),n(M.length)},V=(0,m.useRef)(B);return V.current=B,(0,N.wC)(R,L,j.O.NONE),(0,o.jsx)("div",{className:c.DARK,children:(0,o.jsx)("div",{className:"workspace",children:(0,o.jsxs)(u.Z,{children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsx)(b.w,{handleEditorEval:B,isEntrypointFileDefined:!0},"runButton"),(0,o.jsx)("span",{style:{display:"inline-block",fontSize:"0.9rem",textAlign:"center"},children:F}),(0,o.jsx)(x.A,{label:"Reset Env",onClick:()=>{t(E.A.clearStoryEnv(d))},icon:h.W.RESET})]}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"right-parent",children:[(0,o.jsx)(u.Z,{children:(0,o.jsx)(g.default,{className:"repl-react-ace react-ace",mode:(0,N.xU)(R,L,j.O.NONE),theme:"source",height:"1px",width:"100%",value:a,onChange:e=>s(e),commands:[{name:"evaluate",bindKey:{win:"Shift-Enter",mac:"Shift-Enter"},exec:()=>V.current()}],minLines:5,maxLines:20,fontSize:17,highlightActiveLine:!1,showGutter:!1,showPrintMargin:!1,setOptions:{fontFamily:"'Inconsolata', 'Consolas', monospace"}})}),(0,o.jsx)("div",{children:(0,o.jsx)(T.A,{...H})})]})})]})})})};var L=a(67196);let M=`---
config:
  chapter: 4
  variant: default

env:
  iterFib:
    chapter: 4
    variant: default
  recuFib:
    chapter: 4
    variant: default
  rune:
    chapter: 4
    variant: default
---

# Stories for Source Academy Quick Start

## Source Blocks

You can create source blocks as follows:

\`\`\`\`
\`\`\`{source}
const incr_two = (x) => x + 2;
\`\`\`
\`\`\`\`

Will render as:

\`\`\`{source}
const incr_two = (x) => x + 2;
\`\`\`

Try running the code above!

Subsequent source blocks will continue the evaluation flow. Try running the following source block:

\`\`\`{source}
incr_two(10);
\`\`\`

You can reset the environment by clicking on the \`Reset Env\` button on the top right of the source block.

## Changing Configs

You can change the chapter and variant of source blocks by adding a header to the top of this markdown file.

\`\`\`
---
config:
  chapter: SOURCE_4
  variant: DEFAULT
---
\`\`\`

The current valid CHAPTER/VARIANT combinations can be found [here](https://github.com/source-academy/js-slang#usage).

## Adding New Environments

Sometimes, you may want a different evaluation flow for source blocks. Consider these two implementations of the fibonacci function:
### Iterative Fib

\`\`\`{source} env:iterFib
function fib(n) {
  let a = 0;
  let b = 1;
  for (let i = 0; i < n; i = i + 1) {
    const old_b = b;
    b = a + b;
    a = old_b;
  }
  return a;
}
\`\`\`

\`\`\`{source} env:iterFib
fib(15);
\`\`\`

### Recursive Fib

\`\`\`{source} env:recuFib
function fib(n) {
  return n < 2 ? n : fib(n-1) + fib(n-2);
}
\`\`\`

\`\`\`{source} env:recuFib
fib(15);
\`\`\`

It would make sense for these two execution flows to be separated so the functions do not overwrite each other.

This can be done by configuring the code blocks to be from different environments. In the header, we can add

\`\`\`
env:
  iterFib:
    chapter: 4
    variant: default
  recuFib:
    chapter: 4
    variant: default
\`\`\`

to create two different environments. Then, we add \`env:iterFib\` and \`env:recuFib\` to the metadata of the source blocks to set them to their respective environments!

## Module Support

Stories also supports modules!

\`\`\`{source} env:rune
import {show, heart} from 'rune';

show(heart);
\`\`\`
`,D=(e,t)=>{let a=e.session.getScrollTop(),s=e.renderer.layerConfig.maxHeight,i=Math.max(t.scrollHeight,1),n=Math.max(t.offsetHeight,1);t.scrollTo(0,a/(s-n)*(i-n))},O={code:(e,t)=>{let a=t.lang??"";if(!(a.startsWith("{")&&a.endsWith("}")))return n.Y.code(e,t);let i={content:t.value,commands:t.meta??""};return(0,s.h)("source-block",i)}},U=e=>{let t=(0,i.Y)(e),a=(0,r._)(t,{handlers:O})??(0,s.h)();return(0,L.l)().use(d.A,{...l,components:{"source-block":R}}).stringify(a)}},281(e,t,a){"use strict";a.d(t,{WP:()=>n,j:()=>s,uv:()=>i});let s=()=>e=>e;function i(e){return Object.keys(e)}function n(e){return Object.entries(e)}},52519(e,t,a){"use strict";a.d(t,{AX:()=>u,OW:()=>l,fn:()=>o,g6:()=>p,x7:()=>c});var s=a(74848),i=a(63283),n=a(37852);let r={icon:"warning-sign",title:"You are switching to a unsafe feature!",contents:(0,s.jsxs)("p",{children:[(0,s.jsx)("code",{children:"full JavaScript"})," allows you to run arbitrary JS code beyond source.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"This might pose a security concern if you are not careful and fully aware of what program you are running!",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"};function o(){return(0,i.cu)(r)}function l(){(0,n.JB)("For security concerns, users are not allowed to load full JavaScript code from shared links")}let d={icon:"warning-sign",title:"You are switching to a unsafe feature!",contents:(0,s.jsxs)("p",{children:[(0,s.jsx)("code",{children:"full TypeScript"})," allows you to run arbitrary JS code beyond source.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"This might pose a security concern if you are not careful and fully aware of what program you are running!",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"};function c(){return(0,i.cu)(d)}function u(){(0,n.JB)("For security concerns, users are not allowed to load full JavaScript code from shared links")}let h={icon:"warning-sign",title:"Beware when running shared HTML code!",contents:(0,s.jsxs)("p",{children:["You are about to access HTML code written by others, which may contain malicious scripts.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"This might pose a security concern if you are not careful and fully aware of what the shared HTML code contains!",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"};function p(){return(0,i.cu)(h)}},37852(e,t,a){"use strict";let s;a.d(t,{rG:()=>u,mn:()=>c,JB:()=>d,X8:()=>h,uT:()=>l});var i=a(31365),n=a(25900),r=a(54348),o=a(5338);(async e=>{s=await n.V.createAsync(e,{domRenderer:(e,t)=>(0,o.createRoot)(t).render(e)})})({position:r.yX.TOP});let l=(e,t=2e3,a)=>s.show({intent:i.J.SUCCESS,message:e,timeout:t},a),d=(e,t=2e3,a)=>s.show({intent:i.J.WARNING,message:e,timeout:t},a),c=(e,t=2e3,a)=>s.show({intent:i.J.DANGER,message:e,timeout:t},a),u=(e,t)=>s.show(e,t),h=e=>s.dismiss(e)},35905(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("workspace",{setTokenCount:(e,t)=>({workspaceLocation:e,tokenCount:t}),browseReplHistoryDown:e=>({workspaceLocation:e}),browseReplHistoryUp:e=>({workspaceLocation:e}),changeExternalLibrary:(e,t)=>({newExternal:e,workspaceLocation:t}),changeExecTime:(e,t)=>({execTime:e,workspaceLocation:t}),changeStepLimit:(e,t)=>({stepLimit:e,workspaceLocation:t}),chapterSelect:(e,t,a)=>({chapter:e,variant:t,workspaceLocation:a}),externalLibrarySelect:(e,t,a)=>({externalLibraryName:e,workspaceLocation:t,initialise:a||!1}),toggleEditorAutorun:e=>({workspaceLocation:e}),beginClearContext:(e,t,a)=>({library:t,workspaceLocation:e,shouldInitLibrary:a}),clearReplInput:e=>({workspaceLocation:e}),clearReplOutput:e=>({workspaceLocation:e}),clearReplOutputLast:e=>({workspaceLocation:e}),endClearContext:(e,t)=>({library:e,workspaceLocation:t}),evalEditor:e=>({workspaceLocation:e}),evalRepl:e=>({workspaceLocation:e}),evalTestcase:(e,t)=>({workspaceLocation:e,testcaseId:t}),runAllTestcases:e=>({workspaceLocation:e}),toggleFolderMode:e=>({workspaceLocation:e}),enableTokenCounter:e=>({workspaceLocation:e}),disableTokenCounter:e=>({workspaceLocation:e}),setFolderMode:(e,t)=>({workspaceLocation:e,isFolderModeEnabled:t}),updateActiveEditorTabIndex:(e,t)=>({workspaceLocation:e,activeEditorTabIndex:t}),updateActiveEditorTab:(e,t)=>({workspaceLocation:e,activeEditorTabOptions:t}),updateEditorValue:(e,t,a)=>({workspaceLocation:e,editorTabIndex:t,newEditorValue:a}),setEditorBreakpoint:(e,t,a)=>({workspaceLocation:e,editorTabIndex:t,newBreakpoints:a}),setEditorHighlightedLines:(e,t,a)=>({workspaceLocation:e,editorTabIndex:t,newHighlightedLines:a}),setEditorHighlightedLinesControl:(e,t,a)=>({workspaceLocation:e,editorTabIndex:t,newHighlightedLines:a}),moveCursor:(e,t,a)=>({workspaceLocation:e,editorTabIndex:t,newCursorPosition:a}),addEditorTab:(e,t,a)=>({workspaceLocation:e,filePath:t,editorValue:a}),shiftEditorTab:(e,t,a)=>({workspaceLocation:e,previousEditorTabIndex:t,newEditorTabIndex:a}),removeEditorTab:(e,t)=>({workspaceLocation:e,editorTabIndex:t}),removeEditorTabForFile:(e,t)=>({workspaceLocation:e,removedFilePath:t}),removeEditorTabsForDirectory:(e,t)=>({workspaceLocation:e,removedDirectoryPath:t}),renameEditorTabForFile:(e,t,a)=>({workspaceLocation:e,oldFilePath:t,newFilePath:a}),renameEditorTabsForDirectory:(e,t,a)=>({workspaceLocation:e,oldDirectoryPath:t,newDirectoryPath:a}),updateReplValue:(e,t)=>({newReplValue:e,workspaceLocation:t}),sendReplInputToOutput:(e,t)=>({type:"code",workspaceLocation:t,value:e}),resetTestcase:(e,t)=>({workspaceLocation:e,index:t}),navigateToDeclaration:(e,t)=>({workspaceLocation:e,cursorPosition:t}),resetWorkspace:(e,t)=>({workspaceLocation:e,workspaceOptions:t}),updateWorkspace:(e,t)=>({workspaceLocation:e,workspaceOptions:t}),setIsEditorReadonly:(e,t)=>({workspaceLocation:e,isEditorReadonly:t}),updateSubmissionsTableFilters:e=>({filters:e}),updateCurrentAssessmentId:(e,t)=>({assessmentId:e,questionId:t}),updateCurrentSubmissionId:(e,t)=>({submissionId:e,questionId:t}),updateHasUnsavedChanges:(e,t)=>({workspaceLocation:e,hasUnsavedChanges:t}),changeSublanguage:e=>({sublang:e}),updateSublanguage:e=>({sublang:e}),promptAutocomplete:(e,t,a,s)=>({workspaceLocation:e,row:t,column:a,callback:s}),notifyProgramEvaluated:(e,t,a,s,i)=>({result:e,lastDebuggerResult:t,code:a,context:s,workspaceLocation:i}),toggleUsingSubst:(e,t)=>({usingSubst:e,workspaceLocation:t}),addHtmlConsoleError:(e,t,a)=>({errorMsg:e,workspaceLocation:t,storyEnv:a}),showMcqPane:(e,t)=>({workspaceLocation:e,options:t}),toggleUsingCse:(e,t)=>({usingCse:e,workspaceLocation:t}),toggleUpdateCse:(e,t)=>({updateCse:e,workspaceLocation:t}),toggleUsingUpload:(e,t)=>({usingUpload:e,workspaceLocation:t}),updateCurrentStep:(e,t)=>({steps:e,workspaceLocation:t}),updateStepsTotal:(e,t)=>({steps:e,workspaceLocation:t}),updateBreakpointSteps:(e,t)=>({breakpointSteps:e,workspaceLocation:t}),updateChangePointSteps:(e,t)=>({changepointSteps:e,workspaceLocation:t}),updateLastDebuggerResult:(e,t)=>({lastDebuggerResult:e,workspaceLocation:t}),uploadFiles:(e,t)=>({files:e,workspaceLocation:t}),increaseRequestCounter:0,decreaseRequestCounter:0,setGradingHasLoadedBefore:()=>!0,updateAllColsSortStates:e=>({sortStates:e}),updateGradingColumnVisibility:e=>({filters:e})})},50988(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("academy",{createCourse:e=>e,addNewUsersToCourse:(e,t)=>({users:e,provider:t}),addNewStoriesUsersToCourse:(e,t)=>({users:e,provider:t})})},70622(e,t,a){"use strict";a.d(t,{F0:()=>s,IE:()=>r,Kh:()=>n,Su:()=>i,fv:()=>o});let s=/^-?\d+$/,i=/\/courses\/\d+\/[a-zA-Z]+\/\d+\/\d+/,n=":assessmentId?/:questionId?",r=":submissionId?/:questionId?",o=":teamId?"},93732(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("achievement",{bulkUpdateAchievements:e=>e,bulkUpdateGoals:e=>e,getAchievements:()=>({}),getGoals:e=>e,getOwnGoals:()=>({}),getUserAssessmentOverviews:e=>e,getUsers:()=>({}),removeAchievement:e=>e,removeGoal:e=>e,updateOwnGoalProgress:e=>e,addEvent:(e,t)=>({workspaceLocation:t,eventNames:e}),handleEvent:e=>e,updateGoalProgress:(e,t)=>({studentCourseRegId:e,progress:t}),saveAchievements:e=>e,saveGoals:e=>e,saveUsers:e=>e,saveUserAssessmentOverviews:e=>e})},37982(e,t,a){"use strict";a.d(t,{A0:()=>d,GY:()=>p,IY:()=>u,Oz:()=>g,Q0:()=>h,VH:()=>c,iR:()=>m,u8:()=>l,xV:()=>n});var s=a(96540),i=a(83477);a(91948);let n=s.createContext(new i.A([],[])),r="https://source-academy-assets.s3-ap-southeast-1.amazonaws.com/achievement",o=`${r}/view-background`,l=`${r}/card-background`,d=`${r}/cover-image`,c=()=>({background:`url(${o}/exploration.png) no-repeat center/cover`}),u=()=>"#9ce",h=()=>({border:`1px solid ${u()}`,boxShadow:`0 0 10px ${u()}`}),p=(e,t)=>e===t?"#4df":"#fff",m=(e,t)=>e===t?h():void 0,g=1e3},65334(e,t,a){"use strict";a.d(t,{Bx:()=>o,IW:()=>r,ss:()=>s});let s={count:0,targetCount:1,completed:!1};var i,n,r=((i={}).MANUAL="Manual",i.EVENT="Event",i.ASSESSMENT="Assessment (unsupported)",i.BINARY="Binary (unsupported)",i),o=((n={}).NONE="None",n.RUN_CODE="Run Code",n.ERROR="Error",n.RUN_TESTCASE="Run Testcase",n)},19874(e,t,a){"use strict";a.d(t,{V:()=>n,n:()=>r});var s=a(48857),i=a(13226);let n=(0,s.Lq)("conductor.enable",!1,"Enables the Conductor framework for evaluation of user programs."),r=(0,i.I)(n)},53351(e,t,a){"use strict";a.d(t,{A:()=>r}),a(96540);var s=a(34970),i=a(96702),n=a(26607);class r{static setVis;static setEditorHighlightedLines;static setIsStepLimitExceeded;static masterLayout=null;static printableMode=!1;static controlStash=!1;static stackTruncated=!1;static centerAlignment=!1;static centerAlignmentToggled=!1;static environmentTree;static currentEnvId;static control;static stash;static togglePrintableMode(){r.printableMode=!r.printableMode}static toggleControlStash(){r.controlStash=!r.controlStash}static toggleStackTruncated(){r.stackTruncated=!r.stackTruncated}static toggleCenterAlignment(){r.centerAlignment=!r.centerAlignment,r.centerAlignmentToggled=!0}static getCurrentEnvId(){return r.currentEnvId}static getPrintableMode(){return r.printableMode}static getControlStash(){return r.controlStash}static getStackTruncated(){return r.stackTruncated}static getCenterAlignment(){return r.centerAlignment}static isControl(){return!!this.control&&!this.control.isEmpty()}static init(e,t,a,s,n){i.P.visibleHeight=a,i.P.visibleWidth=t,this.setVis=e,this.setEditorHighlightedLines=s,this.setIsStepLimitExceeded=n}static clear(){i.P.values.clear(),s.Y.clearSelection()}static drawCse(e){if(r.environmentTree=(0,n._Z)(e.runtime.environmentTree),r.currentEnvId=(0,n.fW)(e.runtime.environments[0]),!this.setVis||!e.runtime.control||!e.runtime.stash)throw Error("CSE machine not initialized");r.control=e.runtime.control,r.stash=e.runtime.stash,i.P.setContext(e.runtime.environmentTree,e.runtime.control,e.runtime.stash,e.chapter),r.masterLayout||(i.P.setContext(e.runtime.environmentTree,e.runtime.control,e.runtime.stash,e.chapter),r.masterLayout=i.P.getLayoutPositions(this.controlStash)),r.masterLayout&&i.P.applyFixedPositions(),this.setVis(i.P.draw()),this.setIsStepLimitExceeded(e.runtime.control.isEmpty()),i.P.updateDimensions(i.P.visibleWidth,i.P.visibleHeight)}static redraw(){r.environmentTree&&r.control&&r.stash&&(this.centerAlignmentToggled&&(i.P.setContext(r.environmentTree,r.control,r.stash),r.masterLayout&&i.P.applyFixedPositions(),this.setVis(i.P.draw()),this.centerAlignmentToggled=!1),r.getPrintableMode()&&r.getControlStash()&&r.getStackTruncated()&&void 0!==i.P.currentStackTruncLight?this.setVis(i.P.currentStackTruncLight):r.getPrintableMode()&&r.getControlStash()&&!r.getStackTruncated()&&void 0!==i.P.currentStackLight?this.setVis(i.P.currentStackLight):!r.getPrintableMode()&&r.getControlStash()&&r.getStackTruncated()&&void 0!==i.P.currentStackTruncDark?this.setVis(i.P.currentStackTruncDark):!r.getPrintableMode()&&r.getControlStash()&&!r.getStackTruncated()&&void 0!==i.P.currentStackDark?this.setVis(i.P.currentStackDark):r.getPrintableMode()&&!r.getControlStash()&&void 0!==i.P.currentLight?this.setVis(i.P.currentLight):r.getPrintableMode()||r.getControlStash()||void 0===i.P.currentDark?(i.P.setContext(r.environmentTree,r.control,r.stash),r.masterLayout&&i.P.applyFixedPositions(),this.setVis(i.P.draw())):this.setVis(i.P.currentDark),i.P.updateDimensions(i.P.visibleWidth,i.P.visibleHeight))}static updateDimensions(e,t){null!=i.P.stageRef&&null!==e&&null!==t&&i.P.updateDimensions(e,t)}static clearCse(){this.setVis&&(this.setVis(void 0),r.environmentTree=void 0,r.control=void 0,r.stash=void 0),this.clear()}}},15(e,t,a){"use strict";a.d(t,{G:()=>q});var s=a(38268),i=a(61178),n=a(96540),r=a(74848),o=a(2494),l=a(94657),d=a(26607),c=a(55410);class u extends c.B{static key=-1}class h extends c.B{listeners=[];addListener(e){this.listeners.push(e)}removeListener(e){let t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}var p=a(64173),m=a(6203);function g(e){return{height:e.height(),width:e.width()}}function y(e){return{x:e.x(),y:e.y()}}function f(e){return{...g(e),...y(e)}}function b(e,t){let a=e;for(;void 0!==a;){let e=a.bindings.find(e=>e.keyString.split(":")[0]===t);if(a?.environment?.id==="-1")return[a,e??a.bindings[0]];if(e)return[a,e];a=a.parentFrame}throw Error(`Error: Binding with name "${t}" cannot be found within the environment!`)}function x(e){var t;if(!((t=e).startsWith("#")&&(4===t.length||7===t.length)))throw Error(`Cannot parse given color string: ${e}`);return 4===e.length&&(e+=e.slice(1)),[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16)]}class v extends h{props;isDestroyed=!1;animationData=[];animation;animationFn=e=>{if(!e||0===this.animationData.length)return!1;if(!this.ref.current){this.animationData.forEach(e=>e.resolve()),this.animation.stop();return}let t=!0,a={},s=[],i=0;for(;i<this.animationData.length;){let n=this.animationData[i];if(e.time<=n.startTime){t=!1,i++;continue}if(!n.from||!n.current){let e=this.ref.current,t={};for(let s in n.to)t[s]=a[s]??e.getAttr(s);n.from=t,n.current={}}let r=Math.min((e.time-n.startTime)/(n.endTime-n.startTime),1);for(let e in n.to){let t=function(e,t,a,s,i){if(a===s)return s;if("number"==typeof s)return"number"!=typeof a?s:i(e,a,s-a,1);if("fill"!==t&&"stroke"!==t||!a)return s;let n=x(a),r=x(s);return function([e,t,a]){return`#${e.toString(16).padStart(2,"0")+t.toString(16).padStart(2,"0")+a.toString(16).padStart(2,"0")}`}(Array.from({length:3},(t,a)=>Math.round(i(e,n[a],r[a]-n[a],1))))}(r,e,n.from[e],n.to[e],n.easing);n.current[e]=t,"x"===e&&(this._x=t),"y"===e&&(this._y=t),"width"===e&&(this._width=t),"height"===e&&(this._height=t)}Object.assign(a,n.current),1===r?(s.push(n.resolve),this.animationData.splice(i,1)):(t=!1,i++)}Object.keys(a).length>0&&(this.ref.current.setAttrs(a),this.listeners.forEach(e=>e({...a}))),t&&this.animation.stop(),s.forEach(e=>e())};constructor(e){if(super(),this.props=e,!q.getLayer())throw Error("Missing animation layer! Unable to create animation component!");this.animation=new p.A.Animation(this.animationFn,q.getLayer()),e.x&&(this._x=e.x),e.y&&(this._y=e.y),e.width&&(this._width=e.width),e.height&&(this._height=e.height)}animateTo(e,t){return new Promise(a=>{if(this.isDestroyed||0===Object.keys(e).length||!this.ref.current)return void a();let s=this.animation.frame.time+(t?.delay??0)*q.defaultDuration,i=s+(t?.duration??1)*q.defaultDuration,n=t?.easing??q.defaultEasing;this.animationData.push({startTime:s,endTime:i,to:e,easing:n,resolve:a}),this.animation.isRunning()||this.animation.start()})}destroy(){this.isDestroyed=!0,this.animation.isRunning()&&this.animation.stop(),this.ref.current?.hide(),this.animationData.forEach(e=>e.resolve()),this.animationData.length=0,this.listeners.length=0}}class A extends v{type;constructor(e,t){super(t),this.type=e}draw(){let e=this.type;return(0,r.jsx)(e,{ref:this.ref,...this.props,listening:!1,perfectDrawEnabled:!1},u.key--)}}class T extends A{constructor(e){const t={fill:(0,d.eQ)(),fontFamily:l.V.FontFamily,fontSize:l.V.FontSize,fontStyle:l.V.FontStyle,fontVariant:l.V.FontVariant};super(o.EY,{...t,...e,width:void 0})}animateTo(e,t){return super.animateTo({...e,width:void 0},t)}}class w extends A{constructor(e){const t={stroke:(0,d.t6)(),cornerRadius:l.V.ControlItemCornerRadius};super(o.rw,{...t,...e})}}class S extends A{constructor(e){const t={stroke:(0,d.t6)(),strokeWidth:m.T.ArrowStrokeWidth};super(o.wA,{...t,...e})}}class C extends A{constructor(e){const t={fill:(0,d.t6)(),strokeEnabled:!1,pointerWidth:m.T.ArrowHeadSize};super(o.i3,{...t,...e})}}class I extends h{arrow;pathComponent;arrowComponent;onPropsChange=e=>{e.x&&(this._x=this.arrow.x()+e.x),e.y&&(this._y=this.arrow.y()+e.y)};constructor(e,t){super(),this.arrow=e,this._x=e.x(),this._y=e.y(),this._width=e.width(),this._height=e.height(),this.pathComponent=new S({stroke:e.isLive?(0,d.t6)():(0,d.gR)(),data:e.path(),...t}),this.pathComponent.addListener(this.onPropsChange),this.arrowComponent=new C({fill:e.isLive?(0,d.t6)():(0,d.gR)(),points:e.points.slice(e.points.length-4),...t})}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.pathComponent.draw(),this.arrowComponent.draw()]},u.key--)}animatePathTo(e,t){return this.pathComponent.animateTo(e,t)}animateArrowTo(e,t){return this.arrowComponent.animateTo(e,t)}async animateTo(e,t){await Promise.all([this.animatePathTo(e,t),this.animateArrowTo(e,t)])}destroy(){this.pathComponent.removeListener(this.onPropsChange),this.pathComponent.destroy(),this.arrowComponent.destroy()}}class E extends h{rectComponent;textComponent;onPropsChange=e=>{e.x&&(this._x=e.x),e.y&&(this._y=e.y),e.width&&(this._width=e.width),e.height&&(this._height=e.height)};constructor(e,t,a){super();const s={...t,...a?.rectProps};this.onPropsChange(s),this.rectComponent=new w(s),this.rectComponent.addListener(this.onPropsChange);const i={padding:l.V.ControlItemTextPadding,...t,...a?.textProps,text:e};this.textComponent=new T(i)}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.rectComponent.draw(),this.textComponent.draw()]},u.key--)}animateRectTo(e,t){return this.rectComponent.animateTo(e,t)}animateTextTo(e,t){return this.textComponent.animateTo(e,t)}async animateTo(e,t){await Promise.all([this.animateRectTo(e,t),this.animateTextTo(e,t)])}destroy(){this.rectComponent.removeListener(this.onPropsChange),this.rectComponent.destroy(),this.textComponent.destroy()}}class _ extends u{accInstr;indexItem;resultItem;accessorAnimation;arrayItemAnimation;arrayArrowAnimation;indexItemAnimation;resultAnimation;resultArrowAnimation;arrayUnit;outOfRange;constructor(e,t,a,s){super(),this.accInstr=e,this.indexItem=a,this.resultItem=s,this.accessorAnimation=new E(e.text,f(e),{rectProps:{stroke:(0,d.NP)()}}),this.arrayItemAnimation=new E(t.text,f(t),{rectProps:{stroke:(0,d.wp)()}}),this.indexItemAnimation=new E(a.text,f(a),{rectProps:{stroke:(0,d.wp)()}}),this.arrayArrowAnimation=new I(t.arrow),this.outOfRange=!1;const i=t.arrow.target,n=i.data.length;parseInt(a.text)>=n?(this.outOfRange=!0,this.arrayUnit=i.units[n-1]):this.arrayUnit=i.units[parseInt(a.text)],this.resultAnimation=new E(s.text,{...g(s),x:this.arrayUnit.x()+this.arrayUnit.width()/2-this.resultItem.width()/2+(this.outOfRange?this.arrayUnit.width():0),y:this.arrayUnit.y()+this.arrayUnit.height()/2-this.resultItem.height()/2,opacity:0}),this.resultItem.arrow&&(this.resultArrowAnimation=new I(this.resultItem.arrow,{opacity:0}))}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.accessorAnimation.draw(),this.arrayItemAnimation.draw(),this.arrayArrowAnimation.draw(),this.indexItemAnimation.draw(),this.resultAnimation.draw(),this.resultArrowAnimation?.draw()]},u.key--)}async animate(){this.resultItem.ref.current?.hide(),this.resultItem.arrow?.ref.current?.hide();let e=(0,d.q_)(this.accInstr.text)+2*l.V.ControlItemTextPadding,t={x:this.arrayUnit.x()+this.arrayUnit.width()/2-this.indexItem.width()/2+(this.outOfRange?this.arrayUnit.width():0),y:this.arrayUnit.y()-this.indexItem.height()-8},a={y:this.arrayUnit.y()+this.arrayUnit.height()/2-this.indexItem.height()/2},s={y:this.arrayUnit.y()-this.resultItem.height()-8};await Promise.all([this.arrayItemAnimation.animateTo({opacity:0},{duration:.6}),this.arrayArrowAnimation.animateTo({opacity:0},{duration:.6}),this.accessorAnimation.animateRectTo({stroke:(0,d.t6)()},{duration:1.2}),this.accessorAnimation.animateTo({x:t.x-e,y:t.y,width:e},{duration:1.2}),this.indexItemAnimation.animateRectTo({stroke:(0,d.t6)()},{duration:1.2}),this.indexItemAnimation.animateTo(t,{duration:1.2})]),await Promise.all([this.accessorAnimation.animateTo({opacity:0},{duration:.8}),this.accessorAnimation.animateTo(a),this.indexItemAnimation.animateTo({opacity:0},{duration:.8}),this.indexItemAnimation.animateTo(a),this.resultAnimation.animateTo(s),this.resultAnimation.animateTo({opacity:1},{duration:.8,delay:.2})]),await Promise.all([this.resultAnimation.animateTo(y(this.resultItem),{duration:1.2}),(0,d.XF)(this.resultItem.index)&&this.resultAnimation.animateRectTo({stroke:(0,d.wp)()},{duration:1.2}),this.resultArrowAnimation?.animateTo({opacity:1},{delay:1})]),this.destroy()}destroy(){this.ref.current?.hide(),this.resultItem.ref.current?.show(),this.resultItem.arrow?.ref.current?.show(),this.accessorAnimation.destroy(),this.arrayItemAnimation.destroy(),this.indexItemAnimation.destroy(),this.resultAnimation.destroy(),this.resultArrowAnimation?.destroy()}}var j=a(32711),k=a(4797);class N extends u{asgnItem;resultItem;asgnItemAnimation;arrayItemAnimation;arrayArrowAnimation;indexItemAnimation;valueArrowAnimation;resultAnimation;resultArrowAnimation;arrayUnitText;arrayUnitTextAnimation;arrayUnitArrowAnimation;arrayUnit;resultItemIsFirst;constructor(e,t,a,s,i,n){super(),this.asgnItem=e,this.resultItem=n,this.resultItemIsFirst=0===n.index,this.asgnItemAnimation=new E(e.text,f(e),{rectProps:{stroke:(0,d.NP)()}}),this.arrayItemAnimation=new E(t.text,f(t),{rectProps:{stroke:(0,d.wp)()}}),this.arrayArrowAnimation=new I(t.arrow),this.indexItemAnimation=new E(s.text,f(s),{rectProps:{stroke:(0,d.wp)()}}),this.resultAnimation=new E(n.text,f(i),{rectProps:{stroke:(0,d.wp)()}}),i.arrow&&(this.valueArrowAnimation=new I(i.arrow)),n.arrow&&(this.resultArrowAnimation=new I(n.arrow,{opacity:0})),this.arrayUnit=a.units[parseInt(s.text)],this.arrayUnit.value instanceof k.l&&this.arrayUnit.value.text instanceof j.E&&(this.arrayUnitText=this.arrayUnit.value.text,this.arrayUnitTextAnimation=new T({text:this.arrayUnitText.partialStr,x:this.arrayUnitText.x(),y:this.arrayUnitText.y()-16,opacity:0}))}draw(){return this.arrayUnit.arrow&&(this.arrayUnitArrowAnimation=new I(this.arrayUnit.arrow,{opacity:0,y:-16})),(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.asgnItemAnimation.draw(),this.arrayItemAnimation.draw(),this.arrayArrowAnimation.draw(),this.indexItemAnimation.draw(),this.valueArrowAnimation?.draw(),this.resultAnimation.draw(),this.resultArrowAnimation?.draw(),this.arrayUnitTextAnimation?.draw(),this.arrayUnitArrowAnimation?.draw()]},u.key--)}async animate(){this.resultItem.ref.current?.hide(),this.resultItem.arrow?.ref.current?.hide(),this.arrayUnitText?.ref.current?.hide(),this.arrayUnit.arrow?.ref.current?.hide();let e=(0,d.q_)(this.asgnItem.text)+2*l.V.ControlItemTextPadding,t={duration:3/4};await Promise.all([this.arrayArrowAnimation.animateTo({opacity:0},{duration:.5}),this.valueArrowAnimation?.animateTo({opacity:0},{duration:.5}),this.asgnItemAnimation.animateRectTo({stroke:(0,d.t6)()}),this.asgnItemAnimation.animateTo({x:this.resultItem.x()-(this.resultItemIsFirst?e:0),y:this.resultItem.y()+(this.resultItemIsFirst?0:this.resultItem.height()),width:e}),this.arrayItemAnimation.animateRectTo({stroke:(0,d.t6)()}),this.arrayItemAnimation.animateTo({opacity:0},t),this.indexItemAnimation.animateRectTo({stroke:(0,d.t6)()}),this.indexItemAnimation.animateTo({x:this.resultItem.x()}),this.indexItemAnimation.animateTo({opacity:0},t),this.resultAnimation.animateRectTo({stroke:(0,d.t6)()}),this.resultAnimation.animateTo({x:this.resultItem.x()}),this.resultArrowAnimation?.animateTo({opacity:1},{duration:.5,delay:.75})]),this.resultItem.ref.current?.show(),this.resultItem.arrow?.ref.current?.show(),this.resultArrowAnimation?.destroy();let a={x:this.arrayUnit.x()+this.arrayUnit.width()/2-this.resultItem.width()/2,y:this.arrayUnit.y()-this.resultItem.height()-8},s={y:this.arrayUnit.y()+this.arrayUnit.height()/2-this.resultItem.height()/2};await Promise.all([this.asgnItemAnimation.animateTo({x:a.x-e,y:a.y},{duration:1.2}),this.resultAnimation.animateTo(a,{duration:1.2})]),await Promise.all([this.asgnItemAnimation.animateTo(s),this.asgnItemAnimation.animateTo({opacity:0},t),this.resultAnimation.animateTo(s),this.resultAnimation.animateTo({opacity:0},t),this.arrayUnitTextAnimation?.animateTo({y:this.arrayUnitText.y()}),this.arrayUnitTextAnimation?.animateTo({opacity:1},{...t,delay:1/4}),this.arrayUnitArrowAnimation?.animateTo({y:0}),this.arrayUnitArrowAnimation?.animateTo({opacity:1},{...t,delay:1/4})]),this.destroy()}destroy(){this.ref.current?.hide(),this.resultItem.ref.current?.show(),this.resultItem.arrow?.ref.current?.show(),this.arrayUnitText?.ref.current?.show(),this.arrayUnit.arrow?.ref.current?.show(),this.asgnItemAnimation.destroy(),this.arrayItemAnimation.destroy(),this.arrayArrowAnimation.destroy(),this.indexItemAnimation.destroy(),this.valueArrowAnimation?.destroy(),this.resultAnimation.destroy(),this.resultArrowAnimation?.destroy(),this.arrayUnitTextAnimation?.destroy(),this.arrayUnitArrowAnimation?.destroy()}}class P extends u{controlInstrItem;stashItem;resultItems;currCallInstrItem;controlInstrAnimation;stashItemAnimation;resultAnimations;arrowAnimation;currCallInstrAnimation;endX;constructor(e,t,a,s){super(),this.controlInstrItem=e,this.stashItem=t,this.resultItems=a,this.currCallInstrItem=s,this.endX=t.x()+t.width(),this.controlInstrAnimation=new E(e.text,f(e),{rectProps:{stroke:(0,d.NP)()}}),this.stashItemAnimation=new E(t.text,f(t),{rectProps:{stroke:(0,d.wp)()}}),this.currCallInstrAnimation=new E(this.currCallInstrItem.text,f(this.currCallInstrItem),{rectProps:{stroke:(0,d.NP)()}}),this.resultAnimations=a.map(e=>new E(e.text,{...f(e),opacity:0})),t.arrow&&(this.arrowAnimation=new I(t.arrow,{opacity:0}))}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.controlInstrAnimation.draw(),this.stashItemAnimation.draw(),this.currCallInstrAnimation.draw(),this.resultAnimations.map(e=>e.draw()),this.arrowAnimation?.draw()]},u.key--)}async animate(e){this.resultItems?.map(e=>e.ref.current?.hide()),this.resultItems?.map(e=>e.arrow?.ref.current?.hide());let t=(0,d.q_)(this.controlInstrItem.text)+2*l.V.ControlItemTextPadding,a=e=>this.resultItems[e]?.x()??this.stashItem.x(),s=this.resultItems[0]?.y()??this.stashItem.y(),i=a(0),n=(e?.duration??1)*3/4,r=(e?.delay??0)+(e?.duration??1)/4;await Promise.all([...this.resultAnimations.flatMap(e=>[e.animateTo({x:i+(this.endX-i)/2-this.resultItems[0]?.width()/2},{duration:0})]),this.controlInstrAnimation.animateRectTo({stroke:(0,d.t6)()},e),this.controlInstrAnimation.animateTo({x:i,y:s+(this.resultItems[0]?.height()??this.stashItem.height()),width:t},e),this.stashItemAnimation.animateRectTo({stroke:(0,d.wp)()},e)]),e={...e,delay:0},await Promise.all([this.controlInstrAnimation.animateTo({x:a(0),y:s},e),this.controlInstrAnimation.animateTo({opacity:0},{...e,duration:n}),this.stashItemAnimation.animateTo({x:a(0)},e),this.stashItemAnimation.animateTo({opacity:0},{...e,duration:n}),...this.resultAnimations.flatMap((t,s)=>[t.animateTo({x:a(s)},e),t.animateRectTo({stroke:(0,d.wp)()},e),t.animateTo({opacity:1},{...e,duration:n,delay:r})])]),this.destroy()}destroy(){this.ref.current?.hide(),this.resultItems.map(e=>e.ref.current?.show()),this.resultItems.map(e=>e.arrow?.ref.current?.show()),this.controlInstrAnimation.destroy(),this.stashItemAnimation.destroy(),this.resultAnimations.map(e=>e.destroy()),this.arrowAnimation?.destroy()}}class R extends u{asgnItem;stashItem;frame;binding;asgnItemAnimation;stashItemAnimation;bindingAnimation;arrowAnimation;stashItemIsFirst;constructor(e,t,a,s){super(),this.asgnItem=e,this.stashItem=t,this.frame=a,this.binding=s,this.stashItemIsFirst=0===t.index,this.asgnItemAnimation=new E(e.text,f(e),{rectProps:{stroke:(0,d.NP)()}}),this.stashItemAnimation=new E(t.text,f(t)),this.binding.value instanceof k.l&&this.binding.value.text instanceof j.E&&(this.bindingAnimation=new T({...j.K,...f(this.binding.value.text),text:this.binding.value.text.partialStr,x:this.binding.value.text.x()-16,opacity:0}))}draw(){return this.binding.arrow&&(this.arrowAnimation=new I(this.binding.arrow,{x:-16,opacity:0})),(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.asgnItemAnimation.draw(),this.stashItemAnimation.draw(),this.bindingAnimation?.draw(),this.arrowAnimation?.draw()]},u.key--)}async animate(){let e=(0,d.q_)(this.asgnItem.text)+2*l.V.ControlItemTextPadding;this.bindingAnimation&&this.binding.value.ref.current?.hide(),this.binding.arrow?.ref.current?.hide(),await Promise.all([this.asgnItemAnimation.animateRectTo({stroke:(0,d.t6)()}),this.asgnItemAnimation.animateTo({x:this.stashItem.x()-(this.stashItemIsFirst?e:0),y:this.stashItem.y()+(this.stashItemIsFirst?0:this.stashItem.height()),width:e})]),await Promise.all([this.asgnItemAnimation.animateTo({x:this.frame.x()-this.asgnItemAnimation.width()-this.stashItemAnimation.width(),y:this.bindingAnimation?this.binding.y()+this.binding.height()/2-this.asgnItemAnimation.height()/2:this.binding.y()},{duration:1.2}),this.stashItemAnimation.animateTo({x:this.frame.x()-this.stashItem.width(),y:this.bindingAnimation?this.binding.y()+this.binding.height()/2-this.asgnItemAnimation.height()/2:this.binding.y()},{duration:1.2})]),await Promise.all([this.asgnItemAnimation.animateTo({x:this.binding.x()-this.asgnItemAnimation.width(),opacity:0}),this.stashItemAnimation.animateTo({x:this.binding.x(),opacity:0}),this.bindingAnimation?.animateTo({x:this.binding.value.text.x(),opacity:1},{duration:.5,delay:.5}),this.arrowAnimation?.animateTo({x:0,opacity:1},{duration:.5,delay:.5})]),this.destroy()}destroy(){this.ref.current?.hide(),this.binding.value.ref.current?.show(),this.binding.arrow?.ref.current?.show(),this.asgnItemAnimation.destroy(),this.stashItemAnimation.destroy(),this.bindingAnimation?.destroy(),this.arrowAnimation?.destroy()}}class L extends u{binaryOperator;rightOperand;result;binaryOperatorAnimation;leftOperandAnimation;rightOperandAnimation;resultAnimation;constructor(e,t,a,s){super(),this.binaryOperator=e,this.rightOperand=a,this.result=s,this.binaryOperatorAnimation=new E(e.text,f(e),{rectProps:{stroke:(0,d.NP)()}}),this.rightOperandAnimation=new E(a.text,f(a),{rectProps:{stroke:(0,d.wp)()}}),this.leftOperandAnimation=new E(t.text,f(t),{rectProps:{stroke:(0,d.wp)()}}),this.resultAnimation=new E(s.text,{...f(s),x:a.x(),opacity:0})}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.binaryOperatorAnimation.draw(),this.leftOperandAnimation.draw(),this.rightOperandAnimation.draw(),this.resultAnimation.draw()]},u.key--)}async animate(){this.result.ref.current?.hide();let e=f(this.rightOperand),t=f(this.result),a=(0,d.q_)(this.binaryOperator.text)+2*l.V.ControlItemTextPadding,s=3/4;await Promise.all([this.binaryOperatorAnimation.animateRectTo({stroke:(0,d.t6)()}),this.binaryOperatorAnimation.animateTo({...e,width:a}),this.leftOperandAnimation.animateRectTo({stroke:(0,d.t6)()}),this.rightOperandAnimation.animateRectTo({stroke:(0,d.t6)()}),this.rightOperandAnimation.animateTo({...e,x:e.x+a})]),await Promise.all([this.binaryOperatorAnimation.animateTo(t),this.binaryOperatorAnimation.animateTo({opacity:0},{duration:s}),this.leftOperandAnimation.animateTo({opacity:0},{duration:s}),this.rightOperandAnimation.animateTo(t),this.rightOperandAnimation.animateTo({opacity:0},{duration:s}),this.resultAnimation.animateTo(t),this.resultAnimation.animateTo({opacity:1},{duration:s,delay:1/4}),(0,d.XF)(this.result.index)&&this.resultAnimation.animateRectTo({stroke:(0,d.wp)()})]),this.destroy()}destroy(){this.ref.current?.hide(),this.result.ref.current?.show(),this.binaryOperatorAnimation.destroy(),this.leftOperandAnimation.destroy(),this.rightOperandAnimation.destroy(),this.resultAnimation.destroy()}}class M extends u{initialItem;targetItems;initialItemAnimation;targetItemAnimations;constructor(e,t){super(),this.initialItem=e,this.targetItems=t,this.targetItems=[...t],this.targetItems.sort((e,t)=>e.y()-t.y());const a=f(this.initialItem);this.initialItemAnimation=new E(e.text,a,{rectProps:{stroke:(0,d.NP)()}}),this.targetItemAnimations=this.targetItems.map((e,t)=>new E(e.text,{...a,y:a.y+t/this.targetItems.length*a.height,height:e.height(),opacity:0}))}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.initialItemAnimation.draw(),this.targetItemAnimations.map(e=>e.draw())]},u.key--)}async animate(e){this.targetItems.forEach(e=>e.ref.current?.hide());let t=this.targetItems.reduce((e,t)=>e+t.height(),0),a=this.initialItem.y()+(t-this.initialItem.height())/2,s=(e?.duration??1)*3/4,i=(e?.delay??0)+(e?.duration??1)/4;await Promise.all([this.initialItemAnimation.animateRectTo({height:t,stroke:(0,d.t6)()},e),this.initialItemAnimation.animateTextTo({y:a},e),this.initialItemAnimation.animateTo({opacity:0},{...e,duration:s}),...this.targetItemAnimations.flatMap((t,a)=>[t.animateTo({...f(this.targetItems[a])},e),t.animateTo({opacity:1},{...e,duration:s,delay:i})]),this.targetItemAnimations.at(-1)?.animateRectTo({stroke:(0,d.NP)()},e)]),this.destroy()}destroy(){this.ref.current?.hide(),this.targetItems.forEach(e=>e.ref.current?.show()),this.initialItemAnimation.destroy(),this.targetItemAnimations.forEach(e=>e.destroy())}}class D extends u{branchItem;resultItems;booleanItemAnimation;controlExpandAnimation;constructor(e,t,a){super(),this.branchItem=e,this.resultItems=a,this.booleanItemAnimation=new E(t.text,f(t),{rectProps:{stroke:(0,d.wp)()}}),this.controlExpandAnimation=new M(e,a)}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.controlExpandAnimation.draw(),this.booleanItemAnimation.draw()]},u.key--)}async animate(){this.resultItems.forEach(e=>e.ref.current?.hide()),await Promise.all([this.booleanItemAnimation.animateRectTo({stroke:(0,d.t6)()}),this.booleanItemAnimation.animateTo({x:this.branchItem.x()+this.branchItem.width(),y:this.branchItem.y()})]),await Promise.all([this.booleanItemAnimation.animateTo({x:this.branchItem.x()}),this.booleanItemAnimation.animateTo({opacity:0},{duration:3/4}),this.controlExpandAnimation.animate()]),this.destroy()}destroy(){this.ref.current?.hide(),this.booleanItemAnimation.destroy(),this.controlExpandAnimation.destroy()}}class O extends u{stashItem;borderRectAnimation;controlTextAnimation;stackTextAnimation;arrowAnimation;textChanged;constructor(e,t){super(),this.stashItem=t;const a=f(e);this.borderRectAnimation=new w({...a,stroke:(0,d.NP)()}),this.controlTextAnimation=new T({...a,text:e.text,padding:l.V.ControlItemTextPadding}),this.textChanged=e.text!==t.text,this.textChanged&&(this.stackTextAnimation=new T({...a,text:t.text,padding:l.V.StashItemTextPadding,opacity:0})),this.stashItem.arrow&&(this.arrowAnimation=new I(this.stashItem.arrow,{opacity:0}))}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.borderRectAnimation.draw(),this.controlTextAnimation.draw(),this.stackTextAnimation?.draw(),this.arrowAnimation?.draw()]},u.key--)}async animate(){this.stashItem.ref.current?.hide(),this.stashItem.arrow?.ref.current.hide();let e=f(this.stashItem);await Promise.all([this.borderRectAnimation.animateTo({...e,stroke:(0,d.XF)(this.stashItem.index)?(0,d.wp)():(0,d.t6)()}),this.controlTextAnimation.animateTo(e),...this.textChanged?[this.controlTextAnimation.animateTo({opacity:0},{duration:.5,delay:.2}),this.stackTextAnimation.animateTo(e),this.stackTextAnimation.animateTo({opacity:1},{duration:.5,delay:.5})]:[],this.arrowAnimation?.animateTo({opacity:1},{delay:1})]),this.destroy()}destroy(){this.ref.current?.hide(),this.stashItem.ref.current?.show(),this.stashItem.arrow?.ref.current?.show(),this.borderRectAnimation.destroy(),this.controlTextAnimation.destroy(),this.stackTextAnimation?.destroy(),this.arrowAnimation?.destroy()}}class U extends u{currFrame;frameAnimation;tempRect;constructor(e,t){super(),this.currFrame=t;const a=f(t);this.tempRect=new w({...a,cornerRadius:m.T.FrameCornerRadius});const s=f(e);this.frameAnimation=new w({...s,cornerRadius:m.T.FrameCornerRadius,stroke:(0,d.NP)()})}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.tempRect.draw(),this.frameAnimation.draw()]},u.key--)}async animate(){let e=f(this.frameAnimation),t=this.currFrame.ref.current?.strokeWidth?.()??2;await this.frameAnimation.animateTo({x:e.x-2,y:e.y-2,height:e.height+4,width:e.width+4,strokeWidth:t+4});let a=f(this.currFrame);await this.frameAnimation.animateTo({x:a.x-2,y:a.y-2,height:a.height+4,width:a.width+4},{duration:1.2}),this.tempRect.ref.current?.hide(),await this.frameAnimation.animateTo({...a,strokeWidth:t},{duration:1}),this.destroy()}destroy(){this.ref.current?.hide(),this.frameAnimation.destroy(),this.tempRect.destroy()}}var F=a(94992),G=a(50073);class z extends u{origin;frame;controlTextAnimation;borderAnimation;frameArrowAnimation;frameNameAnimation;frameKeyAnimations;frameValues;frameValueAnimations;frameArrows;frameArrowAnimations;variadicArray;constructor(e,t){super(),this.origin=e,this.frame=t;const a=t.x()-e.x(),s=t.y()-e.y();this.controlTextAnimation=new T({...f(e),text:e.text,padding:e instanceof F.k?l.V.ControlItemTextPadding:l.V.StashItemTextPadding,opacity:+(e instanceof F.k)}),this.borderAnimation=new w({...f(e),stroke:e instanceof F.k?(0,d.NP)():(0,d.t6)(),opacity:+(e instanceof F.k)}),t.arrow&&(this.frameArrowAnimation=new I(t.arrow,{opacity:0})),this.frameNameAnimation=new T({text:t.name.partialStr,...g(t.name),x:t.name.x()-a,y:t.name.y()-s,opacity:0}),this.frameKeyAnimations=t.bindings.map(e=>new T({text:e.keyString,...g(e.key),x:e.key.x()-a,y:e.key.y()-s,opacity:0})),this.frameValues=t.bindings.flatMap(e=>e.value instanceof k.l?e.value:[]),this.frameValueAnimations=this.frameValues.map(e=>new T({text:e.text.partialStr,...g(e),x:e.x()-a,y:e.y()-s,opacity:0})),this.frameArrows=this.frameArrowAnimations=[]}draw(){let e=this.frame.x()-this.origin.x(),t=this.frame.y()-this.origin.y();return this.frameArrows=this.frame.bindings.flatMap(e=>(e.value instanceof G.v&&(0,d.Q3)(e.value.data.environment,this.frame.environment)&&(this.variadicArray=e.value),e.arrow??[])),this.frameArrowAnimations=this.frameArrows.map(a=>new I(a,{x:-e,y:-t,opacity:0})),(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.controlTextAnimation.draw(),this.borderAnimation.draw(),this.frameArrowAnimation?.draw(),this.frameNameAnimation.draw(),this.frameKeyAnimations.map(e=>e.draw()),this.frameValueAnimations.map(e=>e.draw()),this.frameArrowAnimations.map(e=>e.draw())]},u.key--)}async animate(e){this.frame.ref.current?.hide();let t=e?.duration??1.2,a={...e,duration:t},s={...e,duration:3*t/4},i={duration:3*t/4,delay:t/4+(e?.delay??0),easing:e?.easing},n=f(this.frame),r=this.frameArrowAnimation?.animateTo({opacity:1},{delay:t+(e?.delay??0)});await Promise.all([this.controlTextAnimation.animateTo({opacity:0},s),this.controlTextAnimation.animateTo(y(this.frame),a),this.borderAnimation.animateTo({...n,stroke:(0,d.NP)(),opacity:1,cornerRadius:m.T.FrameCornerRadius},a),this.frameNameAnimation.animateTo(f(this.frame.name),a),...this.frameKeyAnimations.flatMap((e,t)=>[e.animateTo(y(this.frame.bindings[t].key),a),e.animateTo({opacity:1},i)]),...this.frameValueAnimations.flatMap((e,t)=>[e.animateTo(y(this.frameValues[t]),a),e.animateTo({opacity:1},i)]),...this.frameArrowAnimations.flatMap(e=>[e.animateTo({x:0,y:0},a),e.animateTo({opacity:1},i)]),this.frameNameAnimation.animateTo({opacity:1},i)]),this.variadicArray?.ref.current?.opacity(0),this.frame.arrow?.ref.current?.hide(),this.frame.ref.current?.show(),this.variadicArray?.ref.current?.to({opacity:1,duration:q.defaultDuration/1e3}),await r,this.destroy()}destroy(){this.ref.current?.hide(),this.frame.ref.current?.show(),this.frame.arrow?.ref.current?.show(),this.controlTextAnimation.destroy(),this.borderAnimation.destroy(),this.frameArrowAnimation?.destroy(),this.frameNameAnimation.destroy(),this.frameKeyAnimations.forEach(e=>e.destroy()),this.frameValueAnimations.forEach(e=>e.destroy()),this.frameArrowAnimations.forEach(e=>e.destroy())}}class H extends u{callInstrItem;newControlItems;closureStashItem;functionFrame;callInstrAnimation;stashItemAnimations;stashArrowAnimations;newControlItemAnimations;envArrowAnimation;frameCreationAnimation;isFirstStashItem;constructor(e,t,a,s,i){super(),this.callInstrItem=e,this.newControlItems=t,this.closureStashItem=a,this.functionFrame=i;const n=y(a);this.isFirstStashItem=0===a.index,this.callInstrAnimation=new E(e.text,f(e),{rectProps:{stroke:(0,d.NP)()}}),this.stashItemAnimations=[new E(a.text,f(a),{rectProps:{stroke:(0,d.wp)()}}),...s.map(e=>new E(e.text,f(e),{rectProps:{stroke:(0,d.wp)()}}))],this.stashArrowAnimations=[new I(a.arrow),...s.flatMap(e=>e.arrow?new I(e.arrow):[])],this.newControlItemAnimations=t.map(e=>new E(e.text,{...n,opacity:0})),this.newControlItems[0].arrow&&(this.envArrowAnimation=new I(this.newControlItems[0].arrow,{opacity:0})),i&&(this.frameCreationAnimation=new z(a,i))}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.callInstrAnimation.draw(),this.stashItemAnimations.map(e=>e.draw()),this.stashArrowAnimations.map(e=>e.draw()),this.newControlItemAnimations.map(e=>e.draw()),this.envArrowAnimation?.draw(),this.frameCreationAnimation?.draw()]},u.key--)}async animate(){this.newControlItems.forEach(e=>e.ref.current?.hide()),this.newControlItems[0].arrow?.ref.current?.hide(),this.functionFrame?.ref.current?.hide();let e=(0,d.q_)(this.callInstrItem.text)+2*l.V.ControlItemTextPadding;await Promise.all([this.callInstrAnimation.animateRectTo({stroke:(0,d.t6)()}),this.callInstrAnimation.animateTo({x:this.closureStashItem.x()-(this.isFirstStashItem?e:0),y:this.closureStashItem.y()+(this.isFirstStashItem?0:this.closureStashItem.height()),width:e}),...this.stashItemAnimations.map(e=>e.animateRectTo({stroke:(0,d.t6)()}))]);let t={x:this.functionFrame?.x()??this.newControlItems[0].x(),y:this.functionFrame?.y()??this.newControlItems[0].y()},a={duration:1.2},s=9/8,i=3/8;await Promise.all([this.stashArrowAnimations.map(e=>e.animateTo({opacity:0},{duration:.5})),this.callInstrAnimation.animateTo(t,a),this.callInstrAnimation.animateTo({opacity:0},{...a,duration:s}),...this.stashItemAnimations.flatMap(e=>[e.animateTo(t,a),e.animateTo({opacity:0},{...a,duration:s})]),...this.newControlItemAnimations.flatMap((e,t)=>[e.animateTo(f(this.newControlItems[t]),a),e.animateTo({opacity:1},{...a,duration:s,delay:i})]),this.newControlItemAnimations.at(-1).animateRectTo({stroke:(0,d.NP)()},a),this.frameCreationAnimation?.animate(a),this.envArrowAnimation?.animateTo({opacity:1},{delay:a.duration})]),this.destroy()}destroy(){this.ref.current?.hide(),this.newControlItems.forEach(e=>e.ref.current?.show()),this.newControlItems[0].arrow?.ref.current?.show(),this.functionFrame?.ref.current?.show(),this.callInstrAnimation.destroy(),this.stashItemAnimations.forEach(e=>e.destroy()),this.stashArrowAnimations.forEach(e=>e.destroy()),this.newControlItemAnimations.forEach(e=>e.destroy()),this.frameCreationAnimation?.destroy()}}class B extends u{controlInstrItem;stashItems;resultItem;controlInstrAnimation;stashItemAnimations;resultAnimation;arrowAnimation;endX;resultItemIsFirst;constructor(e,t,a){super(),this.controlInstrItem=e,this.stashItems=t,this.resultItem=a,this.resultItemIsFirst=(a?.index??t[0].index)===0,this.endX=t.at(-1).x()+t.at(-1).width(),this.controlInstrAnimation=new E(e.text,f(e),{rectProps:{stroke:(0,d.NP)()}}),this.stashItemAnimations=t.map(e=>new E(e.text,f(e),{rectProps:{stroke:(0,d.XF)(e.index)?(0,d.wp)():(0,d.t6)()}})),this.resultAnimation=new E(a.text,{...f(a),opacity:0}),a.arrow&&(this.arrowAnimation=new I(a.arrow,{opacity:0}))}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.controlInstrAnimation.draw(),this.stashItemAnimations.map(e=>e.draw()),this.resultAnimation.draw(),this.arrowAnimation?.draw()]},u.key--)}async animate(e){this.resultItem?.ref.current?.hide(),this.resultItem?.arrow?.ref.current?.hide();let t=(0,d.q_)(this.controlInstrItem.text)+2*l.V.ControlItemTextPadding,a=this.resultItem?.x()??this.stashItems[0].x(),s=this.resultItem?.y()??this.stashItems[0].y(),i=a-(this.resultItemIsFirst?t:0),n=(e?.duration??1)*3/4,r=(e?.delay??0)+(e?.duration??1)/4;await Promise.all([this.resultAnimation.animateTo({x:i+(this.endX-i)/2-this.resultItem.width()/2},{duration:0}),this.controlInstrAnimation.animateRectTo({stroke:(0,d.t6)()},e),this.controlInstrAnimation.animateTo({x:i,y:s+(this.resultItemIsFirst?0:this.resultItem?.height()??this.stashItems[0].height()),width:t},e),...this.stashItemAnimations.map(t=>t.animateRectTo({stroke:(0,d.t6)()},e))]),e={...e,delay:0},await Promise.all([this.controlInstrAnimation.animateTo({x:a,y:s},e),this.controlInstrAnimation.animateTo({opacity:0},{...e,duration:n}),...this.stashItemAnimations.flatMap(t=>[t.animateTo({x:a},e),t.animateTo({opacity:0},{...e,duration:n})]),this.resultAnimation?.animateTo({x:a},e),(0,d.XF)(this.resultItem.index)&&this.resultAnimation?.animateRectTo({stroke:(0,d.wp)()},e),this.resultAnimation?.animateTo({opacity:1},{...e,duration:n,delay:r}),this.arrowAnimation?.animateTo({opacity:1},{...e,delay:e?.duration??1})]),this.destroy()}destroy(){this.ref.current?.hide(),this.resultItem.ref.current?.show(),this.resultItem.arrow?.ref.current?.show(),this.controlInstrAnimation.destroy(),this.stashItemAnimations.map(e=>e.destroy()),this.resultAnimation.destroy(),this.arrowAnimation?.destroy()}}class V extends u{nameItem;stashItem;frame;binding;nameItemAnimation;stashItemAnimation;arrowAnimation;constructor(e,t,a,s){super(),this.nameItem=e,this.stashItem=t,this.frame=a,this.binding=s,this.nameItemAnimation=new E(e.text,f(e),{rectProps:{stroke:(0,d.NP)()}}),this.stashItemAnimation=new E(t.text,{...f(t),x:a.x(),y:s.key.y()+s.key.height()/2-t.height()/2,opacity:0}),t.arrow&&(this.arrowAnimation=new I(t.arrow,{opacity:0}))}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.nameItemAnimation.draw(),this.stashItemAnimation.draw(),this.arrowAnimation?.draw()]},u.key--)}async animate(){this.stashItem.ref.current?.hide(),this.stashItem.arrow&&this.stashItem.arrow.ref.current?.hide();let e=(0,d.q_)(this.nameItem.text)+2*l.V.ControlItemTextPadding;await Promise.all([this.nameItemAnimation.animateRectTo({stroke:(0,d.t6)()},{duration:1.2}),this.nameItemAnimation.animateTo({x:this.frame.x()-e,y:this.binding.key.y()+this.binding.key.height()/2-this.nameItem.height()/2,width:e},{duration:1.2})]),await Promise.all([this.nameItemAnimation.animateTo({x:this.frame.x()-this.nameItemAnimation.width()-this.stashItemAnimation.width()}),this.stashItemAnimation.animateTo({x:this.frame.x()-this.stashItem.width(),opacity:1})]),await Promise.all([this.nameItemAnimation.animateTo({x:this.stashItem.x()-this.nameItemAnimation.width(),y:this.stashItem.y(),opacity:0},{duration:1.2}),this.stashItemAnimation.animateTo({x:this.stashItem.x(),y:this.stashItem.y()},{duration:1.2}),(0,d.XF)(this.stashItem.index)&&this.stashItemAnimation.animateRectTo({stroke:(0,d.wp)()},{duration:1.2}),this.arrowAnimation?.animateTo({opacity:1},{delay:1.2})]),this.destroy()}destroy(){this.ref.current?.hide(),this.stashItem.ref.current?.show(),this.stashItem.arrow?.ref.current?.show(),this.nameItemAnimation.destroy(),this.stashItemAnimation.destroy()}}class J extends u{stashItem;undefinedStashItem;popItemAnimation;stashItemAnimation;undefinedStashItemAnimation;constructor(e,t,a){super(),this.stashItem=t,this.undefinedStashItem=a;const s=f(t);this.popItemAnimation=new E(e.text,f(e),{rectProps:{stroke:(0,d.NP)()}}),this.stashItemAnimation=new E(t.text,{...s,x:s.x+s.width/2,offsetX:s.width/2,y:s.y+s.height/2,offsetY:s.height/2},{rectProps:{stroke:(0,d.wp)()}}),a&&(this.undefinedStashItemAnimation=new E(a.text,{...f(a),opacity:0}))}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.popItemAnimation.draw(),this.stashItemAnimation.draw(),this.undefinedStashItemAnimation?.draw()]},u.key--)}async animate(){this.undefinedStashItem?.ref.current?.hide(),await Promise.all([this.popItemAnimation.animateRectTo({stroke:(0,d.t6)()},{duration:.8}),this.popItemAnimation.animateTo({...f(this.stashItem),opacity:0}),this.stashItemAnimation.animateRectTo({stroke:(0,d.t6)()},{delay:.3}),this.stashItemAnimation.animateTo({scaleX:.6,scaleY:.6},{delay:.3})]),await Promise.all([this.stashItemAnimation.animateTo({scaleX:1.1,scaleY:1.1,opacity:0},{duration:.5,easing:i.F.StrongEaseOut}),this.undefinedStashItemAnimation?.animateTo({opacity:1},{delay:.3})]),this.destroy()}destroy(){this.ref.current?.hide(),this.undefinedStashItem?.ref?.current?.show(),this.popItemAnimation.destroy(),this.stashItemAnimation.destroy()}}class W extends u{operator;operand;result;operatorAnimation;operandAnimation;resultAnimation;constructor(e,t,a){super(),this.operator=e,this.operand=t,this.result=a,this.operatorAnimation=new E(e.text,f(e),{rectProps:{stroke:(0,d.NP)()}}),this.operandAnimation=new E(t.text,f(t),{rectProps:{stroke:(0,d.wp)()}}),this.resultAnimation=new E(a.text,{...f(a),x:t.x()+t.width()/2,opacity:0})}draw(){return(0,r.jsxs)(o.YJ,{ref:this.ref,children:[this.operatorAnimation.draw(),this.operandAnimation.draw(),this.resultAnimation.draw()]},u.key--)}async animate(){this.result.ref.current?.hide();let e=(0,d.q_)(this.operator.text)+2*l.V.ControlItemTextPadding;await Promise.all([this.resultAnimation.animateTo({x:this.operand.x()+(this.operand.x()+e+this.operand.width())/2+this.result.width()/2},{duration:0}),this.operatorAnimation.animateRectTo({stroke:(0,d.t6)()}),this.operatorAnimation.animateTo({x:this.operand.x(),y:this.result.y(),width:e}),this.operandAnimation.animateRectTo({stroke:(0,d.t6)()}),this.operandAnimation.animateTo({x:this.operand.x()+e})]);let t=3/4;await Promise.all([this.operatorAnimation.animateTo({width:this.result.width()}),this.operatorAnimation.animateTo({opacity:0},{duration:t}),this.operandAnimation.animateTo({x:this.result.x(),width:this.result.width()}),this.operandAnimation.animateTo({opacity:0},{duration:t}),this.resultAnimation.animateTo({x:this.result.x()}),this.resultAnimation.animateTo({opacity:1},{duration:t,delay:1/4}),(0,d.XF)(this.result.index)&&this.resultAnimation.animateRectTo({stroke:(0,d.wp)()})]),this.destroy()}destroy(){this.ref.current?.hide(),this.result.ref.current?.show(),this.operatorAnimation.destroy(),this.operandAnimation.destroy(),this.resultAnimation.destroy()}}var Y=a(70943),X=a(53351),$=a(96702),Z=a(32838);class q{static animations=[];static defaultDuration=300;static defaultEasing=i.F.StrongEaseInOut;static animationEnabled=!1;static currentFrame;static previousFrame;static layerRef=n.createRef();static getLayer(){return this.layerRef.current}static enableAnimations(){q.animationEnabled=!0}static disableAnimations(){q.animationEnabled=!1}static setCurrentFrame(e){q.previousFrame=q.currentFrame??e,q.currentFrame=e}static clearAnimationComponents(){q.animations.forEach(e=>e.destroy()),q.animations.length=0}static getNewControlItems(){let e=$.P.controlComponent.control.size()-$.P.previousControlComponent.control.size()+1;return e<=0?[]:$.P.controlComponent.stackItemComponents.slice(-e)}static handleNode(e){let t=$.P.previousControlComponent.stackItemComponents.at(-1),a=$.P.stashComponent.stashItemComponents.at(-1);switch(e.type){case"Program":case"BlockStatement":case"StatementSequence":1===e.body.length?q.handleNode(e.body[0]):(q.animations.push(new M(t,q.getNewControlItems())),(0,d.Q3)(q.currentFrame.environment,q.previousFrame.environment)||q.animations.push(new z(t,q.currentFrame)));break;case"Literal":case"ArrowFunctionExpression":q.animations.push(new O(t,a));break;case"Identifier":"undefined"===e.name?q.animations.push(new O(t,a)):q.animations.push(new V(t,a,...b(q.currentFrame,e.name)));break;case"SpreadElement":case"AssignmentExpression":case"ArrayExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"ForStatement":case"IfStatement":case"MemberExpression":case"ReturnStatement":case"UnaryExpression":case"VariableDeclaration":case"FunctionDeclaration":case"WhileStatement":q.animations.push(new M(t,q.getNewControlItems()));break;case"ExpressionStatement":q.handleNode(e.expression)}}static updateAnimation(){if(q.clearAnimationComponents(),!$.P.previousControlComponent)return;let e=$.P.previousControlComponent.control.peek(),t=$.P.previousControlComponent.stackItemComponents.at(-1),a=$.P.stashComponent.stashItemComponents.at(-1);if(q.animationEnabled&&e&&t&&X.A.getControlStash())if((0,Y.Ll)(e))q.handleNode(e);else if((0,d.pU)(e))switch(e.instrType){case s.InstrType.APPLICATION:{let s=$.P.previousStashComponent.stashItemComponents.at(-e.numOfArgs-1),i=s.value;if((0,d.G6)(i)||(0,d.TJ)(i)){q.animations.push(new B(t,$.P.previousStashComponent.stashItemComponents.slice(-e.numOfArgs-1),a));break}let n=e.numOfArgs>0;q.animations.push(new H(t,q.getNewControlItems(),s,$.P.previousStashComponent.stashItemComponents.slice(-e.numOfArgs),n?q.currentFrame:void 0));break}case s.InstrType.ARRAY_ACCESS:q.animations.push(new _(t,$.P.previousStashComponent.stashItemComponents.at(-2),$.P.previousStashComponent.stashItemComponents.at(-1),$.P.stashComponent.stashItemComponents.at(-1)));break;case s.InstrType.ARRAY_ASSIGNMENT:{let e=$.P.previousStashComponent.stashItemComponents.at(-3);q.animations.push(new N(t,e,$.P.values.get(e.value.id),$.P.previousStashComponent.stashItemComponents.at(-2),$.P.previousStashComponent.stashItemComponents.at(-1),$.P.stashComponent.stashItemComponents.at(-1)));break}case s.InstrType.ARRAY_LITERAL:{let s=e.arity;q.animations.push(new B(t,$.P.previousStashComponent.stashItemComponents.slice(-s),a));break}case s.InstrType.ASSIGNMENT:q.animations.push(new R(t,a,...b(q.currentFrame,e.symbol)));break;case s.InstrType.BINARY_OP:q.animations.push(new L(t,$.P.previousStashComponent.stashItemComponents.at(-2),$.P.previousStashComponent.stashItemComponents.at(-1),a));break;case s.InstrType.BRANCH:case s.InstrType.FOR:case s.InstrType.WHILE:q.animations.push(new D(t,$.P.previousStashComponent.stashItemComponents.at(-1),q.getNewControlItems()));break;case s.InstrType.ENVIRONMENT:q.animations.push(new U(q.previousFrame,q.currentFrame));break;case s.InstrType.POP:{let e=$.P.stashComponent.stash.size(),s=$.P.previousStashComponent.stash.size(),i=1===e&&"undefined"===a.text&&e===s;q.animations.push(new J(t,$.P.previousStashComponent.stashItemComponents.at(-1),i?a:void 0))}break;case s.InstrType.UNARY_OP:q.animations.push(new W(t,$.P.previousStashComponent.stashItemComponents.at(-1),a));break;case s.InstrType.SPREAD:{let e,a=$.P.controlComponent.stackItemComponents,s=$.P.previousStashComponent.stashItemComponents.at(-1).arrow.target;for(let t=1;void 0!=a.at(-t);t++)if(a.at(-t)?.text.includes("call ")){e=a.at(-t);break}let i=0!==s.data.length?$.P.stashComponent.stashItemComponents.slice(-s.data.length):[];q.animations.push(new P(t,$.P.previousStashComponent.stashItemComponents.at(-1),i,e))}case s.InstrType.ARRAY_LENGTH:case s.InstrType.BREAK:case s.InstrType.BREAK_MARKER:case s.InstrType.CONTINUE_MARKER:case s.InstrType.MARKER:case s.InstrType.RESET:}else{if(null===e||"number"==typeof e||"boolean"==typeof e||"string"==typeof e)q.animations.push(new O(t,a));else if((0,Z.Bm)(e))q.animations.push(new O(t,a));else if((0,Z.Lv)(e)){let s=e[0];if((0,Z.Bm)(s))switch(s.sym){case"lambda":case"define":case"set!":case"if":case"begin":default:q.animations.push(new M(t,q.getNewControlItems()));break;case"quote":case"define-syntax":q.animations.push(new O(t,a))}else q.animations.push(new M(t,q.getNewControlItems()))}return}}static async playAnimation(){if(!q.animationEnabled)return void q.clearAnimationComponents();q.disableAnimations();let e=q.getLayer()?.getNativeCanvasElement();e&&(e.style.pointerEvents="none"),await Promise.all(this.animations.map(e=>e.animate()))}}},6203(e,t,a){"use strict";a.d(t,{$:()=>i,T:()=>s});let s=Object.freeze({CanvasMinHeight:800,CanvasMinWidth:800,CanvasPaddingX:30,CanvasPaddingY:30,LevelPaddingX:10,LevelPaddingY:10,FrameMinWidth:100,FramePaddingX:20,FramePaddingY:30,FrameMinGapX:80,FrameMarginX:30,FrameMarginY:10,FrameCornerRadius:3,FnRadius:15,FnInnerRadius:3,FnTooltipOpacity:.3,FnTooltipTextPadding:5,DataMinWidth:20,DataUnitWidth:40,DataUnitHeight:40,DataCornerRadius:3,DataHitStrokeWidth:5,TextPaddingX:10,TextPaddingY:30,TextMargin:5,TextMinWidth:30,FontFamily:"monospace, monospace",FontSize:15,FontStyle:"normal",FontVariant:"normal",ArrowHeadSize:10,ArrowStrokeWidth:1,ArrowHitStrokeWidth:5,ArrowHoveredStrokeWidth:2,ArrowHoveredHeadSize:15,ArrowCornerRadius:40,MaxExportWidth:2e4,MaxExportHeight:12e3,BgColor:"#2c3e50",PrintBgColor:"#fff",TextColor:"#999",TextColorFaded:"#455",PrintTextColor:"#333",PrintTextColorFaded:"#ccc",StrokeColor:"#999",StrokeColorFaded:"#455",PrintStrokeColor:"#777",PrintStrokeColorFaded:"#ccc",ArrowHighlightedColor:"#ffffff",ActiveColor:"#030fff",PrintActiveColor:"#3d5afe",DangerColor:"#ff1744",PrintDangerColor:"#f44336",HoverColor:"#25c225",PrintHoverColor:"#0dbf0d",HoverBgColor:"#000",PrintHoverBgColor:"#bbb",ConstantColon:":= ",VariableColon:": ",Ellipsis:"",UnassignedData:"",GlobalFrameDefaultText:":::pre-declared names::",GlobalEnvId:"-1"}),i=Object.freeze({preventDefault:!1})},94657(e,t,a){"use strict";a.d(t,{V:()=>s});let s=Object.freeze({ControlPosX:20,ControlPosY:5,StashPosX:140,StashPosY:5,ControlItemWidth:120,ControlItemTextPadding:10,ControlMaxTextWidth:95,ControlMaxTextHeight:125,ControlItemCornerRadius:5,StashItemHeight:15,StashItemTextPadding:10,StashMaxTextWidth:95,StashMaxTextHeight:30,StashItemCornerRadius:5,ShowMoreButtonWidth:80,ShowMoreButtonHeight:15,ShowMoreButtonX:40,ShowMoreButtonY:25,TooltipOpacity:.7,TooltipMargin:5,TooltipPadding:5,FontFamily:"monospace, monospace",FontSize:15,FontStyle:"normal",FontVariant:"normal",FontStyleHeader:"bold",FontSizeHeader:18})},96702(e,t,a){"use strict";a.d(t,{P:()=>_});var s=a(74848),i=a(96540),n=a(82819),r=a(38786),o=a(2494),l=a(2641),d=a(34970),c=a(35020),u=a(70943),h=a(53351),p=a(6203),m=a(94657),g=a(96349),y=a(55410);class f extends y.B{parentLevel;envTreeNodes;frames=[];constructor(e,t){super(),this.parentLevel=e,this.envTreeNodes=t,this._x=h.A.getControlStash()?m.V.ControlPosX+m.V.ControlItemWidth+p.T.CanvasPaddingX:p.T.CanvasPaddingX,this._y=p.T.CanvasPaddingY,h.A.getControlStash()&&!this.parentLevel&&(this._y+=m.V.StashItemHeight+3*m.V.ControlItemTextPadding),this.parentLevel&&(this._y+=this.parentLevel.height()+this.parentLevel.y());let a=null;t.forEach(e=>{e.level=this;let t=new g.w(e,a);e.frame=t,this.frames.push(t),a=t}),this._height=this.frames.reduce((e,t)=>Math.max(e,t.totalHeight),0);const s=this.frames[this.frames.length-1];this._width=s.x()+s.totalWidth-this.x()+p.T.LevelPaddingX}destroy(){this.ref.current.destroyChildren()}draw(){return(0,s.jsxs)(o.YJ,{ref:this.ref,children:[(0,i.createElement)(o.rw,{...p.$,x:this.x(),y:this.y(),width:this.width(),height:this.height(),key:_.key++,listening:!1}),this.frames.map(e=>e.draw())]},_.key++)}}var b=a(26607);class x extends y.B{stash;chapter;stashItemComponents;constructor(e,t){super(),this.stash=e,this.chapter=t,this._x=m.V.StashPosX,this._y=m.V.StashPosY,this._width=0,this._height=0,this.chapter=t;let a=0;const s=e=>{let t=(0,b.s6)(e,this._width,a,this.chapter);return this._width+=t.width(),this._height=Math.max(this._height,t.height()),a+=1,t};this.stashItemComponents=this.stash.getStack().slice(h.A.getStackTruncated()?-10:0).map(s)}draw(){return(0,s.jsx)(s.Fragment,{children:this.stashItemComponents.map(e=>e?.draw())})}}var v=a(50073),A=a(9274),T=a(81698),w=a(44889),S=a(4797),C=a(82021),I=a(15),E=a(32838);class _{static _width;static _height;static controlStashWidth;static controlStashHeight;static visibleHeight=window.innerHeight;static visibleWidth=window.innerWidth;static stageHeight=window.innerHeight;static stageWidth=window.innerWidth;static key=0;static scaleFactor=1.02;static globalEnvNode;static levels=[];static control;static stash;static controlComponent;static stashComponent;static previousControlComponent;static previousStashComponent;static liveEnvIDs=new Set;static liveObjectIDs=new Set;static values=new Map;static prevLayout;static currentDark;static currentLight;static currentStackDark;static currentStackTruncDark;static currentStackLight;static currentStackTruncLight;static stageRef=i.createRef();static invisiblePaddingVertical=300;static invisiblePaddingHorizontal=300;static scrollContainerRef=i.createRef();static updateDimensions(e,t){_.visibleWidth=e,_.visibleHeight=t,_._width=Math.max(_.visibleWidth,_.stageWidth),_._height=Math.max(_.visibleHeight,_.stageHeight),null!==_.stageRef.current&&(Math.min(_.width(),window.innerWidth)>_.stageWidth||Math.min(_.height(),window.innerHeight)>_.stageHeight)&&(_.currentLight=void 0,_.currentDark=void 0,_.stageWidth=Math.min(_.width(),window.innerWidth),_.stageHeight=Math.min(_.height(),window.innerHeight),_.stageRef.current.width(_.stageWidth),_.stageRef.current.height(_.stageHeight),h.A.redraw()),_.invisiblePaddingVertical=_.stageHeight>_.visibleHeight?(_.stageHeight-_.visibleHeight)/2:0,_.invisiblePaddingHorizontal=_.stageWidth>_.visibleWidth?(_.stageWidth-_.visibleWidth)/2:0;let a=this.scrollContainerRef.current;a&&(a.style.width=`${_.visibleWidth}px`,a.style.height=`${_.visibleHeight}px`)}static setContext(e,t,a,s=r.Chapter.SOURCE_4){_.currentLight=void 0,_.currentDark=void 0,_.currentStackDark=void 0,_.currentStackTruncDark=void 0,_.currentStackLight=void 0,_.currentStackTruncLight=void 0,_.values.clear(),d.Y.clearSelection(),_.key=0,_.globalEnvNode=(0,b._Z)(e).root,_.control=t,_.stash=a,_.removePreludeEnv(),_.removeUnreferencedGlobalFns();let i=(0,b.x8)({root:_.globalEnvNode});_.liveEnvIDs=i.liveEnvIds,_.liveObjectIDs=i.liveObjectIds,_.initializeGrid(),_.initializeControlStash(s),h.A.getControlStash()&&(_.controlStashHeight=Math.max(p.T.CanvasMinHeight,_.controlComponent.y()+_.controlComponent.height()+p.T.CanvasPaddingY),_.controlStashWidth=Math.max(p.T.CanvasMinWidth,_.controlComponent.x()+_.controlComponent.width()+p.T.CanvasPaddingX,_.stashComponent.x()+_.stashComponent.width()+p.T.CanvasPaddingX));let n=_.levels[_.levels.length-1];_._height=Math.max(_.visibleHeight,p.T.CanvasMinHeight,n.y()+n.height()+p.T.CanvasPaddingY,_.controlStashHeight??0),_._width=Math.max(_.visibleWidth,p.T.CanvasMinWidth,_.levels.reduce((e,t)=>Math.max(e,t.width()),0)+2*p.T.CanvasPaddingX+(h.A.getControlStash()?_.controlComponent.width()+2*p.T.CanvasPaddingX:0)),I.G.updateAnimation()}static initializeControlStash(e){_.previousControlComponent=_.controlComponent,_.previousStashComponent=_.stashComponent,this.controlComponent=new u.A(this.control,e),this.stashComponent=new x(this.stash,e)}static removePreludeEnv(){if(!_.globalEnvNode.children||0===_.globalEnvNode.children.length)return;let e=_.globalEnvNode.children[0],t=e.environment,a=_.globalEnvNode.environment;for(let[e,s]of Object.entries(t.head))delete t.head[e],a.head[e]=s,(0,b.TJ)(s)&&(0,b.Q3)(s.environment,t)&&Object.defineProperty(s,"environment",{value:a});for(let e of t.heap.getHeap()){if(Object.defineProperty(e,"environment",{value:a}),(0,b.Iy)(e))for(let s of e)(0,b.TJ)(s)&&(0,b.Q3)(s.environment,t)&&Object.defineProperty(s,"environment",{value:a});t.heap.move(e,a.heap)}_.globalEnvNode.resetChildren(e.children),_.globalEnvNode.children.forEach(e=>{e.environment.tail=a})}static removeUnreferencedGlobalFns(){let e=new Set,t=new Set,a=t=>{let i=Object.values(t.environment.head),n=(0,b._i)(t.environment.heap.getHeap(),new Set(i));for(let t of i)(0,b.O9)(t)?e.add(t):(0,b.Iy)(t)&&s(t);for(let e of n)(0,b.Iy)(e)&&s(e);t.children.forEach(a)},s=a=>{t.has(a)||(t.add(a),a.forEach(t=>{(0,b.O9)(t)?e.add(t):(0,b.Iy)(t)&&s(t)}))};for(let t of _.stash.getStack())(0,b.O9)(t)?e.add(t):(0,b.Iy)(t)&&s(t);for(let t of _.globalEnvNode.environment.heap.getHeap())(0,b.zO)(t)?e.add(t):(0,b.Iy)(t)&&s(t);_.globalEnvNode.children.forEach(a);let i=new Map(Object.entries(_.globalEnvNode.environment.head).map(([e,t])=>[t,e])),r=0,o={},l=new n.default;for(let t of e)(0,b.IM)(t)&&l.add(t),(0,b.O9)(t)&&(o[i.get(t)??`${r++}`]=t);for(let e of _.globalEnvNode.environment.heap.getHeap())(0,b.Iy)(e)&&l.add(e);_.globalEnvNode.environment.head={[p.T.GlobalFrameDefaultText]:Symbol(),...o},_.globalEnvNode.environment.heap=l}static width(){return _._width}static height(){return _._height}static initializeGrid(){let e;this.levels=[];let t=[_.globalEnvNode],a=null;for(;t.length>0;){e=new f(a,t),this.levels.push(e);let s=[];t.forEach(e=>{e.children.forEach(t=>{let a=(0,b.BC)(t);a.forEach(t=>t.parent=e),s.push(...a)})}),a=e,t=s}}static createValue(e,t){if((0,b.Yo)(e))return(0,b.vA)(t instanceof c.O),new C.B(t);{if((0,b.i3)(e)||(0,E.Bm)(e)||(0,E.HA)(e))return new S.l(e,t);let a=_.values.get((0,b.G6)(e)||(0,b.TJ)(e)?e:e.id);if(a)return a.addReference(t),a;if((0,b.Iy)(e))return new v.v(e,t);if((0,E.ks)(e))return new A.K(e,t);if((0,b.O9)(e))return(0,b.vA)(t instanceof c.O),new w.N(e,t);else if((0,b.zO)(e))return new T.E(e,t);return new S.l(null,t)}}static memoizeValue(e,t){(0,b.G6)(e)||(0,b.TJ)(e)?_.values.set(e,t):_.values.set(e.id,t)}static exportImage=()=>{let e,t=this.scrollContainerRef.current;t?.scrollTo({left:0,top:0}),_.handleScrollPosition(0,0),this.stageRef.current?.scale({x:1,y:1});let a=_.height(),s=_.width(),i=Math.ceil(s/p.T.MaxExportWidth),n=Math.ceil(a/p.T.MaxExportHeight);(e=t=>{if(t>=i*n)return;let r=t%i,o=Math.floor(t/i),l=document.createElement("a");l.style.display="none",l.href=this.stageRef.current?.toDataURL({x:r*p.T.MaxExportWidth+_.invisiblePaddingHorizontal,y:o*p.T.MaxExportHeight+_.invisiblePaddingVertical,width:Math.min(s-r*p.T.MaxExportWidth,p.T.MaxExportWidth),height:Math.min(a-o*p.T.MaxExportHeight,p.T.MaxExportHeight),mimeType:"image/jpeg"})??"",l.download=`diagram_${r}_${o}.jpg`,document.body.appendChild(l),l.click(),document.body.removeChild(l),setTimeout(function(){e(t+1)},1e3)})(0)};static handleScrollPosition(e,t){if(!this.stageRef.current)return;let a=e-_.invisiblePaddingHorizontal,s=t-_.invisiblePaddingVertical;this.stageRef.current.container().style.transform="translate("+a+"px, "+s+"px)",this.stageRef.current.x(-a),this.stageRef.current.y(-s)}static zoomStage(e,t=1){if("boolean"!=typeof e&&e.evt.preventDefault(),null!==_.stageRef.current){let a=_.stageRef.current,s=a.scaleX(),{x:i,y:n}=a.getPointerPosition()??{x:_.visibleWidth/2-a.x(),y:_.visibleHeight/2-a.y()},r={x:(i-a.x())/s,y:(n-a.y())/s},o="boolean"!=typeof e?e.evt.deltaY>0?-1:1:e?1:-1;if(o>0&&s<3||o<0&&s>.4){let l=o>0?s*_.scaleFactor**t:s/_.scaleFactor**t;if(a.scale({x:l,y:l}),"boolean"!=typeof e){let e={x:i-r.x*l,y:n-r.y*l};a.position(e),a.batchDraw()}}}}static draw(){if(0!==_.key)return _.prevLayout;{let e=(0,s.jsx)("div",{className:"sa-cse-machine","data-testid":"sa-cse-machine",children:(0,s.jsx)("div",{id:"scroll-container",ref:_.scrollContainerRef,onScroll:e=>_.handleScrollPosition(e.currentTarget.scrollLeft,e.currentTarget.scrollTop),style:{width:_.visibleWidth,height:_.visibleHeight,overflow:"hidden"},children:(0,s.jsx)("div",{id:"large-container",style:{width:_.width(),height:_.height(),overflow:"hidden",backgroundColor:(0,b.lG)()},children:(0,s.jsxs)(o.BI,{width:_.stageWidth,height:_.stageHeight,ref:_.stageRef,draggable:!0,onWheel:_.zoomStage,className:l.A.draggable,children:[(0,s.jsxs)(o.Wd,{children:[(0,i.createElement)(o.rw,{...p.$,x:0,y:0,width:_.width(),height:_.height(),fill:(0,b.lG)(),key:_.key++,listening:!1}),_.levels.map(e=>e.draw()),h.A.getControlStash()&&_.controlComponent.draw(),h.A.getControlStash()&&_.stashComponent.draw()]}),(0,s.jsx)(o.Wd,{ref:I.G.layerRef,listening:!1,children:h.A.getControlStash()&&I.G.animations.map(e=>e.draw())})]})})})});return _.prevLayout=e,h.A.getPrintableMode()?h.A.getControlStash()?h.A.getStackTruncated()?_.currentStackTruncLight=e:_.currentStackLight=e:_.currentLight=e:h.A.getControlStash()?h.A.getStackTruncated()?_.currentStackTruncDark=e:_.currentStackDark=e:_.currentDark=e,e}}static getLayoutPositions(e){let t={frames:new Map,levelWidth:new Map,largestWidth:0};return _.levels.forEach(a=>{let s=a.frames,i=m.V.ControlPosX+m.V.ControlItemWidth,n=e?i:0,r=a.width()+s[s.length-1].totalDataWidth;t.largestWidth=Math.max(t.largestWidth,r),s.forEach(e=>{t.frames.set(e.environment.id,e.x()-n),t.levelWidth.set(e.environment.id,r)})}),t}static getGhostFrameX(e){let t=h.A.masterLayout;if(t&&t.frames.has(e))return t.frames.get(e)+(0+(h.A.getControlStash()?m.V.ControlPosX+m.V.ControlItemWidth:0)+(h.A.getCenterAlignment()?Math.floor((t.largestWidth-t.levelWidth.get(e))/2):0))}static applyFixedPositions(){let e=h.A.masterLayout;_.levels.forEach(t=>{t.frames.forEach(t=>{let a=t.environment.id;if(e.frames.has(a)){let e=_.getGhostFrameX(a);t.reassignCoordinates(e),t.bindings.forEach(t=>{t.reassignCoordinates(e)})}})})}}},26607(e,t,a){"use strict";a.d(t,{eM:()=>ed,O9:()=>B,vA:()=>N,NP:()=>eS,lG:()=>ex,k6:()=>ee,zO:()=>V,i3:()=>Y,e_:()=>en,mV:()=>eg,x8:()=>Z,s6:()=>ey,G6:()=>U,IM:()=>z,pU:()=>em,HQ:()=>P,lb:()=>es,_i:()=>q,XF:()=>eb,wM:()=>ei,Lq:()=>el,TJ:()=>H,kZ:()=>J,eQ:()=>ev,Xv:()=>Q,fW:()=>ef,hc:()=>eu,BC:()=>function e(t){var a;if(null!==(a=t.environment)&&0!==Object.keys(a.head).length)return[t];{let a=[];return t.children.forEach(t=>{a.push(...e(t))}),a}},Iy:()=>D,gR:()=>ew,SU:()=>er,Xt:()=>eA,q_:()=>ea,_Z:()=>eh,t6:()=>eT,d4:()=>K,wp:()=>eC,Q3:()=>ec,Yo:()=>W,rn:()=>eo,EJ:()=>ep});var s=a(82097),i=a(36236),n=a(62172),r=a(38268),o=a(23178),l=a(62418),d=a(73825),c=a(2543),u=a(61499),h=a(2641),p=a(33422),m=a(35020),g=a(94992),y=a(70943),f=a(74848),b=a(96540),x=a(2494),v=a(53351),A=a(6203),T=a(94657),w=a(96702),S=a(32838),C=a(43315);class I extends C.F{constructor(e){super(e),this.isLive=!0}calculateSteps(){let e=this.source,t=this.target;return t?[(t,a)=>[t+e.width()/2,a+e.height()],(e,a)=>[t.x()+(t.x()<e?t.width()/2:0),t.y()]]:[]}}var E=a(55410);class _ extends E.B{value;index;text;tooltip;tooltipRef;arrow;constructor(e,t,a,s){super(),this.value=e,this.index=a;const i=t=>"string"==typeof t?`'${t}'`.trim():(0,S.ks)(t)?"continuation":V(t)?"closure":D(t)?s?"pair/array":JSON.stringify(t):P(t)?t.toReplString():String(e);this.text=ep(i(e),T.V.StashMaxTextWidth,T.V.StashMaxTextHeight).replace(/[\r\n]/gm," "),this.tooltip=i(e),this.tooltipRef=b.createRef(),this._width=2*T.V.StashItemTextPadding+ea(this.text,`${T.V.FontStyle} ${T.V.FontSize}px ${T.V.FontFamily}`),this._height=T.V.StashItemHeight+2*T.V.StashItemTextPadding,this._x=T.V.StashPosX+t,this._y=T.V.StashPosY,s&&(s.markAsReferenced(),this.arrow=new I(this).to(s))}zIndex=1;onMouseEnter=e=>{eb(this.index)||el(e.currentTarget),er(e.currentTarget),this.zIndex=Math.max(this.ref.current.zIndex(),1),this.ref.current.moveToTop(),this.tooltipRef.current.moveToTop(),this.tooltipRef.current.show()};onMouseLeave=e=>{eo(e.currentTarget),this.tooltipRef.current.hide(),eb(this.index)||ed(e.currentTarget),this.ref.current.zIndex(this.zIndex)};destroy(){this.ref.current.destroyChildren()}draw(){let e={fill:ev(),padding:T.V.StashItemTextPadding,fontFamily:T.V.FontFamily,fontSize:T.V.FontSize,fontStyle:T.V.FontStyle,fontVariant:T.V.FontVariant},t={stroke:eb(this.index)?eC():eT(),cornerRadius:T.V.StashItemCornerRadius};return(0,f.jsxs)(b.Fragment,{children:[(0,f.jsxs)(x.JU,{ref:this.ref,x:this.x(),y:this.y(),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,f.jsx)(x.vw,{...A.$,...t}),(0,f.jsx)(x.EY,{...A.$,...e,text:this.text})]}),(0,f.jsxs)(x.JU,{x:this.x()+T.V.TooltipMargin,y:this.y()+this.height()+T.V.TooltipMargin,visible:!1,ref:this.tooltipRef,children:[(0,f.jsx)(x.vw,{...A.$,stroke:A.T.HoverBgColor,fill:A.T.HoverBgColor,opacity:T.V.TooltipOpacity}),(0,f.jsx)(x.EY,{...A.$,...e,fill:v.A.getPrintableMode()?A.T.PrintBgColor:A.T.TextColor,text:this.tooltip,padding:T.V.TooltipPadding})]}),this.arrow?.draw()]},w.P.key++)}}var j=a(32809);class k extends Error{constructor(e){super(e),this.name="AssertionError"}}function N(e,t){if(!e)throw new k(t)}function P(e){return(0,c.isObject)(e)&&"toReplString"in e&&O(e.toReplString)}function R(e){return"head"in e&&"tail"in e&&"name"in e}function L(e){return"parent"in e&&"children"in e}function M(e){return Array.isArray(e)}function D(e){return M(e)&&({}).hasOwnProperty.call(e,"id")&&({}).hasOwnProperty.call(e,"environment")}function O(e){return e&&"[object Function]"===({}).toString.call(e)}function U(e){return O(e)&&!z(e)&&!({}).hasOwnProperty.call(e,"environment")}function F(e){return z(e)&&e.predefined}let G=["id","environment","functionName","predefined","node","originalNode"];function z(e){let t={};return e instanceof n.default||O(e)&&G.reduce((a,s)=>a&&t.hasOwnProperty.call(e,s),!0)}function H(e){return O(e)&&!z(e)&&({}).hasOwnProperty.call(e,"environment")}function B(e){return U(e)||F(e)}function V(e){return z(e)&&!F(e)||H(e)}function J(e){return null===e}function W(e){return"symbol"==typeof e}function Y(e){return void 0===e||J(e)||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||P(e)||(0,j.Pq)(e)}function X(e,t){(z(e)||H(e))&&e.environment&&t.add(e.environment.id),D(e)&&e.environment&&t.add(e.environment.id)}function $(e,t,a,s=new Set){if(!e||s.has(e))return;s.add(e);let i=e&&(z(e)||D(e)||(0,S.ks)(e)||H(e))?e.id??null:null;if(i&&a&&a(i),z(e)||H(e)){e.environment&&t(e.environment);return}if(D(e)){for(let i of(e.environment&&t(e.environment),e))$(i,t,a,s);return}}function Z(e){let t,a,s=(t=new Set,w.P.globalEnvNode?.environment&&t.add(w.P.globalEnvNode.environment.id),(a=v.A.getCurrentEnvId())&&t.add(a),w.P.stash.getStack().forEach(e=>{X(e,t)}),w.P.control.getStack().forEach(e=>{em(e)&&e.instrType===r.InstrType.ENVIRONMENT&&t.add(ef(e.env)),X(e,t)}),t),i=new Set,n=e=>{e&&e.id&&i.add(e.id)};w.P.stash.getStack().forEach(e=>{$(e,n,void 0,new Set)}),w.P.control.getStack().forEach(e=>{$(e,n,void 0,new Set)});let o=function(e,t){let a=new Set,s=new Set,i=[],n=e=>{!e||a.has(e.id)||(a.add(e.id),i.push(e))},r=e=>s.add(e),o=new Set;for(t.forEach(t=>{let a=function e(t,a){if(t.environment&&t.environment.id===a)return t.environment;for(let s of t.children){let t=e(s,a);if(t)return t}return null}(e.root,t);a&&n(a)});i.length>0;){let e=i.pop();n(e.tail),Object.values(e.head).forEach(e=>{$(e,n,r,o)})}return{liveEnvIds:a,liveObjectIds:s}}(e,new Set([...s,...i])),l=e=>o.liveObjectIds.add(e);return w.P.stash.getStack().forEach(e=>{$(e,()=>{},l,new Set)}),w.P.control.getStack().forEach(e=>{$(e,()=>{},l,new Set)}),o}function q(e,t){if("difference"in Set.prototype)return e.difference(t);{let a=new Set;for(let s of e)t.has(s)||a.add(s);return a}}function Q(e,t){if((0,S.ks)(e.data))return t instanceof m.O&&ec(t.frame.environment,e.data.getEnv()[0]);if(B(e.data))return t instanceof m.O&&ec(t.frame.environment,w.P.globalEnvNode.environment);if(!V(e.data)&&!D(e.data))return!0;let a=e.data.environment;return t===e.references.find(e=>ec(e instanceof p.C?e.parent.data.environment:e.frame.environment,a))}function K(e){return e instanceof m.O&&e.isDummyBinding||e instanceof p.C&&!e.parent.isReferenced()}function ee(e){return/^-?\d+$/.test(e)}let et=document.createElement("canvas").getContext("2d");function ea(e,t=`${A.T.FontStyle} ${A.T.FontSize}px ${A.T.FontFamily}`){if(!et||!e)return 0;et.font=t;let a=e.split("\n").reduce((e,t)=>et.measureText(e).width>et.measureText(t).width?e:t,"");return Math.round(et.measureText(a).width)}function es(e,t,a=`${A.T.FontStyle} ${A.T.FontSize}px ${A.T.FontFamily}`,s=A.T.FontSize){return et&&e?(et.font=a,e.split("\n").map(e=>et.measureText(e).width).reduce((e,a)=>e+Math.ceil(a/t),0)*s):0}function ei(e){if(z(e)){let t=e.functionName.slice(0,e.functionName.indexOf("=>")).trim();return t.startsWith("(")||(t="("+t+")"),t}{let t=e.toString();return t.substring(t.indexOf("("),t.indexOf(")")+1)}}function en(e){let t=e.toString();if(z(e)){let e="function"===t.substring(0,8)?t.substring(t.indexOf("{")):t.substring(t.indexOf("=")+3);return"{"!==e[0]&&(e="{\n  return "+e+";\n}"),e}return H(e)?"{\n  [implementation hidden]\n}":t.substring(t.indexOf("{"))}function er(e){let t=e.getStage()?.container();t&&(t.classList.remove(h.A.draggable),t.classList.add(h.A.clickable))}function eo(e){let t=e.getStage()?.container();t&&(t.classList.remove(h.A.clickable),t.classList.add(h.A.draggable))}function el(e,t={}){let a=e instanceof l.Y?Array.from(e.children||[]):[];a.push(e),a.forEach(e=>{e.setAttrs({stroke:e.attrs.stroke?A.T.HoverColor:e.attrs.stroke,fill:e.attrs.fill?A.T.HoverColor:e.attrs.fill,...t})})}function ed(e,t={}){let a=e instanceof l.Y?Array.from(e.children||[]):[];a.push(e),a.forEach(e=>{e.setAttrs({stroke:e.attrs.stroke?e instanceof d.E?ev():eT():e.attrs.stroke,fill:e.attrs.fill?e instanceof d.E?ev():eT():e.attrs.fill,...t})})}function ec(e,t){return e.id===t.id}function eu(e){let t;return q(e.heap.getHeap(),(!function e(t,a,s,i=new Set){if(!i.has(s))for(let n of(i.add(s),s))(D(n)||z(n))&&ec(n.environment,t)&&(a.add(n),D(n)&&e(t,a,n,i))}(e,t=new Set,Object.values(e.head)),t))}function eh(e){let t=(0,c.cloneDeep)(e);return!function e(t,a){!(O(t)||Y(t))&&("root"in t&&"root"in a?e(t.root,a.root):L(t)&&L(a)?(e(t.children,a.children),e(t.environment,a.environment)):M(t)&&M(a)?t.forEach((t,s)=>e(t,a[s])):R(t)&&R(a)&&(Object.defineProperties(a.head,Object.getOwnPropertyDescriptors(t.head)),a.heap=t.heap,e(t.tail,a.tail)))}(e,t),t}let ep=(e,t,a)=>{let s=e.split("\n").map(e=>{if(ea(e)<=t)return e;let a=e;for(;ea(a+A.T.Ellipsis)>t;)a=a.slice(0,-1);return a+A.T.Ellipsis});if(es([...s,A.T.Ellipsis].join("\n"),t)<=a)return s.join("\n");for(;es([...s,A.T.Ellipsis].join("\n"),t)>a;)s=s.slice(0,-1);return[...s,A.T.Ellipsis].join("\n")},em=e=>void 0!==e.instrType;function eg(e,t,a,n,l,d){let c=v.A.getStackTruncated()?a===Math.min(w.P.control.size()-1,9):a===w.P.control.size()-1;if(em(e))switch(e.instrType){case r.InstrType.RESET:return new g.k("return","Skip control items until marker instruction is reached",t,n,l,c);case r.InstrType.WHILE:return new g.k("while","Keep executing while loop body if predicate holds",t,n,l,c);case r.InstrType.FOR:return new g.k("for","Keep executing for loop body if predicate holds",t,n,l,c);case r.InstrType.ASSIGNMENT:{let a=e;return new g.k(`asgn ${a.symbol}`,`Assign value on top of stash to ${a.symbol}`,t,n,l,c)}case r.InstrType.UNARY_OP:{let a=e;return new g.k(a.symbol,`Perform ${a.symbol} on top stash value`,t,n,l,c)}case r.InstrType.BINARY_OP:{let a=e;return new g.k(a.symbol,`Perform ${a.symbol} on top 2 stash values`,t,n,l,c)}case r.InstrType.POP:return new g.k("pop","Pop most recently pushed value from stash",t,n,l,c);case r.InstrType.APPLICATION:{let a=e;return new g.k(`call ${a.numOfArgs}`,`Call function with ${a.numOfArgs} argument${1===a.numOfArgs?"":"s"}`,t,n,l,c)}case r.InstrType.BRANCH:return new g.k("branch","Branch to the consequent or alternative",t,n,l,c);case r.InstrType.ENVIRONMENT:{let a=e;return new g.k("env","Set current environment to this environment",t,n,l,c,w.P.levels.reduce((e,t)=>e||t.frames.find(e=>e.environment?.id===ef(a.env)),void 0))}case r.InstrType.ARRAY_LITERAL:{let a=e.arity;return new g.k(`arr lit ${a}`,`Create array using ${a} value${1===a?"":"s"} on stash`,t,n,l,c)}case r.InstrType.ARRAY_ACCESS:return new g.k("arr acc","Access array at given index",t,n,l,c);case r.InstrType.ARRAY_ASSIGNMENT:return new g.k("arr asgn","Assign new value to array at given index",t,n,l,c);case r.InstrType.ARRAY_LENGTH:return new g.k("arr len","Obtain array length",t,n,l,c);case r.InstrType.CONTINUE:return new g.k("continue","Control items until continue marker will be skipped",t,n,l,c);case r.InstrType.CONTINUE_MARKER:return new g.k("cont mark","Mark end of loop body",t,n,l,c);case r.InstrType.BREAK:return new g.k("break","Control items until break marker will be skipped",t,n,l,c);case r.InstrType.BREAK_MARKER:return new g.k("brk mark","Mark end of all loop-associated statements and instructions",t,n,l,c);case r.InstrType.MARKER:return new g.k("mark","Mark return address",t,n,l,c);case r.InstrType.SPREAD:return new g.k("spread","Unpack array to its elements",t,n,l,c);default:return new g.k("INSTRUCTION","INSTRUCTION",t,n,l,c)}if(!(0,y.Ll)(e)){let a=(0,S.kc)(e);return new g.k(a,a,t,n,l,c)}if((0,j.n9)(d))return(0,j.OF)(e,t,n,l,c,d);if((0,u.qq)(d)){e=(0,s.estreeDecode)(e);let a=(0,i.unparse)(e);return new g.k(a,a,t,n,l,c)}switch(e.type){case"Program":{let a=(0,o.astToString)(e).trim().split("\n").map(e=>`		${e}`).join("\n"),s=`{
${a}
}`;return new g.k(s,s,t,n,l,c)}case"Literal":{let a="string"==typeof e.value?`"${e.value}"`:e.value;return new g.k(a,String(a),t,n,l,c)}default:{let a=(0,o.astToString)(e).trim();return new g.k(a,a,t,n,l,c)}}}function ey(e,t,a,s){let i;return(O(e)||D(e||(0,S.ks)(e)))&&(i=z(e)||D(e)||(0,S.ks)(e)?w.P.values.get(e.id):w.P.values.get(e)),new _(e,t,a,i)}let ef=e=>{for(;e.tail&&("prelude"===e.name||0===Object.keys(e.head).length);)e=e.tail;return e.id},eb=e=>{let t=w.P.control.peek();if(t&&em(t))switch(t.instrType){case r.InstrType.WHILE:case r.InstrType.FOR:case r.InstrType.UNARY_OP:case r.InstrType.POP:case r.InstrType.BRANCH:return w.P.stashComponent.stashItemComponents.length-e<=1;case r.InstrType.BINARY_OP:case r.InstrType.ARRAY_ACCESS:return w.P.stashComponent.stashItemComponents.length-e<=2;case r.InstrType.ARRAY_ASSIGNMENT:return w.P.stashComponent.stashItemComponents.length-e<=3;case r.InstrType.APPLICATION:return w.P.stashComponent.stashItemComponents.length-e<=t.numOfArgs+1;case r.InstrType.ARRAY_LITERAL:return w.P.stashComponent.stashItemComponents.length-e<=t.arity}return!1},ex=()=>v.A.getPrintableMode()?A.T.PrintBgColor:A.T.BgColor,ev=()=>v.A.getPrintableMode()?A.T.PrintTextColor:A.T.TextColor,eA=()=>v.A.getPrintableMode()?A.T.PrintTextColorFaded:A.T.TextColorFaded,eT=()=>v.A.getPrintableMode()?A.T.PrintStrokeColor:A.T.StrokeColor,ew=()=>v.A.getPrintableMode()?A.T.PrintStrokeColorFaded:A.T.StrokeColorFaded,eS=()=>v.A.getPrintableMode()?A.T.PrintActiveColor:A.T.ActiveColor,eC=()=>v.A.getPrintableMode()?A.T.PrintDangerColor:A.T.DangerColor},33422(e,t,a){"use strict";a.d(t,{C:()=>v});var s=a(74848),i=a(96540),n=a(2494),r=a(53351),o=a(6203),l=a(96702),d=a(26607),c=a(50073),u=a(9274),h=a(81698),p=a(44889),m=a(43315);class g extends m.F{constructor(e){super(e),this.isLive=e.parent.isEnclosingFrameLive()}updateIsLive(){this.isLive=this.source.parent.isEnclosingFrameLive()}calculateSteps(){let e=this.source,t=this.target;if(!t)return[];let a=[(e,t)=>[e+o.T.DataUnitWidth/2,t+o.T.DataUnitHeight/2]];return t instanceof h.E||t instanceof p.N||t instanceof u.K?a.push(()=>[e.x()<t.x()?t.x():t.centerX,t.y()]):t instanceof c.v&&(e.y()===t.y()?e.isLastUnit&&t.x()>e.x()&&t.x()<=e.x()+2*o.T.DataUnitWidth?a.push(()=>[t.x(),t.y()+o.T.DataUnitHeight/2]):Math.abs(e.x()-t.x())<o.T.DataUnitWidth/2?(a.push((e,t)=>[e,t-o.T.DataUnitHeight]),a.push(()=>[t.x()-o.T.DataUnitWidth/2,t.y()-o.T.DataUnitHeight/2]),a.push((e,t)=>[e,t+2*o.T.DataUnitHeight/3]),a.push((e,t)=>[e+o.T.DataUnitWidth/2,t])):(a.push((e,t)=>[e,t-o.T.DataUnitHeight]),a.push(()=>[t.x()+o.T.DataUnitWidth/2,t.y()-o.T.DataUnitHeight/2]),a.push((e,t)=>[e,t+o.T.DataUnitHeight/2])):a.push(()=>[t.x()+o.T.DataUnitWidth/2,t.y()+(e.y()>t.y()?o.T.DataUnitHeight:0)])),a}}let y=({x:e,y:t,width:a,height:i,cornerRadius:r,forwardRef:l,...d})=>(0,s.jsx)(n.yp,{sceneFunc:(s,n)=>{let{upperLeft:o,lowerLeft:l,upperRight:d,lowerRight:c}=r;s.beginPath(),s.moveTo(e+o,t),s.lineTo(e+a-d,t),s.quadraticCurveTo(e+a,t,e+a,t+d),s.lineTo(e+a,t+i-c),s.quadraticCurveTo(e+a,t+i,e+a-c,t+i),s.lineTo(e+l,t+i),s.quadraticCurveTo(e,t+i,e,t+i-l),s.lineTo(e,t+o),s.quadraticCurveTo(e,t,e+o,t),s.closePath(),s.fillStrokeShape(n)},...o.$,ref:l,...d});var f=a(32711),b=a(4797),x=a(55410);class v extends x.B{index;data;parent;value;isFirstUnit;isLastUnit;arrow;indexRef=i.createRef();constructor(e,t,a){super(),this.index=e,this.data=t,this.parent=a,this._x=this.parent.x()+this.index*o.T.DataUnitWidth,this._y=this.parent.y(),this._height=o.T.DataUnitHeight,this._width=o.T.DataUnitWidth,this.isFirstUnit=0===this.index,this.isLastUnit=this.index===this.parent.data.length-1,this.value=l.P.createValue(this.data,this)}showIndex(){this.indexRef.current?.show()}hideIndex(){r.A.getPrintableMode()||this.indexRef.current?.hide()}draw(){if(this.isDrawn())return null;this._isDrawn=!0;let e=this.parent.isEnclosingFrameLive();this.value instanceof b.l&&this.value.setFaded(!e||!this.parent.isReferenced()),this.value instanceof b.l||(this.arrow=new g(this).to(this.value));let t={upperLeft:0,lowerLeft:0,upperRight:0,lowerRight:0};this.isFirstUnit&&(t.upperLeft=t.lowerLeft=o.T.DataCornerRadius),this.isLastUnit&&(t.upperRight=t.lowerRight=o.T.DataCornerRadius);let a={fontFamily:f.K.fontFamily,fontSize:f.K.fontSize,fontStyle:f.K.fontStyle,fill:this.parent.isReferenced()?(0,d.eQ)():(0,d.Xt)(),x:this.x(),y:this.y()-f.K.fontSize-4,width:this.width(),padding:2,visible:r.A.getPrintableMode()},c=this.parent.isReferenced()&&this.parent.isEnclosingFrameLive()?(0,d.t6)():(0,d.gR)();return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(y,{x:this.x(),y:this.y(),width:this.width(),height:this.height(),stroke:c,hitStrokeWidth:o.T.DataHitStrokeWidth,fillEnabled:!0,cornerRadius:t,forwardRef:this.ref},l.P.key++),(0,s.jsx)(n.EY,{ref:this.indexRef,...o.$,...a,text:`${this.index}`,stroke:c},l.P.key++),this.value.draw(),this.arrow?.draw()]},l.P.key++)}}},35020(e,t,a){"use strict";a.d(t,{O:()=>b});var s=a(74848),i=a(96540),n=a(6203),r=a(96702),o=a(26607),l=a(50073),d=a(43315);class c extends d.F{constructor(e){super(e),this.isLive=void 0===e.options.faded||!e.options.faded}updateIsLive(){this.isLive=void 0===this.source.options.faded||!this.source.options.faded}calculateSteps(){let e=this.source,t=this.target;if(!t)return[];let a=[(t,a)=>[t+e.width(),a+e.height()/2]];return t.x()<e.x()?t instanceof l.v?(a.push((e,t)=>[e+n.T.TextMargin,t]),a.push((e,a)=>[e,t.y()-n.T.DataUnitHeight/3]),a.push((e,a)=>[t.x()+n.T.DataUnitWidth/2,a]),a.push((e,a)=>[e,t.y()])):(a.push((e,t)=>[e+n.T.TextMargin,t]),a.push((t,a)=>[t,a-e.height()/2-n.T.TextMargin]),a.push((e,a)=>[t.x()+t.width()+n.T.ArrowHeadSize,a]),a.push((e,a)=>[e,t.y()]),a.push((e,t)=>[e-n.T.ArrowHeadSize,t])):a.push((e,a)=>[t.x(),t.y()+(t instanceof l.v?n.T.DataUnitHeight/2:0)]),a}}var u=a(32711),h=a(9274),p=a(81698),m=a(44889),g=a(4797),y=a(82021),f=a(55410);class b extends f.B{keyString;data;frame;prevBinding;isConstant;isLive;value;key;isDummyBinding=!1;keyYOffset;arrow;constructor(e,t,a,s,i=!1,d=!0){super(),this.keyString=e,this.data=t,this.frame=a,this.prevBinding=s,this.isConstant=i,this.isLive=d,this.isDummyBinding=(0,o.k6)(this.keyString),this.prevBinding?(this._x=this.prevBinding.x(),this._y=this.prevBinding.y()+this.prevBinding.height()+n.T.TextPaddingY):(this._x=this.frame.x()+n.T.FramePaddingX,this._y=this.frame.y()+n.T.FramePaddingY),this.keyString+=i?n.T.ConstantColon:n.T.VariableColon,this.value=r.P.createValue(t,this);const c=this.value instanceof l.v?(n.T.DataUnitHeight-n.T.FontSize)/2:(this.value.height()-n.T.FontSize)/2;this.keyYOffset=c,this.key=new u.E(this.keyString,this.x(),this.y()+c,{faded:!this.isLive}),this._width=(0,o.Xv)(this.value,this)?this.value.x()-this.x()+(this.value instanceof p.E||this.value instanceof m.N||this.value instanceof h.K?this.value.tooltipWidth:0):this.key.width(),this._height=Math.max(this.key.height(),this.value instanceof l.v?this.value.totalHeight:this.value.height()),this.isDummyBinding&&!(0,o.Xv)(this.value,this)&&this.prevBinding&&(this._y=this.prevBinding.y(),this._width=this.prevBinding.width(),this._height=this.prevBinding.height())}reassignCoordinates(e){this.prevBinding?(this._x=this.prevBinding.x(),this._y=this.prevBinding.y()+this.prevBinding.height()+n.T.TextPaddingY):(this._x=e+n.T.FramePaddingX,this._y=this.frame.y()+n.T.FramePaddingY)}draw(){let e=this.isDummyBinding?this.value.isLive?.()??!1:this.frame.isLive;return this.key.options.faded=!e,(this.value instanceof g.l||this.value instanceof y.B)&&this.value.setFaded(!e),this.key._x=this.x(),this.key._y=this.y()+this.keyYOffset,this.isDummyBinding||this.value instanceof g.l||this.value instanceof y.B||(this.arrow=new c(this.key).to(this.value)),(0,s.jsxs)(i.Fragment,{children:[this.isDummyBinding?null:this.key.draw(),this.arrow?.draw(),(0,o.Xv)(this.value,this)?this.value.draw():null]},r.P.key++)}}},94992(e,t,a){"use strict";a.d(t,{k:()=>m});var s=a(74848),i=a(96540),n=a(2494),r=a(53351),o=a(6203),l=a(94657),d=a(96702),c=a(26607),u=a(43315);class h extends u.F{constructor(e){super(e),this.isLive=!0}calculateSteps(){let e=this.source,t=this.target;return t?[(t,a)=>[t+e.width(),a+e.height()/2],()=>[t.x(),t.y()+(t.x()>l.V.ControlItemWidth+100?l.V.ControlItemTextPadding:0)]]:[]}}var p=a(55410);class m extends p.B{value;tooltip;highlightOnHover;unhighlightOnHover;topItem;text;tooltipRef;arrow;constructor(e,t,a,s,n,r,o){super(),this.value=e,this.tooltip=t,this.highlightOnHover=s,this.unhighlightOnHover=n,this.topItem=r,this.text=(0,c.EJ)(String(e),l.V.ControlMaxTextWidth,l.V.ControlMaxTextHeight),this.tooltipRef=i.createRef(),this.highlightOnHover=s,this.unhighlightOnHover=n,this._x=l.V.ControlPosX,this._y=l.V.ControlPosY+a,this._width=l.V.ControlItemWidth,this._height=(0,c.lb)(this.text,l.V.ControlMaxTextWidth,`${l.V.FontStyle} ${l.V.FontSize}px ${l.V.FontFamily}`,l.V.FontSize)+2*l.V.ControlItemTextPadding,o&&(this.arrow=new h(this).to(o))}zIndex=1;onMouseEnter=e=>{this.highlightOnHover(),this.topItem||(0,c.Lq)(e.currentTarget),(0,c.SU)(e.currentTarget),this.zIndex=Math.max(this.ref.current.zIndex(),1),this.ref.current.moveToTop(),this.tooltipRef.current.moveToTop(),this.tooltipRef.current.show()};onMouseLeave=e=>{this.unhighlightOnHover?.(),(0,c.rn)(e.currentTarget),this.tooltipRef.current.hide(),this.topItem||(0,c.eM)(e.currentTarget),this.ref.current.zIndex(this.zIndex)};destroy(){this.ref.current.destroyChildren()}draw(){let e={fill:(0,c.eQ)(),padding:l.V.ControlItemTextPadding,fontFamily:l.V.FontFamily,fontSize:l.V.FontSize,fontStyle:l.V.FontStyle,fontVariant:l.V.FontVariant},t={stroke:this.topItem?(0,c.NP)():(0,c.t6)(),cornerRadius:l.V.ControlItemCornerRadius};return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsxs)(n.JU,{ref:this.ref,x:this.x(),y:this.y(),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,s.jsx)(n.vw,{...o.$,...t}),(0,s.jsx)(n.EY,{...o.$,...e,text:this.text,width:this.width(),height:this.height()})]}),(0,s.jsxs)(n.JU,{x:this.x()+this.width()+l.V.TooltipMargin,y:this.y()+l.V.TooltipMargin,visible:!1,ref:this.tooltipRef,children:[(0,s.jsx)(n.vw,{...o.$,stroke:o.T.HoverBgColor,fill:o.T.HoverBgColor,opacity:l.V.TooltipOpacity}),(0,s.jsx)(n.EY,{...o.$,...e,fill:r.A.getPrintableMode()?o.T.PrintBgColor:o.T.TextColor,text:this.tooltip,padding:l.V.TooltipPadding})]}),this.arrow?.draw()]},d.P.key++)}}},70943(e,t,a){"use strict";a.d(t,{A:()=>u,Ll:()=>p});var s=a(74848);a(96540);var i=a(2494),n=a(53351),r=a(6203),o=a(94657),l=a(96702),d=a(26607),c=a(55410);class u extends c.B{control;chapter;stackItemComponents;constructor(e,t){super(),this.control=e,this.chapter=t,this._x=o.V.ControlPosX,this._y=o.V.ControlPosY,this._width=o.V.ControlItemWidth,this._height=o.V.StashItemHeight+2*o.V.StashItemTextPadding,this.control=e,this.chapter=t;let a=0;const s=e=>{let t=p(e)?e:h(e)?e.srcNode:e,s=()=>{},i=()=>{};s=()=>{if(void 0!==t.loc){let e=t.loc.start.line-1,a=t.loc.end.line-1;n.A.setEditorHighlightedLines([[e,a]])}},i=()=>n.A.setEditorHighlightedLines([]);let r=(0,d.mV)(e,this._height,a,s,i,this.chapter);return this._height+=r.height(),a+=1,r};this.stackItemComponents=this.control.getStack().slice(n.A.getStackTruncated()?-10:0).map(s)}onMouseEnter(e){(0,d.Lq)(e.currentTarget),(0,d.SU)(e.currentTarget)}onMouseLeave(e){(0,d.eM)(e.currentTarget),(0,d.rn)(e.currentTarget)}draw(){let e={fontFamily:o.V.FontFamily,fontSize:12,fontStyle:o.V.FontStyle,fontVariant:o.V.FontVariant};return(0,s.jsxs)(s.Fragment,{children:[n.A.getStackTruncated()&&l.P.control.size()>10&&(0,s.jsxs)(i.JU,{x:o.V.ShowMoreButtonX,y:o.V.ShowMoreButtonY,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseUp:()=>{n.A.toggleStackTruncated(),n.A.redraw()},children:[(0,s.jsx)(i.vw,{stroke:(0,d.t6)(),cornerRadius:o.V.ControlItemCornerRadius}),(0,s.jsx)(i.EY,{...e,text:`${r.T.Ellipsis}`,align:"center",fill:(0,d.eQ)(),width:o.V.ShowMoreButtonWidth,height:o.V.ShowMoreButtonHeight})]}),this.stackItemComponents.map(e=>e?.draw())]})}}let h=e=>void 0!==e.instrType,p=e=>void 0!==e.type},96349(e,t,a){"use strict";a.d(t,{w:()=>b});var s=a(74848),i=a(96540),n=a(2494),r=a(53351),o=a(15),l=a(6203),d=a(96702),c=a(26607),u=a(32838),h=a(43315);class p extends h.F{constructor(e){super(e),this.isLive=e.environment&&d.P.liveEnvIDs.has(e.environment.id)}updateIsLive(){this.isLive=this.source.environment&&d.P.liveEnvIDs.has(this.source.environment.id)}calculateSteps(){let e=this.target;if(!e)return[];let t=[(e,t)=>[e+l.T.FramePaddingX,t]];return e instanceof b&&(t.push((e,t)=>[e,t-l.T.FrameMarginY]),t.push((t,a)=>[e.x()+l.T.FramePaddingX,a])),t.push(()=>[e.x()+l.T.FramePaddingX,e.y()+e.height()]),t}}var m=a(35020),g=a(32711),y=a(55410);let f=new Map([["global","Global"],["programEnvironment","Program"],["forLoopEnvironment","Body of for-loop"],["forBlockEnvironment","Control variable of for-loop"],["blockEnvironment","Block"],["functionBodyEnvironment","Function Body"]]);class b extends y.B{envTreeNode;leftSiblingFrame;static envFrameMap=new Map;static getFrom(e){return b.envFrameMap.get(e.id)}totalHeight;totalWidth;totalDataWidth;bindings=[];_name;level;environment;parentFrame;arrow;isLive;constructor(e,t){super(),this.envTreeNode=e,this.leftSiblingFrame=t,this.totalDataWidth=0,this.level=e.level,this.parentFrame=e.parent?.frame,this.environment=e.environment,b.envFrameMap.set(this.environment.id,this),this._x=this.leftSiblingFrame?this.leftSiblingFrame.x()+this.leftSiblingFrame.totalWidth+this.leftSiblingFrame.totalDataWidth+l.T.FrameMarginX:this.level.x(),!r.A.getCenterAlignment()&&this.parentFrame&&(this._x=Math.max(this._x,this.parentFrame.x())),this._y=this.level.y()+l.T.FontSize+l.T.TextPaddingY/2;const a=Object.entries(Object.getOwnPropertyDescriptors(this.environment.head));if("global"===this.environment.name&&a[0][0]!==l.T.GlobalFrameDefaultText){const e=a.findIndex(([e])=>e===l.T.GlobalFrameDefaultText);a.unshift(a.splice(e,1)[0])}const s=[...(0,c.hc)(this.environment)];s.sort((e,t)=>Number(e.id)-Number(t.id));let i=0;for(;i<s.length;){const e=s[i];if((0,c.Iy)(e)){for(const t of e)if((0,c.Iy)(t)&&t!==e||(0,c.IM)(t)||(0,u.ks)(t)){const e=s.findIndex(e=>e.id===t.id);e>-1&&(s.splice(e,1),e<=i&&i--)}}i++}for(const e of s){const t={value:e,configurable:!1,enumerable:!0,writable:!1};a.push([`${i++}`,t])}this._width=l.T.FrameMinWidth;let n=this._width+l.T.FrameMinGapX;for(const[e,t]of a){if((0,c.k6)(e))continue;const a=this.environment.head[e]?.description==="const declaration"||!t.writable;let s=(0,c.q_)(e+(a?l.T.ConstantColon:l.T.VariableColon));if((0,c.Yo)(t.value)?s+=l.T.TextPaddingX+(0,c.q_)(l.T.UnassignedData):(0,c.i3)(t.value)&&(s+=l.T.TextPaddingX+(0,c.q_)((0,c.HQ)(t.value)?t.value.toReplString():JSON.stringify(t.value)||String(t.value))),this._width=Math.max(this._width,s+2*l.T.FramePaddingX),(0,c.Iy)(t.value)){const e=e=>{let t=0,a=e,s=new Set;for(;(0,c.Iy)(a)&&!s.has(a);){s.add(a),t+=a.length*l.T.DataUnitWidth;let e=a.length-1,i=a[e];if((0,c.Iy)(i))t+=l.T.DataUnitWidth,a=i;else break}return t};let a=0,s=0,i=t.value;const n=new Set;for(;(0,c.Iy)(i)&&!n.has(i);){n.add(i);const t=i.length*l.T.DataUnitWidth,r=i[0];(0,c.Iy)(r)&&(a=Math.max(a,s+e(r))),s+=t;const o=i.length-1,d=i[o];if((0,c.Iy)(d))s+=l.T.DataUnitWidth,i=d;else{a=Math.max(a,s);break}}this.totalDataWidth=Math.max(this.totalDataWidth,a)}n=Math.max(n,this._width+l.T.FrameMinGapX)}let h=null;for(const[e,t]of(this.isLive=!!this.environment&&d.P.liveEnvIDs.has(this.environment.id),a)){const a=this.environment.head[e]?.description==="const declaration"||!t.writable,s=new m.O(e,t.value,this,h,a,this.isLive);h=s,this.bindings.push(s),n=Math.max(n,s.width()+l.T.FramePaddingX)}this.totalWidth=n,this._height=h?h.y()-this.y()+h.height()+l.T.FramePaddingY:2*l.T.FramePaddingY,this._name=new g.E(f.get(this.environment.name)??this.environment.name,this.x(),this.level.y(),{maxWidth:this.width(),faded:!this.isLive}),this.totalHeight=this.height()+this.name.height()+l.T.TextPaddingY/2,this.parentFrame&&(this.arrow=new p(this).to(this.parentFrame)),r.A.getCurrentEnvId()===this.environment.id&&o.G.setCurrentFrame(this)}get name(){return this._name}reassignCoordinates(e){this._x=e;let t=0;r.A.getCenterAlignment()&&(t+=Math.floor(this.width()/2)-Math.floor(this.name.width()/2)),this._name=new g.E(f.get(this.environment.name)??this.environment.name,this.x()+t,this.level.y(),{maxWidth:this.width(),faded:!this.isLive})}onMouseEnter=()=>{};onMouseLeave=()=>{};draw(){return(0,s.jsxs)(n.YJ,{ref:this.ref,children:[this.name.draw(),(0,i.createElement)(n.rw,{...l.$,x:this.x(),y:this.y(),width:this.width(),height:this.height(),stroke:r.A.getCurrentEnvId()===this.environment?.id?(0,c.NP)():this.isLive?(0,c.t6)():(0,c.gR)(),cornerRadius:l.T.FrameCornerRadius,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,listening:!1,key:d.P.key++}),this.bindings.map(e=>e.draw()),this.arrow?.draw()]},d.P.key++)}}},32711(e,t,a){"use strict";a.d(t,{E:()=>p,K:()=>h});var s=a(74848),i=a(96540),n=a(2494),r=a(53351),o=a(6203),l=a(96702),d=a(26607),c=a(32809),u=a(55410);let h={maxWidth:Number.MAX_VALUE,fontFamily:o.T.FontFamily,fontSize:o.T.FontSize,fontStyle:o.T.FontStyle,fontVariant:o.T.FontVariant,isStringIdentifiable:!1,faded:!1,hidden:!1};class p extends u.B{data;_x;_y;_height;_width;partialStr;fullStr;options=h;labelRef=i.createRef();constructor(e,t,a,s={}){super(),this.data=e,this._x=t,this._y=a,this.options={...this.options,...s};const{fontSize:i,fontStyle:n,fontFamily:r,maxWidth:l,isStringIdentifiable:u}=this.options;this.fullStr=this.partialStr=(0,d.HQ)(e)?e.toReplString():(0,c.Pq)(e)?String(e):u&&JSON.stringify(e)||String(e),this._height=i;const h=e=>(0,d.q_)(e,`${n} ${i}px ${r}`);if(h(this.partialStr)>l){let e=o.T.Ellipsis,t=0;for(;h(this.partialStr.substring(0,t)+o.T.Ellipsis)<l;)e=this.partialStr.substring(0,t++)+o.T.Ellipsis;this._width=h(e),this.partialStr=e}else this._width=Math.max(o.T.TextMinWidth,h(this.partialStr))}onMouseEnter=({currentTarget:e})=>{(0,d.SU)(e),this.labelRef.current?.moveToTop(),this.labelRef.current?.show(),e.getLayer()?.draw()};onMouseLeave=({currentTarget:e})=>{(0,d.rn)(e),this.labelRef.current?.hide(),e.getLayer()?.draw()};draw(){let e={fontFamily:this.options.fontFamily,fontSize:this.options.fontSize,fontStyle:this.options.fontStyle,fill:this.options.faded?(0,d.Xt)():(0,d.eQ)(),visible:!this.options.hidden};return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(n.JU,{x:this.x(),y:this.y(),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:(0,i.createElement)(n.EY,{...o.$,key:l.P.key++,ref:this.ref,text:this.partialStr,...e})}),(0,s.jsxs)(n.JU,{x:this.x(),y:this.y(),ref:this.labelRef,visible:!1,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,s.jsx)(n.vw,{...o.$,fill:r.A.getPrintableMode()?o.T.PrintHoverBgColor:o.T.HoverBgColor,opacity:.5}),(0,i.createElement)(n.EY,{...o.$,key:l.P.key++,text:this.fullStr,...e})]})]},l.P.key++)}}},55410(e,t,a){"use strict";a.d(t,{B:()=>i});var s=a(96540);class i{_x=0;_y=0;_width=0;_height=0;_isDrawn=!1;x(){return this._x}y(){return this._y}width(){return this._width}height(){return this._height}isDrawn(){return this._isDrawn}reset(){this._isDrawn=!1}ref=s.createRef()}},1582(e,t,a){"use strict";a.d(t,{q:()=>o});var s=a(6203),i=a(9274),n=a(44889),r=a(43315);class o extends r.F{constructor(e){super(e),e instanceof n.N?this.isLive=!0:this.isLive=e.isLive()}updateIsLive(){this.source instanceof n.N?this.isLive=!0:this.isLive=this.source.isLive()}calculateSteps(){let e=this.source,t=this.target;return t?[(e,t)=>this.source instanceof i.K?[e+2*s.T.FnRadius,t]:[e+3*s.T.FnRadius,t],(e,a)=>this.source instanceof i.K?[e,t.y()+s.T.FnRadius]:[e,a-2*s.T.FnRadius],(a,s)=>[t.x()+(e.x()<t.x()?0:t.width()),s]]:[]}}},34970(e,t,a){"use strict";a.d(t,{Y:()=>s});let s=new class{selectedArrow=null;getSelected(){return this.selectedArrow}setSelected(e){this.selectedArrow=e}clearSelection(){let e=this.selectedArrow;return this.selectedArrow=null,e}isSelected(e){return this.selectedArrow===e}}},43315(e,t,a){"use strict";a.d(t,{F:()=>h});var s=a(74848),i=a(96540),n=a(2494),r=a(53351),o=a(6203),l=a(96702),d=a(26607),c=a(55410),u=a(34970);class h extends c.B{_path="";points=[];source;target;faded=!1;pathRef=i.createRef();arrowHeadRef=i.createRef();isSelected(){return u.Y.isSelected(this)}select(){u.Y.setSelected(this)}isLive=!1;constructor(e){super(),this.source=e,this.target=void 0,this._x=e.x(),this._y=e.y(),this.isLive=!1}path(){return this._path}to(e){this.target=e,this._width=Math.abs(e.x()-this.source.x()),this._height=Math.abs(e.y()-this.source.y());let t=this.calculateSteps().reduce((e,t)=>[...e,...t(e[e.length-2],e[e.length-1])],[this.source.x(),this.source.y()]);if(t.splice(0,2),this._path+=`M ${t[0]} ${t[1]} `,4===t.length)this._path+=`L ${t[2]} ${t[3]} `;else{let e=0;for(;e<t.length-4;){let[a,s,i,n,r,l]=t.slice(e,e+6),d=i-a,c=r-i,u=n-s,h=l-n,p=Math.min(o.T.ArrowCornerRadius,Math.max(Math.abs(d),Math.abs(u))/2,Math.max(Math.abs(c),Math.abs(h))/2),m=i-p*Math.sign(d),g=n-p*Math.sign(u),y=i+p*Math.sign(c),f=n+p*Math.sign(h);this._path+=`L ${m} ${g} Q ${i} ${n} ${y} ${f} `,e+=2}}return this._path+=`L ${t[t.length-2]} ${t[t.length-1]} `,this.points=t,this}calculateSteps(){let e=this.target;return e?[()=>[e.x(),e.y()]]:[]}getHighlightedColor(){return o.T.ArrowHighlightedColor}onMouseEnter=e=>{if(!r.A.getPrintableMode()){if(e.cancelBubble=!0,this.setHighlightedStyle(),this.ref.current&&this.ref.current.moveToTop){let e=this.ref.current.getParent();e&&e.moveToTop&&e.moveToTop(),this.ref.current.moveToTop()}this.ref.current?.getLayer()?.batchDraw()}};onMouseLeave=e=>{r.A.getPrintableMode()||(e.cancelBubble=!0,this.isSelected()||(this.setNormalStyle(),this.ref.current?.getLayer()?.batchDraw()))};setHighlightedStyle(){let e=this.getHighlightedColor();this.pathRef.current&&(this.pathRef.current.stroke(e),this.pathRef.current.strokeWidth(o.T.ArrowHoveredStrokeWidth)),this.arrowHeadRef.current&&(this.arrowHeadRef.current.fill(e),this.arrowHeadRef.current.pointerWidth(o.T.ArrowHoveredHeadSize),this.arrowHeadRef.current.pointerLength(o.T.ArrowHoveredHeadSize))}setNormalStyle(){let e=this.isLive?(0,d.t6)():(0,d.gR)();this.pathRef.current&&(this.pathRef.current.stroke(e),this.pathRef.current.strokeWidth(o.T.ArrowStrokeWidth)),this.arrowHeadRef.current&&(this.arrowHeadRef.current.fill(e),this.arrowHeadRef.current.pointerWidth(o.T.ArrowHeadSize),this.arrowHeadRef.current.pointerLength(o.T.ArrowHeadSize))}onClick=e=>{e.cancelBubble=!0;let t=this.isSelected(),a=u.Y.clearSelection();a&&a!==this&&a.setNormalStyle(),t||(this.select(),this.setHighlightedStyle()),this.ref.current?.getLayer()?.batchDraw()};onContextMenu=e=>{e.evt.preventDefault(),this.onClick(e)};getCurrentColor(){return this.isSelected()?this.getHighlightedColor():this.faded?(0,d.gR)():(0,d.t6)()}updateIsLive(){}draw(){this.updateIsLive();let e=this.isLive?(0,d.t6)():(0,d.gR)();return(0,s.jsxs)(n.YJ,{ref:this.ref,listening:!0,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.onClick,onContextMenu:this.onContextMenu,onMouseDown:e=>e.cancelBubble=!0,children:[(0,i.createElement)(n.wA,{...o.$,ref:this.pathRef,stroke:e,strokeWidth:this.isSelected()?o.T.ArrowHoveredStrokeWidth:o.T.ArrowStrokeWidth,data:this.path(),key:l.P.key++,hitStrokeWidth:10}),(0,i.createElement)(n.i3,{...o.$,ref:this.arrowHeadRef,points:this.points.slice(this.points.length-4),fill:e,strokeEnabled:!1,pointerWidth:this.isSelected()?o.T.ArrowHoveredHeadSize:o.T.ArrowHeadSize,key:l.P.key++})]},l.P.key++)}}},50073(e,t,a){"use strict";a.d(t,{v:()=>g});var s=a(74848),i=a(96540),n=a(2494),r=a(6203),o=a(96702),l=a(26607),d=a(55410);class c extends d.B{parent;value=null;data=void 0;constructor(e){super(),this.parent=e,this._x=this.parent.x(),this._y=this.parent.y(),this._height=this.parent.height(),this._width=this.parent.width()}draw(){let e=this.parent.isReferenced()&&this.parent.isEnclosingFrameLive()?(0,l.t6)():(0,l.gR)();return(0,i.createElement)(n.rw,{...r.$,key:o.P.key++,x:this.x(),y:this.y(),width:this.width(),height:this.height(),stroke:e,ref:this.ref})}}var u=a(33422),h=a(35020),p=a(81698),m=a(85310);class g extends m.W{data;enclosingFrame;units=[];totalWidth=0;totalHeight=0;constructor(e,t){super(),this.data=e,o.P.memoizeValue(e,this),this.addReference(t)}handleNewReference(e){if((0,l.Xv)(this,e)){if(e instanceof h.O){this.enclosingFrame=e.frame;let t=o.P.getGhostFrameX(e.frame.environment.id),a=void 0!==t?t:e.frame.x();this._x=a+e.frame.width()+r.T.FrameMarginX,this._y=e.y()}else e.isLastUnit?(this._x=e.x()+2*r.T.DataUnitWidth,this._y=e.y()):(this._x=e.x(),this._y=e.y()+e.parent.totalHeight+r.T.DataUnitHeight);this._width=Math.max(this.data.length*r.T.DataUnitWidth,r.T.DataMinWidth),this.totalWidth=this._width,this._height=r.T.DataUnitHeight,this.totalHeight=this._height,this.units=Array(this.data.length);for(let e=this.data.length-1;e>=0;e--){let t=new u.C(e,this.data[e],this);(t.value instanceof g||t.value instanceof p.E)&&(0,l.Xv)(t.value,t)&&(this.totalWidth=Math.max(this.totalWidth,t.value.totalWidth+(e===this.data.length-1?(e+2)*r.T.DataUnitWidth:e*r.T.DataUnitWidth)),this.totalHeight=Math.max(this.totalHeight,t.value.y()+(t.value instanceof g?t.value.totalHeight:t.value.height()/2)-t.y())),this.units[e]=t}}}isEnclosingFrameLive(){let e=this.data.id;return!!e&&o.P.liveObjectIDs.has(e)}isLive(){return this.isEnclosingFrameLive()}markAsReferenced(){if(!this.isReferenced())for(let e of(super.markAsReferenced(),this.units))e.value.markAsReferenced()}onMouseEnter=e=>{for(let t of(e.cancelBubble=!0,this.units))t.showIndex()};onMouseLeave=e=>{for(let t of(e.cancelBubble=!0,this.units))t.hideIndex()};draw(){return this.isDrawn()?null:(this._isDrawn=!0,(0,s.jsx)(n.YJ,{ref:this.ref,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:this.units.length>0?this.units.map(e=>e.draw()):new c(this).draw()},o.P.key++))}}},9274(e,t,a){"use strict";a.d(t,{K:()=>m});var s=a(74848),i=a(96540),n=a(2494),r=a(53351),o=a(6203),l=a(96702),d=a(26607),c=a(1582),u=a(35020),h=a(96349),p=a(85310);class m extends p.W{data;radius=o.T.FnRadius;innerRadius=o.T.FnInnerRadius;labelRef=i.createRef();tooltip="continuation";tooltipWidth=(0,d.q_)(this.tooltip);exportTooltip="continuation";exportTooltipWidth=(0,d.q_)(this.exportTooltip);centerX;enclosingFrame;env;control;stash;_arrow;constructor(e,t){super(),this.data=e,l.P.memoizeValue(e,this),this.centerX=0,this._width=2.5*this.radius,this._height=2.5*this.radius,this.env=this.data.getEnv()[0],this.enclosingFrame=h.w.getFrom(this.env),this.control=this.data.getControl(),this.stash=this.data.getStash(),this.addReference(t)}isLive(){let e=this.data.id;return!!e&&l.P.liveObjectIDs.has(e)}handleNewReference(e){(0,d.Xv)(this,e)&&(e instanceof u.O?(this._x=e.frame.x()+e.frame.width()+o.T.FrameMarginX,this._y=e.y(),this.centerX=this._x+2*this.radius):(e.isLastUnit?(this._x=e.x()+2*o.T.DataUnitWidth,this._y=e.y()+o.T.DataUnitHeight/2-this.radius):(this._x=e.x(),this._y=e.y()+e.parent.height()+o.T.DataUnitHeight),this.centerX=this._x+o.T.DataUnitWidth/2,this._x=this.centerX-2*this.radius),this._y+=this.radius)}arrow(){return this._arrow}onMouseEnter=({currentTarget:e})=>{r.A.getPrintableMode()||((0,d.SU)(e),this.labelRef.current?.moveToTop(),this.labelRef.current?.show())};onMouseLeave=({currentTarget:e})=>{r.A.getPrintableMode()||((0,d.rn)(e),this.labelRef.current?.hide())};draw(){this.enclosingFrame&&(this._arrow=new c.q(this).to(this.enclosingFrame));let e=this.isLive()?(0,d.eQ)():(0,d.Xt)(),t=this.isLive()?(0,d.t6)():(0,d.gR)();return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsxs)(n.YJ,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,ref:this.ref,children:[(0,i.createElement)(n.rw,{...o.$,key:l.P.key++,x:this.centerX-1.5*this.radius,y:this.y()-this.radius,width:this.radius/2,height:2*this.radius,stroke:t}),(0,i.createElement)(n.rw,{...o.$,key:l.P.key++,x:this.centerX-this.radius,y:this.y()-1.5*this.radius,width:2*this.radius,height:this.radius/2,stroke:t}),(0,i.createElement)(n.jl,{...o.$,key:l.P.key++,x:this.centerX,y:this.y(),radius:this.radius,stroke:t}),(0,i.createElement)(n.jl,{...o.$,key:l.P.key++,x:this.centerX,y:this.y(),radius:this.innerRadius,fill:t})]}),(0,s.jsxs)(n.JU,{x:this.x()+this.width()+2*o.T.TextPaddingX,y:this.y()-o.T.TextPaddingY,visible:r.A.getPrintableMode(),ref:this.labelRef,children:[r.A.getPrintableMode()?(0,s.jsx)(n.vw,{stroke:t}):(0,s.jsx)(n.vw,{stroke:o.T.HoverBgColor,fill:o.T.HoverBgColor,opacity:o.T.FnTooltipOpacity}),(0,s.jsx)(n.EY,{text:r.A.getPrintableMode()?this.exportTooltip:this.tooltip,fontFamily:o.T.FontFamily,fontSize:o.T.FontSize,fontStyle:o.T.FontStyle,fill:e,padding:5})]}),this._arrow?.draw()]},l.P.key++)}}},81698(e,t,a){"use strict";a.d(t,{E:()=>m});var s=a(74848),i=a(96540),n=a(2494),r=a(53351),o=a(6203),l=a(96702),d=a(26607),c=a(1582),u=a(35020),h=a(96349),p=a(85310);class m extends p.W{data;radius=o.T.FnRadius;innerRadius=o.T.FnInnerRadius;fnName;paramsText;bodyText;exportBodyText;tooltip;tooltipWidth;exportTooltip;exportTooltipWidth;totalWidth;labelRef=i.createRef();centerX;enclosingFrame;_arrow;constructor(e,t){super(),this.data=e,l.P.memoizeValue(e,this),this.centerX=0,this._width=4*this.radius,this._height=2*this.radius,this.fnName=(0,d.TJ)(this.data)?"":this.data.functionName,this.paramsText=`params: ${(0,d.wM)(this.data)}`,this.bodyText=`body: ${(0,d.e_)(this.data)}`,this.exportBodyText=(this.bodyText.length>23?this.bodyText.slice(0,20):this.bodyText).split("\n").slice(0,2).join("\n")+" ...",this.tooltip=`${this.paramsText}
${this.bodyText}`,this.exportTooltip=`${this.paramsText}
${this.exportBodyText}`,this.tooltipWidth=Math.max((0,d.q_)(this.paramsText),(0,d.q_)(this.bodyText)),this.exportTooltipWidth=Math.max((0,d.q_)(this.paramsText),(0,d.q_)(this.exportBodyText)),this.totalWidth=this._width+2*o.T.TextPaddingX+10+(r.A.getPrintableMode()?this.exportTooltipWidth:this.tooltipWidth),this.addReference(t)}handleNewReference(e){if((0,d.Xv)(this,e)){if(e instanceof u.O){let t=l.P.getGhostFrameX(e.frame.environment.id),a=void 0!==t?t:e.frame.x();this._x=a+e.frame.width()+o.T.FrameMarginX,this._y=e.y(),this.centerX=this._x+2*this.radius}else e.isLastUnit?(this._x=e.x()+2*o.T.DataUnitWidth,this._y=e.y()+o.T.DataUnitHeight/2-this.radius):(this._x=e.x(),this._y=e.y()+e.parent.totalHeight+o.T.DataUnitHeight),this.centerX=this._x+o.T.DataUnitWidth/2,this._x=this.centerX-2*this.radius;this._y+=this.radius}}arrow(){return this._arrow}onMouseEnter=({currentTarget:e})=>{r.A.getPrintableMode()||((0,d.SU)(e),this.labelRef.current?.moveToTop(),this.labelRef.current?.show())};onMouseLeave=({currentTarget:e})=>{r.A.getPrintableMode()||((0,d.rn)(e),this.labelRef.current?.hide())};isLive(){let e=this.data.id;return!!e&&l.P.liveObjectIDs.has(e)}draw(){if(void 0===this.fnName)throw Error("Closure has no main reference and is not initialised!");this.centerX=this.x()+2*this.radius,this.enclosingFrame=h.w.getFrom(this.data.environment),this.enclosingFrame&&(this._arrow=new c.q(this).to(this.enclosingFrame));let e=this.isLive(),t=e?(0,d.eQ)():(0,d.Xt)(),a=e?(0,d.t6)():(0,d.gR)();return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsxs)(n.YJ,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,ref:this.ref,children:[(0,i.createElement)(n.jl,{...o.$,key:l.P.key++,x:this.centerX-this.radius,y:this.y(),radius:this.radius,stroke:a}),(0,i.createElement)(n.jl,{...o.$,key:l.P.key++,x:this.centerX-this.radius,y:this.y(),radius:this.innerRadius,fill:a}),(0,i.createElement)(n.jl,{...o.$,key:l.P.key++,x:this.centerX+this.radius,y:this.y(),radius:this.radius,stroke:a}),(0,i.createElement)(n.jl,{...o.$,key:l.P.key++,x:this.centerX+this.radius,y:this.y(),radius:this.innerRadius,fill:a})]}),(0,s.jsxs)(n.JU,{x:this.x()+this.width()+2*o.T.TextPaddingX,y:this.y()-o.T.TextPaddingY,visible:r.A.getPrintableMode(),ref:this.labelRef,children:[r.A.getPrintableMode()?(0,s.jsx)(n.vw,{stroke:a}):(0,s.jsx)(n.vw,{stroke:o.T.HoverBgColor,fill:o.T.HoverBgColor,opacity:o.T.FnTooltipOpacity}),(0,s.jsx)(n.EY,{text:r.A.getPrintableMode()?this.exportTooltip:this.tooltip,fontFamily:o.T.FontFamily,fontSize:o.T.FontSize,fontStyle:o.T.FontStyle,fill:t,padding:5})]}),this._arrow?.draw()]},l.P.key++)}}},44889(e,t,a){"use strict";a.d(t,{N:()=>h});var s=a(74848),i=a(96540),n=a(2494),r=a(53351),o=a(6203),l=a(96702),d=a(26607),c=a(1582),u=a(85310);class h extends u.W{data;radius=o.T.FnRadius;innerRadius=o.T.FnInnerRadius;paramsText;bodyText;exportBodyText;tooltip;tooltipWidth;exportTooltip;exportTooltipWidth;totalWidth;labelRef=i.createRef();centerX;_arrow;constructor(e,t){super(),this.data=e,l.P.memoizeValue(e,this);const a=l.P.getGhostFrameX(t.frame.environment.id),s=void 0!==a?a:t.frame.x();this._x=s+t.frame.width()+o.T.FrameMarginX,this._y=t.y(),this.centerX=this._x+2*this.radius,this._y+=this.radius,this._width=4*this.radius,this._height=2*this.radius,this.paramsText=`params: ${(0,d.wM)(this.data)}`,this.bodyText=`body: ${(0,d.e_)(this.data)}`,this.exportBodyText=(this.bodyText.length>23?this.bodyText.slice(0,20):this.bodyText).split("\n").slice(0,2).join("\n")+" ...",this.tooltip=`${this.paramsText}
${this.bodyText}`,this.exportTooltip=`${this.paramsText}
${this.exportBodyText}`,this.tooltipWidth=Math.max((0,d.q_)(this.paramsText),(0,d.q_)(this.bodyText)),this.exportTooltipWidth=Math.max((0,d.q_)(this.paramsText),(0,d.q_)(this.exportBodyText)),this.totalWidth=this._width+2*o.T.TextPaddingX+2*o.T.FnTooltipTextPadding+(r.A.getPrintableMode()?this.exportTooltipWidth:this.tooltipWidth),this.addReference(t)}handleNewReference(){}arrow(){return this._arrow}onMouseEnter=({currentTarget:e})=>{r.A.getPrintableMode()||((0,d.SU)(e),this.labelRef.current?.moveToTop(),this.labelRef.current?.show())};onMouseLeave=({currentTarget:e})=>{r.A.getPrintableMode()||((0,d.rn)(e),this.labelRef.current?.hide())};draw(){this._isDrawn=!0,l.P.globalEnvNode.frame&&(this._arrow=new c.q(this).to(l.P.globalEnvNode.frame));let e=this.isReferenced()?(0,d.eQ)():(0,d.Xt)(),t=this.isReferenced()?(0,d.t6)():(0,d.gR)();return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsxs)(n.YJ,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,ref:this.ref,children:[(0,i.createElement)(n.jl,{...o.$,key:l.P.key++,x:this.centerX-this.radius,y:this.y(),radius:this.radius,stroke:t}),(0,i.createElement)(n.jl,{...o.$,key:l.P.key++,x:this.centerX-this.radius,y:this.y(),radius:this.innerRadius,fill:t}),(0,i.createElement)(n.jl,{...o.$,key:l.P.key++,x:this.centerX+this.radius,y:this.y(),radius:this.radius,stroke:t}),(0,i.createElement)(n.jl,{...o.$,key:l.P.key++,x:this.centerX+this.radius,y:this.y(),radius:this.innerRadius,fill:t})]}),(0,s.jsxs)(n.JU,{x:this.x()+this.width()+2*o.T.TextPaddingX,y:this.y()-o.T.TextPaddingY,visible:r.A.getPrintableMode(),ref:this.labelRef,children:[r.A.getPrintableMode()?(0,s.jsx)(n.vw,{stroke:t}):(0,s.jsx)(n.vw,{stroke:o.T.HoverBgColor,fill:o.T.HoverBgColor,opacity:o.T.FnTooltipOpacity}),(0,s.jsx)(n.EY,{text:r.A.getPrintableMode()?this.exportTooltip:this.tooltip,fontFamily:o.T.FontFamily,fontSize:o.T.FontSize,fontStyle:o.T.FontStyle,fill:e,padding:o.T.FnTooltipTextPadding})]}),this._arrow?.draw()]},l.P.key++)}}},4797(e,t,a){"use strict";a.d(t,{l:()=>m});var s=a(74848),i=a(96540),n=a(6203),r=a(96702),o=a(26607),l=a(2494),d=a(55410);class c extends d.B{reference;constructor(e){super(),this.reference=e,this._x=e.x(),this._y=e.y(),this._height=e.height(),this._width=e.width()}draw(){return this._x=this.reference.x(),this._y=this.reference.y(),(0,i.createElement)(l.N1,{...n.$,key:r.P.key++,points:[this.x(),this.y()+this.height(),this.x()+this.width(),this.y()],stroke:this.reference.parent.isReferenced()?(0,o.t6)():(0,o.gR)(),hitStrokeWidth:n.T.DataHitStrokeWidth,ref:this.ref,listening:!1})}}var u=a(35020),h=a(32711),p=a(85310);class m extends p.W{data;text;constructor(e,t){if(super(),this.data=e,t instanceof u.O)this._x=t.x()+(0,o.q_)(t.keyString)+n.T.TextPaddingX,this._y=t.y(),this.text=new h.E(this.data,this.x(),this.y(),{isStringIdentifiable:!(0,o.HQ)(e),faded:!0});else{const a=t.width(),s=(0,o.kZ)(this.data)?0:Math.min((0,o.q_)((0,o.HQ)(e)?e.toReplString():String(this.data)),a);this._x=t.x()+(t.width()-s)/2,this._y=t.y()+(t.height()-n.T.FontSize)/2,this.text=(0,o.kZ)(this.data)?new c(t):new h.E(this.data,this.x(),this.y(),{maxWidth:a,isStringIdentifiable:!(0,o.HQ)(e),faded:!0})}this._width=this.text.width(),this._height=this.text.height(),this.ref=this.text.ref,this.addReference(t)}handleNewReference(){if(this.references.length>1)throw Error("Primitive values cannot have more than one reference!")}markAsReferenced(){!this.isReferenced()&&(super.markAsReferenced(),this.text instanceof h.E&&(this.text.options.faded=!1))}setFaded(e){this.text instanceof h.E&&(this.text.options.faded=e)}draw(){let e=this.references[0];if(e){if(e instanceof u.O)this._x=e.x()+(0,o.q_)(e.keyString)+n.T.TextPaddingX,this._y=e.y();else{let t=this.text.width();this._x=e.x()+(e.width()-t)/2,this._y=e.y()+(e.height()-n.T.FontSize)/2}this.text._x=this.x(),this.text._y=this.y()}return(0,s.jsx)(i.Fragment,{children:this.text.draw()},r.P.key++)}}},82021(e,t,a){"use strict";a.d(t,{B:()=>c});var s=a(74848),i=a(96540),n=a(6203),r=a(96702),o=a(26607),l=a(32711),d=a(85310);class c extends d.W{data=Symbol();text;constructor(e){super(),this.references=[e],this._x=e.x()+(0,o.q_)(e.keyString)+n.T.TextPaddingX,this._y=e.y(),this.text=new l.E(n.T.UnassignedData,this._x,this._y,{isStringIdentifiable:!1}),this._width=this.text.width(),this._height=this.text.height(),this.ref=this.text.ref}handleNewReference(){throw Error("Unassigned value cannot have more than one reference!")}setFaded(e){this.text instanceof l.E&&(this.text.options.faded=e)}draw(){return this._isDrawn=!0,(0,s.jsx)(i.Fragment,{children:this.text.draw()},r.P.key++)}}},85310(e,t,a){"use strict";a.d(t,{W:()=>n}),a(96540);var s=a(26607),i=a(55410);class n extends i.B{_isReferenced=!1;isReferenced(){return this._isReferenced}markAsReferenced(){this._isReferenced=!0}references=[];addReference(e){this.references.push(e),this.handleNewReference(e),this.isReferenced()||(0,s.d4)(e)||this.markAsReferenced()}}},63557(e,t,a){"use strict";a.d(t,{L:()=>S});var s=a(74848),i=a(96540),n=a(2494),r=a(26607),o=a(6203),l=a(28746),d=a(55410),c=a(94657);class u extends d.B{static TO_X_INDEX=2;_points=[];constructor(e,t,a,s){super(),this._points.push(e,t,a,s)}setToX(e){this._points[u.TO_X_INDEX]=e}onMouseEnter(e){(0,r.Lq)(e.currentTarget),(0,r.SU)(e.currentTarget)}onMouseLeave(e){(0,r.eM)(e.currentTarget),(0,r.rn)(e.currentTarget)}draw(){let e=`M ${this._points[0]} ${this._points[1]} L ${this._points[2]} ${this._points[3]}`;return(0,s.jsxs)(n.YJ,{onMouseEnter:e=>this.onMouseEnter(e),onMouseLeave:e=>this.onMouseLeave(e),children:[(0,i.createElement)(n.wA,{...o.$,stroke:(0,r.t6)(),strokeWidth:o.T.ArrowStrokeWidth,hitStrokeWidth:o.T.ArrowHitStrokeWidth,data:e,key:S.key++}),(0,i.createElement)(n.i3,{...o.$,points:this._points.slice(this._points.length-4),fill:(0,r.t6)(),strokeEnabled:!1,pointerWidth:o.T.ArrowHeadSize,pointerLength:o.T.ArrowHeadSize,key:S.key++})]},S.key++)}}class h extends d.B{_text;_stroke;_tooltip;highlightOnHover;unhighlightOnHover;_arrow;_tooltipRef;constructor(e,t,a,s,n,o,l){super(),this._text=t,this._stroke=a,this._tooltip=n,this.highlightOnHover=o,this.unhighlightOnHover=l,this._x=c.V.ControlPosX,this._y=e,this._text=(0,r.EJ)(this._text,c.V.ControlMaxTextWidth,c.V.ControlMaxTextHeight),this._tooltipRef=i.createRef(),this._height=(0,r.lb)(this._text,c.V.ControlMaxTextWidth)+2*c.V.ControlItemTextPadding,this._width=c.V.ControlItemWidth,s&&(this._arrow=new u(this._x+this._width,this._y+this._height/2,s.x(),s.y()+s.height()/2+s.name.height()))}isCurrentItem=()=>this._stroke===(0,r.NP)();onMouseEnter=e=>{this.highlightOnHover(),this.isCurrentItem()||(0,r.Lq)(e.currentTarget),(0,r.SU)(e.currentTarget),this._tooltipRef.current.show()};onMouseLeave=e=>{this.unhighlightOnHover(),this.isCurrentItem()||(0,r.eM)(e.currentTarget),(0,r.rn)(e.currentTarget),this._tooltipRef.current.hide()};draw(){let e={fill:(0,r.eQ)(),padding:c.V.ControlItemTextPadding,fontFamily:c.V.FontFamily,fontSize:c.V.FontSize,fontStyle:c.V.FontStyle,fontVariant:c.V.FontVariant},t={stroke:this._stroke,cornerRadius:c.V.ControlItemCornerRadius};return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsxs)(n.JU,{x:this.x(),y:this.y(),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,i.createElement)(n.vw,{...o.$,...t,key:S.key++}),(0,i.createElement)(n.EY,{...o.$,...e,text:this._text,width:this.width(),height:this.height(),key:S.key++})]},S.key++),(0,s.jsxs)(n.JU,{x:this.x()+this.width()+c.V.TooltipMargin,y:this.y()+c.V.TooltipMargin,visible:!1,ref:this._tooltipRef,children:[(0,i.createElement)(n.vw,{...o.$,stroke:"black",fill:"black",opacity:c.V.TooltipOpacity,key:S.key++}),(0,i.createElement)(n.EY,{...o.$,...e,text:this._tooltip,padding:c.V.TooltipPadding,key:S.key++})]},S.key++),this._arrow?.draw()]},S.key++)}}class p extends d.B{_controlItems=[];constructor(e){super(),this._x=c.V.ControlPosX,this._y=c.V.ControlPosY+c.V.StashItemHeight+2*c.V.StashItemTextPadding;let t=this._y;e.getStack().forEach((a,s)=>{let i=this.getControlItemString(a),n=s===e.getStack().length-1?(0,r.NP)():(0,r.t6)(),o=l.ECE.isInstr(a)&&a.instrType===l.ECE.InstrType.ENV?S.environment?.frames.find(e=>e.frame===a.env):void 0,d=this.getControlItemTooltip(a);this.getControlItemTooltip(a);let c=l.ECE.isNode(a)?a:a.srcNode,u=new h(t,i,n,o,d,()=>{let e=-1,t=-1;c.location&&(e=c.location.startLine-1,t=c.location.endLine?c.location.endLine-1:e),S.setEditorHighlightedLines([[e,t]])},()=>S.setEditorHighlightedLines([]));this._controlItems.push(u),t+=u.height()}),this._height=t-this._y,this._width=c.V.ControlItemWidth}draw(){return(0,s.jsx)(n.YJ,{ref:this.ref,children:this._controlItems.map(e=>e.draw())},S.key++)}getControlItemString=e=>{if(l.ECE.isNode(e))return(0,l.astToString)(e);switch(e.instrType){case l.ECE.InstrType.RESET:return"return";case l.ECE.InstrType.ASSIGNMENT:return"asgn";case l.ECE.InstrType.BINARY_OP:return e.symbol;case l.ECE.InstrType.POP:return"pop";case l.ECE.InstrType.INVOCATION:return`invoke ${e.arity}`;case l.ECE.InstrType.ENV:return"env";case l.ECE.InstrType.MARKER:return"mark";case l.ECE.InstrType.EVAL_VAR:return`name ${e.symbol}`;case l.ECE.InstrType.NEW:return`new ${e.c.frame.name}`;case l.ECE.InstrType.RES_TYPE:return`res_type ${"Class"===e.value.kind?e.value.frame.name:(0,l.astToString)(e.value)}`;case l.ECE.InstrType.RES_TYPE_CONT:return`res_type_cont ${e.name}`;case l.ECE.InstrType.RES_OVERLOAD:return`res_overload ${e.name} ${e.arity}`;case l.ECE.InstrType.RES_OVERRIDE:return"res_override";case l.ECE.InstrType.RES_CON_OVERLOAD:return`res_con_overload ${e.arity}`;case l.ECE.InstrType.RES:return`res ${e.name}`;case l.ECE.InstrType.DEREF:return"deref";default:return"INSTRUCTION"}};getControlItemTooltip=e=>{if(l.ECE.isNode(e))return(0,l.astToString)(e);switch(e.instrType){case l.ECE.InstrType.RESET:return"Skip control items until marker instruction is reached";case l.ECE.InstrType.ASSIGNMENT:return"Assign value on top of stash to location on top of stash";case l.ECE.InstrType.BINARY_OP:return`Perform ${e.symbol} on top 2 stash values`;case l.ECE.InstrType.POP:return"Pop most recently pushed value from stash";case l.ECE.InstrType.INVOCATION:return`Invoke method with ${e.arity} argument${1===e.arity?"":"s"}`;case l.ECE.InstrType.ENV:return"Set current environment to this environment";case l.ECE.InstrType.MARKER:return"Mark return address";case l.ECE.InstrType.EVAL_VAR:return`name ${e.symbol}`;case l.ECE.InstrType.NEW:return`Create new instance of class ${e.c.frame.name}`;case l.ECE.InstrType.RES_TYPE:return`Resolve type of ${"Class"===e.value.kind?e.value.frame.name:(0,l.astToString)(e.value)}`;case l.ECE.InstrType.RES_TYPE_CONT:return`Resolve type of ${e.name} in most recently pushed type from stash`;case l.ECE.InstrType.RES_OVERLOAD:return`Resolve overloading of method ${e.name} with ${e.arity} argument${1===e.arity?"":"s"}`;case l.ECE.InstrType.RES_OVERRIDE:return"Resolve overriding of resolved method on top of stash";case l.ECE.InstrType.RES_CON_OVERLOAD:return`Resolve constructor overloading of class on stash with ${e.arity} argument${1===e.arity?"":"s"}`;case l.ECE.InstrType.RES:return`Resolve field ${e.name} of most recently pushed value from stash`;case l.ECE.InstrType.DEREF:return"Dereference most recently pushed value from stash";default:return"INSTRUCTION"}}}class m extends d.B{_method;_centerX;_tooltipRef;_tooltip;constructor(e,t,a){super(),this._method=a,this._x=e,this._y=t,this._centerX=this._x+2*o.T.FnRadius,this._tooltipRef=i.createRef(),this._tooltip=(0,l.astToString)(this._method.mtdOrCon)}get method(){return this._method}setX(e){this._x=e,this._centerX=this._x+2*o.T.FnRadius}onMouseEnter=e=>{(0,r.SU)(e.currentTarget),this._tooltipRef.current.show()};onMouseLeave=e=>{(0,r.rn)(e.currentTarget),this._tooltipRef.current.hide()};draw(){return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsxs)(n.YJ,{onMouseEnter:e=>this.onMouseEnter(e),onMouseLeave:e=>this.onMouseLeave(e),children:[(0,i.createElement)(n.jl,{...o.$,key:S.key++,x:this._centerX-o.T.FnRadius,y:this.y(),radius:o.T.FnRadius,stroke:(0,r.t6)()}),(0,i.createElement)(n.jl,{...o.$,key:S.key++,x:this._centerX-o.T.FnRadius,y:this.y(),radius:o.T.FnInnerRadius,fill:(0,r.t6)()})]},S.key++),(0,s.jsxs)(n.JU,{x:this.x()+2*o.T.FnRadius+2*o.T.TextPaddingX,y:this.y()-(0,r.lb)(this._tooltip,(0,r.q_)(this._tooltip))/2,visible:!1,ref:this._tooltipRef,children:[(0,s.jsx)(n.vw,{stroke:"black",fill:"black",opacity:o.T.FnTooltipOpacity},S.key++),(0,s.jsx)(n.EY,{text:this._tooltip,fontFamily:c.V.FontFamily,fontSize:c.V.FontSize,fontStyle:c.V.FontStyle,fill:(0,r.eQ)(),padding:5},S.key++)]},S.key++)]},S.key++)}}class g extends d.B{_text;constructor(e,t,a){super(),this._text=e,this._x=t,this._y=a,this._height=o.T.FontSize,this._width=(0,r.q_)(this._text)}get text(){return this._text}setY(e){this._y=e}draw(){let e={fontFamily:o.T.FontFamily,fontSize:o.T.FontSize,fontStyle:o.T.FontStyle,fill:(0,r.eQ)()};return(0,s.jsx)(n.YJ,{children:(0,s.jsx)(n.JU,{x:this.x(),y:this.y(),children:(0,i.createElement)(n.EY,{...o.$,key:S.key++,text:this._text,...e})},S.key++)},S.key++)}}o.T.FontFamily.toString(),o.T.FontSize,o.T.FontStyle.toString(),o.T.FontVariant.toString();class y extends d.B{_variable;_type;_value;constructor(e,t,a){super(),this._variable=a,this._x=e,this._y=t,this._type=new g(this._variable.type,this._x,this._y),"Literal"===this.variable.value.kind?this._value=new g(this.variable.value.literalType.value,this._x+o.T.TextPaddingX,this._y+this._type.height()+o.T.TextPaddingX):(this.variable.value.kind,l.ECE.StructType.SYMBOL,this._value=new g("",this._x+o.T.TextPaddingX,this._y+this._type.height()+o.T.TextPaddingX)),this._height=this._type.height()+this._value.height()+2*o.T.TextPaddingX,this._width=Math.max(this._type.width(),this._value.width()+2*o.T.TextPaddingX)}get variable(){return this._variable}set value(e){this._value=e,this._height=this._type.height()+o.T.FontSize+2*o.T.TextPaddingX,this._width=Math.max(this._type.width(),o.T.TextMinWidth)}get type(){return this._type}draw(){return(0,s.jsxs)(n.YJ,{children:[this._type.draw(),(0,i.createElement)(n.rw,{...o.$,x:this._x,y:this._y+this._type.height(),width:this._width,height:this._height-this._type.height(),stroke:(0,r.eQ)(),key:S.key++}),this._value.draw()]},S.key++)}}class f extends d.B{_name;_value;_arrow;constructor(e,t,a,s){super(),this._x=a,this._y=s,t.kind===l.ECE.StructType.CLOSURE?(this._name=new g(e+o.T.VariableColon,this.x(),this.y()),this._value=new m(this._name.x()+this._name.width(),this.y()+this._name.height()/2,t),this._arrow=new u(this._name.x()+this._name.width(),this._name.y()+this._name.height()/2,this._value.x(),this._value.y())):t.kind===l.ECE.StructType.VARIABLE?(this._name=new g(e+o.T.VariableColon,this.x(),this.y()+o.T.FontSize+o.T.TextPaddingX),this._value=new y(this._name.x()+this._name.width(),this.y(),t)):(this._name=new g(e+o.T.VariableColon,this.x(),this.y()+o.T.FontSize+o.T.TextPaddingX),this._value=new g("",this._name.x()+this._name.width()+o.T.TextPaddingX,this.y()+o.T.TextPaddingX)),this._height=Math.max(this._name.height(),this._value.height()),this._width=this._value.x()+this._value.width()-this._name.x()}get value(){return this._value}setArrowToX(e){this._arrow?.setToX(e)}draw(){return(0,s.jsxs)(i.Fragment,{children:[this._name.draw(),this._value.draw(),this._arrow?.draw()]},S.key++)}}class b extends d.B{frame;stroke;tooltip;highlightOnHover;unhighlightOnHover;tooltipRef;bindings=[];name;parent;constructor(e,t,a,s,n,r,l){super(),this.frame=e,this.stroke=s,this.tooltip=n,this.highlightOnHover=r,this.unhighlightOnHover=l,this._x=t,this._y=a,this.name=new g(e.name,this._x+o.T.FramePaddingX,this._y),this._width=Math.max(o.T.FrameMinWidth,this.name.width()+2*o.T.FramePaddingX),this._height=o.T.FramePaddingY+this.name.height();let d=this._y+this.name.height()+o.T.FramePaddingY;for(const[t,a]of e.frame){const e=new f(t,a,this._x+o.T.FramePaddingX,d);this.bindings.push(e),d+=e.height()+o.T.FramePaddingY,this._width=Math.max(this._width,e.width()+2*o.T.FramePaddingX),this._height+=e.height()+o.T.FramePaddingY}this.bindings.filter(e=>e.value instanceof m).forEach(e=>{e.value.setX(this._x+this._width+o.T.FramePaddingX),e.setArrowToX(this._x+this._width+o.T.FramePaddingX)}),this.tooltipRef=i.createRef()}setWidth(e){this._width=e}setParent(e){this.parent=e}onMouseEnter=e=>{this.highlightOnHover?.(),(this.tooltip||this.highlightOnHover)&&(0,r.SU)(e.currentTarget),this.tooltip&&this.tooltipRef.current.show()};onMouseLeave=e=>{this.unhighlightOnHover?.(),(this.tooltip||this.unhighlightOnHover)&&(0,r.rn)(e.currentTarget),this.tooltip&&this.tooltipRef.current.hide()};draw(){let e={fill:(0,r.eQ)(),padding:Number(c.V.ControlItemTextPadding),fontFamily:c.V.FontFamily.toString(),fontSize:Number(c.V.FontSize),fontStyle:c.V.FontStyle.toString(),fontVariant:c.V.FontVariant.toString()};return(0,s.jsxs)(n.YJ,{children:[(0,i.createElement)(n.rw,{...o.$,x:this.x(),y:this.y()+this.name.height(),width:this.width(),height:this.height(),stroke:this.stroke,cornerRadius:Number(o.T.FrameCornerRadius),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,key:S.key++}),this.name.draw(),this.bindings.map(e=>e.draw()),this.parent&&new u(this._x+o.T.FramePaddingX/2,this._y+this.name.height(),this.parent.x()+o.T.FramePaddingX/2,this.parent.y()+this.parent.height()+this.name?.height()).draw(),this.tooltip&&(0,s.jsxs)(n.JU,{x:this.x()+this.width()+c.V.TooltipMargin,y:this.y()+c.V.TooltipMargin,visible:!1,ref:this.tooltipRef,children:[(0,i.createElement)(n.vw,{...o.$,stroke:"black",fill:"black",opacity:Number(c.V.TooltipOpacity),key:S.key++}),(0,i.createElement)(n.EY,{...o.$,...e,text:this.tooltip,padding:Number(c.V.TooltipPadding),key:S.key++})]},S.key++)]},S.key++)}}class x extends d.B{static TO_X_INDEX=2;_points=[];constructor(e,t,a,s){super(),this._points.push(e,t,a,s)}setToX(e){this._points[x.TO_X_INDEX]=e}onMouseEnter(e){(0,r.Lq)(e.currentTarget),(0,r.SU)(e.currentTarget)}onMouseLeave(e){(0,r.eM)(e.currentTarget),(0,r.rn)(e.currentTarget)}draw(){let e=`M ${this._points[0]} ${this._points[1]} L ${this._points[2]} ${this._points[3]}`;return(0,s.jsx)(n.YJ,{onMouseEnter:e=>this.onMouseEnter(e),onMouseLeave:e=>this.onMouseLeave(e),children:(0,i.createElement)(n.wA,{...o.$,stroke:(0,r.t6)(),strokeWidth:Number(o.T.ArrowStrokeWidth),hitStrokeWidth:Number(o.T.ArrowHitStrokeWidth),data:e,key:S.key++})},S.key++)}}class v extends d.B{_frames;_object;constructor(e,t){super(),this._frames=e,this._object=t,this._x=e[0].x(),this._y=e[0].y(),this._height=this._frames.reduce((e,t)=>e+t.height(),0),this._width=this._frames.reduce((e,t)=>Math.max(e,t.width()),0)}get frames(){return this._frames}get object(){return this._object}getFrame(){return this._frames[this._frames.length-1]}draw(){return(0,s.jsx)(n.YJ,{children:this._frames.map(e=>e.draw())},S.key++)}}class A extends d.B{_methodFrames=[];_objects=[];_classFrames=[];_lines=[];constructor(e){super(),this._x=c.V.ControlPosX+c.V.ControlItemWidth+2*o.T.CanvasPaddingX,this._y=c.V.StashPosY+c.V.StashItemHeight+2*o.T.CanvasPaddingY;const t=this._x;let a=this._y,s=Number(o.T.FrameMinWidth);e.global.children.forEach(i=>{if(i.name.includes("(")){let n,l=i;for(;l;){let i=l===e.current?(0,r.NP)():(0,r.t6)(),d=new b(l,t,a,i);this._methodFrames.push(d),a+=d.height()+o.T.FramePaddingY,s=Math.max(s,d.width()),n&&d.setParent(n),n=d,l=l.children.length?l.children[0]:void 0}}});const i=t+s+o.T.FrameMinWidth;let n=this._y,d=Number(o.T.FrameMinWidth);e.objects.forEach(t=>{let a=[],s=Number(o.T.FrameMinWidth),l=t.frame;for(;l.parent;)l=l.parent;for(;l;){let t=l===e.current?(0,r.NP)():(0,r.t6)(),o=new b(l,i,n,t);n+=o.height(),d=Math.max(d,o.width()),l=l.children.length?l.children[0]:void 0,a.push(o),s=Math.max(s,o.width())}a.forEach(e=>e.setWidth(s)),n+=o.T.FramePaddingY,this._objects.push(new v(a,t))});const h=i+d+o.T.FrameMinWidth;let p=this._y;for(const t of e.global.frame.values()){const a=t.frame,s=a===e.current?(0,r.NP)():(0,r.t6)(),i=new b(a,h,p,s,"",()=>{let e=t.classDecl,a=-1,s=-1;e.location&&(a=e.location.startLine-1,s=e.location.endLine?e.location.endLine-1:a),S.setEditorHighlightedLines([[a,s]])},()=>S.setEditorHighlightedLines([])),n=t.superclass?.frame.name;if(n){const e=this._classFrames.find(e=>e.name.text===n);i.setParent(e)}this._classFrames.push(i),p+=i.height()+o.T.FramePaddingY}this._methodFrames.forEach(e=>{e.bindings.forEach(e=>{if(e.value instanceof y&&e.value.variable.value.kind===l.ECE.StructType.OBJECT){let t=e.value.variable.value.frame,a=this._objects.filter(e=>e.getFrame().frame===t)[0];e.value.value=new u(e.value.x()+e.value.width()/2,e.value.y()+e.value.type.height()+(e.value.height()-e.value.type.height())/2,a.x(),a.y()+a.height()/2)}})}),this._objects.flatMap(e=>e.frames).forEach(e=>{e.bindings.forEach(e=>{if(e.value instanceof y&&e.value.variable.value.kind===l.ECE.StructType.VARIABLE){let t=e.value.variable.value,a=this._classFrames.flatMap(e=>e.bindings).filter(e=>e.value instanceof y&&e.value.variable===t)[0].value;e.value.value=new u(e.value.x()+e.value.width()/2,e.value.y()+e.value.type.height()+(e.value.height()-e.value.type.height())/2,a.x(),a.y()+a.type.height())}if(e.value instanceof y&&e.value.variable.value.kind===l.ECE.StructType.OBJECT){let t=e.value.variable.value.frame,a=this._objects.find(e=>e.getFrame().frame===t);e.value.value=new u(e.value.x()+e.value.width()/2,e.value.y()+e.value.type.height()+(e.value.height()-e.value.type.height())/2,a.x(),a.y()+a.height()/2)}})}),this._objects.forEach(e=>{let t=this._classFrames.find(t=>t.name.text===e.object.class.frame.name),a=new x(e.x()+e.width(),e.y()+e.height()/2,t.x(),t.y()+t.height()/2+t.name.height());this._lines.push(a)})}get classes(){return this._classFrames}get objects(){return this._objects.flatMap(e=>e.frames)}get frames(){return this._methodFrames}draw(){return(0,s.jsxs)(n.YJ,{children:[this._methodFrames.map(e=>e.draw()),this._objects.flatMap(e=>e.frames).map(e=>e.draw()),this._classFrames.map(e=>e.draw()),this._lines.map(e=>e.draw())]},S.key++)}}class T extends d.B{_text;_stroke;_arrow;constructor(e,t,a,s){if(super(),this._text=t,this._stroke=a,this._x=e,this._y=c.V.StashPosY,this._height=c.V.StashItemHeight+2*c.V.StashItemTextPadding,this._width=2*c.V.StashItemTextPadding+(0,r.q_)(this._text),s){const e=s instanceof b?s.y()+s.name.height():s instanceof m?s.y():s.y()+s.type.height();this._arrow=new u(this._x+this._width/2,this._y+this._height,s.x(),e)}}draw(){let e={fill:(0,r.eQ)(),padding:c.V.StashItemTextPadding,fontFamily:c.V.FontFamily,fontSize:c.V.FontSize,fontStyle:c.V.FontStyle,fontVariant:c.V.FontVariant},t={stroke:this._stroke,cornerRadius:c.V.StashItemCornerRadius};return(0,s.jsxs)(n.YJ,{children:[(0,s.jsxs)(n.JU,{x:this.x(),y:this.y(),children:[(0,i.createElement)(n.vw,{...o.$,...t,key:S.key++}),(0,i.createElement)(n.EY,{...o.$,...e,text:this._text,key:S.key++})]},S.key++),this._arrow?.draw()]},S.key++)}}class w extends d.B{_stashItems=[];constructor(e){super(),this._x=c.V.StashPosX,this._y=c.V.StashPosY;let t=this._x;for(const a of e.getStack()){const e=this.getStashItemString(a),s=new T(t,e,(0,r.eQ)(),this.getStashItemRef(a));this._stashItems.push(s),t+=s.width()}this._height=c.V.StashItemHeight,this._width=t-this._x}draw(){return(0,s.jsx)(n.YJ,{children:this._stashItems.map(e=>e.draw())},S.key++)}getStashItemString=e=>{switch(e.kind){case"Literal":return e.literalType.value;case l.ECE.StructType.VARIABLE:return"location";case l.ECE.StructType.TYPE:return e.type;default:return e.kind.toLowerCase()}};getStashItemRef=e=>e.kind===l.ECE.StructType.CLOSURE?S.environment&&S.environment.classes.flatMap(e=>e.bindings).find(t=>t.value instanceof m&&t.value.method===e)?.value:e.kind===l.ECE.StructType.VARIABLE?S.environment&&(S.environment.frames.flatMap(e=>e.bindings).find(t=>t.value instanceof y&&t.value.variable===e)?.value||S.environment.classes.flatMap(e=>e.bindings).find(t=>t.value instanceof y&&t.value.variable===e)?.value||S.environment.objects.flatMap(e=>e.bindings).find(t=>t.value instanceof y&&t.value.variable===e)?.value):e.kind===l.ECE.StructType.CLASS?S.environment&&S.environment.classes.find(t=>t.frame===e.frame):e.kind===l.ECE.StructType.OBJECT?S.environment&&S.environment.objects.find(t=>t.frame===e.frame):void 0}class S{static key=0;static setVis;static setEditorHighlightedLines;static stageRef=i.createRef();static scaleFactor=1.02;static environment;static control;static stash;static init(e,t){this.setVis=e,this.setEditorHighlightedLines=t}static drawCse(e){if(!this.setVis||!e.environment||!e.control||!e.stash)throw Error("Java CSE Machine not initialized");S.environment=new A(e.environment),S.control=new p(e.control),S.stash=new w(e.stash),this.setVis(this.draw());let t=document.getElementById("env_visualizer-icon");t?.classList.add("side-content-tab-alert")}static clearCse(){this.setVis&&(this.setVis(void 0),S.environment=void 0,S.control=void 0,S.stash=void 0)}static zoomStage(e,t=1){if("boolean"!=typeof e&&e.evt.preventDefault(),S.stageRef.current){let a=S.stageRef.current,s=a.scaleX(),{x:i,y:n}=a.getPointerPosition(),r={x:(i-a.x())/s,y:(n-a.y())/s},o="boolean"!=typeof e?e.evt.deltaY>0?-1:1:e?1:-1;if(o>0&&s<3||o<0&&s>.4){let l=o>0?s*S.scaleFactor**t:s/S.scaleFactor**t;if(a.scale({x:l,y:l}),"boolean"!=typeof e){let e={x:i-r.x*l,y:n-r.y*l};a.position(e),a.batchDraw()}}}}static draw(){return(0,s.jsx)("div",{className:"sa-cse-machine","data-testid":"sa-cse-machine",children:(0,s.jsx)("div",{id:"scroll-container",style:{width:window.innerWidth-50,height:window.innerHeight-150,overflow:"hidden"},children:(0,s.jsx)("div",{id:"large-container",style:{width:o.T.CanvasMinWidth,height:o.T.CanvasMinHeight,overflow:"hidden",backgroundColor:(0,r.lG)()},children:(0,s.jsx)(n.BI,{width:+o.T.CanvasMinWidth,height:+o.T.CanvasMinHeight,ref:this.stageRef,draggable:!0,onWheel:S.zoomStage,className:"draggable",children:(0,s.jsxs)(n.Wd,{children:[(0,i.createElement)(n.rw,{...o.$,x:0,y:0,width:o.T.CanvasMinWidth,height:o.T.CanvasMinHeight,fill:(0,r.lG)(),key:S.key++,listening:!1}),this.control?.draw(),this.stash?.draw(),this.environment?.draw()]})})})})})}}},32809(e,t,a){"use strict";a.d(t,{OF:()=>d,Pq:()=>o,n9:()=>l});var s=a(38786),i=a(61499),n=a(94992),r=a(32838);function o(e){return(0,r.HA)(e)||(0,r.Bm)(e)}function l(e){return(0,i.qq)(e)}function d(e,t,a,i,o,l){switch(l){case s.Chapter.SCHEME_1:case s.Chapter.SCHEME_2:case s.Chapter.SCHEME_3:case s.Chapter.SCHEME_4:case s.Chapter.FULL_SCHEME:{let s=(0,r.yr)(e);return new n.k(s,s,t,a,i,o)}default:throw Error("Unknown Chapter")}}},32838(e,t,a){"use strict";a.d(t,{Bm:()=>o,HA:()=>r,Lv:()=>function e(t){return null===t||t instanceof Array&&2===t.length&&e(t[1])},kc:()=>c,ks:()=>l,yr:()=>d});var s=a(26512),i=a(82097),n=a(36236);function r(e){return e?.numberType!==void 0}function o(e){return e?.sym!==void 0}function l(e){return e?.toString()==="continuation"}function d(e){return(0,n.unparse)((0,i.estreeDecode)(e))}function c(e){return(0,s.schemeVisualise)(e).toString()}a(65437)},49436(e,t,a){"use strict";a.d(t,{Ay:()=>r,Kt:()=>i,jG:()=>n});let s=(0,a(58683).Ej)("dashboard",{fetchGroupGradingSummary:()=>({}),updateGroupGradingSummary:e=>e}),{fetchGroupGradingSummary:i,updateGroupGradingSummary:n}=s,r=s},12681(e,t,a){"use strict";a.d(t,{A:()=>E});var s=a(74848),i=a(2494);let n="white",r="white";var o=a(64173);function l(e){return(void 0===Array.isArray?e instanceof Array:Array.isArray(e))&&2===e.length}function d(e,t=!1){if(t)return""+e;{let t=typeof e;if(("function"===t||"object"===t)&&null!==e)return;if("string"!==t)return`${e}`;{let t=e+"",a=t.substring(0,20);return`"${a}${t.length>20?"...":""}"`}}}var c=a(96540);class u{children;constructor(){this.children=null}}class h extends u{data;constructor(e){super(),this.data=e}}class p extends u{_drawable;drawableX;drawableY;get drawable(){return this._drawable}}class m extends p{createDrawable(e,t,a,n){return this._drawable=(0,s.jsxs)(i.YJ,{children:[(0,s.jsx)(A,{x:e,y:t}),(a!==e||n!==t)&&(0,s.jsx)(b,{from:{x:a+22.5,y:n+15},to:{x:e,y:t}})]},e+", "+t),this.drawableX=e,this.drawableY=t,this._drawable}}class g extends p{createDrawable(e,t,a,n){let r={nodes:this.children??[],x:e,y:t},o=(0,s.jsx)(f,{...r});return this._drawable=(0,s.jsxs)(i.YJ,{children:[o,(a!==e||n!==t)&&(0,s.jsx)(b,{from:{x:a+22.5,y:n+15},to:{x:e,y:t}})]},e+", "+t),this.drawableX=e,this.drawableY=t,this._drawable}}class y extends c.PureComponent{render(){return(0,s.jsxs)(i.YJ,{x:this.props.x,y:this.props.y,children:[(0,s.jsx)(i.rw,{width:Math.max(45*this.props.nodes.length,15),height:30,strokeWidth:2,stroke:n,fill:"#17181A",preventDefault:!1}),this.props.nodes.length>1&&Array.from(Array(this.props.nodes.length-1),(e,t)=>(0,s.jsx)(i.N1,{points:[45*(t+1),0,45*(t+1),30],strokeWidth:2,stroke:n,preventDefault:!1},"line"+t)),this.props.nodes.map((e,t)=>e instanceof h&&((e,t)=>{let a=e.data;if(!function(e){for(var t=e;;t=function(e){if(l(e))return e[1];throw Error("tail(xs) expects a pair as argument xs, but encountered "+e)}(t))if(null===t)return!0;else if(!l(t))return!1}(a)){let n=d(a),r=n??"*"+E.displaySpecialContent(e);return(0,s.jsx)(i.EY,{text:r,align:"center",width:45,x:45*t,y:Math.floor((30-1.2*12)/2),fontStyle:void 0===n?"italic":"normal",fill:"white",preventDefault:!1},""+a+t)}return null===a?(0,s.jsx)(w,{x:45*t,y:0},t):null})(e,t))]})}}let f=y,b=c.memo(e=>(0,s.jsx)(i.i3,{points:[e.from.x,e.from.y,e.to.x+13,e.to.y+-5],pointerWidth:5,pointerLength:5,fill:r,stroke:n,strokeWidth:2,preventDefault:!1},e+"")),x=c.memo(({from:e,to:t})=>{let a=e.y+15+15,o=t.x-15,l=t.y-15,d=[e.x,e.y,e.x,a,o,a,o,l,t.x+13,l,t.x+13,t.y+-5];return(0,s.jsx)(i.i3,{points:d,pointerLength:5,pointerWidth:5,fill:r,stroke:n,strokeWidth:2,preventDefault:!1})});class v extends c.PureComponent{render(){return(0,s.jsxs)(i.YJ,{...this.props,children:[(0,s.jsx)(i.jl,{radius:15,strokeWidth:2,stroke:n,x:15,y:15,preventDefault:!1}),(0,s.jsx)(i.jl,{radius:15,strokeWidth:2,stroke:n,x:47,y:15,preventDefault:!1}),(0,s.jsx)(i.jl,{radius:4,strokeWidth:2,stroke:r,fill:r,x:15,y:15,preventDefault:!1}),(0,s.jsx)(i.jl,{radius:4,strokeWidth:2,stroke:n,fill:r,x:47,y:15,preventDefault:!1})]})}}let A=v;class T extends c.PureComponent{render(){return(0,s.jsx)(i.N1,{x:this.props.x,y:this.props.y,points:[0,30,45,0],strokeWidth:1,stroke:n,preventDefault:!1})}}let w=T;class S extends u{actualNode;constructor(e){super(),this.actualNode=e}}class C{_rootNode;nodes;constructor(e,t){this._rootNode=e,this.nodes=t}get rootNode(){return this._rootNode}getNodeById(e){return this.nodes[e]}static fromSourceStructure(e){let t=0,a=new Map,s=[];return new C(function e(i){var n,r;let o,l,d=a.get(i);if(void 0!==d)return new S(d);return Array.isArray(i)?(n=i,o=new g,a.set(n,o),s[t]=o,t++,o.children=n.map(e),o):"function"==typeof i?(r=i,l=new m,a.set(r,l),s[t]=l,t++,l):new h(i)}(e),s)}draw(){return new I(this)}}class I{tree;drawables;nodeWidths;width=0;height=0;minX=0;minY=0;constructor(e){this.tree=e,this.drawables=[],this.nodeWidths=new Map}draw(e,t){if(!(this.tree.rootNode instanceof h))return this.drawNode(this.tree.rootNode,e,t,e,t),this.width=this.getNodeWidth(this.tree.rootNode)-this.minX,this.height=this.getNodeHeight(this.tree.rootNode)-this.minY+2,(0,s.jsx)(i.Wd,{offsetX:this.minX,offsetY:this.minY,children:this.drawables},e+", "+t);{let e={text:d(this.tree.rootNode.data),align:"center",fontStyle:"normal",fontSize:20,fill:n},t=new o.A.Text(e);return this.width=t.width(),this.height=t.height(),(0,s.jsx)(i.Wd,{children:(0,s.jsx)(i.EY,{...e})})}}drawNode(e,t,a,i,n){if(e instanceof S){let r,o=e.actualNode,l={from:{x:i+22.5,y:n+15},to:{x:o.drawableX,y:o.drawableY}};l.from.y>=l.to.y?(this.minX=Math.min(this.minX,o.drawableX-15-1),this.minY=Math.min(this.minY,o.drawableY-15-1),r=(0,s.jsx)(x,{...l},"Arrow (back)"+i+t+n+a)):r=(0,s.jsx)(b,{...l},"Arrow"+i+t+n+a),this.drawables.push(r)}if(e instanceof p){if(e instanceof m){let s=e.createDrawable(t,a,i,n);this.drawables.push(s)}else if(e instanceof g){let s=e.createDrawable(t,a,i,n);this.drawables.push(s);let r=t;e.children?.forEach((e,s)=>{let i=e instanceof S?a:a+60;this.drawNode(e,r,i,t+45*s,a);let n=this.getNodeWidth(e);r+=n?n+22.5:0})}}}getNodeWidth(e){if(e instanceof h||e instanceof S)return 0;if(e instanceof m)return 64;if(!(e instanceof g))return 0;{if(this.nodeWidths.has(e))return this.nodeWidths.get(e)??0;if(null==e.children)return 0;let t=e.children.map(e=>this.getNodeWidth(e)).filter(e=>e>0),a=t.length>0?t.reduce((e,t)=>e+t+22.5):0,s=Math.max(45*e.children.length+2,a,17);return this.nodeWidths.set(e,s),s}}getNodeHeight(e){return e instanceof h?0:e instanceof m?30:e instanceof S?15:e instanceof g?(e.children??[]).map(e=>this.getNodeHeight(e)+30*(e instanceof p)).filter(e=>e>0).reduce((e,t)=>Math.max(e,t),0)+30:0}}class E{static empty(e){}static setSteps=E.empty;static _instance=new E;steps=[];nodeLabel=0;nodeToLabelMap=new Map;static init(e){E.setSteps=e}static drawData(e){if(!E.setSteps)throw Error("Data visualizer not initialized");E._instance.addStep(e),E.setSteps(E._instance.steps)}static clear(){E._instance=new E,E.setSteps(E._instance.steps)}static displaySpecialContent(e){return E._instance.displaySpecialContent(e)}displaySpecialContent(e){return this.nodeToLabelMap.has(e)?this.nodeToLabelMap.get(e)??0:(console.log("*"+this.nodeLabel+": "+e.data),this.nodeToLabelMap.set(e,this.nodeLabel),this.nodeLabel++)}addStep(e){let t=e.map(this.createDrawing);this.steps.push(t)}createDrawing(e){let t=C.fromSourceStructure(e).draw(),a=1,n=1,r=t.draw(a,n);return(0,s.jsx)(i.BI,{width:t.width+a,height:t.height+n,children:r},e)}}},6670(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("directory/languages",{fetchLanguages:null,setLanguages:e=>({languages:e}),setSelectedLanguage:(e,t)=>({languageId:e,evaluatorId:t}),setSelectedEvaluator:e=>({evaluatorId:e})})},1451(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("directory/plugins",{fetchPlugins:null,setPlugins:e=>({plugins:e})})},62878(e,t,a){"use strict";a.d(t,{f:()=>l,l:()=>o});var s=a(9208),i=a(48857),n=a(13226),r=a(6670);let o=(0,i.Lq)("directory.language.url","https://source-academy.github.io/language-directory/directory.json","The URL where the language directory may be found.",function*(){yield(0,s.yJ)(r.A.fetchLanguages())}),l=(0,n.I)(o)},71785(e,t,a){"use strict";a.d(t,{E:()=>o,a:()=>l});var s=a(9208),i=a(48857),n=a(13226),r=a(1451);let o=(0,i.Lq)("directory.plugin.url","https://source-academy.github.io/plugin-directory/directory.json","The URL where the plugin directory may be found.",function*(){yield(0,s.yJ)(r.A.fetchPlugins())}),l=(0,n.I)(o)},77080(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("github",{githubOpenFile:0,githubSaveFile:0,githubSaveFileAs:0})},32754(e,t,a){"use strict";a.d(t,{R2:()=>y,SW:()=>f,Vv:()=>d,XI:()=>m,Z_:()=>g,i_:()=>u,jp:()=>p,ku:()=>h,oq:()=>c});var s=a(74848),i=a(17526),n=a(63283),r=a(37852),o=a(21681),l=a(49705).Buffer;async function d(e,t){return await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:t})}function c(){let e=o.M.getState().session.githubOctokitObject;if(void 0!==e)return e.octokit}async function u(e,t,a,s){let i;if(void 0===e)return(0,r.JB)("Please log in and try again",2e3),!1;if(""===s)return(0,r.JB)("Please select a file!",2e3),!1;try{i=(await e.repos.getContent({owner:t,repo:a,path:s})).data}catch(e){return(0,r.JB)("Connection denied or file does not exist.",2e3),console.error(e),!1}return!Array.isArray(i)||((0,r.JB)("Can't open folder as a file!",2e3),!1)}async function h(e,t,a,s){let i,n="";if(""===s)return(0,r.JB)("No file name given.",2e3),{canBeSaved:!1,saveType:n};if(void 0===e)return(0,r.JB)("Please log in and try again",2e3),{canBeSaved:!1,saveType:n};try{i=(await e.repos.getContent({owner:t,repo:a,path:s})).data,n="Overwrite"}catch(e){if(404!==e.status)return(0,r.JB)("Connection denied or file does not exist.",2e3),console.error(e),{canBeSaved:!1,saveType:n};n="Create"}return Array.isArray(i)?((0,r.JB)("Can't save over a folder!",2e3),{canBeSaved:!1,saveType:n}):{canBeSaved:!0,saveType:n}}async function p(){return await (0,n.cu)({contents:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Warning: opening this file will overwrite the text data in the editor."}),(0,s.jsx)("p",{children:"Please click 'Confirm' to continue, or 'Cancel' to go back."})]}),negativeLabel:"Cancel",positiveIntent:"primary",positiveLabel:"Confirm"})}async function m(){return await (0,n.cu)({contents:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Warning: You are saving over an existing file in the repository."}),(0,s.jsx)("p",{children:"Please click 'Confirm' to continue, or 'Cancel' to go back."})]}),negativeLabel:"Cancel",positiveIntent:"primary",positiveLabel:"Confirm"})}async function g(e,t,a,s){if(void 0===e)return;let n=(await e.repos.getContent({owner:t,repo:a,path:s})).data.content;if(n){let e=l.from(n,"base64").toString(),t=o.M.getState().workspaces.playground.activeEditorTabIndex;if(null===t)throw Error("No active editor tab found.");o.M.dispatch(i.o.updateEditorValue("playground",t,e)),o.M.dispatch(i.o.playgroundUpdateGitHubSaveInfo(a,s,new Date)),(0,r.uT)("Successfully loaded file!",1e3)}}async function y(e,t,a,s,n,d,c,u){if(void 0===e)return;d=d||"No public email provided",n=n||"Source Academy User",c=c||"Changes made from Source Academy",u=u||"";let h=l.from(u,"utf8").toString("base64");try{let l=(await e.repos.getContent({owner:t,repo:a,path:s})).data;if(Array.isArray(l))return;let u=l.sha;await e.repos.createOrUpdateFileContents({owner:t,repo:a,path:s,message:c,content:h,sha:u,committer:{name:n,email:d},author:{name:n,email:d}}),o.M.dispatch(i.o.playgroundUpdateGitHubSaveInfo(a,s,new Date)),(0,r.uT)("Successfully saved file!",1e3)}catch(e){console.error(e),(0,r.JB)("Something went wrong when trying to save the file.",1e3)}}async function f(e,t,a,s,n,d,c,u){if(void 0===e)return;d=d||"No public email provided",n=n||"Source Academy User",c=c||"Changes made from Source Academy",u=u||"";let h=l.from(u,"utf8").toString("base64");try{await e.repos.createOrUpdateFileContents({owner:t,repo:a,path:s,message:c,content:h,committer:{name:n,email:d},author:{name:n,email:d}}),o.M.dispatch(i.o.playgroundUpdateGitHubSaveInfo(a,s,new Date)),(0,r.uT)("Successfully created file!",1e3)}catch(e){console.error(e),(0,r.JB)("Something went wrong when trying to save the file.",1e3)}}},55930(e,t,a){"use strict";a.d(t,{FJ:()=>n,MY:()=>r,lL:()=>i,lu:()=>o,x6:()=>l});var s=a(72635);a(51085);let i=e=>{if(!e)return;let t=document.defaultView||window;if(!t)return void console.warn("There is no `window` associated with the current `document`");let a=new Blob([[(0,s.t)("gradingCsv.assessmentNumber"),(0,s.t)("gradingCsv.assessmentName"),(0,s.t)("gradingCsv.studentName"),(0,s.t)("gradingCsv.studentUsername"),(0,s.t)("gradingCsv.group"),(0,s.t)("gradingCsv.progress"),(0,s.t)("gradingCsv.questionCount"),(0,s.t)("gradingCsv.questionsGraded"),(0,s.t)("gradingCsv.initialXp"),(0,s.t)("gradingCsv.xpAdjustment"),(0,s.t)("gradingCsv.currentXpExclBonus"),(0,s.t)("gradingCsv.maxXp"),(0,s.t)("gradingCsv.bonusXp")].map(e=>`"${e}"`).join(",")+"\n",...e.map(e=>[e.assessmentNumber,e.assessmentName,e.studentName,e.studentUsername,e.groupName,e.progress,e.questionCount,e.gradedCount,e.initialXp,e.xpAdjustment,e.currentXp,e.maxXp,e.xpBonus].map(e=>`"${e}"`).join(",")+"\n")],{type:"text/csv"}),i=`SA submissions (${new Date().toISOString()}).csv`,n=document.createElement("a"),r=t.URL.createObjectURL(a);n.setAttribute("href",r),n.setAttribute("download",i),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:t})),document.body.removeChild(n),t.setTimeout(()=>{t.URL.revokeObjectURL(r)},0)},n=e=>{switch(e.id){case"assessmentName":return{title:e.value};case"assessmentType":return{type:e.value};case"studentName":return{name:e.value};case"studentUsername":return{username:e.value};case"progressStatus":return d(e.value);case"groupName":return{groupName:e.value};default:return{}}},r=(e,t)=>({offset:e*t,pageSize:t}),o=e=>e?{}:{status:"submitted",isManuallyGraded:!0,isGradingPublished:!1},l=(e,t,a,s,i)=>e?"submitted"!==a?a:s<i?"submitted":t?"published":"graded":"autograded",d=e=>{switch(e){case"autograded":return{isManuallyGraded:!1};case"published":return{isManuallyGraded:!0,isGradingPublished:!0,isFullyGraded:!0,status:"submitted"};case"graded":return{isManuallyGraded:!0,isGradingPublished:!1,isFullyGraded:!0,status:"submitted"};case"submitted":return{isManuallyGraded:!0,isGradingPublished:!1,isFullyGraded:!1,status:"submitted"};default:return{isManuallyGraded:!0,isGradingPublished:!1,status:e}}}},25492(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("groundControl",{changeDateAssessment:(e,t,a)=>({id:e,openAt:t,closeAt:a}),changeTeamSizeAssessment:(e,t)=>({id:e,maxTeamSize:t}),deleteAssessment:e=>e,publishAssessment:(e,t)=>({id:t,togglePublishAssessmentTo:e}),publishGradingAll:e=>e,unpublishGradingAll:e=>e,uploadAssessment:(e,t,a)=>({file:e,forceUpdate:t,assessmentConfigId:a}),configureAssessment:(e,t,a)=>({id:e,hasVotingFeatures:t,hasTokenCounter:a}),assignEntriesForVoting:e=>({id:e})})},49540(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("leaderboard",{getOverallLeaderboardXP:(e,t)=>({page:e,pageSize:t}),saveOverallLeaderboardXP:e=>e,getAllContestScores:(e,t)=>({assessmentId:e,visibleEntries:t}),saveAllContestScores:e=>e,getAllContestPopularVotes:(e,t)=>({assessmentId:e,visibleEntries:t}),saveAllContestPopularVotes:e=>e,getCode:0,saveCode:e=>e,clearCode:0,getContests:0,saveContests:e=>e,setWorkspaceInitialRun:e=>e,resetWorkspaceInitialRun:e=>e})},27588(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("persistence",{persistenceOpenPicker:!0,persistenceSaveFile:e=>e,persistenceSaveFileAs:!0,persistenceInitialise:!0})},6428(e,t,a){"use strict";a.d(t,{$8:()=>r,Ay:()=>u,F$:()=>d,SD:()=>l,UQ:()=>o,fX:()=>i,r0:()=>n,yO:()=>c});let s=(0,a(58683).Ej)("playground",{generateLzString:()=>({}),shortenURL:e=>e,updateShortURL:e=>e,changeQueryString:e=>e,playgroundUpdatePersistenceFile:e=>e,playgroundUpdateGitHubSaveInfo:(e,t,a)=>({repoName:e,filePath:t,lastSaved:a}),playgroundConfigLanguage:e=>e}),{generateLzString:i,shortenURL:n,updateShortURL:r,changeQueryString:o,playgroundUpdatePersistenceFile:l,playgroundUpdateGitHubSaveInfo:d,playgroundConfigLanguage:c}=s,u=s},54668(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("remoteExecution",{remoteExecFetchDevices:()=>({}),remoteExecUpdateDevices:e=>e,remoteExecUpdateSession:e=>e,remoteExecConnect:(e,t)=>({workspace:e,device:t}),remoteExecDisconnect:()=>({}),remoteExecRun:(e,t)=>({files:e,entrypointFilePath:t}),remoteExecReplInput:e=>e})},82430(e,t,a){"use strict";a.d(t,{I:()=>n,_:()=>r});var s=a(38786),i=a(75580);let n=[{id:"EV3",name:"Lego Mindstorms EV3",internalFunctions:["ev3_pause","ev3_connected","ev3_motorA","ev3_motorB","ev3_motorC","ev3_motorD","ev3_motorGetSpeed","ev3_motorSetSpeed","ev3_motorStart","ev3_motorStop","ev3_motorSetStopAction","ev3_motorGetPosition","ev3_runForTime","ev3_runToAbsolutePosition","ev3_runToRelativePosition","ev3_colorSensor","ev3_colorSensorRed","ev3_colorSensorGreen","ev3_colorSensorBlue","ev3_reflectedLightIntensity","ev3_ambientLightIntensity","ev3_colorSensorGetColor","ev3_ultrasonicSensor","ev3_ultrasonicSensorDistance","ev3_gyroSensor","ev3_gyroSensorAngle","ev3_gyroSensorRate","ev3_touchSensor1","ev3_touchSensor2","ev3_touchSensor3","ev3_touchSensor4","ev3_touchSensorPressed","ev3_hello","ev3_waitForButtonPress","ev3_speak","ev3_playSequence","ev3_ledLeftGreen","ev3_ledLeftRed","ev3_ledRightGreen","ev3_ledRightRed","ev3_ledGetBrightness","ev3_ledSetBrightness"],languageChapter:s.Chapter.SOURCE_3,deviceLibraryName:i.O.EV3}],r=new Map(n.map(e=>[e.id,e]))},30044(e,t,a){"use strict";a.d(t,{Ay:()=>u,Hr:()=>l,PI:()=>c,PX:()=>d,Yz:()=>n,c:()=>i,eS:()=>o,ie:()=>r});let s=(0,a(58683).Ej)("sourceRecorder",{saveSourcecastData:(e,t,a,s,i,n)=>({title:e,description:t,uid:a,audio:s,audioUrl:window.URL.createObjectURL(s),playbackData:i,workspaceLocation:n}),setCurrentPlayerTime:(e,t)=>({playerTime:e,workspaceLocation:t}),setCodeDeltasToApply:(e,t)=>({deltas:e,workspaceLocation:t}),setInputToApply:(e,t)=>({inputToApply:e,workspaceLocation:t}),setSourcecastData:(e,t,a,s,i,n)=>({title:e,description:t,uid:a,audioUrl:s,playbackData:i,workspaceLocation:n}),setSourcecastDuration:(e,t)=>({duration:e,workspaceLocation:t}),setSourcecastStatus:(e,t)=>({playbackStatus:e,workspaceLocation:t})}),{saveSourcecastData:i,setCurrentPlayerTime:n,setCodeDeltasToApply:r,setInputToApply:o,setSourcecastData:l,setSourcecastDuration:d,setSourcecastStatus:c}=s,u=s},85988(e,t,a){"use strict";a.d(t,{Ay:()=>r,Iq:()=>n,p3:()=>i});let s=(0,a(58683).Ej)("sourcecast",{fetchSourcecastIndex:e=>({workspaceLocation:e}),updateSourcecastIndex:(e,t)=>({index:e,workspaceLocation:t})}),{fetchSourcecastIndex:i,updateSourcecastIndex:n}=s,r=s},2282(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("sourcereel",{deleteSourcecastEntry:(e,t)=>({id:e,workspaceLocation:t}),recordInit:(e,t)=>({initData:e,workspaceLocation:t}),recordInput:(e,t)=>({input:e,workspaceLocation:t}),resetInputs:(e,t)=>({inputs:e,workspaceLocation:t}),timerPause:e=>({timeNow:Date.now(),workspaceLocation:e}),timerReset:e=>({workspaceLocation:e}),timerResume:(e,t)=>({timeBefore:e,timeNow:Date.now(),workspaceLocation:t}),timerStart:e=>({timeNow:Date.now(),workspaceLocation:e}),timerStop:e=>({timeNow:Date.now(),workspaceLocation:e})})},76940(e,t,a){"use strict";a.d(t,{A:()=>s});let s=(0,a(58683).Ej)("stories",{addStoryEnv:(e,t,a)=>({env:e,chapter:t,variant:a}),clearStoryEnv:e=>({env:e}),evalStory:(e,t)=>({env:e,code:t}),evalStoryError:(e,t)=>({type:"errors",errors:e,env:t}),evalStorySuccess:(e,t)=>({type:"result",value:e,env:t}),handleStoriesConsoleLog:(e,...t)=>({logString:t,env:e}),notifyStoriesEvaluated:(e,t,a,s,i)=>({result:e,lastDebuggerResult:t,code:a,context:s,env:i}),toggleStoriesUsingSubst:(e,t)=>({usingSubst:e,env:t}),getStoriesList:()=>({}),updateStoriesList:e=>e,setCurrentStory:e=>e,setCurrentStoryId:e=>e,createStory:e=>e,saveStory:(e,t)=>({story:e,id:t}),deleteStory:e=>e,getStoriesUser:()=>({}),setCurrentStoriesUser:(e,t)=>({id:e,name:t}),setCurrentStoriesGroup:(e,t,a)=>({id:e,name:t,role:a}),clearStoriesUserAndGroup:()=>({}),fetchAdminPanelStoriesUsers:()=>({}),setAdminPanelStoriesUsers:e=>({users:e})})},39820(e,t,a){"use strict";a.d(t,{Ay:()=>y,Kf:()=>p,to:()=>g});var s=a(74848),i=a(38786),n=a(20382),r=a(96540),o=a(48500),l=a(91948),d=a(29549),c=a(30796),u=a(76940),h=a(21681);let p="default";function m(e){for(let[t,a]of Object.entries(e)){let{chapter:e,variant:s}=a,n=Object.values(i.Chapter).filter(e=>!isNaN(Number(e))).includes(e)?e:l.A.defaultSourceChapter,r=Object.values(i.Variant).includes(s)?s:l.A.defaultSourceVariant;h.M.dispatch(u.A.addStoryEnv(t,n,r))}}function g(e){if("---"!==e.substring(0,3))return{header:"",content:e};let t=e.indexOf("---",3);return -1===t?{header:"",content:e}:{header:e.substring(3,t),content:e.substring(t+3)}}let y=r.memo((0,o.A)(({fileContent:e})=>{let[t,a]=(0,r.useState)("");return(0,r.useEffect)(()=>{let{header:t,content:s}=g(e);a(s),h.M.dispatch(u.A.clearStoryEnv()),function(e){if(""===e)return h.M.dispatch(u.A.addStoryEnv(p,l.A.defaultSourceChapter,l.A.defaultSourceVariant));try{let t=n.Ay.load(e);for(let[e,a]of Object.entries(t))switch(e){case"config":{let{chapter:e,variant:t}=a;m({[p]:{chapter:e,variant:t}});break}case"env":m(a)}}catch(e){console.warn(e),e instanceof n.Ay.YAMLException&&h.M.dispatch(u.A.addStoryEnv(p,l.A.defaultSourceChapter,l.A.defaultSourceVariant))}}(t)},[e]),t?(0,s.jsx)("div",{className:"userblogContent",children:(0,s.jsx)("div",{className:"content",children:(0,c.fu)(t)})}):(0,s.jsx)("div",{})},500),d.P)},46119(e,t,a){"use strict";a.d(t,{Ay:()=>i,M9:()=>n,h0:()=>r});let s=Object.fromEntries(Object.entries({ExtensionPing:e=>({frontendOrigin:e}),ExtensionPong:e=>({token:e}),IsVsc:()=>({}),NewEditor:(e,t,a,s,i,n,r)=>({workspaceLocation:e,assessmentName:t,questionId:a,chapter:s,prepend:i,initialCode:n,breakpoints:r}),Text:(e,t)=>({workspaceLocation:e,code:t}),EvalEditor:e=>({workspaceLocation:e}),NotifyAssessmentsOverview:(e,t)=>({assessmentOverviews:e,courseId:t}),Navigate:e=>({route:e}),McqQuestion:(e,t,a,s,i)=>({workspaceLocation:e,assessmentName:t,questionId:a,chapter:s,options:i}),McqAnswer:(e,t,a,s)=>({workspaceLocation:e,assessmentName:t,questionId:a,choice:s}),ChangeChapter:(e,t,a,s)=>({assessmentName:e,questionId:t,chapter:a,variant:s}),ResetEditor:(e,t)=>({workspaceLocation:e,initialCode:t}),AssessmentAnswer:(e,t)=>({questionId:e,answer:t}),LoginWithBrowser:e=>({route:e}),SetEditorBreakpoints:(e,t)=>({workspaceLocation:e,newBreakpoints:t})}).map(([e,t])=>[e,(...a)=>({type:e,...t(...a)})])),i=s,n={...Object.keys(s).filter(e=>isNaN(Number(e))).reduce((e,t)=>({...e,[t]:t}),{})};function r(e){window.parent.postMessage(e,"*")}},56695(e,t,a){"use strict";a.d(t,{A:()=>o});var s=a(72635),i=a(94997),n=a(40503),r=a(4271);s.Ay.use(i.A).use(n.r9).init({fallbackLng:"en",debug:!1,resources:r.ES,interpolation:{escapeValue:!1}});let o=s.Ay},4271(e,t,a){"use strict";a.d(t,{ES:()=>S,AK:()=>w});var s,i=JSON.parse('{"navigationBar":{"Ground Control":"Ground Control","Dashboard":"Dashboard","Sourcereel":"Sourcereel","Team Formation":"Team Formation","Grading":"Grading","Game Simulator":"Game Simulator","Admin Panel":"Admin Panel","Stories":"Stories","Sourcecast":"Sourcecast","Playground":"Playground","SICP JS":"SICP JS","Achievements":"Achievements","Quests":"Quests","Paths":"Paths","Contests":"Contests","Others":"Others"},"dropdown":{"My Courses":"My Courses","Create Course":"Create Course","Logout":"Logout","Settings":"Settings","About":"About","Help":"Help"}}'),n=JSON.parse('{"gradingCsv":{"assessmentNumber":"Assessment Number","assessmentName":"Assessment Name","studentName":"Student Name","studentUsername":"Student Username","group":"Group","progress":"Progress","questionCount":"Question Count","questionsGraded":"Questions Graded","initialXp":"Initial XP","xpAdjustment":"XP Adjustment","currentXpExclBonus":"Current XP (excl. bonus)","maxXp":"Max XP","bonusXp":"Bonus XP"}}'),r=JSON.parse('{"Logging In":"Logging In...","Log in with":"Log in with {{name}}"}'),o=JSON.parse('{"noTestcases":"There are no testcases provided for this question.","noResults":"There are no results to show.","testcases":"Testcases","results":"Autograder Results","tooltip":{"clickTestcase":"Click on each testcase below to execute it with the program in the editor.","executeAll":"To execute all testcases at once, evaluate the program in the editor with this tab active.","backgroundInfo":"A green or red background indicates a passed or failed testcase respectively.","privateTestcases":"Private testcases (only visible to staff when grading) have a grey background."},"headers":{"testcase":"Testcase","expected":"Expected result","actual":"Actual result","sn":"S/N","status":"Testcase status"}}'),l=JSON.parse('{"noEntries":"There are no eligible contest leaderboard entries found.","titles":{"score":"Score Leaderboard","popularVote":"Popular Vote Leaderboard","default":"Contest Leaderboard"},"tooltips":{"score":"View the highest scoring contest entries!","popularVote":"View the most popular contest entries!","default":"View the top-rated contest entries!"},"headers":{"studentName":"Student Name","rank":"Rank","score":{"calculated":"Calculated Score","popularity":"Popularity Score","default":"Metric"}}}'),d=JSON.parse('{"noEntries":"There are no eligible entries for voting found.","title":"Contest Voting","tooltip":"Rank your favourite contest entries from tiers D (worst) to S (best)!"}'),c=JSON.parse('{"maxStepsExceeded":"Maximum number of steps exceeded.","increaseStepLimit":"Please increase the step limit if you would like to see further evaluation.","csecDescription":"The CSEC machine generates control, stash, environment and class model diagrams adapted from the notation introduced in <0>Structure and Interpretation of Computer Programs, JavaScript Edition, Chapter 3, Section 2</0>.","javaCsec":"You have chosen the sublanguage <0>Java CSEC</0>.","cseDescription":"The CSE machine generates control, stash and environment model diagrams following a notation introduced in <0>Structure and Interpretation of Computer Programs, JavaScript Edition, Chapter 3, Section 2</0>.","instructions":"On this tab, the REPL will be hidden from view, so do check that your code has no errors before running the stepper. You may use this tool by running your program and then dragging the slider above to see the state of the control, stash and environment at different stages in the evaluation of your program. Clicking on the fast-forward button (double chevron) will take you to the next breakpoint in your program.","shortcutsTitle":"Some useful keyboard shortcuts:","shortcuts":{"a":"a: Move to the first step","e":"e: Move to the last step","f":"f: Move to the next step","b":"b: Move to the previous step"},"shortcutsNote":"Note that these shortcuts are only active when the browser focus is on this tab.","label":"CSE Machine"}'),u=JSON.parse('{"defaultText":"The data visualizer helps you to visualize data structures.","instructions":"It is activated by calling the function <0/>, where <1/> would be the <2/> data structure that you want to visualize and <3/> is the number of structures.","reference":"The data visualizer uses box-and-pointer diagrams, as introduced in <0>Structure and Interpretation of Computer Programs, JavaScript Edition, Chapter 2, Section 2</0>.","label":"Data Visualizer","previous":"Previous","next":"Next"}'),h=JSON.parse('{"takePicture":"Take picture","reset":"Reset"}'),p=JSON.parse('{"title":"HTML Display","label":"HTML Display"}'),m=JSON.parse('{"timeout":"[TIMEOUT] Submission exceeded time limit for this test case.","syntax":"[SYNTAX] Line {{line}}: {{errorExplanation}}","runtime":"[RUNTIME] Line {{line}}: {{errorExplanation}}","systemError":"[SYSTEM] {{errorMessage}}","unknown":"[UNKNOWN] Autograder error: type {{errorType}}"}'),g=JSON.parse('{"name":"Name","role":"Role"}'),y=JSON.parse('{"welcome":"Welcome to the Stepper!","instructions":"On this tab, the REPL will be hidden from view, so do check that your code has no errors before running the stepper. You may use this tool by writing your program on the left, then dragging the slider above to see its evaluation.","evaluationSteps":"On even-numbered steps, the part of the program that will be evaluated next is highlighted in yellow. On odd-numbered steps, the result of the evaluation is highlighted in green. You can change the maximum steps limit (500-5000, default 1000) in the control bar.","shortcutsTitle":"Some useful keyboard shortcuts:","shortcuts":{"a":"a: Move to the first step","e":"e: Move to the last step","f":"f: Move to the next step","b":"b: Move to the previous step"},"shortcutsNote":"Note that these shortcuts are only active when the browser focus is on this tab (click on or above the explanation text)."}'),f=JSON.parse('{"description":"Bypass the compiler and type checker by uploading class files to run in the JVM.","acceptedFiles":"Only .class files are accepted. Code in the editor will be ignored when running while this tab is active.","compileCommand":"Compile the files with the following command:","javacCommand":"javac *.java -target 8 -source 8","warning":"Avoid running class files downloaded from unknown sources.","mainClass":"Main class must be named Main and uploaded as Main.class.","chooseFiles":"Choose files...","filesUploaded":"file(s) uploaded.","label":"Upload files"}'),b=JSON.parse('{"sourcecast":{"titleDescription":"Title: {{title}}\\nDescription: {{description}}","introduction":"Welcome to Sourcecast!"}}'),x=JSON.parse('{"sourceRecorder":{"deleteTitle":"Delete Sourcecast","deleteConfirmation":"Are you sure to delete this sourcecast entry?","confirmDelete":"Confirm Delete","cancel":"Cancel"}}'),v=JSON.parse('{"stories":{"deleteConfirmation":"Are you sure you want to delete this story?","delete":"Delete","allStories":"All Stories"}}'),A=JSON.parse('{"welcome":{"title":"Welcome to {{sourceAcademyDeploymentName}}","loggedInMessage":"You have logged in as <0>{{name}}</0>. {{sourceAcademyDeploymentName}} does not have any course information for this account","enrollmentMessage":"If you are enrolled in a course, check with the course staff to make sure your account is added to the course.","resourcesForLearners":"Click <0>here</0> to find a course that suits your needs.","resourcesForEducators":"Click <0>here</0> for a list of resources to get started."}}');let T={commons:i,login:r,translation:{...n,...b,...x,...v,...A},sideContent:{autograder:o,contestLeaderboard:l,contestVoting:d,cseMachine:c,dataVisualizer:u,faceapiDisplay:h,htmlDisplay:p,resultCard:m,sessionManagement:g,substVisualizer:y,upload:f}};JSON.parse('{"navigationBar":{"Ground Control":"\xfb\xf1 \xc7\xf1","Dashboard":"\xe1\xe1","Sourcereel":"\xfb\xe9\xe9\xe9","Team Formation":"\xe9\xe2m m\xe1\xed\xf1","Grading":"\xe1\xed\xf1","Game Simulator":"\xe1m\xe9 \xedm\xfb\xe1","Admin Panel":"\xc1m\xed\xf1 \xe1\xf1\xe9","Stories":"\xed\xe9","Sourcecast":"\xfb\xe9\xe1","Playground":"\xe1\xff\xfb\xf1","SICP JS":" ","Achievements":"\xc3\xed\xe9\xe9\xe9\xf1","Missions":"\xed\xed\xf1","Quests":"\xfb\xe9","Paths":"\xe1","Contests":"\xf1\xe9","Others":"\xe9"},"dropdown":{"My Courses":"M\xff C\xf4\xfbrs\xeas","Create Course":"Cr\xea\xe2t\xea C\xf4\xfbrs\xea","Logout":"L\xf4g\xf4\xfbt","Settings":"S\xeatt\xee\xf1gs","About":"\xc2b\xf4\xfbt","Help":"H\xealp"}}'),JSON.parse('{"Logging In":"L\xf2gging \xccn...","Log in with":"L\xf2g in with {{name}}"}');JSON.parse('{"navigationBar":{"Ground Control":"","Dashboard":"","Sourcereel":"","Team Formation":"","Grading":"","Game Simulator":"","Admin Panel":"","Stories":"","Sourcecast":"","Playground":"","SICP JS":"SICP JS","Achievements":"","Quests":"","Paths":"","Contests":"","Others":""},"dropdown":{"My Courses":"","Create Course":"","Logout":"","Settings":"","About":"","Help":""}}'),JSON.parse('{"gradingCsv":{"assessmentNumber":"","assessmentName":"","studentName":"","studentUsername":"","group":"","progress":"","questionCount":"","questionsGraded":"","initialXp":"","xpAdjustment":"","currentXpExclBonus":"","maxXp":"","bonusXp":""}}'),JSON.parse('{"Logging In":"...","Log in with":" {{name}} "}'),JSON.parse('{"noTestcases":"","noResults":"","testcases":"","results":"","tooltip":{"clickTestcase":"","executeAll":"","backgroundInfo":"","privateTestcases":""},"headers":{"testcase":"","expected":"","actual":"","sn":"","status":""}}'),JSON.parse('{"noEntries":"","titles":{"score":"","popularVote":"","default":""},"tooltips":{"score":"","popularVote":"","default":""},"headers":{"studentName":"","rank":"","score":{"calculated":"","popularity":"","default":""}}}'),JSON.parse('{"noEntries":"","title":"","tooltip":" D S"}'),JSON.parse('{"maxStepsExceeded":"","increaseStepLimit":"","csecDescription":"CSEC <0>JavaScript  3  2 </0>","javaCsec":" <0>Java CSEC</0>","cseDescription":"CSE <0>JavaScript  3  2 </0>","instructions":"REPL ","shortcutsTitle":"","shortcuts":{"a":"a: ","e":"e: ","f":"f: ","b":"b: "},"shortcutsNote":"","label":"CSE "}'),JSON.parse('{"defaultText":"","instructions":" <0/>  <1/>  <2/> <3/> ","reference":"<0>JavaScript  2  2 </0>","label":"","previous":"","next":""}'),JSON.parse('{"takePicture":"","reset":""}'),JSON.parse('{"title":"HTML ","label":"HTML "}'),JSON.parse('{"timeout":"[] ","syntax":"[]  {{line}} {{errorExplanation}}","runtime":"[]  {{line}} {{errorExplanation}}","systemError":"[] {{errorMessage}}","unknown":"[]  {{errorType}}"}'),JSON.parse('{"name":"","role":""}'),JSON.parse('{"welcome":"","instructions":"REPL ","evaluationSteps":"500-50001000","shortcutsTitle":"","shortcuts":{"a":"a: ","e":"e: ","f":"f: ","b":"b: "},"shortcutsNote":""}'),JSON.parse('{"description":" JVM ","acceptedFiles":" .class ","compileCommand":"","javacCommand":"javac *.java -target 8 -source 8","warning":"","mainClass":" Main  Main.class ","chooseFiles":"...","filesUploaded":"","label":""}'),JSON.parse('{"sourcecast":{"titleDescription":"{{title}}\\n{{description}}","introduction":" Sourcecast"}}'),JSON.parse('{"sourceRecorder":{"deleteTitle":" Sourcecast","deleteConfirmation":" Sourcecast ","confirmDelete":"","cancel":""}}'),JSON.parse('{"stories":{"deleteConfirmation":"","delete":"","allStories":""}}'),JSON.parse('{"welcome":{"title":" {{sourceAcademyDeploymentName}}","loggedInMessage":" <0>{{name}}</0>{{sourceAcademyDeploymentName}} ","enrollmentMessage":"","resourcesForLearners":"<0></0>","resourcesForEducators":"<0></0>"}}');var w=((s={}).ENGLISH="en",s.CHINESE="zh",s.PSEUDO="pseudo",s.DEFAULT="en",s);let S={...{en:{name:"English",...T}}}},76579(e,t,a){"use strict";let s;var i,n=a(74848);a(56695);var r=a(92607),o=a(79642),l=a(17913),d=a(5338),c=a(94201),u=a(29682),h=a(6130),p=a(91948),m=a(37852);let g=!!("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e,t){navigator.serviceWorker.register(e).then(e=>{setInterval(()=>{try{e.update()}catch{}},3e5),e.onupdatefound=()=>{let a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}var f=a(21681),b=a(80346);let x=[b.Iws,b.Q90,b.H18,b.tkg,b.n76,b.nSw,b.Sko,b.x6L,b.ZyC,b.$I9,b.I95,b.ihh];var v=a(68483),A=a(66406),T=a(62500),w=a(64251),S=a(96540),C=a(41344),I=a(53991),E=a(64907),_=a(9584),j=a(46942),k=a.n(j),N=a(2543),P=a(61499),R=a(42921),L=a(70622),M=a(71283);let D=({request:e,params:t})=>{let a=`/courses/${t.courseId}`,{enableOverallLeaderboard:s,enableContestLeaderboard:i}=f.M.getState().session;if(!s&&!i)return(0,C.V2)(a+"/not_found");let n=new URL(e.url).pathname;return RegExp(`^${a}/leaderboard/?$`).test(n)?s?(0,C.HC)(a+"/leaderboard/overall"):(0,C.HC)(a+"/leaderboard/contests"):null},O=({request:e,params:t})=>{let a=`/courses/${t.courseId}`,{enableContestLeaderboard:s}=f.M.getState().session;if(!s)return(0,C.V2)(a+"/not_found");let i=f.M.getState().leaderboard.contests.find(e=>e.published);return i?t.contestId?["score","popularvote"].includes(t.leaderboardType)?null:(0,C.V2)(a+"/not_found"):(0,C.HC)(`${a}/leaderboard/contests/${i.contest_id}/score`):(0,C.V2)(a+"/not_found")},U="not_found",F=()=>Promise.all([a.e("44077"),a.e("37854"),a.e("75167"),a.e("16326"),a.e("41723")]).then(a.bind(a,92397)),G=()=>Promise.all([a.e("53506"),a.e("94024")]).then(a.bind(a,35099)),z=()=>Promise.all([a.e("44077"),a.e("37854"),a.e("75167"),a.e("16326"),a.e("73490"),a.e("49574")]).then(a.bind(a,6536)),H=()=>Promise.all([a.e("95381"),a.e("75143")]).then(a.bind(a,81439)),B=()=>a.e("92235").then(a.bind(a,39961)),V=()=>a.e("91028").then(a.bind(a,56799)),J=()=>a.e("2219").then(a.bind(a,66054)),W=(0,N.memoize)((e=[])=>e?.reduce((e,t)=>(e[(0,R.zS)(t.type)]=t,e),{})),Y=()=>Promise.all([a.e("49117"),a.e("6514"),a.e("28589")]).then(a.bind(a,71836)),X=[{path:`grading/${L.IE}`,lazy:()=>Promise.all([a.e("44077"),a.e("28539"),a.e("75167"),a.e("45299")]).then(a.bind(a,59941))},{path:"sourcereel",lazy:()=>Promise.all([a.e("44077"),a.e("75167"),a.e("73490"),a.e("13")]).then(a.bind(a,30019))},{path:"gamesimulator",lazy:()=>Promise.all([a.e("95381"),a.e("74034"),a.e("53506"),a.e("27241")]).then(a.bind(a,85613))},{path:"teamformation",lazy:()=>Promise.all([a.e("49117"),a.e("13476"),a.e("87335"),a.e("19754")]).then(a.bind(a,25649))},{path:"teamformation/create",lazy:Y},{path:`teamformation/edit/${L.fv}`,lazy:Y},{path:"teamformation/import",lazy:()=>Promise.all([a.e("49117"),a.e("6514"),a.e("61871"),a.e("51902")]).then(a.bind(a,25997))},{path:"dashboard",lazy:()=>a.e("83790").then(a.bind(a,65917))}].map(e=>new M.M(e).check(e=>{let t=e.session.role;return t===P.Xh.Staff||t===P.Xh.Admin},U).build()),$=[{path:"groundcontrol",lazy:()=>Promise.all([a.e("49117"),a.e("95381"),a.e("13476"),a.e("35267"),a.e("52619")]).then(a.bind(a,16851))},{path:"adminpanel",lazy:()=>Promise.all([a.e("37259"),a.e("58549"),a.e("56159")]).then(a.bind(a,64043))}].map(e=>new M.M(e).check(e=>e.session.role===P.Xh.Admin,U).build());var Z=a(58162),q=a(31230),Q=a(12149),K=a(97609);let ee=()=>{let e=(0,c.wA)(),{isLoggedIn:t,name:a,courseId:s}=(0,Q.wV)(),[i,r]=(0,S.useState)(!0);(0,S.useEffect)(()=>{p.A.useBackend&&(0,q.le)().then(e=>r(!!e))},[]);let o=(0,S.useMemo)(()=>[new M.M({path:"game",lazy:G}).check(e=>!!e.session.enableGame,U).build(),{path:"",loader:()=>(()=>{let{role:e,enableGame:t,assessmentConfigurations:a}=f.M.getState().session;return t?(0,C.V2)("game"):a&&a.length>0?(0,C.V2)(`${(0,R.zS)(a[0].type)}`):e===P.Xh.Admin?(0,C.V2)("adminpanel"):null})()||(0,C.HC)(U)},{path:`:assessmentConfigType/${L.Kh}`,lazy:F,loader:({params:e})=>{let{assessmentConfigurations:t}=f.M.getState().session,a=W(t),s=e.assessmentConfigType;for(let e of Object.keys(a))if(s==e)return a[e];return(0,C.V2)(U)}},{path:"sourcecast/:sourcecastId?",lazy:z},{path:"achievements/*",lazy:H},{path:"leaderboard",loader:D,children:[{path:"overall",lazy:B},{path:"contests/:contestId?/:leaderboardType",loader:O,lazy:V}]},{path:"*",lazy:J},...X,...$],[]),l=(0,S.useMemo)(()=>{let i=p.A.playgroundOnly?Z.hK:(0,Z.zG)({name:a,isLoggedIn:t,courseId:s,academyRoutes:o}),n=A.R4(C.Ys)(i);return e((0,K.C9)(n)),n},[a,t,s,o,e]);return i?(0,n.jsx)(C.pg,{router:l}):(0,n.jsx)("div",{className:k()("NoPage",I.DARK),children:(0,n.jsx)(E.I,{icon:_.W.WRENCH,title:"Under maintenance",description:"The Source Academy is currently undergoing maintenance. Please try again later."})})};var et=a(99475);u.A.registerLanguage("javascript",h.A),(()=>{if(!p.A.sentryDsn)return;v.T({dsn:p.A.sentryDsn,environment:p.A.sourceAcademyEnvironment,release:`cadet-frontend@${p.A.sourceAcademyVersion}`,integrations:[A.k_({useEffect:S.useEffect,useLocation:C.zy,useNavigationType:C.wQ,createRoutesFromChildren:C.AV,matchRoutes:C.ue}),T.w()]});let e=f.M.getState().session.userId;w.gV(void 0!==e?{id:e.toString()}:null)})(),s=[...x],b.syG.registerModules(s);let ea=document.getElementById("root"),es=(0,d.createRoot)(ea);if(window.__REDUX_STORE__=f.M,console.log(`%cSource Academy ${p.A.sourceAcademyEnvironment}-${p.A.sourceAcademyVersion}; Please visit https://github.com/source-academy/frontend/issues to report bugs or issues.`,"font-weight: bold;"),(0,l.setModulesStaticURL)(p.A.moduleBackendUrl),console.log(`Using module backend: ${p.A.moduleBackendUrl}`),(0,et.x)(f.M).catch(e=>console.error(e)).finally(()=>{es.render((0,n.jsx)(c.Kq,{store:f.M,children:(0,n.jsx)(r.T,{children:(0,n.jsx)(ee,{})})}))}),i={onUpdate:e=>{(0,m.JB)((0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"A new version of Source Academy is available.\xa0"}),(0,n.jsx)(o.$,{onClick:()=>{e&&e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()},children:"Refresh now"})]}),0)}},"serviceWorker"in navigator&&new URL("https://sourceacademy.org",window.location.href).origin===window.location.origin&&window.addEventListener("load",()=>{var e,t;let a="https://sourceacademy.org/service-worker.js";g?(e=a,t=i,fetch(e,{headers:{"Service-Worker":"script"}}).then(a=>{let s=a.headers.get("content-type");404===a.status||null!=s&&-1===s.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):y(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")}),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")})):y(a,i)}),p.A.cadetLoggerUrl){let e=()=>{var e;(e=f.M.getState().session.accessToken)&&navigator.serviceWorker.controller?.postMessage({type:"SYNC_LOGS",accessToken:e})};navigator.serviceWorker.ready.then(()=>{setInterval(e,p.A.cadetLoggerInterval)})}},85840(e,t,a){"use strict";a.d(t,{$g:()=>v,Qg:()=>y,mj:()=>f,k8:()=>x,KC:()=>b});var s=a(74848),i=a(28761),n=a(9584),r=a(46942),o=a.n(r);a(96540),a(51085);var l=a(47220);let d={Application__main:"Application__main-qDhROG",applicationMain:"Application__main-qDhROG",WorkspaceParent:"WorkspaceParent-AHBBWy",workspaceParent:"WorkspaceParent-AHBBWy","bp6-tag":"bp6-tag-mD3oav",bp6Tag:"bp6-tag-mD3oav",badge:"badge-OZnZvE","bp6-overlay":"bp6-overlay-Wf8EHf",bp6Overlay:"bp6-overlay-Wf8EHf","bp6-popover-content":"bp6-popover-content-XTZje_",bp6PopoverContent:"bp6-popover-content-XTZje_","badge-tag":"badge-tag-KolUio",badgeTag:"badge-tag-KolUio","grading-badge":"grading-badge-rWaFN0",gradingBadge:"grading-badge-rWaFN0","grading-badge-xs":"grading-badge-xs-GQ9V0O",gradingBadgeXs:"grading-badge-xs-GQ9V0O","grading-badge-sm":"grading-badge-sm-DhlO2P",gradingBadgeSm:"grading-badge-sm-DhlO2P","grading-badge-md":"grading-badge-md-hzYpjO",gradingBadgeMd:"grading-badge-md-hzYpjO","grading-badge-lg":"grading-badge-lg-r3Vztc",gradingBadgeLg:"grading-badge-lg-r3Vztc","grading-badge-xl":"grading-badge-xl-CVohiG",gradingBadgeXl:"grading-badge-xl-CVohiG","grading-badge-text":"grading-badge-text-KuPykd",gradingBadgeText:"grading-badge-text-KuPykd"},c=e=>(0,s.jsxs)("div",{className:o()(d["grading-badge"],d[`grading-badge-${e.size??"sm"}`]),style:{color:e.color?.[1]??"#000000",backgroundColor:e.color?e.color[0]+"40":""},children:[e.icon,(0,s.jsx)("span",{className:d["grading-badge-text"],children:e.text})]}),u=["#f87171","#b91c1c"],h=["#9ca3af","#374151"],p=Object.freeze({missions:["#818cf8","#4f46e5"],quests:["#6ee7b7","#059669"],paths:["#7dd3fc","#0284c7"],autograded:["#c084fc","#7e22ce"],not_attempted:h,attempting:u,attempted:u,submitted:["#fde047","#ca8a04"],graded:["#4ade80","#15803d"],published:["#93c5fd","#2563eb"]}),m=Object.freeze({missions:"indigo",quests:"emerald",paths:"sky",autograded:"purple",not_attempted:"gray",attempting:"red",attempted:"red",submitted:"yellow",graded:"green",published:"blue"});function g(e){return p[e.toLowerCase()]||h}function y(e){return m[e.toLowerCase()]||"gray"}let f=({type:e,size:t="sm"})=>(0,s.jsx)(c,{text:"xs"===t?e.charAt(0).toUpperCase():e,size:t,color:g(e)}),b=({filter:e,onRemove:t,filtersName:a})=>(0,s.jsx)("button",{type:"button",className:l.A["grading-overview-filterable-btns"],onClick:()=>t(e),style:{marginLeft:"5px"},children:(0,s.jsx)(c,{text:a,icon:(0,s.jsx)(i.I,{icon:n.W.CROSS,style:{marginRight:"0.25rem"}}),color:g(e)})}),x=({filter:e,onRemove:t})=>{let a=e.value;return a=a.charAt(0).toUpperCase()+a.slice(1),(0,s.jsx)("button",{type:"button",className:l.A["grading-overview-filterable-btns"],onClick:()=>t(e),style:{marginLeft:"5px"},children:(0,s.jsx)(c,{text:a,icon:(0,s.jsx)(i.I,{icon:n.W.CROSS,style:{marginRight:"0.25rem"}}),color:g(a)})})},v=({progress:e})=>{let t=e.charAt(0).toUpperCase()+e.slice(1),a=(0,s.jsx)(i.I,{icon:"autograded"===e?n.W.AIRPLANE:"published"===e?n.W.ENDORSED:"graded"===e?n.W.TICK:"submitted"===e?n.W.TIME:n.W.DISABLE,style:{marginRight:"0.5rem"}});return(0,s.jsx)(c,{text:t,color:g(e),icon:a})}},76099(e,t,a){"use strict";a.d(t,{IP:()=>D,Ay:()=>G,Rb:()=>M});var s,i=a(74848),n=a(28761),r=a(79642),o=a(68464),l=a(35537),d=a(9584),c=a(80346),u=a(66875),h=a(46942),p=a.n(h),m=a(2543),g=a(96540),y=a(94201),f=a(41344);a(51085);var b=a(19549),x=a(97505),v=a(12149),A=a(35905),T=((s={}).assessmentName="Name",s.assessmentType="Type",s.studentName="Student(s)",s.studentUsername="Username(s)",s.groupName="Group",s.progressStatus="Progress",s.xp="Raw XP (+Bonus)",s.actionsIndex="Actions",s),w=a(55930),S=a(47220);let C=e=>{let[t,a]=(0,g.useState)("sort"),s=(0,v.N4)(e=>e.workspaces.grading.allColsSortStates);return(0,g.useEffect)(()=>{s.sortBy!==e.column.getColId()&&a("sort")},[s,e.column]),(0,i.jsxs)(b.A,{className:p()(e.eGridHeader.classList,S.A["grading-table-header-individual"]),children:[(0,i.jsx)("span",{className:"ag-header-cell-text",children:e.displayName}),!e.disabledSortCols.includes(e.column.getColId())&&(0,i.jsx)("div",{className:p()(S.A["grading-table-col-icons"],"grading-table-sort-cols"),onClick:()=>void(a(e=>M(e)),e.updateSortState(e.column.getColId(),M(t))),children:(0,i.jsx)(n.I,{icon:t})}),(0,i.jsx)("div",{className:p()(S.A["grading-table-col-icons"],"grading-table-hide-cols"),onClick:()=>e.hideColumn(e.column.getColId()),children:(0,i.jsx)(n.I,{icon:"eye-off"})})]})};var I=a(85840);let E=({filters:e,onFilterRemove:t,filtersName:a})=>(0,i.jsx)("div",{children:e.map((e,s)=>(0,i.jsx)(I.KC,{filter:e,filtersName:a[s],onRemove:t},e))}),_=({filters:e,onFilterRemove:t})=>(0,i.jsx)(b.A,{justifyContent:"flex-start",style:{maxWidth:"max(800px, 70vw)",marginRight:"10px"},children:e.map(e=>(0,i.jsx)(I.k8,{filter:e,onRemove:t},e.id))});var j=a(92473),k=a(54348),N=a(46807),P=a(63283);let R=({submissionId:e,style:t,progress:a,filterMode:s})=>{let o=(0,y.wA)(),{courseId:l}=(0,v.wV)(),c=async()=>{await (0,P.cu)({contents:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:"Reautograde this submission?"}),(0,i.jsx)("p",{children:"Note: all manual adjustments will be reset to 0."})]}),positiveIntent:"danger",positiveLabel:"Reautograde"})&&o(N.A.reautogradeSubmission(e))},u=async()=>{await (0,P.cu)({contents:"Are you sure you want to unsubmit?",positiveIntent:"danger",positiveLabel:"Unsubmit"})&&o(N.A.unsubmitSubmission(e))},h=async()=>{await (0,P.cu)({contents:"Publish this assessment's grading?",positiveIntent:"primary",positiveLabel:"Publish"})&&o(N.A.publishGrading(e))},p=async()=>{await (0,P.cu)({contents:"Unpublish this assessment's grading?",positiveIntent:"primary",positiveLabel:"Unpublish"})&&o(N.A.unpublishGrading(e))},m="graded"===a,g="submitted"===a;return(0,i.jsxs)(b.A,{justifyContent:"flex-start",className:"grading-actions-btn-wrappers",style:{columnGap:"5px",...t},children:[s&&(0,i.jsx)(f.N_,{to:`/courses/${l}/grading/${e}`,children:(0,i.jsx)(b.A,{alignItems:"center",className:"grading-action-icons grading-action-icons-bg",children:(0,i.jsx)(j.m,{position:k.yX.TOP,content:"Grade",children:(0,i.jsx)(n.I,{icon:d.W.EDIT})})})}),(m||g)&&(0,i.jsx)(r.$,{className:"grading-action-icons",minimal:!0,style:{padding:0},onClick:c,children:(0,i.jsx)(j.m,{position:k.yX.TOP,content:"Reautograde",children:(0,i.jsx)(n.I,{icon:d.W.REFRESH})})}),(m||g)&&(0,i.jsx)(r.$,{className:"grading-action-icons",minimal:!0,style:{padding:0},onClick:u,children:(0,i.jsx)(j.m,{position:k.yX.TOP,content:"Unsubmit",children:(0,i.jsx)(n.I,{icon:d.W.UNDO})})}),m&&(0,i.jsx)(r.$,{className:"grading-action-icons",minimal:!0,onClick:h,children:(0,i.jsx)(j.m,{position:k.yX.TOP,content:"Publish",children:(0,i.jsx)(n.I,{icon:d.W.SEND_TO_GRAPH})})}),"published"===a&&(0,i.jsx)(r.$,{className:"grading-action-icons",minimal:!0,onClick:p,children:(0,i.jsx)(j.m,{position:k.yX.TOP,content:"Unpublish",children:(0,i.jsx)(n.I,{icon:d.W.EXCLUDE_ROW})})})]})},L=({value:e,children:t,filterMode:a})=>(0,i.jsx)("button",{type:"button",className:S.A[a?"grading-overview-filterable-btns":"grading-overview-unfilterable-btns"],children:t||e},e),M=e=>{switch(e){case"sort":return"sort-asc";case"sort-asc":return"sort-desc";case"sort-desc":return"sort"}},D={assessmentName:"sort",assessmentType:"sort",studentName:"sort",studentUsername:"sort",groupName:"sort",progressStatus:"sort",xp:"sort",actionsIndex:"sort"},O=["actionsIndex"],U=["xp","actionsIndex"],F=["actionsIndex"],G=({showAllSubmissions:e,totalRows:t,pageSize:a,submissions:s,updateEntries:h})=>{let j=(0,y.wA)(),k=(0,f.Zp)(),N=(0,v.N4)(e=>e.workspaces.grading.submissionsTableFilters),P=(0,v.N4)(e=>e.workspaces.grading.columnVisiblity),M=(0,v.N4)(e=>e.workspaces.grading.requestCounter),G=(0,v.N4)(e=>e.session.courseId),z=(0,g.useRef)(null),[H,B]=(0,g.useState)(0),[V,J]=(0,g.useState)(""),[W,Y]=(0,g.useState)(""),[X,$]=(0,g.useState)([...N.columnFilters]),[Z,q]=(0,g.useState)([]),[Q,K]=(0,g.useState)(P||[]),[ee,et]=(0,g.useState)([]),[ea,es]=(0,g.useState)(),[ei,en]=(0,g.useState)(!1),er=(0,g.useMemo)(()=>M>0,[M]),eo=(0,g.useMemo)(()=>Math.ceil(t/a)-1,[t,a]),el=(0,g.useCallback)(()=>B(0),[B]),ed={customComponents:{agColumnHeader:C},defaultColDefs:{filter:!1,floatingFilter:!0,resizable:!0,sortable:!0,headerComponentParams:{hideColumn:e=>ep(e),updateSortState:(e,t)=>{if(!F.includes(e)){let a={...D};a[e]=t,j(A.A.updateAllColsSortStates({currentState:a,sortBy:e}))}},disabledSortCols:F}},headerHeight:48,overlayLoadingTemplate:'<div class="grading-loading-icon"></div>',overlayNoRowsTemplate:"Hmm... we didn't find any submissions, you might want to debug your filter() function.",pageSize:a,pagination:!0,rowClass:p()(S.A["grading-left-align"],S.A["grading-table-rows"]),rowHeight:60,suppressMenuHide:!0,suppressPaginationPanel:!0,suppressRowClickSelection:!0,tableMargins:"1rem 0 0 0"},ec=(0,g.useMemo)(()=>(0,m.debounce)(e=>{el(),Y(e)},300),[el]),eu=(0,g.useMemo)(()=>(0,m.debounce)(q,300),[]),eh=(0,g.useMemo)(()=>{let e=[{id:"assessmentName",value:W},...X,...Z].map(w.FJ),t={};return e.forEach(e=>{Object.keys(e).forEach(a=>{t[a]=e[a]})}),t},[Z,X,W]),ep=e=>{K(t=>[...t,e])};(0,g.useEffect)(()=>{if(!e&&X.reduce((e,t)=>e||"progressStatus"===t.id&&"graded"!==String(t.value).toLowerCase()&&"submitted"!==String(t.value).toLowerCase(),!1)){$(e=>e.filter(e=>"progressStatus"!==e.id)),el();return}j(A.A.updateSubmissionsTableFilters({columnFilters:X}))},[X,e,j,el]),(0,g.useEffect)(()=>{j(A.A.updateGradingColumnVisibility(Q)),z.current?.api&&z.current.api.setColumnsVisible(Q,!1)},[Q,j]),(0,g.useEffect)(()=>{el()},[h,el]),(0,g.useEffect)(()=>{h(H,eh)},[h,H,eh]),(0,g.useEffect)(()=>{if(z.current?.api){let e=[];s.reduce((t,a,s)=>{let i={assessmentName:a.assessmentName,assessmentType:a.assessmentType,studentName:a.studentName?a.studentName:a.studentNames?a.studentNames.join(", "):"",studentUsername:a.studentUsername?a.studentUsername:a.studentUsernames?a.studentUsernames.join(", "):"",groupName:a.groupName,progressStatus:a.progress,xp:a.currentXp+" (+"+a.xpBonus+") / "+a.maxXp,actionsIndex:a.submissionId,courseID:G};return e.push(i),t&&i.actionsIndex===ee?.[s]?.actionsIndex&&i.studentUsername===ee?.[s]?.studentUsername&&i.groupName===ee?.[s]?.groupName&&i.progressStatus===ee?.[s]?.progressStatus&&i.xp===ee?.[s]?.xp},s.length===ee?.length)||et(e),z.current.api.hideOverlay(),0===e.length&&M<=0&&z.current.api.showNoRowsOverlay()}},[M,s,G,z.current?.api]);let em=(0,g.useMemo)(()=>{let e,t;return e=[],t={suppressMovable:!0,cellClass:p()(S.A["grading-def-cell"],S.A["grading-def-cell-pointer"]),headerClass:S.A["grading-default-headers"],flex:1},e.push({...t,headerName:T.assessmentName,field:"assessmentName",flex:3,cellClass:p()(t.cellClass,S.A["grading-cell-align-left"]),headerClass:p()(t.headerClass,S.A["grading-left-align"]),cellRendererSelector:e=>void 0!==e.data?{component:L,params:{value:e.data.assessmentName,filterMode:ei}}:void 0}),e.push({...t,headerName:T.assessmentType,field:"assessmentType",cellRendererSelector:e=>void 0!==e.data?{component:L,params:{value:e.data.assessmentType,children:[(0,i.jsx)(I.mj,{type:e.data.assessmentType})],filterMode:ei}}:void 0}),e.push({...t,headerName:T.studentName,field:"studentName",filter:!0,flex:1.5,cellClass:p()(t.cellClass,S.A["grading-cell-align-left"]),headerClass:p()(t.headerClass,S.A["grading-left-align"]),cellRendererSelector:e=>void 0!==e.data?{component:L,params:{value:e.data.studentName,filterMode:ei}}:void 0}),e.push({...t,headerName:T.studentUsername,field:"studentUsername",filter:!0,cellRendererSelector:e=>void 0!==e.data?{component:L,params:{value:e.data.studentUsername,filterMode:ei}}:void 0}),e.push({...t,headerName:T.groupName,field:"groupName",filter:!0,flex:.75,cellRendererSelector:e=>void 0!==e.data?{component:L,params:{value:e.data.groupName,filterMode:ei}}:void 0}),e.push({...t,headerName:T.progressStatus,field:"progressStatus",cellRendererSelector:e=>void 0!==e.data?{component:L,params:{value:e.data.progressStatus,children:[(0,i.jsx)(I.$g,{progress:e.data.progressStatus})],filterMode:ei}}:void 0}),e.push({...t,headerName:T.xp,field:"xp",cellClass:p()(t.cellClass,S.A["grading-xp-cell"],ei?S.A["grading-def-cell-selectable"]:S.A["grading-def-cell-pointer"])}),e.push({...t,headerName:T.actionsIndex,field:"actionsIndex",flex:1.4,headerClass:p()(t.headerClass,S.A["grading-left-align"]),cellRendererSelector:e=>void 0!==e.data?{component:R,params:{submissionId:e.data.actionsIndex,progress:e.data.progressStatus,filterMode:ei}}:void 0}),e},[ei]);return(0,g.useEffect)(()=>{es(em)},[el,em]),(0,i.jsxs)(i.Fragment,{children:[Q.length>0?(0,i.jsx)(b.A,{justifyContent:"space-between",alignItems:"center",style:{marginTop:"0.5rem"},children:(0,i.jsxs)(b.A,{children:[(0,i.jsx)(x.A,{isSecondaryText:!0,children:"Columns Hidden:"}),(0,i.jsx)(E,{filters:Q,filtersName:Q.map(e=>T[e]),onFilterRemove:e=>{z.current?.api&&(K(t=>t.filter(t=>t!==e)),z.current.api.setColumnsVisible([e],!0))}})]})}):(0,i.jsx)(i.Fragment,{}),(0,i.jsxs)(b.A,{justifyContent:"space-between",alignItems:"center",style:{marginTop:"0.5rem"},children:[(0,i.jsxs)(b.A,{alignItems:"center",children:[(0,i.jsxs)(b.A,{style:{alignItems:"center",height:"1.75rem",width:"100%"},children:[(0,i.jsx)(n.I,{icon:d.W.FILTER_LIST}),(0,i.jsx)(x.A,{isSecondaryText:!0,style:{marginLeft:"7.5px"},children:X.length>0?"Filters: ":!0===ei?"No filters applied. Click on any cell to filter by its value."+(0===Q.length?" Click on any column header's eye icon to hide it.":""):(0,i.jsx)("strong",{children:"Disable Grading Mode to enable click to filter"})})]}),(0,i.jsx)(_,{filters:X,onFilterRemove:({id:e,value:t})=>{$(X.filter(a=>a.id!==e&&a.value!==t)),el()}})]}),(0,i.jsx)(r.$,{minimal:!0,className:p()(S.A["grading-filter-btn"],ei&&S.A["grading-filter-btn-on"]),onClick:e=>en(e=>!e),children:ei?"Filter Mode":"Grading Mode"}),(0,i.jsx)(o.M,{className:"grading-search-input",placeholder:"Search by assessment name",leftIcon:"search",large:!0,value:V,onChange:e=>{J(e.target.value),ec(e.target.value)}})]}),(0,i.jsx)("div",{style:{margin:ed.tableMargins},children:(0,i.jsx)(u.W6,{theme:c.zl0,columnDefs:ea,onCellClicked:e=>{let t=e.colDef.field?e.colDef.field:"";if(ei||O.includes(t)){if(ei&&!U.includes(t)){if(null===e.data[t]||""===e.data[t])return;(({id:e,value:t})=>{$(a=>a.reduce((a,s)=>a||s.id===e&&s.value===t,!1)?[...a]:[...a,{id:e,value:t}]),el()})({id:t,value:e.data[t]})}}else k(`/courses/${G}/grading/${e.data.actionsIndex}`)},ref:z,rowData:ee,components:ed.customComponents,defaultColDef:ed.defaultColDefs,headerHeight:ed.headerHeight,loading:er,overlayLoadingTemplate:ed.overlayLoadingTemplate,overlayNoRowsTemplate:ed.overlayNoRowsTemplate,pagination:ed.pagination,paginationPageSize:ed.pageSize,rowClass:ed.rowClass,rowHeight:ed.rowHeight,suppressMenuHide:ed.suppressMenuHide,suppressPaginationPanel:ed.suppressPaginationPanel,rowSelection:{mode:"singleRow",enableClickSelection:!ed.suppressRowClickSelection},domLayout:"autoHeight",onFilterChanged:e=>{if(!e.afterFloatingFilter)return;let t=e.api.getFilterModel(),a=[];for(let[e,{filter:s}]of Object.entries(t))switch(e){case"studentName":case"studentUsername":case"groupName":a.push({id:e,value:s})}eu(a)}})}),(0,i.jsxs)(b.A,{justifyContent:"center",className:"grading-table-footer",style:{width:"100%",columnGap:"5px"},children:[(0,i.jsx)(r.$,{small:!0,minimal:!0,icon:d.W.DOUBLE_CHEVRON_LEFT,onClick:()=>B(0),disabled:H<=0||er}),(0,i.jsx)(r.$,{small:!0,minimal:!0,icon:d.W.ARROW_LEFT,onClick:()=>B(H-1),disabled:H<=0||er}),(0,i.jsxs)(l.H6,{style:{margin:"auto 0"},children:["Page ",eo+1===0?0:H+1," of ",eo+1]}),(0,i.jsx)(r.$,{small:!0,minimal:!0,icon:d.W.ARROW_RIGHT,onClick:()=>B(H+1),disabled:H>=eo||er}),(0,i.jsx)(r.$,{small:!0,minimal:!0,icon:d.W.DOUBLE_CHEVRON_RIGHT,onClick:()=>B(eo),disabled:H>=eo||er})]})]})}},21681(e,t,a){"use strict";let s,i,n,r,o;a.d(t,{M:()=>aX});var l=a(96755),d=a(16535),c=a(2543),u=a.n(c),h=a(17224),p=a(61499),m=a(82960),g=a(48857),y=a(93732);let f=(0,l.vy)(p.BM,e=>{e.addCase(y.A.saveAchievements,(e,t)=>{e.achievements=t.payload}).addCase(y.A.saveGoals,(e,t)=>{e.goals=t.payload}).addCase(y.A.saveUsers,(e,t)=>{e.users=t.payload}).addCase(y.A.saveUserAssessmentOverviews,(e,t)=>{e.assessmentOverviews=t.payload})});var b=a(49436);let x=(0,l.vy)(p.Ye,e=>{e.addCase(b.jG,(e,t)=>{e.gradingSummary=t.payload})});var v=a(26235),A=a(6670);let T=(0,l.vy)(p.js,e=>{e.addCase(A.A.setLanguages,(e,t)=>{e.languages=t.payload.languages,e.languageMap=Object.fromEntries((0,v.I4)(t.payload.languages))}).addCase(A.A.setSelectedLanguage,(e,t)=>{e.selectedLanguageId=t.payload.languageId}).addCase(A.A.setSelectedEvaluator,(e,t)=>{e.selectedEvaluatorId=t.payload.evaluatorId})});var w=a(28850),S=a(1451);let C=(0,l.vy)(p.QR,e=>{e.addCase(S.A.setPlugins,(e,t)=>{e.plugins=t.payload.plugins,e.pluginMap=Object.fromEntries((0,w.d)(t.payload.plugins))})});var I=a(49540);let E=(0,l.vy)(p.Jm,e=>{e.addCase(I.A.saveOverallLeaderboardXP,(e,t)=>{e.paginatedUserXp={rows:t.payload.rows||[],userCount:t.payload.userCount||0}}).addCase(I.A.saveAllContestScores,(e,t)=>{e.contestScore=t.payload}).addCase(I.A.saveAllContestPopularVotes,(e,t)=>{e.contestPopularVote=t.payload}).addCase(I.A.saveCode,(e,t)=>{e.code=t.payload}).addCase(I.A.clearCode,(e,t)=>{e.code=""}).addCase(I.A.saveContests,(e,t)=>{e.contests=t.payload}).addCase(I.A.setWorkspaceInitialRun,(e,t)=>{e.initialRun[t.payload]=!0}).addCase(I.A.resetWorkspaceInitialRun,(e,t)=>{e.initialRun[t.payload]=!1})});var _=a(6428);let j=(0,l.vy)(p.T_,e=>{e.addCase(_.UQ,(e,t)=>{e.queryString=t.payload}).addCase(_.$8,(e,t)=>{e.shortURL=t.payload}).addCase(_.F$,(e,t)=>{e.githubSaveInfo=t.payload}).addCase(_.SD,(e,t)=>{e.persistenceFile=t.payload}).addCase(_.yO,(e,t)=>{e.languageConfig=t.payload})});var k=a(97609),N=a(76940),P=a(39820);let R=e=>e.payload?.env??P.Kf,L=(0,l.vy)(p.Pu,e=>{e.addCase(N.A.addStoryEnv,(e,t)=>{let a=R(t);e.envs[a]=(0,d.h4)((0,p.Qm)(t.payload.env,t.payload.chapter,t.payload.variant))}).addCase(N.A.clearStoryEnv,(e,t)=>{if(t.payload.env){let{chapter:a,variant:s}=e.envs[t.payload.env].context;e.envs[t.payload.env]=(0,d.h4)((0,p.Qm)(t.payload.env,a,s))}else e.envs={}}).addCase(N.A.evalStory,(e,t)=>{let a=R(t);e.envs[a].isRunning=!0}).addCase(N.A.evalStoryError,(e,t)=>{let a,s=R(t),i=e.envs[s].output.slice(-1)[0];a=void 0!==i&&"running"===i.type?e.envs[s].output.slice(0,-1).concat({type:t.payload.type,errors:t.payload.errors,consoleLogs:i.consoleLogs}):e.envs[s].output.concat({type:t.payload.type,errors:t.payload.errors,consoleLogs:[]}),e.envs[s].output=a,e.envs[s].isRunning=!1}).addCase(N.A.evalStorySuccess,(e,t)=>{let a,s=R(t),i={type:t.payload.type,value:t.payload.value},n=e.envs[s].output.slice(-1)[0];a=void 0!==n&&"running"===n.type?e.envs[s].output.slice(0,-1).concat({consoleLogs:n.consoleLogs,...i}):e.envs[s].output.concat({consoleLogs:[],...i}),e.envs[s].output=a,e.envs[s].isRunning=!1}).addCase(N.A.handleStoriesConsoleLog,(e,t)=>{let a,s=R(t),i=e.envs[s].output.slice(-1)[0];if(void 0===i||"running"!==i.type)a=e.envs[s].output.concat({type:"running",consoleLogs:[...t.payload.logString]});else{let n={type:i.type,consoleLogs:i.consoleLogs.concat(t.payload.logString)};(a=e.envs[s].output.slice(0,-1)).push(n)}e.envs[s].output=a}).addCase(N.A.notifyStoriesEvaluated,(e,t)=>{let a=R(t),s=e.envs[a].debuggerContext;s.result=t.payload.result,s.lastDebuggerResult=t.payload.lastDebuggerResult,s.code=t.payload.code,s.context=(0,d.h4)(t.payload.context),s.workspaceLocation="stories"}).addCase(N.A.toggleStoriesUsingSubst,(e,t)=>{let a=R(t);e.envs[a].usingSubst=t.payload.usingSubst}).addCase(N.A.updateStoriesList,(e,t)=>{e.storyList=t.payload}).addCase(N.A.setCurrentStoryId,(e,t)=>{e.currentStoryId=t.payload}).addCase(N.A.setCurrentStory,(e,t)=>{e.currentStory=t.payload}).addCase(N.A.clearStoriesUserAndGroup,e=>{e.userId=void 0,e.userName=void 0,e.groupId=void 0,e.groupName=void 0,e.role=void 0}).addCase(N.A.setCurrentStoriesUser,(e,t)=>{e.userName=t.payload.name,e.userId=t.payload.id}).addCase(N.A.setCurrentStoriesGroup,(e,t)=>{e.groupId=t.payload.id,e.groupName=t.payload.name,e.role=t.payload.role}).addCase(k.je,()=>p.Pu)});var M=a(54317);let D=(0,l.vy)(p.tu,e=>{e.addCase(M.setInBrowserFileSystem,(e,t)=>{e.inBrowserFileSystem=t.payload.inBrowserFileSystem})});var O=a(6261),U=a(75780),F=a(30044),G=a(85988);let z=(0,l.vy)(p.Kn.sourcecast,e=>{e.addCase(F.c,(e,t)=>{e.title=t.payload.title,e.description=t.payload.description,e.uid=t.payload.uid,e.audioUrl=t.payload.audioUrl,e.playbackData=(0,d.h4)(t.payload.playbackData)}).addCase(F.Yz,(e,t)=>{e.currentPlayerTime=t.payload.playerTime}).addCase(F.ie,(e,t)=>{e.codeDeltasToApply=(0,d.h4)(t.payload.deltas)}).addCase(F.eS,(e,t)=>{e.inputToApply=(0,d.h4)(t.payload.inputToApply)}).addCase(F.Hr,(e,t)=>{e.title=t.payload.title,e.description=t.payload.description,e.uid=t.payload.uid,e.audioUrl=t.payload.audioUrl,e.playbackData=(0,d.h4)(t.payload.playbackData)}).addCase(F.PX,(e,t)=>{e.playbackDuration=t.payload.duration}).addCase(F.PI,(e,t)=>{e.playbackStatus=t.payload.playbackStatus}).addCase(G.Iq,(e,t)=>{e.sourcecastIndex=t.payload.index})});var H=a(2282);let B=(0,l.vy)(p.Kn.sourcereel,e=>{e.addCase(H.A.recordInit,(e,t)=>{e.playbackData.init=t.payload.initData,e.playbackData.inputs=[]}).addCase(H.A.recordInput,(e,t)=>{e.playbackData.inputs.push((0,d.h4)(t.payload.input))}).addCase(H.A.resetInputs,(e,t)=>{e.playbackData.inputs=(0,d.h4)(t.payload.inputs)}).addCase(H.A.timerPause,(e,t)=>{e.recordingStatus="paused",e.timeElapsedBeforePause+=t.payload.timeNow-e.timeResumed}).addCase(H.A.timerReset,(e,t)=>{e.recordingStatus="notStarted",e.timeElapsedBeforePause=0,e.timeResumed=0}).addCase(H.A.timerResume,(e,t)=>{e.recordingStatus="recording",e.timeElapsedBeforePause=t.payload.timeBefore>=0?t.payload.timeBefore:e.timeElapsedBeforePause,e.timeResumed=t.payload.timeNow}).addCase(H.A.timerStart,(e,t)=>{e.recordingStatus="recording",e.timeElapsedBeforePause=0,e.timeResumed=t.payload.timeNow}).addCase(H.A.timerStop,(e,t)=>{e.recordingStatus="finished",e.timeElapsedBeforePause=0,e.timeResumed=0})});var V=a(20857),J=a(14873),W=a(27457),Y=a(35905);let X=(e,t,a)=>e!==t?null===e||e<t?e:e-1:0===a?null:0===t?0:t-1;var $=a(91948);let Z=e=>e.payload?e.payload.workspaceLocation:"assessment",q=(0,l.vy)(p.Kn,e=>{e.addCase(Y.A.setFolderMode,(e,t)=>{e[Z(t)].isFolderModeEnabled=t.payload.isFolderModeEnabled}).addCase(Y.A.updateActiveEditorTabIndex,(e,t)=>{let a=Z(t),s=t.payload.activeEditorTabIndex;if(null!==s){if(s<0)throw Error("Active editor tab index must be non-negative!");if(s>=e[a].editorTabs.length)throw Error("Active editor tab index must have a corresponding editor tab!")}e[a].activeEditorTabIndex=s}).addCase(Y.A.updateActiveEditorTab,(e,t)=>{let a=Z(t),{activeEditorTabOptions:s}=t.payload,i=e[a].activeEditorTabIndex;if(null===i)return;let n=[...e[a].editorTabs];n[i]={...n[i],...s},e[a].editorTabs=n}).addCase(Y.A.updateEditorValue,(e,t)=>{let a=Z(t),{editorTabIndex:s,newEditorValue:i}=t.payload;if(s<0)throw Error("Editor tab index must be non-negative!");if(s>=e[a].editorTabs.length)throw Error("Editor tab index must have a corresponding editor tab!");e[a].editorTabs[s].value=i}).addCase(Y.A.setEditorBreakpoint,(e,t)=>{let a=Z(t),{editorTabIndex:s,newBreakpoints:i}=t.payload;if(s<0)throw Error("Editor tab index must be non-negative!");if(s>=e[a].editorTabs.length)throw Error("Editor tab index must have a corresponding editor tab!");e[a].editorTabs[s].breakpoints=i}).addCase(Y.A.setEditorHighlightedLines,(e,t)=>{let a=Z(t),{editorTabIndex:s,newHighlightedLines:i}=t.payload;if(s<0)throw Error("Editor tab index must be non-negative!");if(s>=e[a].editorTabs.length)throw Error("Editor tab index must have a corresponding editor tab!");e[a].editorTabs[s].highlightedLines=i}).addCase(Y.A.setEditorHighlightedLinesControl,(e,t)=>{let a=Z(t),{editorTabIndex:s,newHighlightedLines:i}=t.payload;if(s<0)throw Error("Editor tab index must be non-negative!");if(s>=e[a].editorTabs.length)throw Error("Editor tab index must have a corresponding editor tab!");e[a].editorTabs[s].highlightedLines=i}).addCase(Y.A.moveCursor,(e,t)=>{let a=Z(t),{editorTabIndex:s,newCursorPosition:i}=t.payload;if(s<0)throw Error("Editor tab index must be non-negative!");if(s>=e[a].editorTabs.length)throw Error("Editor tab index must have a corresponding editor tab!");e[a].editorTabs[s].newCursorPosition=i}).addCase(Y.A.addEditorTab,(e,t)=>{let a=Z(t),{filePath:s,editorValue:i}=t.payload,n=e[a].editorTabs,r=n.findIndex(e=>e.filePath===s);if(-1!==r){e[a].activeEditorTabIndex=r;return}n.push({filePath:s,value:i,highlightedLines:[],breakpoints:[]});let o=n.length-1;e[a].activeEditorTabIndex=o}).addCase(Y.A.shiftEditorTab,(e,t)=>{let a=Z(t),{previousEditorTabIndex:s,newEditorTabIndex:i}=t.payload;if(s<0)throw Error("Previous editor tab index must be non-negative!");if(s>=e[a].editorTabs.length)throw Error("Previous editor tab index must have a corresponding editor tab!");if(i<0)throw Error("New editor tab index must be non-negative!");if(i>=e[a].editorTabs.length)throw Error("New editor tab index must have a corresponding editor tab!");let n=e[a].activeEditorTabIndex===s?i:e[a].activeEditorTabIndex,r=e[a].editorTabs,o=r[s],l=r.filter((e,t)=>t!==s),d=[...l.slice(0,i),o,...l.slice(i)];e[a].activeEditorTabIndex=n,e[a].editorTabs=d}).addCase(Y.A.removeEditorTab,(e,t)=>{let a=Z(t),s=t.payload.editorTabIndex;if(s<0)throw Error("Editor tab index must be non-negative!");if(s>=e[a].editorTabs.length)throw Error("Editor tab index must have a corresponding editor tab!");let i=e[a].editorTabs.filter((e,t)=>t!==s),n=X(e[a].activeEditorTabIndex,s,i.length);e[a].activeEditorTabIndex=n,e[a].editorTabs=i}).addCase(Y.A.removeEditorTabForFile,(e,t)=>{let a=Z(t),s=t.payload.removedFilePath,i=e[a].editorTabs,n=i.findIndex(e=>e.filePath===s);if(-1===n)return;let r=i.filter((e,t)=>t!==n),o=X(e[a].activeEditorTabIndex,n,r.length);e[a].activeEditorTabIndex=o,e[a].editorTabs=r}).addCase(Y.A.removeEditorTabsForDirectory,(e,t)=>{let a=Z(t),s=t.payload.removedDirectoryPath,i=e[a].editorTabs,n=i.map((e,t)=>e.filePath?.startsWith(s)?t:null).filter(e=>null!==e);if(0===n.length)return;let r=e[a].activeEditorTabIndex,o=[...i];for(let e=n.length-1;e>=0;e--){let t=n[e];o.splice(t,1),r=X(r,t,o.length)}e[a].activeEditorTabIndex=r,e[a].editorTabs=o}).addCase(Y.A.renameEditorTabForFile,(e,t)=>{let a=Z(t),{oldFilePath:s,newFilePath:i}=t.payload,n=e[a].editorTabs.find(({filePath:e})=>e===s);n&&(n.filePath=i)}).addCase(Y.A.renameEditorTabsForDirectory,(e,t)=>{let a=Z(t),{oldDirectoryPath:s,newDirectoryPath:i}=t.payload,n=e[a].editorTabs.map(e=>e.filePath?.startsWith(s)?{...e,filePath:e.filePath?.replace(s,i)}:e);e[a].editorTabs=n}),e.addCase(Y.A.changeStepLimit,(e,t)=>{e[Z(t)].stepLimit=t.payload.stepLimit}).addCase(Y.A.toggleUsingSubst,(e,t)=>{let{workspaceLocation:a}=t.payload;("playground"===a||"sicp"===a)&&(e[a].usingSubst=t.payload.usingSubst)}).addCase(Y.A.toggleUsingCse,(e,t)=>{let{workspaceLocation:a}=t.payload;("playground"===a||"sicp"===a)&&(e[a].usingCse=t.payload.usingCse)}).addCase(Y.A.toggleUpdateCse,(e,t)=>{let{workspaceLocation:a}=t.payload;("playground"===a||"sicp"===a)&&(e[a].updateCse=t.payload.updateCse)}).addCase(Y.A.updateCurrentStep,(e,t)=>{let a=Z(t);return{...e,[a]:{...e[a],currentStep:t.payload.steps}}}).addCase(Y.A.updateStepsTotal,(e,t)=>{let a=Z(t);return{...e,[a]:{...e[a],stepsTotal:t.payload.steps}}}).addCase(Y.A.updateBreakpointSteps,(e,t)=>{let a=Z(t);return{...e,[a]:{...e[a],breakpointSteps:t.payload.breakpointSteps}}}).addCase(Y.A.updateChangePointSteps,(e,t)=>{let a=Z(t);return{...e,[a]:{...e[a],changepointSteps:t.payload.changepointSteps}}}),e.addCase(Y.A.browseReplHistoryDown,(e,t)=>{let a=Z(t);if(null===e[a].replHistory.browseIndex)return;if(0!==e[a].replHistory.browseIndex){let t=e[a].replHistory.browseIndex-1,s=e[a].replHistory.records[t];e[a].replValue=s,e[a].replHistory.browseIndex=t;return}let s=e[a].replHistory.originalValue,i=e[a].replHistory.records.slice();e[a].replValue=s,e[a].replHistory={browseIndex:null,records:i,originalValue:""}}).addCase(Y.A.browseReplHistoryUp,(e,t)=>{let a=Z(t),s=e[a].replHistory.records,i=e[a].replHistory.browseIndex;if(0===s.length||null!==i&&void 0===s[i+1])return;if(null===i){let t=s.slice(),i=e[a].replValue,n=t[0];e[a].replValue=n,e[a].replHistory={browseIndex:0,records:t,originalValue:i};return}let n=i+1,r=s[n];e[a].replValue=r,e[a].replHistory.browseIndex=n}).addCase(Y.A.clearReplInput,(e,t)=>{e[Z(t)].replValue=""}).addCase(Y.A.clearReplOutputLast,(e,t)=>{e[Z(t)].output.pop()}).addCase(Y.A.clearReplOutput,(e,t)=>{e[Z(t)].output=[]}).addCase(Y.A.sendReplInputToOutput,(e,t)=>{let a,s=Z(t),i=e[s].output.concat(t.payload);(a=""!==t.payload.value?[t.payload.value].concat(e[s].replHistory.records):e[s].replHistory.records).length>$.A.maxBrowseIndex&&a.pop(),e[s].output=i,e[s].replHistory.records=a}).addCase(Y.A.evalRepl,(e,t)=>{e[Z(t)].isRunning=!0}).addCase(Y.A.updateReplValue,(e,t)=>{e[Z(t)].replValue=t.payload.newReplValue}),e.addCase(V.A.debuggerReset,(e,t)=>{let a=Z(t);e[a].isRunning=!1,e[a].isDebugging=!1}).addCase(V.A.debuggerResume,(e,t)=>{let a=Z(t);e[a].isRunning=!0,e[a].isDebugging=!1}).addCase(V.A.endDebuggerPause,(e,t)=>{let a=Z(t);e[a].isRunning=!1,e[a].isDebugging=!0}),e.addCase(Y.A.setTokenCount,(e,t)=>{e[Z(t)].tokenCount=t.payload.tokenCount}).addCase(Y.A.changeExecTime,(e,t)=>{e[Z(t)].execTime=t.payload.execTime}).addCase(Y.A.endClearContext,(e,t)=>{let a=Z(t);return{...e,[a]:{...e[a],context:(0,W.q6)(t.payload.library.chapter,t.payload.library.external.symbols,a,t.payload.library.variant,t.payload.library.languageOptions),globals:t.payload.library.globals,externalLibrary:t.payload.library.external.name}}}).addCase(Y.A.changeExternalLibrary,(e,t)=>{e[Z(t)].externalLibrary=t.payload.newExternal}).addCase(V.A.handleConsoleLog,(e,t)=>{let a,s=Z(t),i=e[s].output[e[s].output.length-1];if(void 0===i||"running"!==i.type)a=e[s].output.concat({type:"running",consoleLogs:[...t.payload.logString]});else{let n={type:i.type,consoleLogs:i.consoleLogs.concat(t.payload.logString)};(a=e[s].output.slice(0,-1)).push(n)}e[s].output=a}).addCase(k.je,(e,t)=>{let a=e.playground;return(0,d.h4)({...p.Kn,playground:a})}).addCase(Y.A.enableTokenCounter,(e,t)=>{e[Z(t)].hasTokenCounter=!0}).addCase(Y.A.disableTokenCounter,(e,t)=>{e[Z(t)].hasTokenCounter=!1}).addCase(Y.A.evalEditor,(e,t)=>{let a=Z(t);e[a].isRunning=!0,e[a].isDebugging=!1}).addCase(V.A.evalInterpreterSuccess,(e,t)=>{let a,s=Z(t),i=e[s].tokenCount,n={type:t.payload.type,value:t.payload.value},r=e[s].output.slice(-1)[0];if(void 0!==r&&"running"===r.type){let t={consoleLogs:r.consoleLogs,...n},o=[];e[s].hasTokenCounter&&o.push({consoleLog:`This program has ${i} tokens.`,type:"notification"});let l=e[s].customNotification;""!==l&&o.push({consoleLog:l,type:"notification"}),a=e[s].output.slice(0,-1).concat([...o,t])}else a=e[s].output.concat({consoleLogs:[],...n});e[s].output=a,e[s].isRunning=!1}).addCase(V.A.evalTestcaseSuccess,(e,t)=>{let a=Z(t),s=e[a].editorTestcases[t.payload.index];s.result=t.payload.value,s.errors=void 0,e[a].isRunning=!1}).addCase(V.A.evalTestcaseFailure,(e,t)=>{let a=e[Z(t)].editorTestcases[t.payload.index];a.result=void 0,a.errors=t.payload.value}).addCase(V.A.evalInterpreterError,(e,t)=>{let a,s=Z(t),i=e[s].output.slice(-1)[0];a=void 0!==i&&"running"===i.type?e[s].output.slice(0,-1).concat({type:t.payload.type,errors:t.payload.errors,consoleLogs:i.consoleLogs}):e[s].output.concat({type:t.payload.type,errors:t.payload.errors,consoleLogs:[]}),e[s].output=a,e[s].isRunning=!1,e[s].isDebugging=!1}).addCase(V.A.endInterruptExecution,(e,t)=>{let a=Z(t);e[a].isRunning=!1,e[a].isDebugging=!1}).addCase(Y.A.resetTestcase,(e,t)=>{let a=e[Z(t)].editorTestcases[t.payload.index];a.result=void 0,a.errors=void 0}).addCase(Y.A.resetWorkspace,(e,t)=>{let a=Z(t);return{...e,[a]:{...e[a],...(0,p.pb)(a),...t.payload.workspaceOptions}}}).addCase(Y.A.updateWorkspace,(e,t)=>{let a=Z(t);return{...e,[a]:{...e[a],...t.payload.workspaceOptions}}}).addCase(Y.A.increaseRequestCounter,e=>{e.grading.requestCounter+=1}).addCase(Y.A.decreaseRequestCounter,e=>{e.grading.requestCounter=Math.max(0,e.grading.requestCounter-1)}).addCase(J.LG,(e,t)=>{e[Z(t)].editorSessionId=t.payload.editorSessionId}).addCase(Y.A.setGradingHasLoadedBefore,(e,t)=>{e.grading.hasLoadedBefore=t.payload}).addCase(J.$Z,(e,t)=>{let a=Z(t);return{...e,[a]:{...e[a],sessionDetails:{...e[a].sessionDetails,...t.payload.sessionDetails}}}}).addCase(Y.A.setIsEditorReadonly,(e,t)=>{e[Z(t)].isEditorReadonly=t.payload.isEditorReadonly}).addCase(J.PU,(e,t)=>{e[Z(t)].sharedbConnected=t.payload.connected}).addCase(Y.A.toggleEditorAutorun,(e,t)=>{let a=Z(t);e[a].isEditorAutorun=!e[a].isEditorAutorun}).addCase(Y.A.updateSubmissionsTableFilters,(e,t)=>{e.grading.submissionsTableFilters=t.payload.filters}).addCase(Y.A.updateAllColsSortStates,(e,t)=>{e.grading.allColsSortStates=t.payload.sortStates}).addCase(Y.A.updateCurrentAssessmentId,(e,t)=>{e.assessment.currentAssessment=t.payload.assessmentId,e.assessment.currentQuestion=t.payload.questionId}).addCase(Y.A.updateCurrentSubmissionId,(e,t)=>{e.grading.currentSubmission=t.payload.submissionId,e.grading.currentQuestion=t.payload.questionId}).addCase(Y.A.updateHasUnsavedChanges,(e,t)=>{let a=Z(t);return{...e,[a]:{...e[a],hasUnsavedChanges:t.payload.hasUnsavedChanges}}}).addCase(Y.A.updateSublanguage,(e,t)=>{let{chapter:a,variant:s}=t.payload.sublang;e.playground.context.chapter=a,e.playground.context.variant=s}).addCase(Y.A.notifyProgramEvaluated,(e,t)=>{let a=e[Z(t)].debuggerContext;a.result=t.payload.result,a.lastDebuggerResult=t.payload.lastDebuggerResult,a.code=t.payload.code,a.context=(0,d.h4)(t.payload.context),a.workspaceLocation=t.payload.workspaceLocation}).addCase(Y.A.toggleUsingUpload,(e,t)=>{let{workspaceLocation:a}=t.payload;("playground"===a||"sicp"===a)&&(e[a].usingUpload=t.payload.usingUpload)}).addCase(Y.A.uploadFiles,(e,t)=>{let a=Z(t);("playground"===a||"sicp"===a)&&(e[a].files=t.payload.files)}).addCase(Y.A.updateLastDebuggerResult,(e,t)=>{e[Z(t)].lastDebuggerResult=t.payload.lastDebuggerResult}).addCase(J.UW,(e,t)=>{e[Z(t)].updateUserRoleCallback=t.payload.updateUserRoleCallback})}),Q=(0,l.vy)(p.pL,e=>{e.addCase(k.C9,(e,t)=>t.payload)});var K=a(54668),ee=a(46807);let et=(0,l.vy)(p.O9,e=>{e.addCase(k.je,()=>p.O9).addCase(ee.A.setGitHubOctokitObject,(e,t)=>{e.githubOctokitObject={octokit:t.payload}}).addCase(ee.A.setGitHubAccessToken,(e,t)=>{e.githubAccessToken=t.payload}).addCase(ee.A.setGoogleUser,(e,t)=>{e.googleUser=t.payload}).addCase(ee.A.setTokens,(e,t)=>({...e,...t.payload})).addCase(ee.A.setUser,(e,t)=>({...e,...t.payload})).addCase(ee.A.setCourseConfiguration,(e,t)=>({...e,...t.payload})).addCase(ee.A.setCourseRegistration,(e,t)=>({...e,...t.payload})).addCase(ee.A.setAssessmentConfigurations,(e,t)=>{e.assessmentConfigurations=t.payload}).addCase(ee.A.setAdminPanelCourseRegistrations,(e,t)=>{e.userCourseRegistrations=t.payload}).addCase(ee.A.updateAssessment,(e,t)=>{e.assessments[t.payload.id]=t.payload}).addCase(ee.A.updateAssessmentOverviews,(e,t)=>{e.assessmentOverviews=t.payload}).addCase(ee.A.updateTotalXp,(e,t)=>{e.xp=t.payload}).addCase(ee.A.updateGrading,(e,t)=>{e.gradings[t.payload.submissionId]=t.payload.grading}).addCase(ee.A.updateGradingOverviews,(e,t)=>{e.gradingOverviews=t.payload}).addCase(ee.A.updateNotifications,(e,t)=>{e.notifications=t.payload}).addCase(ee.A.updateStudents,(e,t)=>{e.students=t.payload}).addCase(ee.A.updateTeamFormationOverviews,(e,t)=>{e.teamFormationOverviews=t.payload}).addCase(ee.A.updateTeamFormationOverview,(e,t)=>{e.teamFormationOverview=t.payload}).addCase(K.A.remoteExecUpdateDevices,(e,t)=>{e.remoteExecutionDevices=t.payload}).addCase(K.A.remoteExecUpdateSession,(e,t)=>{e.remoteExecutionSession=t.payload}).addCase(ee.A.removeGitHubOctokitObjectAndAccessToken,(e,t)=>{e.githubOctokitObject={octokit:void 0},e.githubAccessToken=void 0})});var ea=a(71251);let es=(0,l.vy)(p.Ko,e=>{e.addCase(ea.A.setVscode,e=>({...e,isVscode:!0}))}),ei=(0,m.HY)({router:Q,achievement:f,leaderboard:E,dashboard:x,playground:j,session:(e=p.O9,t)=>e=et(e,t),stories:(e=p.Pu,t)=>e=((e=p.Pu,t)=>t.type===N.A.setAdminPanelStoriesUsers.type?{...e,storiesUsers:t.payload.users}:e)(e=L(e,t),t),workspaces:(e=p.Kn,t)=>{switch(Z(t)){case"sourcecast":{let a=z(e.sourcecast,t);if(a===e.sourcecast)break;return{...e,sourcecast:a}}case"sourcereel":{let a=B(e.sourcereel,t);if(a===e.sourcereel)break;return{...e,sourcereel:a}}}return q(e,t)},featureFlags:g.Qj,fileSystem:D,sideContent:(e=p.HR,t)=>{if(!t.payload?.workspaceLocation)return e;let[a,s]=(0,U.g$)(t.payload.workspaceLocation),i="stories"===a?e.stories[s]:e[a];switch(t.type){case O.k1.type:return"stories"===a?{...e,stories:{...e.stories,[s]:{...e.stories[s],height:t.payload.height}}}:{...e,[a]:{...e[a],height:t.payload.height}};case O.cF.type:if(t.payload.id!==i.selectedTab)return"stories"===a?{...e,stories:{...e.stories,[s]:{...e.stories[s],alerts:[...e.stories[s].alerts,t.payload.id]}}}:{...e,[a]:{...e[a],alerts:[...e[a].alerts,t.payload.id]}};return e;case O.tn.type:return"stories"===a?{...e,stories:{...e.stories,[s]:{...e.stories[s],alerts:e.stories[s].alerts.filter(e=>e!==t.payload.id)}}}:{...e,[a]:{...e[a],alerts:e[a].alerts.filter(e=>e!==t.payload.id)}};case O.SS.type:return"stories"===a?{...e,stories:{...e.stories,[s]:p.sQ}}:{...e,[a]:p.sQ};case O.wH.type:{let n=(0,U.G0)(t.payload.debuggerContext),r=n.map(U.vU).filter(e=>e!==i.selectedTab);return"stories"===a?{...e,stories:{...e.stories,[s]:{...e.stories[s],alerts:r,dynamicTabs:n}}}:{...e,[a]:{...e[a],alerts:r,dynamicTabs:n}}}case O.kz.type:return"stories"===a?{...e,stories:{...e.stories,[s]:{...e.stories[s],alerts:e.stories[s].alerts.filter(e=>e!==t.payload.newId),selectedTab:t.payload.newId}}}:{...e,[a]:{...e[a],alerts:e[a].alerts.filter(e=>e!==t.payload.newId),selectedTab:t.payload.newId}};default:return e}},vscode:(e=p.Ko,t)=>e=es(e,t),languageDirectory:T,pluginDirectory:C});var en=a(9208);a(51085);var er=a(50988),eo=a(25492),el=a(31230),ed=a(37852),ec=a(36896);let eu=async(...[e,t,a])=>await (0,ec.Em)("",t,a,`${$.A.storiesBackendUrl}${e}`),eh=()=>{let e=aX.getState().stories.groupId;if(e)return`${e}`;throw(0,ed.JB)("Stories not available!",1e3),Error("Stories not available")},ep=async e=>{let t=await eu(`/user?course=${(0,el.xf)()}`,"GET",{...e});return t?await t.json():null},em=async(e,t,a)=>{let s=await eu(`/groups/${eh()}/users/batch`,"POST",{body:{users:t.map(e=>({...e,provider:a}))},...e});return s?((0,ed.uT)("Users added!"),s):((0,ed.JB)("Failed to add users"),null)},eg=async e=>{let t=await eu(`/groups/${eh()}/stories`,"GET",{...e});return t?await t.json():null},ey=async(e,t)=>{let a=await eu(`/groups/${eh()}/stories/${t}`,"GET",{...e});return a?await a.json():null},ef=async(e,t,a,s,i)=>{let n=await eu(`/groups/${eh()}/stories`,"POST",{body:{authorId:t,title:a,content:s,pinOrder:i},...e});return n?((0,ed.uT)("Story created"),await n.json()):((0,ed.JB)("Failed to create story"),null)},eb=async(e,t,a,s,i)=>{let n=await eu(`/groups/${eh()}/stories/${t}`,"PUT",{body:{title:a,content:s,pinOrder:i},...e});return n?((0,ed.uT)("Story saved"),await n.json()):((0,ed.JB)("Failed to save story"),null)},ex=async(e,t)=>{let a=await eu(`/groups/${eh()}/stories/${t}`,"DELETE",{...e});return a?await a.json():null},ev=async e=>{let t=await eu(`/groups/${eh()}/users`,"GET",{...e});return t?await t.json():null},eA=async(e,t,a)=>{let s=await eu(`/groups/${eh()}/users/${t}/role`,"PUT",{...e,body:{role:a}});return s?await s.json():((0,ed.JB)("Failed to update stories user's role"),null)},eT=async(e,t)=>{let a=await eu(`/groups/${eh()}/users/${t}`,"DELETE",{...e});return a?await a.json():((0,ed.JB)("Failed to delete stories user"),null)};var ew=a(58683),eS=a(17526),eC=a(98227),eI=a(84100);function eE(){return(0,en.Lt)(e=>({accessToken:e.session.accessToken,refreshToken:e.session.refreshToken}))}function*e_(e){let t=yield(0,en.Lt)(e=>e.router);return t?.navigate(e)}let ej=(0,ew.zA)({[ee.A.fetchAuth.type]:function*(e){let{code:t,providerId:a}=e.payload,s=yield(0,en.Lt)(e=>e.vscode.isVscode),i=a||((0,eC.xW)()||[null])[0];if(!i)return yield(0,en.T1)(ed.JB,"Could not log in; invalid provider or no providers configured."),yield e_("/");let n=(0,eC.fp)(i),r=(0,eC.K2)(i,s),o=yield(0,en.T1)(el.Lf,t,i,n,r);if(!o)return yield e_("/");yield(0,en.yJ)(eS.o.setTokens(o)),yield(0,en.yJ)(eS.o.fetchUserAndCourse())},[ee.A.handleSamlRedirect.type]:function*(e){let{jwtCookie:t}=e.payload,a=u().mapKeys(JSON.parse(t),(e,t)=>u().camelCase(t));yield(0,en.yJ)(eS.o.setTokens(a)),yield(0,en.yJ)(eS.o.fetchUserAndCourse())},[ee.A.fetchUserAndCourse.type]:function*(e){let t=yield eE(),{user:a,courseRegistration:s,courseConfiguration:i,assessmentConfigurations:n}=yield(0,en.T1)(el.wz,t);a&&(yield(0,en.yJ)(eS.o.setUser(a)),null===i&&a.courses.length>0&&(yield(0,en.yJ)(eS.o.updateLatestViewedCourse(a.courses[0].courseId))),s&&i&&n&&(yield(0,en.yJ)(eS.o.setCourseRegistration(s)),yield(0,en.yJ)(eS.o.setCourseConfiguration(i)),yield(0,en.yJ)(eS.o.setAssessmentConfigurations(n)),i.enableStories?yield(0,en.yJ)(eS.o.getStoriesUser()):yield(0,en.yJ)(eS.o.clearStoriesUserAndGroup())))},[ee.A.fetchCourseConfig.type]:function*(){let e=yield eE(),{config:t}=yield(0,en.T1)(el.IB,e);t&&(yield(0,en.yJ)(eS.o.setCourseConfiguration(t)),t.enableStories?yield(0,en.yJ)(eS.o.getStoriesUser()):yield(0,en.yJ)(eS.o.clearStoriesUserAndGroup()))},[ee.A.fetchAssessmentOverviews.type]:function*(){let e=yield eE(),t=yield(0,en.T1)(el.Dc,e);t&&(yield(0,en.yJ)(eS.o.updateAssessmentOverviews(t)))},[ee.A.fetchTotalXp.type]:function*(){let e=yield eE(),t=yield(0,en.T1)(el.Bd,e);t&&(yield(0,en.yJ)(eS.o.updateTotalXp(t.totalXp)))},[ee.A.fetchTotalXpAdmin.type]:function*(e){let t=yield eE(),a=e.payload,s=yield(0,en.T1)(el.Bd,t,a);s&&(yield(0,en.yJ)(eS.o.updateTotalXp(s.totalXp)))},[ee.A.fetchAssessment.type]:function*(e){let t=yield eE(),{assessmentId:a,assessmentPassword:s}=e.payload,i=yield(0,en.T1)(el.BY,a,t,void 0,s);i&&(yield(0,en.yJ)(eS.o.updateAssessment(i)))},[ee.A.fetchAssessmentAdmin.type]:function*(e){let t=yield eE(),{assessmentId:a,courseRegId:s}=e.payload,i=yield(0,en.T1)(el.BY,a,t,s);i&&(yield(0,en.yJ)(eS.o.updateAssessment(i)))},[ee.A.submitAnswer.type]:function*(e){let t=yield eE(),a=e.payload.id,s=e.payload.answer,i=yield(0,en.T1)(el.V_,a,s,t);if(!i||!i.ok)return yield(0,el.gQ)(i);yield(0,en.T1)(ed.uT,"Saved!",1e3);let n=yield(0,en.Lt)(e=>e.workspaces.assessment.currentAssessment),r=yield(0,en.Lt)(e=>e.session.assessments[n]),o=r.questions.slice().map(e=>e.id===a?{...e,answer:s}:e),l={...r,questions:o};return yield(0,en.yJ)(eS.o.updateAssessment(l)),yield(0,en.yJ)(eS.o.updateHasUnsavedChanges("assessment",!1))},[ee.A.checkAnswerLastModifiedAt.type]:function*(e){let t=yield eE(),a=e.payload.id,s=e.payload.lastModifiedAt;(0,e.payload.saveAnswer)((yield(0,en.T1)(el.tR,a,s,t)))},[ee.A.submitAssessment.type]:function*(e){let t=yield eE(),a=e.payload,s=yield(0,en.T1)(el.rj,a,t);if(!s||!s.ok)return yield(0,el.gQ)(s);yield(0,en.T1)(ed.uT,"Submitted!",2e3);let i=(yield(0,en.Lt)(e=>e.session.assessmentOverviews)).map(e=>e.id===a?{...e,status:"submitted"}:e);return yield(0,en.yJ)(eS.o.updateAssessmentOverviews(i))},[ee.A.fetchGradingOverviews.type]:function*(e){let t=yield eE();if((yield(0,en.Lt)(e=>e.session.role))===p.Xh.Student)return;let{filterToGroup:a,publishedFilter:s,pageParams:i,filterParams:n,allColsSortStates:r}=e.payload,o={sortBy:r.sortBy,sortDirection:""};Object.entries(r.currentState).forEach(([e,t])=>{r.sortBy===e&&""!==e&&("sort"!==t?o.sortDirection=t:(o.sortBy="",o.sortDirection=""))});let l=yield(0,en.T1)(el.tf,t,a,s,i,n,o);l&&(yield(0,en.yJ)(eS.o.updateGradingOverviews(l)))},[ee.A.fetchTeamFormationOverview.type]:function*(e){let t=yield eE(),{assessmentId:a}=e.payload,s=yield(0,en.T1)(el.KZ,a,t);s&&(yield(0,en.yJ)(eS.o.updateTeamFormationOverview(s)))},[ee.A.fetchTeamFormationOverviews.type]:function*(){let e=yield eE();if((yield(0,en.Lt)(e=>e.session.role))===p.Xh.Student)return;let t=yield(0,en.T1)(el.rm,e);t&&(yield(0,en.yJ)(eS.o.updateTeamFormationOverviews(t)))},[ee.A.fetchStudents.type]:function*(){let e=yield eE();if((yield(0,en.Lt)(e=>e.session.role))===p.Xh.Student)return;let t=yield(0,en.T1)(el.nm,e);t&&(yield(0,en.yJ)(eS.o.updateStudents(t)))},[ee.A.createTeam.type]:function*(e){let t=yield eE(),{assessment:a,teams:s}=e.payload,i=yield(0,en.T1)(el.$S,a.id,s,t);if(!i||!i.ok)return yield(0,el.gQ)(i);let n=yield(0,en.T1)(el.rm,t);if(n&&(yield(0,en.yJ)(eS.o.updateTeamFormationOverviews(n))),yield(0,en.T1)(ed.uT,"Team created successfully",1e3),i&&409===i.status)return yield(0,en.T1)(ed.JB,i.statusText)},[ee.A.bulkUploadTeam.type]:function*(e){let t=yield eE(),{assessment:a,file:s,students:i}=e.payload,n=yield(0,en.T1)(el.iW,a.id,s,i,t);if(!n||!n.ok)return yield(0,el.gQ)(n);let r=yield(0,en.T1)(el.rm,t);yield(0,en.T1)(ed.uT,"Team created successfully",1e3),r&&(yield(0,en.yJ)(eS.o.updateTeamFormationOverviews(r)))},[ee.A.updateTeam.type]:function*(e){let t=yield eE(),{teamId:a,assessment:s,teams:i}=e.payload,n=yield(0,en.T1)(el.eq,s.id,a,i,t);if(!n||!n.ok)return yield(0,el.gQ)(n);let r=yield(0,en.T1)(el.rm,t);yield(0,en.T1)(ed.uT,"Team updated successfully",1e3),r&&(yield(0,en.yJ)(eS.o.updateTeamFormationOverviews(r)))},[ee.A.deleteTeam.type]:function*(e){let t=yield eE(),{teamId:a}=e.payload,s=yield(0,en.T1)(el.To,a,t);if(!s||!s.ok)return yield(0,el.gQ)(s);let i=yield(0,en.T1)(el.rm,t);yield(0,en.T1)(ed.uT,"Team deleted successfully",1e3),i&&(yield(0,en.yJ)(eS.o.updateTeamFormationOverviews(i)))},[ee.A.fetchGrading.type]:function*(e){let t=yield eE(),a=e.payload,s=yield(0,en.T1)(el.pG,a,t);s&&(yield(0,en.yJ)(eS.o.updateGrading(a,s)))},[ee.A.unsubmitSubmission.type]:function*(e){let t=yield eE(),{submissionId:a}=e.payload,s=yield(0,el.wh)(a,t);if(!s||!s.ok)return yield(0,el.gQ)(s);let i=(yield(0,en.Lt)(e=>e.session.gradingOverviews?.data||[])).map(e=>e.submissionId===a?{...e,progress:"attempted"}:e),n=yield(0,en.Lt)(e=>e.session.gradingOverviews?.count);yield(0,en.T1)(ed.uT,"Unsubmit successful",1e3),yield(0,en.yJ)(eS.o.updateGradingOverviews({count:n,data:i}))},[ee.A.publishGrading.type]:function*(e){let t=yield eE(),{submissionId:a}=e.payload,s=yield(0,el.ms)(a,t);if(!s||!s.ok)return yield(0,el.gQ)(s);let i=(yield(0,en.Lt)(e=>e.session.gradingOverviews?.data||[])).map(e=>e.submissionId===a?{...e,progress:"published"}:e),n=yield(0,en.Lt)(e=>e.session.gradingOverviews?.count);yield(0,en.T1)(ed.uT,"Publish grading successful",1e3),yield(0,en.yJ)(eS.o.updateGradingOverviews({count:n,data:i}))},[ee.A.unpublishGrading.type]:function*(e){let t=yield eE(),{submissionId:a}=e.payload,s=yield(0,el.rW)(a,t);if(!s||!s.ok)return yield(0,el.gQ)(s);let i=(yield(0,en.Lt)(e=>e.session.gradingOverviews?.data||[])).map(e=>e.submissionId===a?{...e,progress:"graded"}:e),n=yield(0,en.Lt)(e=>e.session.gradingOverviews?.count);yield(0,en.T1)(ed.uT,"Unpublish grading successful",1e3),yield(0,en.yJ)(eS.o.updateGradingOverviews({count:n,data:i}))},[ee.A.submitGrading.type]:ek,[ee.A.submitGradingAndContinue.type]:function*(e){yield*ek(e);let{submissionId:t}=e.payload,[a,s]=yield(0,en.Lt)(e=>[e.workspaces.grading.currentQuestion,e.session.courseId]);yield e_(`/courses/${s}/grading/${t}/${(a||0)+1}`)}});function*ek(e){if((yield(0,en.Lt)(e=>e.session.role))===p.Xh.Student)return yield(0,en.T1)(ed.JB,"Only staff can submit answers.");let{submissionId:t,questionId:a,xpAdjustment:s,comments:i}=e.payload,n=yield eE(),r=yield(0,el.JQ)(t,a,s,n,i);if(!r||!r.ok)return yield(0,el.gQ)(r);yield(0,en.T1)(ed.uT,"Submitted!",1e3);let o=yield(0,en.Lt)(e=>e.session.gradings[t]),l=o.answers.slice().map(e=>(e.question.id===a&&(e.grade={xpAdjustment:s,xp:e.grade.xp,comments:i,gradedAt:new Date().toISOString()}),e));yield(0,en.yJ)(eS.o.updateGrading(t,{answers:l,assessment:o.assessment,enable_llm_grading:!1}))}let eN=(0,ew.zA)({[ee.A.reautogradeSubmission.type]:function*(e){let t=e.payload,a=yield eE(),s=yield(0,en.T1)(el.Gc,t,a);yield(0,en.T1)(eR,s)},[ee.A.reautogradeAnswer.type]:function*(e){let{submissionId:t,questionId:a}=e.payload,s=yield eE(),i=yield(0,en.T1)(el.Cd,t,a,s);yield(0,en.T1)(eR,i)},[ee.A.fetchNotifications.type]:function*(e){let t=yield eE(),a=yield(0,en.T1)(el.Tr,t);yield(0,en.yJ)(eS.o.updateNotifications(a))},[ee.A.acknowledgeNotifications.type]:function*(e){let t=yield eE(),a=e.payload.withFilter,s=yield(0,en.Lt)(e=>e.session.notifications),i=s;if(a&&(i=a(s)),0===i.length)return;let n=i.map(e=>e.id),r=s.filter(e=>!n.includes(e.id));yield(0,en.yJ)(eS.o.updateNotifications(r));let o=yield(0,en.T1)(el.p3,t,n);if(!o||!o.ok)return yield(0,el.gQ)(o)},[H.A.deleteSourcecastEntry.type]:function*(e){if((yield(0,en.Lt)(e=>e.session.role))===p.Xh.Student)return yield(0,en.T1)(ed.JB,"Only staff can delete sourcecasts.");let t=yield eE(),{id:a}=e.payload,s=yield(0,el.aM)(a,t);if(!s||!s.ok)return yield(0,el.gQ)(s);let i=yield(0,en.T1)(el.Li,t);i&&(yield(0,en.yJ)(eS.o.updateSourcecastIndex(i,e.payload.workspaceLocation))),yield(0,en.T1)(ed.uT,"Deleted successfully!",1e3)},[G.Ay.fetchSourcecastIndex.type]:function*(e){let t=yield eE(),a=yield(0,en.T1)(el.Li,t);a&&(yield(0,en.yJ)(eS.o.updateSourcecastIndex(a,e.payload.workspaceLocation)))},[F.Ay.saveSourcecastData.type]:function*(e){let[t,a]=yield(0,en.Lt)(e=>[e.session.role,e.session.courseId]);if(t===p.Xh.Student)return yield(0,en.T1)(ed.JB,"Only staff can save sourcecasts.");let{title:s,description:i,uid:n,audio:r,playbackData:o}=e.payload,l=yield eE(),d=yield(0,el.pE)(s,i,n,r,o,l);if(!d||!d.ok)return yield(0,el.gQ)(d);yield(0,en.T1)(ed.uT,"Saved successfully!",1e3),yield e_(`/courses/${a}/sourcecast`)},[Y.A.changeSublanguage.type]:function*(e){let t=yield eE(),{sublang:a}=e.payload,s=yield(0,en.T1)(el.mw,t,{sourceChapter:a.chapter,sourceVariant:a.variant});if(!s||!s.ok)return yield(0,el.gQ)(s);yield(0,en.yJ)(eS.o.setCourseConfiguration({sourceChapter:a.chapter,sourceVariant:a.variant})),yield(0,en.T1)(ed.uT,"Updated successfully!",1e3)},[ee.A.updateLatestViewedCourse.type]:function*(e){let t=yield eE(),{courseId:a}=e.payload,s=yield(0,en.T1)(el.KK,t,a);if(!s||!s.ok)return yield(0,el.gQ)(s);let{courseRegistration:i,courseConfiguration:n,assessmentConfigurations:r}=yield(0,en.T1)(el.nn,t);if(!i||!n||!r)return yield(0,en.T1)(ed.JB,"Failed to load course!"),yield e_("/welcome");yield(0,en.yJ)(eS.o.setCourseConfiguration(n)),yield(0,en.yJ)(eS.o.setAssessmentConfigurations(r)),yield(0,en.yJ)(eS.o.setCourseRegistration(i)),n.enableStories?yield(0,en.yJ)(eS.o.getStoriesUser()):yield(0,en.yJ)(eS.o.clearStoriesUserAndGroup()),yield(0,en.T1)(ed.uT,`Switched to ${n.courseName}!`,5e3)},[ee.A.updateCourseConfig.type]:function*(e){let t=yield eE(),a=e.payload,s=yield(0,en.T1)(el.mw,t,a);if(!s||!s.ok)return yield(0,el.gQ)(s);a.enableStories?yield(0,en.yJ)(eS.o.getStoriesUser()):yield(0,en.yJ)(eS.o.clearStoriesUserAndGroup()),yield(0,en.yJ)(eS.o.setCourseConfiguration(a)),yield(0,en.T1)(ed.uT,"Updated successfully!",1e3)},[ee.A.fetchAssessmentConfigs.type]:function*(){let e=yield eE(),t=yield(0,en.T1)(el.YF,e);t&&(yield(0,en.yJ)(eS.o.setAssessmentConfigurations(t)))},[ee.A.updateAssessmentConfigs.type]:function*(e){let t=yield eE(),a=e.payload,s=yield(0,en.T1)(el.pt,t,a);if(!s||!s.ok)return yield(0,el.gQ)(s);let i=yield(0,en.T1)(el.YF,t);i&&(yield(0,en.yJ)(eS.o.setAssessmentConfigurations(i))),yield(0,en.T1)(ed.uT,"Updated successfully!",1e3)},[ee.A.deleteAssessmentConfig.type]:function*(e){let t=yield eE(),a=e.payload,s=yield(0,en.T1)(el.RM,t,a);if(!s||!s.ok)return yield(0,el.gQ)(s)},[ee.A.fetchAdminPanelCourseRegistrations.type]:function*(e){let t=yield eE(),a=yield(0,en.T1)(el.f3,t);a&&(yield(0,en.yJ)(eS.o.setAdminPanelCourseRegistrations(a)))},[er.A.createCourse.type]:function*(e){let t=yield eE(),a=e.payload,s=yield(0,en.T1)(el.mt,t,a);if(!s||!s.ok)return yield(0,el.gQ)(s);let{user:i,courseRegistration:n,courseConfiguration:r}=yield(0,en.T1)(el.wz,t);if(!i||!n||!r)return yield(0,ed.JB)("An error occurred. Please try again.");yield(0,en.yJ)(eS.o.setUser(i)),yield(0,en.yJ)(eS.o.setCourseRegistration({role:p.Xh.Student})),r.enableStories?yield(0,en.yJ)(eS.o.getStoriesUser()):yield(0,en.yJ)(eS.o.clearStoriesUserAndGroup());let o=yield(0,en.T1)(el.pt,t,[{type:"Missions",assessmentConfigId:-1,isManuallyGraded:!0,isGradingAutoPublished:!1,displayInDashboard:!0,isMinigame:!1,hoursBeforeEarlyXpDecay:0,hasTokenCounter:!1,hasVotingFeatures:!1,earlySubmissionXp:0}],n.courseId);if(!o||!o.ok)return yield(0,el.gQ)(s);yield(0,en.T1)(ed.uT,"Successfully created your new course!"),yield e_(`/courses/${n.courseId}`)},[er.A.addNewUsersToCourse.type]:function*(e){let t=yield eE(),{users:a,provider:s}=e.payload,i=yield(0,en.T1)(el.Gu,t,a,s);if(!i||!i.ok)return yield(0,el.gQ)(i);yield(0,en.yJ)(eS.o.fetchAdminPanelCourseRegistrations()),yield(0,en.T1)(ed.uT,"Users added!")},[er.A.addNewStoriesUsersToCourse.type]:function*(e){let t=yield eE(),{users:a,provider:s}=e.payload;yield(0,en.T1)(em,t,a,s)},[ee.A.updateCourseResearchAgreement.type]:function*(e){let t=yield eE(),{agreedToResearch:a}=e.payload,s=yield(0,en.T1)(el.Mo,t,a);if(!s||!s.ok)return yield(0,el.gQ)(s);yield(0,en.yJ)(eS.o.setCourseRegistration({agreedToResearch:a})),yield(0,en.T1)(ed.uT,"Research preference saved!")},[ee.A.updateUserRole.type]:function*(e){let t=yield eE(),{courseRegId:a,role:s}=e.payload,i=yield(0,en.T1)(el.$B,t,a,s);if(!i||!i.ok)return yield(0,el.gQ)(i);yield(0,en.yJ)(eS.o.fetchAdminPanelCourseRegistrations()),yield(0,en.T1)(ed.uT,"Role updated!")},[ee.A.deleteUserCourseRegistration.type]:function*(e){let t=yield eE(),{courseRegId:a}=e.payload,s=yield(0,en.T1)(el.ul,t,a);if(!s||!s.ok)return yield(0,el.gQ)(s);yield(0,en.yJ)(eS.o.fetchAdminPanelCourseRegistrations()),yield(0,en.T1)(ed.uT,"User deleted!")}});function*eP(){yield(0,eI.ok)(b.Ay.fetchGroupGradingSummary.type,function*(e){let t=yield eE(),a=yield(0,en.T1)(el.xt,t);a&&(yield(0,en.yJ)(eS.o.updateGroupGradingSummary(a)))}),yield(0,eI.ok)(eo.A.changeDateAssessment.type,function*(e){let t=yield eE(),a=e.payload.id,s=e.payload.closeAt,i=e.payload.openAt,n=yield(0,el.G3)(a,{openAt:i,closeAt:s},t);if(!n||!n.ok)return yield(0,el.gQ)(n);yield(0,en.yJ)(eS.o.fetchAssessmentOverviews()),yield(0,en.T1)(ed.uT,"Updated successfully!",1e3)}),yield(0,eI.ok)(eo.A.changeTeamSizeAssessment.type,function*(e){let t=yield eE(),a=e.payload.id,s=e.payload.maxTeamSize,i=yield(0,el.G3)(a,{maxTeamSize:s},t);if(!i||!i.ok)return yield(0,el.gQ)(i);yield(0,en.yJ)(eS.o.fetchAssessmentOverviews()),yield(0,en.T1)(ed.uT,"Team size updated successfully!",1e3)}),yield(0,eI.ok)(eo.A.deleteAssessment.type,function*(e){let t=yield eE(),a=e.payload,s=yield(0,el.aG)(a,t);if(!s||!s.ok)return yield(0,el.gQ)(s);yield(0,en.yJ)(eS.o.fetchAssessmentOverviews()),yield(0,en.T1)(ed.uT,"Deleted successfully!",1e3)}),yield(0,eI.ok)(eo.A.publishAssessment.type,function*(e){let t=yield eE(),a=e.payload.id,s=e.payload.togglePublishAssessmentTo,i=yield(0,el.G3)(a,{isPublished:s},t);if(!i||!i.ok)return yield(0,el.gQ)(i);yield(0,en.yJ)(eS.o.fetchAssessmentOverviews()),s?yield(0,en.T1)(ed.uT,"Published successfully!",1e3):yield(0,en.T1)(ed.uT,"Unpublished successfully!",1e3)}),yield(0,eI.ok)(eo.A.uploadAssessment.type,function*(e){let t=yield eE(),{file:a,forceUpdate:s,assessmentConfigId:i}=e.payload,n=yield(0,el.Yq)(a,t,s,i);if(!n||!n.ok)return yield(0,el.gQ)(n);let r=yield n.text();"OK"===r?yield(0,en.T1)(ed.uT,"Uploaded successfully!",2e3):"Force Update OK"===r&&(yield(0,en.T1)(ed.uT,"Assessment force updated successfully!",2e3)),yield(0,en.yJ)(eS.o.fetchAssessmentOverviews())}),yield(0,eI.ok)(eo.A.configureAssessment.type,function*(e){let t=yield eE(),a=e.payload.id,s=e.payload.hasVotingFeatures,i=e.payload.hasTokenCounter,n=yield(0,el.G3)(a,{hasVotingFeatures:s,hasTokenCounter:i},t);if(!n||!n.ok)return yield(0,el.gQ)(n);yield(0,en.yJ)(eS.o.fetchAssessmentOverviews()),yield(0,en.T1)(ed.uT,"Updated successfully!",1e3)}),yield(0,eI.ok)(eo.A.assignEntriesForVoting.type,function*(e){let t=yield eE(),a=e.payload.id,s=yield(0,el.G3)(a,{assignEntriesForVoting:!0},t);if(!s||!s.ok)return yield(0,el.gQ)(s);yield(0,en.yJ)(eS.o.fetchAssessmentOverviews()),yield(0,en.T1)(ed.uT,"Updated successfully!",1e3)}),yield(0,eI.ok)(eo.A.publishGradingAll.type,function*(e){let t=yield eE(),a=e.payload,s=yield(0,el.VZ)(a,t);if(!s||!s.ok)return yield(0,el.gQ)(s);yield(0,en.yJ)(eS.o.fetchAssessmentOverviews()),yield(0,en.T1)(ed.uT,"Published all graded submissons successfully!",1e3)}),yield(0,eI.ok)(eo.A.unpublishGradingAll.type,function*(e){let t=yield eE(),a=e.payload,s=yield(0,el.uH)(a,t);if(!s||!s.ok)return yield(0,el.gQ)(s);yield(0,en.yJ)(eS.o.fetchAssessmentOverviews()),yield(0,en.T1)(ed.uT,"Unpublished all submissons successfully!",1e3)})}function*eR(e){return e&&e.ok?yield(0,en.T1)(ed.uT,"Autograde job queued successfully."):e&&400===e.status?yield(0,en.T1)(ed.JB,"Cannot reautograde non-submitted submission."):yield(0,en.T1)(ed.JB,"Failed to queue autograde job.")}let eL=function*(){yield(0,en.Q7)([(0,en.Zy)(ej),(0,en.Zy)(eN),(0,en.Zy)(eP)])};var eM=a(38786),eD=a(75580);let eO=[[{assessmentConfigId:1,type:"Missions",isManuallyGraded:!0,isGradingAutoPublished:!1,displayInDashboard:!0,isMinigame:!1,hoursBeforeEarlyXpDecay:48,hasTokenCounter:!1,hasVotingFeatures:!1,earlySubmissionXp:200},{assessmentConfigId:2,type:"Quests",isManuallyGraded:!0,isGradingAutoPublished:!1,displayInDashboard:!0,isMinigame:!1,hoursBeforeEarlyXpDecay:48,hasTokenCounter:!1,hasVotingFeatures:!1,earlySubmissionXp:200},{assessmentConfigId:3,type:"Paths",isManuallyGraded:!1,isGradingAutoPublished:!0,displayInDashboard:!0,isMinigame:!1,hoursBeforeEarlyXpDecay:48,hasTokenCounter:!1,hasVotingFeatures:!1,earlySubmissionXp:200},{assessmentConfigId:4,type:"Contests",isManuallyGraded:!0,isGradingAutoPublished:!1,displayInDashboard:!0,isMinigame:!1,hoursBeforeEarlyXpDecay:48,hasTokenCounter:!1,hasVotingFeatures:!0,earlySubmissionXp:200},{assessmentConfigId:5,type:"Others",isManuallyGraded:!0,isGradingAutoPublished:!1,displayInDashboard:!0,isMinigame:!1,hoursBeforeEarlyXpDecay:48,hasTokenCounter:!1,hasVotingFeatures:!1,earlySubmissionXp:200}],[{assessmentConfigId:1,type:"Mission Impossible",isManuallyGraded:!0,isGradingAutoPublished:!1,displayInDashboard:!0,isMinigame:!1,hoursBeforeEarlyXpDecay:48,hasTokenCounter:!1,hasVotingFeatures:!1,earlySubmissionXp:200},{assessmentConfigId:2,type:"Data Structures",isManuallyGraded:!0,isGradingAutoPublished:!1,displayInDashboard:!0,isMinigame:!1,hoursBeforeEarlyXpDecay:48,hasTokenCounter:!1,hasVotingFeatures:!1,earlySubmissionXp:200},{assessmentConfigId:3,type:"Algorithm Frenzy",isManuallyGraded:!0,isGradingAutoPublished:!1,displayInDashboard:!0,isMinigame:!1,hoursBeforeEarlyXpDecay:48,hasTokenCounter:!1,hasVotingFeatures:!1,earlySubmissionXp:200}]],eU=[{type:"Missions",isManuallyGraded:!0,closeAt:"2048-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/300/",id:1,isPublished:!1,maxXp:1e3,earlySubmissionXp:0,openAt:"2038-06-18T05:24:26.026Z",title:"An Odessey to Runes (Duplicate)",shortSummary:"This is a test for the UI of the unopened assessment overview. It links to the mock Mission 0",status:"not_attempted",story:"mission-1",xp:0,isGradingPublished:!1,maxTeamSize:1,hasVotingFeatures:!1,hoursBeforeEarlyXpDecay:0},{type:"Missions",isManuallyGraded:!0,closeAt:"2048-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/300/",id:2,isPublished:!1,maxXp:1e3,earlySubmissionXp:0,openAt:"2018-06-18T05:24:26.026Z",title:"An Odessey to Runes",shortSummary:`
  *Lorem ipsum* dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
  incididunt ut labore et dolore magna aliqua.
  
  \`\`\`
  const a = 5;
  \`\`\`
  
  Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium
  _doloremque laudantium_, totam rem aperiam, eaque ipsa quae ab illo inventore
  [veritatis et quasi architecto](google.com) beatae vitae dicta sunt
  \`explicabo\`.
  
  `,status:"attempted",story:"mission-1",xp:1,isGradingPublished:!1,maxTeamSize:4,hasVotingFeatures:!1,hoursBeforeEarlyXpDecay:0},{type:"Missions",isManuallyGraded:!0,isPublished:!1,closeAt:"2048-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/?text=World&font=lobster",id:3,maxXp:1e3,earlySubmissionXp:0,openAt:"2018-07-18T05:24:26.026Z",title:"The Secret to Streams",shortSummary:"Once upon a time, Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin nec vulputate sapien. Fusce vel lacus fermentum, efficitur ipsum.",status:"attempting",story:"mission-2",xp:2,isGradingPublished:!1,maxTeamSize:1,hasVotingFeatures:!1,hoursBeforeEarlyXpDecay:0},{type:"Quests",isManuallyGraded:!0,isPublished:!1,closeAt:"2048-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/?text=Hello",id:4,maxXp:1e3,earlySubmissionXp:0,openAt:"2018-07-18T05:24:26.026Z",title:"A sample Sidequest",shortSummary:"Once upon a time, Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin nec vulputate sapien. Fusce vel lacus fermentum, efficitur ipsum.",status:"not_attempted",story:"sidequest-2.1",xp:3,isGradingPublished:!1,maxTeamSize:2,hasVotingFeatures:!1,hoursBeforeEarlyXpDecay:0},{type:"Paths",isManuallyGraded:!0,isPublished:!1,closeAt:"2069-04-20T01:23:45.111Z",coverImage:"https://fakeimg.pl/700x400/417678,64/?text=%E3%83%91%E3%82%B9&font=noto",id:5,maxXp:200,earlySubmissionXp:0,openAt:"2018-01-01T00:00:00.000Z",title:"Basic logic gates",shortSummary:"This mock path serves as a demonstration of the support provided for mock programming path functionality.",status:"not_attempted",story:null,xp:0,isGradingPublished:!1,maxTeamSize:2,hasVotingFeatures:!1,hoursBeforeEarlyXpDecay:0},{type:"Others",isManuallyGraded:!1,isPublished:!1,closeAt:"2048-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/?text=Hello",id:6,maxXp:1e3,earlySubmissionXp:0,openAt:"2018-07-18T05:24:26.026Z",title:"A sample Practical",shortSummary:"Once upon a time, Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin nec vulputate sapien. Fusce vel lacus fermentum, efficitur ipsum.",status:"not_attempted",story:"sidequest-2.1",xp:3,private:!0,maxTeamSize:1,isGradingPublished:!1,hasVotingFeatures:!1,hoursBeforeEarlyXpDecay:0},{type:"Missions",isManuallyGraded:!0,isPublished:!1,closeAt:"2008-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/ff0000/000",id:7,maxXp:1e3,earlySubmissionXp:0,openAt:"2007-07-18T05:24:26.026Z",title:"A closed Mission",shortSummary:"This is a test for the grading status tooltip when the assessment is partially graded (undergoing manual grading). It should render as an orange clock.",status:"submitted",story:"mission-3",xp:800,isGradingPublished:!1,maxTeamSize:1,hasVotingFeatures:!1,hoursBeforeEarlyXpDecay:0},{type:"Quests",isManuallyGraded:!0,isPublished:!1,closeAt:"2008-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/ff0000,128/000,255",id:8,maxXp:1e3,earlySubmissionXp:0,openAt:"2007-07-18T05:24:26.026Z",title:"Closed (not graded) Sidequest",shortSummary:"This is a test for the grading status tooltip when the assessment is not published. It should render as a yellow waiting clock.",status:"submitted",story:null,xp:500,isGradingPublished:!1,maxTeamSize:1,hasVotingFeatures:!1,hoursBeforeEarlyXpDecay:0},{type:"Quests",isManuallyGraded:!0,isPublished:!0,closeAt:"2008-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/ff0000,128/000,255",id:9,maxXp:500,earlySubmissionXp:0,openAt:"2007-07-18T05:24:26.026Z",title:"Closed (fully graded) Sidequest",shortSummary:`This is a test for the grading status tooltip when a manually graded assessment is fully graded but not published.
       It should still render as a yellow clock. This sidequest links to the mock Sidequest 4.`,status:"submitted",story:null,xp:150,isGradingPublished:!1,maxTeamSize:1,hasVotingFeatures:!1,hoursBeforeEarlyXpDecay:0},{type:"Paths",isManuallyGraded:!1,isPublished:!0,closeAt:"2008-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/ff0000/000",id:10,maxXp:0,earlySubmissionXp:0,openAt:"2007-07-18T05:24:26.026Z",title:"Ungraded assessment",shortSummary:"This is a test for the grading status tooltip when the assessment does not require manual grading (e.g. paths and contests) but is unpublished. It should still render as a yellow clock. This sidequest links to the mock Sidequest 4.",status:"submitted",story:null,xp:100,isGradingPublished:!1,maxTeamSize:1,hasVotingFeatures:!1,hoursBeforeEarlyXpDecay:0}],eF={chapter:eM.Chapter.SOURCE_1,external:{name:eD.O.NONE,symbols:[]},globals:[]},eG=[{autogradingResults:[],answer:null,lastModifiedAt:"2023-08-05T17:48:24.000000Z",content:"\n  This question has an id of `0`.\n  \n  ```\n  What's your favourite dinner food?\n  ```\n  ",id:0,library:eF,prepend:`const pizza = "pizza";
  const sushi = "sushi";
  const chickenrice = "chicken rice";`,postpend:"// This is a mock Postpend! You shouldn't be able to see me!",testcases:[{type:"public",program:"answer();",score:1,answer:'"pizza"'},{type:"public",program:"answer();",score:1,answer:'"sushi"'},{type:"public",program:"answer();",score:1,answer:'"chicken rice"'}],solutionTemplate:`function answer() {
      // Write something here!
  }
  `,type:"programming",xp:0,maxXp:2,blocking:!1},{autogradingResults:[],answer:`function areaOfCircle(x) {
      return square(x) * pi;
  }
  
  function volumeOfSphere(x) {
      return 4 / 3 * cube(x) * pi;
  }`,lastModifiedAt:"2023-08-05T17:48:24.000000Z",content:"Hello and welcome to this assessment! This is the 1st question.",id:1,library:eF,prepend:`const square = x => x * x;
  const cube = x => x * x * x;
  const pi = 3.1415928;`,postpend:"",testcases:[{type:"public",program:"areaOfCircle(5);",score:1,answer:"78.53982"},{type:"public",program:"volumeOfSphere(5);",score:1,answer:"523.5988"}],solutionTemplate:`function areaOfCircle(x) {
      // return area of circle
  }
  
  function volumeOfSphere(x) {
      // return volume of sphere
  }`,type:"programming",xp:0,maxXp:2,blocking:!1},{answer:3,content:"This is the 3rd question. Oddly enough, it is an ungraded MCQ question that uses the binary tree library! Option C has a null hint!",choices:[{content:"**Option** `A`",hint:"_hint_ A is `here`"},{content:"### B",hint:"hint B"},{content:"C",hint:null},{content:"D",hint:"hint D"}],id:2,library:eF,type:"mcq",solution:0,xp:0,maxXp:2,blocking:!1},{answer:3,content:"This is the 4th question. Oddly enough, it is a graded MCQ question that uses the binary tree library!",choices:[{content:"A",hint:null},{content:"B",hint:null},{content:"C",hint:null},{content:"D",hint:null}],id:3,library:eF,type:"mcq",solution:void 0,xp:0,maxXp:2,blocking:!1},{autogradingResults:[],answer:null,lastModifiedAt:"2023-08-05T17:48:24.000000Z",content:"You have reached the last question! Have some fun with the tone matrix...",id:4,library:eF,prepend:"",postpend:"",testcases:[],solutionTemplate:"5th question mock solution template",type:"programming",xp:0,maxXp:2,blocking:!1}],ez=[{answer:`function fibonacci(n) {
      if (n <= 2) {
          return 1;
      } else {
          return fibonacci(n-1) + fibonacci(n-2);
      }
  }`,lastModifiedAt:"2023-08-05T17:48:24.000000Z",content:"You can see autograding results!!!",id:0,library:eF,prepend:"",postpend:"// This is a mock Postpend! You shouldn't be able to see me!",testcases:[{type:"public",program:"fibonacci(3);",score:1,answer:"2"},{type:"public",program:"fibonacci(4);",score:1,answer:"3"},{type:"public",program:"fibonacci(5);",score:1,answer:"5"}],solutionTemplate:`function fibonacci(n) {
      // Your answer here
  }`,type:"programming",grader:{name:"avenger",id:1},gradedAt:"2038-06-18T05:24:26.026Z",xp:0,maxXp:2,blocking:!1,comments:`Good job. You are awarded the full marks!
  
  ----
  ## markdown test
  
  # header
  
  **bold**
  
  _italics_
  
  * list
  
  1. numbered list
  
  - [] checkboxes
  
  > quote
  
      code
  
  [link to Source Academy](https://sourceacademy.nus.edu.sg)  
  
  ![](image-url-goes-here)`,autogradingResults:[{resultType:"pass"},{resultType:"fail",expected:"8",actual:"5"},{resultType:"error",errors:[{errorType:"timeout"},{errorType:"syntax",line:1,location:"student",errorLine:"function fibonacci(n) {",errorExplanation:"Just kidding!"}]}]},{answer:`function recurse(rune, n) {
      return n <= 1 ? rune : make_cross(recurse(rune, n - 1));
  }`,lastModifiedAt:"2023-08-05T17:48:24.000000Z",content:"This is a runes question - there are no testcases nor autograding results.",id:1,library:eF,prepend:"",postpend:"",testcases:[],solutionTemplate:`function recurse(rune, n) {
      // Your answer here
  }`,type:"programming",grader:{name:"some avenger",id:1},gradedAt:"2038-06-18T05:24:26.026Z",xp:0,maxXp:2,blocking:!1,comments:`You open the Report Card, not knowing what to expect...
  
      ## WOW!
      Amazing grasp of runes. We can now move on to the next assignment.
      
      <br/>
      
      Robot Dog: \`woof\`
      
      You look at the display of the robot dog.
      
          FEED ME
      1. Bread
      2. Water
      
      <br/>
      
      * I am hungry.
      * I am thirsty.
      
      <br/>
      <br/>
          
      New message from **Avenger**!
      
      > _Cadet, please meet me at Level X-05, outside the pod bay doors. There is an important mission awaiting us._
      
      > _May the [Source](https://sourceacademy.nus.edu.sg) be with you._
      
      > Best regards, Avocado A. Avenger
      
      #### Upcoming Tasks
      - [] Meet Avenger Avenger at Level X-05
      - [] Open the Pod Bay Doors`,autogradingResults:[]}],eH=[{type:"Missions",id:1,longSummary:"This is the mission briefing. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas viverra, sem scelerisque ultricies ullamcorper, sem nibh sollicitudin enim, at ultricies sem orci eget odio. Pellentesque varius et mauris quis vestibulum. Etiam in egestas dolor. Nunc consectetur, sapien sodales accumsan convallis, lectus mi tempus ipsum, vel ornare metus turpis sed justo. Vivamus at tellus sed ex convallis commodo at in lectus. Pellentesque pharetra pulvinar sapien pellentesque facilisis. Curabitur efficitur malesuada urna sed aliquam. Quisque massa metus, aliquam in sagittis non, cursus in sem. Morbi vel nunc at nunc pharetra lobortis. Aliquam feugiat ultricies ipsum vel sollicitudin. Vivamus nulla massa, hendrerit sit amet nibh quis, porttitor convallis nisi. ",missionPDF:"www.google.com",questions:eG,title:"An Odessey to Runes"},{type:"Missions",id:2,longSummary:"This is the mission briefing. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas viverra, sem scelerisque ultricies ullamcorper, sem nibh sollicitudin enim, at ultricies sem orci eget odio. Pellentesque varius et mauris quis vestibulum. Etiam in egestas dolor. Nunc consectetur, sapien sodales accumsan convallis, lectus mi tempus ipsum, vel ornare metus turpis sed justo. Vivamus at tellus sed ex convallis commodo at in lectus. Pellentesque pharetra pulvinar sapien pellentesque facilisis. Curabitur efficitur malesuada urna sed aliquam. Quisque massa metus, aliquam in sagittis non, cursus in sem. Morbi vel nunc at nunc pharetra lobortis. Aliquam feugiat ultricies ipsum vel sollicitudin. Vivamus nulla massa, hendrerit sit amet nibh quis, porttitor convallis nisi. ",missionPDF:"www.google.com",questions:eG,title:"The Secret to Streams"},{type:"Quests",id:3,longSummary:`###This is the sidequest briefing.
  
  *Lorem ipsum* dolor sit amet, consectetur adipiscing elit.
  
  > Maecenas viverra, sem scelerisque ultricies ullamcorper, sem nibh sollicitudin
  enim, at ultricies sem orci eget odio. Pellentesque varius et mauris quis
  vestibulum.
  
  - Etiam in egestas dolor.
  - Nunc consectetur, sapien sodales accumsan convallis, lectus mi tempus ipsum,
    vel ornare metus turpis sed justo.
  - Vivamus at tellus sed ex convallis commodo at in lectus.
  
  \`\`\`
  Pellentesque
  pharetra
  pulvinar
  sapien
  \`\`\``,missionPDF:"www.google.com",questions:eG,title:"A sample Sidequest"},{type:"Missions",id:4,longSummary:"This is the closed mission briefing. The save button should not be there. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas viverra, sem scelerisque ultricies ullamcorper, sem nibh sollicitudin enim, at ultricies sem orci eget odio. Pellentesque varius et mauris quis vestibulum. Etiam in egestas dolor. Nunc consectetur, sapien sodales accumsan convallis, lectus mi tempus ipsum, vel ornare metus turpis sed justo. Vivamus at tellus sed ex convallis commodo at in lectus. Pellentesque pharetra pulvinar sapien pellentesque facilisis. Curabitur efficitur malesuada urna sed aliquam. Quisque massa metus, aliquam in sagittis non, cursus in sem. Morbi vel nunc at nunc pharetra lobortis. Aliquam feugiat ultricies ipsum vel sollicitudin. Vivamus nulla massa, hendrerit sit amet nibh quis, porttitor convallis nisi. ",missionPDF:"www.google.com",questions:ez,title:"A Closed Mission"},{type:"Quests",id:5,longSummary:"This is the closed sidequest briefing. The save button should not exist. This is a placeholder sidequest for testing rendering of grading statuses.",missionPDF:"www.google.com",questions:ez,title:"A Closed Sidequest"},{type:"Paths",id:6,longSummary:`### Basic logic gates
  
  This path is intended to demonstrate concepts from the lecture **Logic Circuits**. You are strongly encouraged to attempt this path to check your understanding, prior to the next Studio session. For this, you will be granted a small amount of XP!
  
  The path comprises 4 questions and is fully autograded and guided, and there are **no private test cases** - there will be no manual review by default. Please consult your Avenger if you require assistance!</TEXT>`,missionPDF:"www.google.com",questions:[{answer:null,content:"As a recap: which of the following is not a valid logic gate?",choices:[{content:"XOR gate",hint:"This is the exclusive-OR gate!"},{content:"IF gate",hint:"Correct!"},{content:"AND gate",hint:"This logic gate exists!"},{content:"OR gate",hint:"This logic gate exists!"}],id:0,library:eF,type:"mcq",solution:1,xp:0,maxXp:0,blocking:!1},{autogradingResults:[],answer:null,lastModifiedAt:"2023-08-05T17:48:24.000000Z",content:"An AND gate is a digital logic gate that implements logical conjunction on its inputs. It returns a single output that is HIGH (active) iff all the inputs to the AND gate are HIGH (active).\n  \n  In this question, let us model an AND gate as a function, and treat HIGH (active) inputs as the boolean value `true` and LOW (inactive) inputs as the boolean value `false`.\n  \n  As an AND gate is not restricted to exactly two inputs, our function shall be the same. Implement the function `AND(inputs)` which takes in the list `inputs` (a list of boolean values), and returns the output of the AND gate as a boolean. You may assume the list `inputs` is of minimum length 2.\n  \n  This question makes use of the sentinel function method to throw custom errors for each testcase.",id:1,library:eF,prepend:"const OR = (x, y) => x || y;",postpend:`
  const __AND = (xs) => {
    if (AND(list(true, true)) === undefined) {
      error('Your function is empty!');
    } else {}
    
    const result = AND(xs);
  
    if (!is_boolean(result)) {
      error('Your function does not return a boolean!');
    } else {}
    
    if (equal(xs, list(true, false)) && result) {
      error('Check the truth table for an AND gate again!');
    } else if (equal(xs, list(true, true, false)) && result) {
      error('Are you using all inputs in the list?');
    } else if (equal(xs, list(true, true, true)) && !result) {
      error('Are you sure your base case is correct?');
    } else if (AND(list(true, true)) === AND(list(false, false))) {
      error('Oi! Do not hardcode values!');
    } else {
      return result;
    }
  };`,testcases:[{type:"public",program:"__AND(list(true, false));",score:0,answer:"false"},{type:"public",program:"__AND(list(true, true, false));",score:0,answer:"false"},{type:"public",program:"__AND(list(true, OR(true, false), OR(true, true)));",score:0,answer:"true"},{type:"opaque",program:"__AND(list(true, OR(false, true), AND(list(true, false)), false));",score:0,answer:"false"},{type:"opaque",program:"__AND(list(true, OR(true, false), OR(true, AND(list(false, true))), true));",score:0,answer:"true"}],solutionTemplate:`function AND(inputs) {
      // Your answer here!
  }`,type:"programming",xp:0,maxXp:0,blocking:!1},{autogradingResults:[],answer:null,lastModifiedAt:"2023-08-05T17:48:24.000000Z",content:"The XOR (exclusive-OR) gate is a digital logic gate that accepts two inputs and returns a single output that is HIGH (active) iff one of the inputs are HIGH (active), but not both.\n  \n  In this question, let us model the XOR gate as a function. Implement the function `XOR(x, y)` which takes two boolean inputs `x` and `y` and which returns the output of the XOR gate as a boolean.\n  \n  This question makes use of the wrapping container method to throw custom errors for each testcase.",id:2,library:eF,prepend:"",postpend:`
  const __XOR = (x, y) => {
    if (XOR(false, false) === undefined) {
      error('Your function is empty!');
    } else {}
    
    const result = XOR(x, y);
  
    if (!is_boolean(result)) {
      error('Your function does not return a boolean!');
    } else {}
    
    if (((x && !y) || (y && !x)) && !result) {
      error('Check your truth tables!');
    } else if (XOR(false, false) === XOR(false, true)) {
      error('Oi! Do not hardcode values!');
    } else {
      return result;
    }
  };`,testcases:[{type:"public",program:"__XOR(true, false);",score:0,answer:"true"},{type:"public",program:"__XOR(false, true);",score:0,answer:"true"},{type:"opaque",program:"__XOR(true, XOR(true, false));",score:0,answer:"false"}],solutionTemplate:`function XOR(x, y) {
      // Your answer here!
  }`,type:"programming",xp:0,maxXp:0,blocking:!1},{autogradingResults:[],answer:null,lastModifiedAt:"2023-08-05T17:48:24.000000Z",content:"The NOR logic gate is special in that it is an _universal logic gate_, that is to say, they can be composed to form any other logic gate.\n  \n  Implement the AND logic gate **using ONLY the NOR logic gate**, as the `NOR_AND(x, y)` function that takes in two booleans as input.\n  \n  The `NOR` function modeled after a NOR gate is provided for you - it accepts two boolean values and returns `true` iff both inputs are `false`.",id:3,library:eF,prepend:`
  let counter = 0;
  const NOR = (x, y) => {
    counter = counter + 1;
    return !(x || y);
  };`,postpend:`
  const __NOR_AND = (x, y) => {
    if (NOR_AND(false, false) === undefined) {
      error('Your function is empty!');
    } else {}
    
    counter = 0;
    const result = NOR_AND(x, y);
  
    if (!is_boolean(result)) {
      error('Your function does not return a boolean!');
    } else {}
    
    if (!x && y && result) {
      error('Check your truth tables!');
    } else if (x && y && !result && counter > 0) {
      error('Nope! Try again :)');
    } else if (x && y && !result) {
      error('...You did not use NOR and still got it wrong!');
    } else if (x && y && result && counter !== 3) {
      error('Did you use NOR in your solution? >:(');
    } else if (x && !y && counter !== 6) {
      error('Incorrect number of calls.');
    } else {
      return result;
    }
  };`,testcases:[{type:"public",program:"__NOR_AND(false, true);",score:0,answer:"false"},{type:"public",program:"__NOR_AND(true, true);",score:0,answer:"true"},{type:"opaque",program:"__NOR_AND(true, NOR_AND(false, true));",score:0,answer:"false"}],solutionTemplate:`function NOR_AND(x, y) {
      // Your answer here!
  }`,type:"programming",xp:0,maxXp:0,blocking:!1}],title:"A sample guided path"},{type:"Others",id:7,title:"A sample contest voting assessment",longSummary:"Vote for your favourite contest entries here!",missionPDF:"www.google.com",questions:[{id:0,type:"voting",content:"Sample Contest Voting Question",xp:0,maxXp:0,answer:[],prepend:"",postpend:"",contestEntries:[{submission_id:1,answer:{code:"display('voting test')"}},{submission_id:2,answer:{code:"function voting_test() { return true; }"}}],scoreLeaderboard:[{submission_id:1,student_name:"student_1",answer:{code:"display('score_leaderboard test')"}},{submission_id:2,student_name:"student_2",answer:{code:"function score_leaderboard_test() { return true; }"}}],popularVoteLeaderboard:[{submission_id:1,student_name:"student_1",answer:{code:"display('popular_vote_leaderboard test')"}},{submission_id:2,student_name:"student_2",answer:{code:"function popular_vote_leaderboard_test() { return true; }"}}],library:eF,blocking:!1}]}],eB={userId:123,name:"DevAdmin",username:"DevAdmin",courses:[{courseId:1,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Admin,viewable:!0},{courseId:2,courseName:"CS2040S Data Structures and Algorithms (AY20/21 Sem 2)",courseShortName:"CS2040S",role:p.Xh.Admin,viewable:!1},{courseId:3,courseName:"CS2030S Programming Methodology II (AY21/22 Sem 1)",courseShortName:"CS2030S",role:p.Xh.Staff,viewable:!1}]},eV=[{userId:101,name:"Papito Sakolomoto",username:"Papito Sakolomoto",courses:[{courseId:1,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:102,name:"Carina Heng Xin Ting",username:"Carina Heng Xin Ting",courses:[{courseId:2,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:103,name:"Valentino Gusion",username:"Valentino Gusion",courses:[{courseId:3,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:104,name:"Ixia Arlot Rambutan",username:"Ixia Arlot Rambutan",courses:[{courseId:4,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:105,name:"Ariel Shockatia Ligament",username:"Ariel Shockatia Ligament",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:106,name:"Lolita Sim",username:"Lolita Sim",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:107,name:"Lim Jun Ming",username:"Lim Jun Ming",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:108,name:"Tobias Gray",username:"Tobias Gray",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:109,name:"Lenard Toh See Ming",username:"Lenard Toh See Ming",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:110,name:"Richard Gray",username:"Richard Gray",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:111,name:"Benedict Lim",username:"Benedict Lim",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:112,name:"Harshvathini Tharman",username:"Harshvathini Tharman",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:113,name:"James Cook",username:"James Cook",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:114,name:"Mike Chang",username:"Mike Chang",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:115,name:"Giyu Tomioka",username:"Giyu Tomioka",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:116,name:"Oliver Sandy",username:"Oliver Sandy",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]},{userId:117,name:"Muthu Valakrishnan",username:"Muthu Valakrishnan",courses:[{courseId:5,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:p.Xh.Student,viewable:!0}]}],eJ=[{courseRegId:1,role:p.Xh.Admin,group:"1F",gameState:{},courseId:1,xp:0,story:{story:"mission-1",playStory:!0},agreedToResearch:!0},{courseRegId:2,role:p.Xh.Student,group:"1F",gameState:{},courseId:2,xp:0,story:{story:"mission-1",playStory:!0},agreedToResearch:!0}],eW=[{courseRegId:1,courseId:1,name:"DevAdmin",username:"test/admin",role:p.Xh.Admin},{courseRegId:3,courseId:1,name:"Dummy student",username:"test/student",role:p.Xh.Student},{courseRegId:4,courseId:1,name:"Dummy staff",username:"test/staff",role:p.Xh.Staff}],eY=[{courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",viewable:!0,enableGame:!1,enableAchievements:!0,enableSourcecast:!0,enableStories:!1,enableOverallLeaderboard:!0,enableContestLeaderboard:!0,topLeaderboardDisplay:100,topContestLeaderboardDisplay:10,sourceChapter:eM.Chapter.SOURCE_1,sourceVariant:eM.Variant.DEFAULT,moduleHelpText:"",assetsPrefix:""},{courseName:"CS2040S Data Structures and Algorithms (AY20/21 Sem 2)",courseShortName:"CS2040S",viewable:!0,enableGame:!1,enableAchievements:!1,enableSourcecast:!1,enableStories:!1,enableOverallLeaderboard:!0,enableContestLeaderboard:!0,topLeaderboardDisplay:100,topContestLeaderboardDisplay:10,sourceChapter:eM.Chapter.SOURCE_2,sourceVariant:eM.Variant.DEFAULT,moduleHelpText:"Help Text!",assetsPrefix:""}],eX=[{id:1,type:"new",assessment_id:6,assessment_type:"Paths",assessment_title:"Basic Logic"},{id:2,type:"new",assessment_id:7,assessment_type:"Missions",assessment_title:"Symphony of the Winds"},{id:3,type:"submitted",submission_id:1,assessment_type:"Missions",assessment_title:"Mission 0"},{id:4,type:"submitted",submission_id:2,assessment_type:"Missions",assessment_title:"Mission 1"},{id:5,type:"submitted",submission_id:3,assessment_type:"Missions",assessment_title:"Mission 0"}],e$=[{xpAdjustment:0,assessmentType:"Missions",assessmentNumber:"M1A",assessmentId:0,assessmentName:"Mission 0 ",currentXp:69,xpBonus:10,initialXp:69,maxXp:100,studentId:0,studentName:"Al Gorithm",studentNames:[],studentUsername:"E0123456",studentUsernames:[],submissionId:1,submissionStatus:"submitted",progress:"published",isGradingPublished:!0,groupName:"1D",questionCount:6,gradedCount:6},{xpAdjustment:-2,assessmentType:"Missions",assessmentNumber:"M2",assessmentId:1,assessmentName:"Mission 1",currentXp:-2,xpBonus:12,initialXp:0,maxXp:400,studentId:0,studentName:"Dee Sign",studentNames:[],studentUsername:"E0000000",studentUsernames:[],submissionId:2,submissionStatus:"submitted",progress:"submitted",isGradingPublished:!1,groupName:"1F",questionCount:6,gradedCount:2},{xpAdjustment:4,assessmentType:"Missions",assessmentNumber:"M3",assessmentId:0,assessmentName:"Mission 0",currentXp:1e3,xpBonus:12,initialXp:996,maxXp:1e3,studentId:1,studentName:"May Trix",studentNames:[],studentUsername:"E0000001",studentUsernames:[],submissionId:3,submissionStatus:"submitted",progress:"graded",isGradingPublished:!1,groupName:"1F",questionCount:0,gradedCount:0}],eZ={answers:[{id:0,prompts:[],autogradingResults:[],autoGradingStatus:"N/A",question:{answer:`function remainder(n, d) {
  return (n - d) < 0 ? n : remainder(n - d, d);
}`,lastModifiedAt:"2023-08-05T17:48:24.000000Z",content:"\nHello and welcome to this assessment! This is the *0th question*.\n\n```\n>>> import this\n```\n",prepend:"// THIS IS A PREPEND",postpend:"// THIS IS A POSTPEND",testcases:[{type:"public",program:"remainder(12, 7);",score:1,answer:"5"},{type:"public",program:"remainder(6, 1);",score:2,answer:"0"},{type:"opaque",program:"remainder(-15, 6);",score:2,answer:"-3"},{type:"opaque",program:"remainder(17, 23) === 17;",score:2,answer:"true"}],id:0,library:eF,solutionTemplate:"0th question mock solution template",solution:`This is how the 0th question is solved. [7 points]

function remainder(n, d) {
  return n % d;
}`,type:"programming",maxXp:1e3,grader:{name:"avenger",id:1},gradedAt:"2038-06-18T05:24:26.026Z",xp:1,autogradingResults:[{resultType:"pass"},{resultType:"fail",expected:"8",actual:"5"},{resultType:"error",errors:[{errorType:"dummyErrorType"}]},{resultType:"error",errors:[{errorType:"systemError",errorMessage:"Cannot read property 'getUniformLocation' of null"}]},{resultType:"error",errors:[{errorType:"timeout"},{errorType:"syntax",line:2,location:"student",errorLine:"return (n - d) < 0 ? n : remainder(n - d, d)",errorExplanation:"Missing semicolon at the end of statement"}]}],blocking:!1},grade:{xpAdjustment:0,xp:0,comments:`Good job. You are awarded the full marks!

----
## markdown test

# header

**bold**

_italics_

* list

1. numbered list

- [] checkboxes

> quote

    code

[link to Source Academy](https://sourceacademy.nus.edu.sg)

![](image-url-goes-here)
      `,grader:{name:"HARTIN MENZ",id:100},gradedAt:"2019-08-16T13:26:32+00:00"},student:{name:"Al Gorithm",username:"E0123456",id:0}},{id:1,prompts:[],autogradingResults:[],autoGradingStatus:"N/A",question:{prepend:"",postpend:"",testcases:[],answer:"This student's answer to the 1st question",lastModifiedAt:"2023-08-05T17:48:24.000000Z",content:"Hello and welcome to this assessment! This is the 1st question.",id:1,library:eF,solutionTemplate:"1st question mock solution template",solution:null,type:"programming",maxXp:200,grader:{name:"avenger",id:1},gradedAt:"2038-06-18T05:24:26.026Z",xp:1,autogradingResults:[{resultType:"pass"},{resultType:"fail",expected:"8",actual:"5"},{resultType:"error",errors:[{errorType:"timeout"},{errorType:"syntax",line:1,location:"student",errorLine:"function fibonacci(n) {",errorExplanation:"Just kidding!"}]}],blocking:!1},grade:{xpAdjustment:0,xp:100,comments:`You open the Report Card, not knowing what to expect...

## WOW!
Amazing grasp of runes. We can now move on to the next assignment.

<br/>

Robot Dog: \`woof\`

You look at the display of the robot dog.

    FEED ME
1. Bread
2. Water

<br/>

* I am hungry.
* I am thirsty.

<br/>
<br/>

New message from **Avenger**!

> _Cadet, please meet me at Level X-05, outside the pod bay doors. There is an important mission awaiting us._

> _May the [Source](https://sourceacademy.nus.edu.sg) be with you._

> Best regards, Avocado A. Avenger

#### Upcoming Tasks
- [] Meet Avenger Avenger at Level X-05
- [] Open the Pod Bay Doors
      `},student:{name:"Al Gorithm",username:"E0000000",id:0}},{id:2,prompts:[],autogradingResults:[],autoGradingStatus:"N/A",question:{prepend:"",postpend:"",testcases:[],answer:3,lastModifiedAt:"2023-08-05T17:48:24.000000Z",solution:2,content:"Hello and welcome to this assessment! This is the 2nd question. Oddly enough, it is an MCQ question!",choices:[{content:"A",hint:"hint A"},{content:"B",hint:"hint B"},{content:"C",hint:"hint C"},{content:"D",hint:"hint D"}],id:2,library:eF,type:"mcq",maxXp:100,grader:{name:"avenger",id:1},gradedAt:"2038-06-18T05:24:26.026Z",xp:1,autogradingResults:[{resultType:"pass"},{resultType:"fail",expected:"8",actual:"5"},{resultType:"error",errors:[{errorType:"timeout"},{errorType:"syntax",line:1,location:"student",errorLine:"function fibonacci(n) {",errorExplanation:"Just kidding!"}]}],blocking:!1},grade:{xpAdjustment:0,xp:50},student:{name:"Al Gorithm",username:"E0000000",id:0}}],assessment:{coverPicture:"https://i.imgur.com/dR7zBPI.jpeg",id:1,number:"10",reading:"This is for you to read. Read it carefully. Perhaps you will find the answer to life here.",story:`Story:
Start of story.
End of story.
The End.

Credits
Starring: Source Academy`,summaryLong:"This is the long summary of the assessment. It is a very very very very long summary",summaryShort:"This is short summary",title:"Assessment 1: Some Title"},enable_llm_grading:!1},eq={cols:["group","avenger","ungradedMissions","submittedMissions","ungradedQuests","submittedQuests"],rows:[{group:"Mock Group 1",avenger:"John",ungradedMissions:123,submittedMissions:200,ungradedQuests:100,submittedQuests:117},{group:"Mock Group 2",avenger:"Molly",ungradedMissions:1232,submittedMissions:205430,ungradedQuests:345,submittedQuests:11547},{group:"Mock Group 3",avenger:"Lenny",ungradedMissions:1532,submittedMissions:22200,ungradedQuests:134500,submittedQuests:6777}]},eQ=a(67063),eK=[{teamId:1,assessmentId:1,assessmentName:"An Odessey to Runes",assessmentType:"Missions",studentIds:[106,107,108,109],studentNames:["Lolita Sim","Lim Jun Ming","Tobias Gray","Lenard Toh See Ming"]},{teamId:2,assessmentId:2,assessmentName:"An Odessey to Runes",assessmentType:"Missions",studentIds:[110,111,112,113],studentNames:["Richard Gray","Benedict Lim","Harshvathini Tharman","James Cook"]},{teamId:3,assessmentId:2,assessmentName:"An Odessey to Runes",assessmentType:"Missions",studentIds:[114,115,116,117],studentNames:["Mike Chang","Giyu Tomioka","Oliver Sandy","Muthu Valakrishnan"]}],e0=async(e,t,a,s,i)=>{let n=[p.Xh.Admin,p.Xh.Staff],r=((e,t=p.Xh.Staff)=>t)(0);if(null===r||!n.includes(r))return null;{let e=await e1(i),n=eQ.read(e,{type:"array"}),r=n.SheetNames[0],o=n.Sheets[r],l=eQ.utils.sheet_to_json(o,{header:1}),d=[],c=eK.length>0?eK[eK.length-1].teamId+1:1;for(let e=0;e<l.length;e++){let i=l[e],n=[];i.forEach(e=>{let t=eV?.find(t=>t.username.trim()===e.trim());t&&n.push({label:t.name,value:t})});let r=[],o=[];n.forEach(e=>{e&&e.value&&"number"==typeof e.value.userId&&(r.push(e.value.name),o.push(e.value.userId))}),d.push({teamId:c++,assessmentId:t,assessmentName:a,assessmentType:s,studentIds:o,studentNames:r})}return eK.push(...d),eK.sort((e,t)=>t.assessmentId-e.assessmentId)}},e1=async e=>new Promise((t,a)=>{let s=new FileReader;s.onload=e=>{e.target?t(e.target.result):a(Error("Error reading file"))},s.onerror=e=>{a(Error("Error reading file"))},s.readAsArrayBuffer(e)});function*e2(){yield(0,en.jP)(ee.A.fetchAuth.type,function*(t){yield(0,en.yJ)(eS.o.setTokens({accessToken:"accessToken",refreshToken:"refreshToken"})),yield e();let a=yield(0,en.Lt)(e=>e.session.courseId);yield e_(`/courses/${a}`)});let e=function*(){let e={...eB},t={...eJ["0"]},a={...eY["0"]},s=[...eO["0"]],i={chapter:a.sourceChapter,variant:a.sourceVariant,displayName:(0,p.Kl)(a.sourceChapter,a.sourceVariant),mainLanguage:"JavaScript",supports:{}};yield(0,en.yJ)(eS.o.setUser(e)),yield(0,en.yJ)(eS.o.setCourseRegistration(t)),yield(0,en.yJ)(eS.o.setCourseConfiguration(a)),yield(0,en.yJ)(eS.o.setAssessmentConfigurations(s)),yield(0,en.yJ)(eS.o.updateSublanguage(i))};yield(0,en.jP)(ee.A.fetchUserAndCourse.type,e),yield(0,en.jP)(ee.A.fetchCourseConfig.type,function*(){let e={...eY["0"]};yield(0,en.yJ)(eS.o.setCourseConfiguration(e))}),yield(0,en.jP)(ee.A.fetchAssessmentOverviews.type,function*(){yield(0,en.yJ)(eS.o.updateAssessmentOverviews([...eU]))}),yield(0,en.jP)(ee.A.fetchAssessment.type,function*(e){let{assessmentId:t}=e.payload,a=eH[t-1];yield(0,en.yJ)(eS.o.updateAssessment({...a}))}),yield(0,en.jP)(ee.A.submitAnswer.type,function*(e){let t=e.payload.id,a=e.payload.answer,s=yield(0,en.Lt)(e=>e.workspaces.assessment.currentAssessment),i=yield(0,en.Lt)(e=>e.session.assessments[s]),n=i.questions.slice().map(e=>(e.id===t&&(e.answer=a),e)),r={...i,questions:n};return yield(0,en.yJ)(eS.o.updateAssessment(r)),yield(0,en.T1)(ed.uT,"Saved!",1e3),yield(0,en.yJ)(eS.o.updateHasUnsavedChanges("assessment",!1))}),yield(0,en.jP)(ee.A.submitAssessment.type,function*(e){let t=e.payload,a=(yield(0,en.Lt)(e=>e.session.assessmentOverviews)).map(e=>e.id===t?{...e,status:"submitted"}:e);return yield(0,en.T1)(ed.uT,"Submitted!",2e3),yield(0,en.yJ)(eS.o.updateAssessmentOverviews(a))}),yield(0,en.jP)(ee.A.fetchGradingOverviews.type,function*(e){let t=yield(0,en.Lt)(e=>e.session.accessToken),{filterToGroup:a,pageParams:s,filterParams:i,allColsSortStates:n}=e.payload,r={sortBy:n.sortBy,sortDirection:""};Object.keys(n.currentState).forEach(e=>{n.sortBy===e&&e&&("sort"!==n.currentState[e]?r.sortDirection=n.currentState[e]:(r.sortBy="",r.sortDirection=""))});let o=yield(0,en.T1)(()=>{let e,t;return e=[p.Xh.Admin,p.Xh.Staff],null!==(t=((e,t=p.Xh.Staff)=>t)(0))&&e.includes(t)?a?[e$[0]]:e$.sort((e,t)=>e.assessmentId!==t.assessmentId?t.assessmentId-e.assessmentId:t.submissionId-e.submissionId):null});null!==o&&(yield(0,en.yJ)(eS.o.updateGradingOverviews(o)))}),yield(0,en.jP)(ee.A.fetchTeamFormationOverviews.type,function*(e){let t=yield(0,en.Lt)(e=>e.session.accessToken),a=e.payload,s=yield(0,en.T1)(()=>{let e,t;return e=[p.Xh.Admin,p.Xh.Staff],null!==(t=((e,t=p.Xh.Staff)=>t)(0))&&e.includes(t)?a?[eK[0]]:eK.sort((e,t)=>t.assessmentId-e.assessmentId):null});null!==s&&(yield(0,en.yJ)(eS.o.updateTeamFormationOverviews([...s])))}),yield(0,en.jP)(ee.A.createTeam.type,function*(e){let t=yield(0,en.Lt)(e=>e.session.accessToken),{assessment:a,teams:s}=e.payload,i=yield(0,en.T1)(()=>((e,t,a,s,i)=>{let n=[p.Xh.Admin,p.Xh.Staff],r=((e,t=p.Xh.Staff)=>t)(0);if(null===r||!n.includes(r))return null;{let e=eK[eK.length-1],n=e?.teamId+1,r=i.map(e=>{let i=[],r=[];return e.forEach(e=>{e&&e.value&&"number"==typeof e.value.userId&&(i.push(e.value.name),r.push(e.value.userId))}),{teamId:n++,assessmentId:t,assessmentName:a,assessmentType:s,studentIds:r,studentNames:i}});return eK.push(...r),eK.sort((e,t)=>t.assessmentId-e.assessmentId)}})(0,a.id,a.title,a.type,s));null!==i&&(yield(0,en.yJ)(eS.o.updateTeamFormationOverviews([...i])))}),yield(0,en.jP)(ee.A.bulkUploadTeam.type,function*(e){let t=yield(0,en.Lt)(e=>e.session.accessToken),{assessment:a,file:s}=e.payload,i=yield(0,en.T1)(()=>e0(t,a.id,a.title,a.type,s));null!==i&&(yield(0,en.yJ)(eS.o.updateTeamFormationOverviews([...i])))}),yield(0,en.jP)(ee.A.updateTeam.type,function*(e){let t=yield(0,en.Lt)(e=>e.session.accessToken),{teamId:a,assessment:s,teams:i}=e.payload,n=yield(0,en.T1)(()=>((e,t,a,s,i,n)=>{let r=[p.Xh.Admin,p.Xh.Staff],o=((e,t=p.Xh.Staff)=>t)(0);if(null===o||!r.includes(o))return null;{let e=eK.findIndex(e=>e.teamId===t);if(-1!==e){eK[e].assessmentId=a,eK[e].assessmentName=s,eK[e].assessmentType=i;let t=[],r=[];n.forEach(e=>{e.forEach(e=>{e&&e.value&&"number"==typeof e.value.userId&&(t.push(e.value.userId),r.push(e.value.name))})}),eK[e].studentIds=t,eK[e].studentNames=r}return eK.sort((e,t)=>t.assessmentId-e.assessmentId)}})(0,a,s.id,s.title,s.type,i));null!==n&&(yield(0,en.yJ)(eS.o.updateTeamFormationOverviews([...n])))}),yield(0,en.jP)(ee.A.deleteTeam.type,function*(e){let t=yield(0,en.Lt)(e=>e.session.accessToken),{teamId:a}=e.payload,s=yield(0,en.T1)(()=>((e,t)=>{let a=[p.Xh.Admin,p.Xh.Staff],s=((e,t=p.Xh.Staff)=>t)(0);if(null===s||!a.includes(s))return null;let i=eK.findIndex(e=>e.teamId===t);return -1!==i&&eK.splice(i,1),eK})(0,a));null!==s&&(yield(0,en.yJ)(eS.o.updateTeamFormationOverviews([...s])))}),yield(0,en.jP)(ee.A.fetchStudents.type,function*(e){yield(0,en.Lt)(e=>e.session.accessToken);let t=yield(0,en.T1)(()=>eV);null!==t&&(yield(0,en.yJ)(eS.o.updateStudents([...t])))}),yield(0,en.jP)(ee.A.fetchGrading.type,function*(e){let t=e.payload,a=yield(0,en.Lt)(e=>e.session.accessToken),s=yield(0,en.T1)(()=>{let e,t;return e=[p.Xh.Admin,p.Xh.Staff],null!==(t=((e,t=p.Xh.Staff)=>t)(0))&&e.includes(t)?eZ:null});null!==s&&(yield(0,en.yJ)(eS.o.updateGrading(t,s)))}),yield(0,en.jP)(ee.A.unsubmitSubmission.type,function*(e){let{submissionId:t}=e.payload,a=yield(0,en.Lt)(e=>e.session.gradingOverviews||{count:0,data:[]});if(-1===a.data.findIndex(e=>e.submissionId===t&&"submitted"===e.progress))return void(yield(0,en.T1)(ed.JB,"400: Bad Request"));let s=a.data.map(e=>(e.submissionId===t&&(e.progress="attempted"),e));yield(0,en.T1)(ed.uT,"Unsubmit successful!",1e3),yield(0,en.yJ)(eS.o.updateGradingOverviews({...a,data:s}))});let t=function*(e){if((yield(0,en.Lt)(e=>e.session.role))===p.Xh.Student)return yield(0,en.T1)(ed.JB,"Only staff can submit answers.");let{submissionId:t,questionId:a,xpAdjustment:s,comments:i}=e.payload,n=yield(0,en.Lt)(e=>e.session.gradings[t]),r=n.answers.slice().map(e=>(e.question.id===a&&(e.grade={xpAdjustment:s,xp:e.grade.xp,comments:i,gradedAt:new Date().toISOString()}),e));yield(0,en.yJ)(eS.o.updateGrading(t,{answers:r,assessment:n.assessment,enable_llm_grading:!1})),yield(0,en.T1)(ed.uT,"Submitted!",1e3)},a=function*(e){let{submissionId:a}=e.payload;yield*t(e);let[s,i]=yield(0,en.Lt)(e=>[e.workspaces.grading.currentQuestion,e.session.courseId]);yield e_(`/courses/${i}/grading/${a}/${(s||0)+1}`)};yield(0,en.jP)(ee.A.submitGrading.type,t),yield(0,en.jP)(ee.A.submitGradingAndContinue.type,a),yield(0,en.jP)(ee.A.fetchNotifications.type,function*(e){yield(0,en.yJ)(eS.o.updateNotifications([...eX]))}),yield(0,en.jP)(ee.A.acknowledgeNotifications.type,function*(e){let t=e.payload.withFilter,a=yield(0,en.Lt)(e=>e.session.notifications),s=a;if(t&&(s=t(a)),0===s.length)return;let i=s.map(e=>e.id),n=a.filter(e=>!i.includes(e.id));yield(0,en.yJ)(eS.o.updateNotifications(n))}),yield(0,en.jP)(ee.A.updateLatestViewedCourse.type,function*(e){let{courseId:t}=e.payload,a=t-1,s={...eY[a]};yield(0,en.yJ)(eS.o.setCourseConfiguration(s)),yield(0,en.yJ)(eS.o.setAssessmentConfigurations([...eO[a]])),yield(0,en.yJ)(eS.o.setCourseRegistration({...eJ[a]})),yield(0,en.yJ)(eS.o.updateSublanguage({chapter:s.sourceChapter,variant:s.sourceVariant,displayName:(0,p.Kl)(s.sourceChapter,s.sourceVariant),mainLanguage:"JavaScript",supports:{}})),yield(0,en.T1)(ed.uT,`Switched to ${s.courseName}!`,5e3)}),yield(0,en.jP)(ee.A.updateCourseConfig.type,function*(e){let t=e.payload;yield(0,en.yJ)(eS.o.setCourseConfiguration(t)),yield(0,en.T1)(ed.uT,"Updated successfully!",1e3)}),yield(0,en.jP)(ee.A.updateAssessmentConfigs.type,function*(e){let t=e.payload;yield(0,en.yJ)(eS.o.setAssessmentConfigurations(t)),yield(0,en.T1)(ed.uT,"Updated successfully!",1e3)}),yield(0,en.jP)(ee.A.fetchAdminPanelCourseRegistrations.type,function*(e){let t=[...eW];yield(0,en.yJ)(eS.o.setAdminPanelCourseRegistrations(t))}),yield(0,en.jP)(b.Ay.fetchGroupGradingSummary.type,function*(){yield(0,en.yJ)(eS.o.updateGroupGradingSummary({...eq}))})}var e3=a(65334),e4=a(14081),e5=a(83477),e8=a(31789);let e6=(0,ew.zA)({[y.A.bulkUpdateAchievements.type]:function*(e){let t=yield eE(),a=e.payload;if(!(yield(0,en.T1)(el.WC,a,t)))return},[y.A.bulkUpdateGoals.type]:function*(e){let t=yield eE(),a=e.payload;if(!(yield(0,en.T1)(el.YR,a,t)))return},[y.A.getAchievements.type]:function*(){let e=yield eE(),t=yield(0,en.T1)(el.$_,e);t&&(yield(0,en.yJ)(eS.o.saveAchievements(t)))},[y.A.getGoals.type]:function*(e){let t=yield eE(),a=e.payload,s=yield(0,en.T1)(el.DX,t,a);s&&(yield(0,en.yJ)(eS.o.saveGoals(s)))},[y.A.getOwnGoals.type]:function*(){let e=yield eE(),t=yield(0,en.T1)(el.XS,e);t&&(yield(0,en.yJ)(eS.o.saveGoals(t)))},[y.A.getUsers.type]:function*(){let e=yield eE(),t=yield(0,en.T1)(el.CF,e);t&&(yield(0,en.yJ)(eS.o.saveUsers(t)))},[y.A.removeAchievement.type]:function*(e){let t=yield eE(),a=e.payload;if(!(yield(0,en.T1)(el.qW,a,t)))return},[y.A.removeGoal.type]:function*(e){let t=yield eE(),a=e.payload;if(!(yield(0,en.T1)(el.Qi,a,t)))return},[y.A.updateOwnGoalProgress.type]:function*(e){let t=yield eE(),a=e.payload;if(!(yield(0,en.T1)(el.Kk,a,t)))return},[y.A.updateGoalProgress.type]:function*(e){let t=yield eE(),{studentCourseRegId:a,progress:s}=e.payload,i=yield(0,en.T1)(el.Q5,a,s,t);i&&i.ok&&(yield(0,en.yJ)(eS.o.getGoals(a)),yield(0,en.T1)(e4.j))},[y.A.addEvent.type]:function*({payload:{eventNames:e,workspaceLocation:t}}){let a=[],s=!1,i=yield(0,en.Lt)(e=>e.session.role),n=yield(0,en.Lt)(e=>e.session.enableAchievements);if(void 0!==t&&e.find(e=>e===e3.Bx.ERROR)){let e=yield(0,en.Lt)(e=>{let[a,s]=(0,U.g$)(t);return"stories"===a?e.sideContent.stories[s].selectedTab:e.sideContent[a].selectedTab});("cse_machine"===e||"subst_visualiser"===e)&&(yield(0,en.yJ)(O.Ay.beginAlertSideContent("introduction",t)))}i&&n&&!$.A.playgroundOnly&&(a.push(e),!s&&i&&(s=!0,yield(0,en.cb)(3e3),s=!1,yield(0,en.yJ)(eS.o.handleEvent(a)),a=[]))},[y.A.handleEvent.type]:function*(e){let t=yield eE(),a=yield(0,en.T1)(el.$_,t);a&&(yield(0,en.yJ)(eS.o.saveAchievements(a)));let s=yield(0,en.T1)(el.XS,t);if(!s)return;yield(0,en.yJ)(eS.o.saveGoals(s));let i=yield(0,en.Lt)(e=>e.achievement.achievements),n=yield(0,en.Lt)(e=>e.achievement.goals),r=new e5.A(i,n),o=e.payload,l=new Set;for(let e of(o.forEach(e=>{n.filter(t=>(function(e,t){var a;if(e.meta.type===e3.IW.EVENT&&(a=e.meta,!(0,e8._d)(a.deadline)&&(0,e8.OZ)(a.release)&&((0,e8.GG)(a.observeFrom,a.observeTo)||0))){for(let a=0;a<e.meta.eventNames.length;a++)for(let s=0;s<t.length;s++)if(e.meta.eventNames[a]===t[s])return!0}return!1})(t,e)).map(e=>e.uuid).forEach(e=>{let t={...r.getGoalProgress(e)};t.count=t.count+1;let a=t.completed;t.completed=t.count>=t.targetCount;let s=[];if(!a&&t.completed)for(let t of r.getAchievementsByGoal(e))r.isCompleted(r.getAchievement(t))||s.push(t);for(let e of(r.modifyGoalProgress(t),s)){let t=r.getAchievement(e);r.isCompleted(t)&&(0,ed.uT)("Completed acheivement: "+t.title)}l.add(e)})}),l))if(!(yield(0,en.T1)(el.Kk,r.getGoalProgress(e),t)))return},[y.A.getUserAssessmentOverviews.type]:function*(e){let t=yield eE(),a=yield(0,en.T1)(el.aL,e.payload,t);a&&(yield(0,en.yJ)(eS.o.saveUserAssessmentOverviews(a)))}}),e9=(0,ew.zA)({[g.xb.setFlag.type]:function*({payload:{featureFlag:e,value:t}}){yield(0,en.T1)([e,"onChange"],t)},[g.xb.resetFlag.type]:function*({payload:{featureFlag:e}}){yield(0,en.T1)([e,"onChange"],e.defaultValue)}});var e7=a(77080),te=a(32754),tt=a(74848),ta=a(45111),ts=a(53991),ti=a(31643),tn=a(62047),tr=a(68464),to=a(5960),tl=a(79642),td=a(31365),tc=a(46942),tu=a.n(tc),th=a(96540);class tp{childrenRetrieved=!1;filePath="dummy_path";fileType="unset";constructor(e,t){this.filePath=e,this.fileType=t}}class tm{static fileIndex=0;static currentRepoName="";static async getFirstLayerRepoFileNodes(e){return""===e?[]:(tm.fileIndex=0,tm.currentRepoName=e,await tm.getChildNodes(e,""))}static async getChildNodes(e,t){let a=[];if(e!==tm.currentRepoName)return a;let s=(0,te.oq)();if(void 0===s)return a;try{let i=(await s.users.getAuthenticated()).data.login,n=(await s.repos.getContent({owner:i,repo:e,path:t})).data;Array.isArray(n)&&n.forEach(e=>{a.push(this.createNode(e))})}catch(e){console.error(e)}return a}static createNode(e){let t=tm.fileIndex,a={id:t,label:"dummy file"};return"file"===e.type&&(a={id:t,nodeData:new tp(e.path,"file"),icon:"document",label:e.name}),"dir"===e.type&&(a={id:t,nodeData:new tp(e.path,"dir"),icon:"folder-close",label:e.name,childNodes:[]}),tm.fileIndex++,a}}let tg=e=>{let[t,a]=(0,th.useState)([]),[s,i]=(0,th.useState)(""),[n,r]=(0,th.useState)("");return(0,th.useEffect)(()=>{o(e.repoName,a)},[e.repoName]),(0,tt.jsxs)(ta.l,{className:"githubDialog",isOpen:!0,onClose:l,children:[(0,tt.jsx)("div",{className:tu()("githubDialogHeader",ts.DIALOG_HEADER),children:(0,tt.jsx)("h3",{children:"Select a File"})}),(0,tt.jsxs)(ti.R,{children:[(0,tt.jsx)(tn.P,{contents:t,onNodeClick:c,onNodeCollapse:u,onNodeExpand:h,className:tu()("FileTree",ts.ELEVATION_0)}),"Save"===e.pickerType&&(0,tt.jsxs)("div",{children:[(0,tt.jsx)(tr.M,{id:"FileNameTextBox",onChange:function(e){i(e.target.value)},onClick:function(e){""===s&&i(".js")},placeholder:"Enter File Name",value:s}),(0,tt.jsx)(tr.M,{onChange:function(e){r(e.target.value)},placeholder:"Enter Commit Message",value:n})]})]}),(0,tt.jsx)(to.E,{actions:(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)(tl.$,{onClick:l,children:"Close"}),(0,tt.jsx)(tl.A,{onClick:d,intent:td.J.PRIMARY,text:e.pickerType})]})})]});async function o(e,t){try{let a=await tm.getFirstLayerRepoFileNodes(e);t(a)}catch(e){console.error(e)}}function l(){e.onSubmit("")}async function d(){let t=await e.octokit.users.getAuthenticated(),a=t.data.login,i=t.data.name,r=t.data.email;if("Open"===e.pickerType&&await (0,te.i_)(e.octokit,a,e.repoName,s)&&await (0,te.jp)()&&(0,te.Z_)(e.octokit,a,e.repoName,s),"Save"===e.pickerType){let{canBeSaved:t,saveType:o}=await (0,te.ku)(e.octokit,a,e.repoName,s);t&&("Overwrite"===o&&await (0,te.XI)()&&(0,te.R2)(e.octokit,a,e.repoName,s,i,r,n,e.editorContent),"Create"===o&&(0,te.SW)(e.octokit,a,e.repoName,s,i,r,n,e.editorContent))}e.onSubmit("")}async function c(e,s,n){let r=e.isSelected,o=await p(t,e,e=>e.isSelected=!1,e=>{e.isSelected=null===r||!r,i(void 0!==e.nodeData&&e.isSelected?e.nodeData.filePath:"")});null!==o&&a(o)}async function u(e){let s=await p(t,e,e=>{},e=>e.isExpanded=!1);null!==s&&a(s)}async function h(s){let i=await p(t,s,e=>{},async t=>{t.isExpanded=!0,void 0===t.nodeData||t.nodeData.childrenRetrieved||(t.childNodes=await tm.getChildNodes(e.repoName,t.nodeData.filePath),t.nodeData.childrenRetrieved=!0)});null!==i&&a(i)}async function p(e,t,a,s){if(null===e)return null;let i=[];for(let n=0;n<e.length;n++){let r=e[n],o=Object.assign({},r);if(await a(o),t.id===r.id&&await s(o),void 0!==o.childNodes){let e=await p(o.childNodes,t,a,s);null!==e&&(o.childNodes=e)}i.push(o)}return i}};var ty=a(49258),tf=a(11678);let tb=e=>{let[t,a]=(0,th.useState)("");return(0,tt.jsxs)(ta.l,{className:"githubDialog",isOpen:!0,onClose:s,children:[(0,tt.jsx)("div",{className:tu()("githubDialogHeader",ts.DIALOG_HEADER),children:(0,tt.jsx)("h3",{children:"Select a Repository"})}),(0,tt.jsx)(ti.R,{children:(0,tt.jsx)(ty.z,{className:"RepositoryRadioGroup",onChange:function(e){a(e.target.value)},selectedValue:t,children:e.userRepos.map(e=>(0,tt.jsx)(tf.sx,{label:e.name,value:e.name},e.id))})}),(0,tt.jsx)(to.E,{actions:(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)(tl.$,{onClick:s,children:"Close"}),(0,tt.jsx)(tl.A,{onClick:function(){""===t?(0,ed.JB)("No repository selected!",1e3):e.onSubmit(t)},intent:td.J.PRIMARY,children:"Select"})]})})]});function s(){e.onSubmit("")}};var tx=a(63283);let tv=(0,ew.zA)({[ee.A.loginGitHub.type]:function*(){let e=`https://github.com/login/oauth/authorize?client_id=${$.A.githubClientId}&scope=repo`,t="Connect With OAuth",a="height=600,width=400";new BroadcastChannel("GitHubOAuthAccessToken").onmessage=e=>{aX.dispatch(eS.o.setGitHubOctokitObject(e.data)),aX.dispatch(eS.o.setGitHubAccessToken(e.data)),(0,ed.uT)("Logged in to GitHub",1e3)},$.A.githubClientId?yield(0,en.T1)(window.open,e,t,a):yield(0,en.T1)(window.open,"/callback/github",t,a)},[ee.A.logoutGitHub.type]:function*(){yield(0,en.yJ)(eS.o.removeGitHubOctokitObjectAndAccessToken()),yield(0,en.T1)(ed.uT,"Logged out from GitHub",1e3)},[e7.A.githubOpenFile.type]:function*(){let e=te.oq();if(void 0===e)return;let t=yield(0,en.T1)(async()=>await e.paginate(e.repos.listForAuthenticatedUser,{per_page:100})),a=async()=>await (0,tx.P_)(tb,e=>({userRepos:t,onSubmit:e})),s=yield(0,en.T1)(a);if(""!==s){let t=async()=>await (0,tx.P_)(tg,t=>({repoName:s,pickerType:"Open",octokit:e,editorContent:"",onSubmit:t}));yield(0,en.T1)(t)}},[e7.A.githubSaveFile.type]:function*(){let e=(0,te.oq)();if(void 0===e)return;let t=yield(0,en.T1)(e.users.getAuthenticated),a=t.data.login,s=aX.getState().playground.githubSaveInfo.repoName,i=aX.getState().playground.githubSaveInfo.filePath,n=t.data.email,r=t.data.name,o=yield(0,en.Lt)(e=>e.workspaces.playground.activeEditorTabIndex);if(null===o)throw Error("No active editor tab found.");let l=(yield(0,en.Lt)(e=>e.workspaces.playground.editorTabs))[o].value;te.R2(e,a,s,i,n,r,"Changes made from Source Academy",l)},[e7.A.githubSaveFileAs.type]:function*(){let e=te.oq();if(void 0===e)return;let t=yield(0,en.T1)(async()=>await e.paginate(e.repos.listForAuthenticatedUser,{per_page:100})),a=async()=>await (0,tx.P_)(tb,e=>({userRepos:t,onSubmit:e})),s=yield(0,en.T1)(a),i=yield(0,en.Lt)(e=>e.workspaces.playground.activeEditorTabIndex);if(null===i)throw Error("No active editor tab found.");let n=(yield(0,en.Lt)(e=>e.workspaces.playground.editorTabs))[i].value;if(""!==s){let t=async()=>await (0,tx.P_)(tg,t=>({repoName:s,pickerType:"Save",octokit:e,editorContent:n,onSubmit:t}));yield(0,en.T1)(t)}}});var tA=a(62878);function*tT(){let e=yield(0,en.Lt)(e=>e.languageDirectory);if(e.selectedLanguageId)return e.languageMap[e.selectedLanguageId]}function*tw(){let e=yield(0,en.Lt)(e=>e.languageDirectory);if(!e.selectedEvaluatorId)return;let t=yield(0,en.T1)(tT);if(t)return(0,v.JI)(t,e.selectedEvaluatorId)}let tS=(0,ew.zA)({[A.A.setLanguages.type]:function*(){let e=yield(0,en.Lt)(e=>e.languageDirectory);e.languages.length>0&&(yield(0,en.yJ)(A.A.setSelectedLanguage(e.languages[0].id)))},[A.A.fetchLanguages.type]:function*(){let e=yield(0,en.Lt)(tA.f),t=yield(0,en.T1)(fetch,e);if(!t.ok)throw Error(`Can't retrieve language directory: ${t.status}`);let a=yield(0,en.T1)([t,"json"]);yield(0,en.yJ)(A.A.setLanguages(a))},[A.A.setSelectedLanguage.type]:function*(){let e=yield(0,en.T1)(tT);e&&e.evaluators.length>0&&(yield(0,en.yJ)(A.A.setSelectedEvaluator(e.evaluators[0].id)))}}),tC=function*(){yield(0,en.Zy)(tS),yield(0,en.yJ)(A.A.fetchLanguages())},tI=(0,ew.zA)({[I.A.getOverallLeaderboardXP.type]:function*(e){let t=yield eE(),{page:a,pageSize:s}=e.payload,i=yield(0,en.T1)(el.NJ,a,s,t);i&&(yield(0,en.yJ)(eS.o.saveOverallLeaderboardXP(i)))},[I.A.getAllContestScores.type]:function*(e){let t=yield eE(),{assessmentId:a,visibleEntries:s}=e.payload,i=yield(0,en.T1)(el.Qh,a,s,t);i&&(yield(0,en.yJ)(eS.o.saveAllContestScores(i)))},[I.A.getAllContestPopularVotes.type]:function*(e){let t=yield eE(),{assessmentId:a,visibleEntries:s}=e.payload,i=yield(0,en.T1)(el.HL,a,s,t);i&&(yield(0,en.yJ)(eS.o.saveAllContestPopularVotes(i)))},[I.A.getContests.type]:function*(){let e=yield eE(),t=yield(0,en.T1)(el.F1,e);t&&(yield(0,en.yJ)(eS.o.saveContests(t)))}});var tE=a(64251),t_=a(46119);let tj=(0,ew.zA)({[ee.A.login.type]:function*({payload:e}){let t=yield(0,en.Lt)(e=>e.vscode.isVscode),a=(0,eC.mI)(e,t);a?t?(0,t_.h0)(t_.Ay.LoginWithBrowser(a)):window.location.href=a:yield(0,en.T1)(ed.JB,"Could not log in; invalid provider name provided.")},[ee.A.setUser.type]:function*(e){yield(0,en.T1)(tE.gV,{id:e.payload.userId.toString()})},[k.Ay.logOut.type]:function*(){yield(0,en.T1)(tE.gV,null)}}),tk=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],tN="https://www.googleapis.com/upload/drive/v3/files",tP="text/plain",tR=(0,ew.zA)({[eS.o.logoutGoogle.type]:{takeLatest:function*(){yield(0,en.yJ)(eS.o.playgroundUpdatePersistenceFile(void 0)),yield(0,en.T1)(tO),yield(0,en.T1)([gapi.auth2.getAuthInstance(),"signOut"])}},[eS.o.persistenceOpenPicker.type]:{takeLatest:function*(){let e;try{yield(0,en.T1)(tU);let{id:t,name:a,picked:s}=yield(0,en.T1)(tF,"Pick a file to open");if(!s||!(yield(0,en.T1)(tx.cu,{title:"Opening from Google Drive",contents:(0,tt.jsxs)("p",{children:["Opening ",(0,tt.jsx)("strong",{children:a})," will overwrite the current contents of your workspace. Are you sure?"]}),positiveLabel:"Open",negativeLabel:"Cancel"})))return;e=yield(0,en.T1)(ed.rG,{message:"Opening file...",timeout:0,intent:td.J.PRIMARY});let{result:i}=yield(0,en.T1)([gapi.client.drive.files,"get"],{fileId:t,fields:"appProperties"}),n=yield(0,en.T1)([gapi.client.drive.files,"get"],{fileId:t,alt:"media"}),r=yield(0,en.Lt)(e=>e.workspaces.playground.activeEditorTabIndex);if(null===r)throw Error("No active editor tab found.");yield(0,en.yJ)(eS.o.updateEditorValue("playground",r,n.body)),yield(0,en.yJ)(eS.o.playgroundUpdatePersistenceFile({id:t,name:a,lastSaved:new Date})),i&&i.appProperties&&(yield(0,en.yJ)(eS.o.chapterSelect(parseInt(i.appProperties.chapter||"4",10),i.appProperties.variant||eM.Variant.DEFAULT,"playground")),yield(0,en.yJ)(eS.o.externalLibrarySelect(Object.values(eD.O).find(e=>e===i.appProperties.external)||eD.O.NONE,"playground"))),yield(0,en.T1)(ed.uT,`Loaded ${a}.`,1e3)}catch(e){console.error(e),yield(0,en.T1)(ed.JB,"Error while opening file.",1e3)}finally{e&&(0,ed.X8)(e)}}},[eS.o.persistenceSaveFileAs.type]:{takeLatest:function*(){let e;try{yield(0,en.T1)(tU);let[t,a,s,i,n]=yield(0,en.Lt)(e=>[e.workspaces.playground.activeEditorTabIndex,e.workspaces.playground.editorTabs,e.workspaces.playground.context.chapter,e.workspaces.playground.context.variant,e.workspaces.playground.externalLibrary]);if(null===t)throw Error("No active editor tab found.");let r=a[t].value,o=yield(0,en.T1)(tF,"Pick a folder, or cancel to pick the root folder",{pickFolders:!0,showFolders:!0,showFiles:!1}),l=o.picked?o:{id:"root",name:"My Drive"},d=yield(0,en.T1)(tF,`Saving to ${l.name}; pick a file to overwrite, or cancel to save as a new file`,{pickFolders:!1,showFolders:!1,showFiles:!0,rootFolder:l.id});if(d.picked){if(!(yield(0,en.T1)(tx.cu,{title:"Saving to Google Drive",contents:(0,tt.jsxs)("span",{children:["Really overwrite ",(0,tt.jsx)("strong",{children:d.name}),"?"]})})))return;yield(0,en.yJ)(eS.o.playgroundUpdatePersistenceFile(d)),yield(0,en.yJ)(eS.o.persistenceSaveFile(d))}else{let t=yield(0,en.T1)(tx.Yp,{title:"Saving to Google Drive",contents:(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsxs)("p",{children:["Saving to folder ",(0,tt.jsx)("strong",{children:l.name}),"."]}),(0,tt.jsx)("p",{children:"Save as name?"})]}),positiveLabel:"Save as new file",negativeLabel:"Cancel",props:{validationFunction:e=>!!e}});if(!t.buttonResponse)return;e=yield(0,en.T1)(ed.rG,{message:`Saving as ${t.value}...`,timeout:0,intent:td.J.PRIMARY});let a=yield(0,en.T1)(tG,t.value,l.id,tP,r,{chapter:s,variant:i,external:n});yield(0,en.yJ)(eS.o.playgroundUpdatePersistenceFile({...a,lastSaved:new Date})),yield(0,en.T1)(ed.uT,`${t.value} successfully saved to Google Drive.`,1e3)}}catch(e){console.error(e),yield(0,en.T1)(ed.JB,"Error while saving file.",1e3)}finally{e&&(0,ed.X8)(e)}}},[eS.o.persistenceSaveFile.type]:function*({payload:{id:e,name:t}}){let a;try{a=yield(0,en.T1)(ed.rG,{message:`Saving as ${t}...`,timeout:0,intent:td.J.PRIMARY}),yield(0,en.T1)(tU);let{activeEditorTabIndex:s,editorTabs:i,context:{chapter:n,variant:r},externalLibrary:o}=yield*(0,eI.Iu)("playground");if(null===s)throw Error("No active editor tab found.");let l=i[s].value;yield(0,en.T1)(tz,e,t,tP,l,{chapter:n,variant:r,external:o}),yield(0,en.yJ)(eS.o.playgroundUpdatePersistenceFile({id:e,name:t,lastSaved:new Date})),yield(0,en.T1)(ed.uT,`${t} successfully saved to Google Drive.`,1e3)}catch(e){console.error(e),yield(0,en.T1)(ed.JB,"Error while saving file.",1e3)}finally{a&&(0,ed.X8)(a)}},[eS.o.persistenceInitialise.type]:tO}),tL=new Promise(e=>{s=e}).then(tD);function tM(e){aX.dispatch(eS.o.setGoogleUser(e.isSignedIn()?e.getBasicProfile().getEmail():void 0))}async function tD(){await new Promise((e,t)=>gapi.load("client:auth2",{callback:e,onerror:t})),await gapi.client.init({apiKey:$.A.googleApiKey,clientId:$.A.googleClientId,discoveryDocs:tk,scope:"profile https://www.googleapis.com/auth/drive.file"}),gapi.auth2.getAuthInstance().currentUser.listen(tM),tM(gapi.auth2.getAuthInstance().currentUser.get())}function*tO(){s(),yield tL}function*tU(){yield(0,en.T1)(tO),gapi.auth2.getAuthInstance().isSignedIn.get()||(yield gapi.auth2.getAuthInstance().signIn())}function tF(e,t){let a=void 0!==t?.pickFolders&&t?.pickFolders,s=void 0===t?.showFolders||t?.showFolders,i=void 0===t?.showFiles||t?.showFiles;return new Promise(n=>{gapi.load("picker",()=>{let r=new google.picker.DocsView(i?google.picker.ViewId.DOCS:google.picker.ViewId.FOLDERS);t?.rootFolder&&r.setParent(t.rootFolder),r.setOwnedByMe(!0),r.setIncludeFolders(s),r.setSelectFolderEnabled(a),r.setMode(google.picker.DocsViewMode.LIST),new google.picker.PickerBuilder().setTitle(e).enableFeature(google.picker.Feature.NAV_HIDDEN).addView(r).setOAuthToken(gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token).setAppId($.A.googleAppId).setDeveloperKey($.A.googleApiKey).setCallback(e=>{switch(e[google.picker.Response.ACTION]){case google.picker.Action.PICKED:{let{id:t,name:a,mimeType:s,parentId:i}=e.docs[0];n({id:t,name:a,mimeType:s,parentId:i,picked:!0});break}case google.picker.Action.CANCEL:n({picked:!1})}}).build().setVisible(!0)})})}async function tG(e,t,a,s="",i){let{body:n,headers:r}=tH({name:e,mimeType:a,parents:[t],appProperties:{source:!0,...i}},s,a),{result:o}=await gapi.client.request({path:tN,method:"POST",params:{uploadType:"multipart"},headers:r,body:n});return{id:o.id,name:o.name}}function tz(e,t,a,s="",i){let{body:n,headers:r}=tH({name:t,mimeType:a,appProperties:{source:!0,...i}},s,a);return gapi.client.request({path:tN+"/"+e,method:"PATCH",params:{uploadType:"multipart"},headers:r,body:n})}function tH(e,t,a){let s,i=JSON.stringify(e);do s=function(){let e="--------------------------";for(let t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);return e}();while(i.includes(s)||t.includes(s));return{body:`--${s}
Content-Type: application/json; charset=utf-8

${JSON.stringify(e)}
--${s}
Content-Type: ${a}

${t}
--${s}--
`,boundary:s,headers:{"Content-Type":`multipart/related; boundary=${s}`}}}var tB=a(32992),tV=a(95113),tJ=a(53351),tW=a(63557),tY=a(72442);let tX=(0,ew.zA)({[_.Ay.generateLzString.type]:function*(){let e=yield(0,en.Lt)(e=>e.fileSystem.inBrowserFileSystem),t=yield(0,en.T1)(tY.xe,"playground",e),{activeEditorTabIndex:a,context:{chapter:s,variant:i},editorTabs:n,execTime:r,externalLibrary:o,isFolderModeEnabled:l}=yield*(0,eI.Iu)("playground"),d=n.map(e=>e.filePath).filter(e=>void 0!==e),c=tV.A.stringify({isFolder:l,files:(0,tB.compressToEncodedURIComponent)(tV.A.stringify(t)),tabs:d.map(tB.compressToEncodedURIComponent),tabIdx:a,chap:s,variant:i,ext:o,exec:r});yield(0,en.yJ)(_.Ay.changeQueryString(c))},[_.Ay.shortenURL.type]:function*({payload:e}){let t,a,s=yield(0,en.Lt)(e=>e.playground.queryString),i="ERROR";try{let{result:i,hasTimedOut:n}=yield(0,en.O4)({result:(0,en.T1)(t$,s,e),hasTimedOut:(0,en.cb)(1e4)});t=i,a=n}catch(e){}return!t||a?(yield(0,en.yJ)(_.Ay.updateShortURL(i)),yield(0,en.T1)(ed.JB,"Something went wrong trying to create the link.")):"success"===t.status||t.shorturl?void("success"!==t.status&&(yield(0,en.T1)(ed.uT,t.message)),yield(0,en.yJ)(_.Ay.updateShortURL($.A.urlShortenerBase+t.url.keyword))):(yield(0,en.yJ)(_.Ay.updateShortURL(i)),yield(0,en.T1)(ed.JB,t.message))},[O.Ay.visitSideContent.type]:function*({payload:{newId:e,prevId:t,workspaceLocation:a}}){if("playground"!==a||e===t||"subst_visualiser"===t&&"mobile_editor_run"===e)return;let{context:{chapter:s},editorTabs:i}=yield*(0,eI.Iu)("playground");if("subst_visualiser"===t){if("mobile_editor_run"===e)return;i.find(({breakpoints:e})=>e.find(e=>!!e))||(yield(0,en.yJ)(Y.A.toggleUsingSubst(!1,a)),yield(0,en.yJ)(Y.A.clearReplOutput(a)))}"cse_machine"!==e&&(yield(0,en.yJ)(Y.A.toggleUsingCse(!1,a)),yield(0,en.T1)([tJ.A,tJ.A.clearCse]),yield(0,en.T1)([tW.L,tW.L.clearCse]),yield(0,en.yJ)(Y.A.updateCurrentStep(-1,a)),yield(0,en.yJ)(Y.A.updateStepsTotal(0,a)),yield(0,en.yJ)(Y.A.toggleUpdateCse(!0,a)),yield(0,en.yJ)(Y.A.setEditorHighlightedLines(a,0,[]))),s===eM.Chapter.FULL_JAVA&&"cse_machine"===e&&(yield(0,en.yJ)(Y.A.toggleUsingCse(!0,a))),(0,p.Kd)(s)&&("subst_visualiser"===e||"cse_machine"===e)&&(s<=eM.Chapter.SOURCE_2?yield(0,en.yJ)(Y.A.toggleUsingSubst(!0,a)):yield(0,en.yJ)(Y.A.toggleUsingCse(!0,a))),"upload"===e?yield(0,en.yJ)(Y.A.toggleUsingUpload(!0,a)):yield(0,en.yJ)(Y.A.toggleUsingUpload(!1,a)),(0,p.qq)(s)&&"cse_machine"===e&&(yield(0,en.yJ)(Y.A.toggleUsingCse(!0,a)))}});async function t$(e,t){let a=`${window.location.protocol}//${window.location.host}/playground#${e}`,s={method:"POST",body:Object.entries({signature:$.A.urlShortenerSignature,action:"shorturl",format:"json",keyword:t,url:a}).reduce((e,[t,a])=>(e.append(t,a),e),new FormData)},i=await fetch(`${$.A.urlShortenerBase}yourls-api.php`,s);return i&&i.ok?await i.json():null}a(72288);var tZ=a(71785);let tq=(0,ew.zA)({[S.A.fetchPlugins.type]:function*(){let e=yield(0,en.Lt)(tZ.a),t=yield(0,en.T1)(fetch,e);if(!t.ok)throw Error(`Can't retrieve plugin directory: ${t.status}`);let a=yield(0,en.T1)([t,"json"]);yield(0,en.yJ)(S.A.setPlugins(a))}}),tQ=function*(){yield(0,en.Zy)(tq),yield(0,en.yJ)(S.A.fetchPlugins())};var tK=a(71223),t0=a(57415),t1=a(58800),t2=a(82430),t3=a(49705).Buffer;let t4={start:{line:0,column:0},end:{line:0,column:0}},t5=(0,ew.zA)({[K.A.remoteExecFetchDevices.type]:{takeLatest:function*(){let[e,t]=yield(0,en.Lt)(e=>[{accessToken:e.session.accessToken,refreshToken:e.session.refreshToken},e.session.remoteExecutionSession]),a=yield(0,en.T1)(el.Uc,e);if(yield(0,en.yJ)(eS.o.remoteExecUpdateDevices(a)),!t)return;let s=a.find(({id:e})=>e===t.device.id);s&&(yield(0,en.yJ)(eS.o.remoteExecUpdateSession({...t,device:s})))}},[K.A.remoteExecConnect.type]:function*(e){let[t,a]=yield(0,en.Lt)(e=>[{accessToken:e.session.accessToken,refreshToken:e.session.refreshToken},e.session.remoteExecutionSession]),{device:s,workspace:i}=e.payload;yield(0,en.yJ)(eS.o.remoteExecUpdateSession({device:s,workspace:i,connection:{status:"CONNECTING"}}));let n=yield(0,en.T1)(el.EG,s,t);if(!n)return void(yield(0,en.yJ)(eS.o.remoteExecUpdateSession({...e.payload,connection:{status:"FAILED",error:"Could not retrieve MQTT endpoint"}})));let r=a?.connection.client;if(r)try{r.disconnect()}catch{}let o=new tK.SlingClient({clientId:`${n.clientNamePrefix}${t6()}`,deviceId:n.thingName,websocketEndpoint:n.endpoint});o.on("statusChange",e=>{aX.dispatch(eS.o.updateWorkspace(i,{isRunning:e}))}),o.on("monitor",e=>{let t=e[0].split(":")[1],a=`port${t.substring(t.length-1)}`,s=aX.getState().session.remoteExecutionSession,i=e=>aX.dispatch(eS.o.remoteExecUpdateSession({...s,device:{...s.device,peripherals:{...u().pickBy(s.device.peripherals,e=>Date.now()-e.lastUpdated<3e3),[a]:{...e,lastUpdated:Date.now()}}}}));if(e[1].endsWith("motor")){let t=e[1],a=parseInt(e[2]);i({type:t,position:a,speed:parseInt(e[3])})}else{let t=e[1],a=e[2];i({type:t,mode:a,value:parseInt(e[3])})}}),o.on("display",(e,t)=>{switch(t){case"output":aX.dispatch(eS.o.handleConsoleLog(i,`${e}`));break;case"error":{let t=new t1.ExceptionError(Error(`${e}`),t4);aX.dispatch(eS.o.evalInterpreterError([t],i));break}case"result":aX.dispatch(eS.o.evalInterpreterSuccess(e,i))}});let l=t2._.get(s.type);yield(0,en.yJ)(eS.o.remoteExecUpdateSession({device:s,workspace:i,connection:{status:"CONNECTING",client:o,endpoint:n}})),yield(0,en.yJ)(eS.o.updateWorkspace(i,{isRunning:!1,isEditorAutorun:!1,isDebugging:!1,externalLibrary:l?.deviceLibraryName,output:[]})),yield(0,en.yJ)(eS.o.beginClearContext(i,{chapter:l?.languageChapter||eM.Chapter.SOURCE_3,variant:eM.Variant.DEFAULT,external:{name:l?.deviceLibraryName||eD.O.NONE,symbols:l?.internalFunctions||[]},globals:[]},!1));try{let t=new Promise((e,t)=>{try{o.once("connect",()=>e(!0)),o.once("error",t),o.connect()}catch{t()}});(yield(0,en.O4)({connect:t,reconnect:(0,en.s)(K.A.remoteExecConnect.type),disconnect:(0,en.s)(K.A.remoteExecDisconnect.type)})).connect?yield(0,en.yJ)(eS.o.remoteExecUpdateSession({...e.payload,connection:{status:"CONNECTED",client:o,endpoint:n}})):o.disconnect()}catch(t){o.disconnect(),yield(0,en.yJ)(eS.o.remoteExecUpdateSession({...e.payload,connection:{status:"FAILED",client:o,error:t.toString()}}))}},[K.A.remoteExecDisconnect.type]:function*(e){let t=yield(0,en.Lt)(e=>e.session.remoteExecutionSession);if(!t)return;let a=t.connection.client;a&&a.disconnect(),yield(0,en.yJ)(eS.o.remoteExecUpdateSession(void 0)),yield(0,en.yJ)(eS.o.externalLibrarySelect(eD.O.NONE,t.workspace,!0))},[K.A.remoteExecRun.type]:function*(e){let{files:t,entrypointFilePath:a}=e.payload,s=yield(0,en.Lt)(e=>e.session.remoteExecutionSession);if(!s)return;if("CONNECTED"!==s.connection.status)return void(yield(0,en.yJ)(eS.o.updateWorkspace(s.workspace,{isRunning:!1})));yield(0,en.yJ)(eS.o.clearReplOutput(s.workspace));let i=s.connection.client,n=yield(0,en.Lt)(e=>e.workspaces[s.workspace].context);n.errors.length=0;let r=yield(0,en.T1)(t0.compileFiles,t,a,n,t2._.get(s.device.type)?.internalFunctions);if(!r)return void(yield(0,en.yJ)(eS.o.evalInterpreterError(n.errors,s.workspace)));let o=(0,t0.assemble)(r);i.sendRun(t3.from(o))},[V.A.beginInterruptExecution.type]:function*(){let e=yield(0,en.Lt)(e=>e.session.remoteExecutionSession);e&&"CONNECTED"===e.connection.status&&e.connection.client.sendStop()}}),t8="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t6=()=>Array(16).fill(void 0).map(e=>t8[Math.floor(Math.random()*t8.length)]).join(""),t9=(0,ew.zA)({[O.Ay.beginAlertSideContent.type]:function*({payload:{id:e,workspaceLocation:t}}){yield(0,en.s)(e=>(e.type===O.Ay.spawnSideContent.type||e.payload?.id!=="session_management")&&e.payload.workspaceLocation===t),yield(0,en.yJ)(O.Ay.endAlertSideContent(e,t))},[Y.A.notifyProgramEvaluated.type]:function*(e){if(!e.payload.workspaceLocation||"stories"===e.payload.workspaceLocation)return;let t={result:e.payload.result,lastDebuggerResult:e.payload.lastDebuggerResult,code:e.payload.code,context:e.payload.context,workspaceLocation:e.payload.workspaceLocation};yield(0,en.yJ)(O.Ay.spawnSideContent(e.payload.workspaceLocation,t))},[N.A.notifyStoriesEvaluated.type]:function*(e){yield(0,en.yJ)(O.Ay.spawnSideContent(`stories.${e.payload.env}`,e.payload))}});var t7=a(30796),ae=a(21802),at=a(11978),aa=a(74922),as=a(7002),ai=a(82772),an=a(17913);async function ar(e,t){return{printFunction:e=>{void 0!==window.__REDUX_STORE__&&window.__REDUX_STORE__.dispatch(V.A.handleConsoleLog(t.externalContext,e))},externalFunctions:await ad(e,t)}}let ao=new Set(["pix_n_flix","sound","plotly"]),al=null;async function ad(e,t){let a={},s=e.match(/<[a-z0-9_]+>/g);if(!s)return a;let i=new Set(s.map(e=>e.slice(1,e.length-1)).filter(e=>ao.has(e)));Object.values(await (0,an.default)(i,t,!0)).forEach(e=>{Object.entries(e).forEach(([e,t])=>{a[e]=t})});let n=a.start;return a.start=()=>{al=n()},a}var ac=a(28746),au=a(48753),ah=a(88274),ap=a(77034),am=a(73768),ag=a(49705).Buffer;async function ay(e,t,s,i,n){let r={},o=(e,a)=>{t.errors.push({type:e,severity:"Error",location:{start:{line:-1,column:-1},end:{line:-1,column:-1}},explain:()=>a,elaborate:()=>a})},l={},d=[],c=e=>{let t=l[e];if(!t&&e){let a=e.split("/");a.pop();let s=a.join("_"),i=new XMLHttpRequest;if(i.open("GET",`${$.A.javaPackagesUrl}${s}.json`,!1),i.send(null),200!==i.status)throw Error("File not found: "+e);let n=JSON.parse(i.responseText);if(!(l={...l,...n})[e])throw Error("File not found: "+e);t=l[e]}let a=atob(t),s=new Uint8Array(a.length);for(let e=0;e<a.length;e++)s[e]=a.charCodeAt(e);return(0,ah.parseBin)(new DataView(s.buffer))},u=async e=>{if(e.startsWith("modules")){let a=e.split("/")[1],s=await (0,an.default)(new Set([a]),t,!0),{proxy:i}=(0,ap.createModuleProxy)(a,s[a]);return{default:i}}return await a(4310)(`./${e}.js`)},h=e=>{if(e.endsWith("\n")){d.push(e);let a=d.join("").split("\n");a.pop(),a.forEach(e=>am.A.push(e,t.externalContext)),d=[]}else d.push(e)};if(n?.uploadIsActive){if(r=n.uploads??{},!n.uploads)return o("Compile","No files uploaded"),Promise.resolve({status:"error"})}else{let a=(0,ac.typeCheck)(e);if(a.hasTypeErrors)return o("TypeCheck",a.errorMsgs.join("\n")),Promise.resolve({status:"error"});if(i)return await af(e,s,t);try{let t=(0,ac.compileFromSource)(e);r={"Main.class":ag.from(new au.BinaryWriter().generateBinary(t)).toString("base64")}}catch(e){return o("Compile",e),Promise.resolve({status:"error"})}}return(0,ap.loadCachedFiles)(()=>fetch($.A.javaPackagesUrl+"_base.json").then(e=>e.json()).then(e=>e)).then(e=>(l={...e,...r},new Promise((e,a)=>{(0,ah.default)({javaClassPath:"",nativesPath:"",callbacks:{readFileSync:c,readFile:u,stdout:h,stderr:e=>o("Runtime",e),onFinish:()=>{e(t.errors.length?{status:"error"}:{status:"finished",context:t,value:new class{toString(){return" "}}})}},natives:{}})()}))).catch(()=>({status:"error"}))}async function af(e,t,a){return a.executionMethod="cse-machine",ac.ECE.runECEvaluator(e,t).then(e=>(a.runtime.envStepsTotal=e.context.totalSteps,"error"===e.status&&(a.errors=e.context.errors.map(e=>({type:as.ErrorType.RUNTIME,severity:as.ErrorSeverity.ERROR,location:{start:{line:0,column:0},end:{line:0,column:0}},explain:()=>e.explain(),elaborate:()=>e.explain()}))),e)).catch(e=>(console.error(e),{status:"error",context:a}))}var ab=a(37429),ax=a(27778);class av extends ax.K{requestFile(e){return this.__onRequestFile(e)}requestLoadPlugin(e){return this.__onRequestLoadPlugin(e)}__onRequestFile;__onRequestLoadPlugin;static channelAttach=super.channelAttach;constructor(e,t,a,s){super(e,t),this.__onRequestFile=a,this.__onRequestLoadPlugin=s}}function aA(e,t,a){let s=new Worker(e),i=new ab.H9(s,!0);return{hostPlugin:i.registerPlugin(av,t,a),conduit:i}}var aT=a(19874);let aw="EVAL_SILENT";function*aS(e,t=!1,a){t?yield(0,en.yJ)(eS.o.handleStoriesConsoleLog(a,...am.A.dump())):yield(0,en.yJ)(eS.o.handleConsoleLog(e,...am.A.dump()))}function*aC(e){try{let[t,a]=yield(0,en.Lt)(t=>[t.workspaces[e].lastDebuggerResult,t.workspaces[e].context.chapter]);if(!t)return void(yield(0,en.yJ)(eS.o.setEditorHighlightedLines(e,0,[])));if(a===eM.Chapter.FULL_JAVA){let a=t.context.control.peek(),s=-1,i=-1;if(a?.srcNode?.location){let e=a.srcNode;s=e.location.startLine-1,i=e.location.endLine?e.location.endLine-1:s}yield(0,en.yJ)(eS.o.setEditorHighlightedLines(e,0,[])),yield(0,en.yJ)(eS.o.setEditorHighlightedLines(e,0,[[s,i]])),function({context:e}){try{tW.L.drawCse(e)}catch(e){throw Error("Java CSE machine is not enabled")}}(t)}else{let a=t?.context?.runtime?.nodes?.[0],s=a?.loc?.start?.line!==void 0?a.loc.start.line-1:-1;yield(0,en.yJ)(eS.o.setEditorHighlightedLines(e,0,[])),yield(0,en.yJ)(eS.o.setEditorHighlightedLines(e,0,[[s,s]])),(0,W.Pc)(t)}}catch(t){yield(0,en.yJ)(eS.o.setEditorHighlightedLines(e,0,[]))}}async function aI(e,t,a){try{let s=await ai.compile(e,t,a),i=new ai.Transcoder,n=await ai.run(s,ai.makePlatformImports({display:e=>{void 0!==window.__REDUX_STORE__&&window.__REDUX_STORE__.dispatch(V.A.handleConsoleLog(t.externalContext,e))}},i),i,t,a);return{status:"finished",context:t,value:n}}catch(e){return console.log(e),{status:"error",context:t}}}async function aE(e,t){var a,s;let i=await ar(e,t);try{let s=await (0,ae.s9)(e,i);if("failure"===s.status)return a=`Compilation failed with the following error(s):

${s.errorMessage}`,t.errors.push({type:as.ErrorType.SYNTAX,severity:as.ErrorSeverity.ERROR,location:{start:{line:0,column:0},end:{line:0,column:0}},explain:()=>a,elaborate:()=>""}),{status:"error",context:t};if(s.warnings.length>0)return{status:"finished",context:t,value:{toReplString:()=>`Compilation and program execution successful with the following warning(s):
${s.warnings.join("\n")}`}};if(null===al)return{status:"finished",context:t,value:{toReplString:()=>"Compilation and program execution successful."}};return{status:"finished",context:t,value:al}}catch(e){return console.log(e),s=e.message,t.errors.push({type:as.ErrorType.RUNTIME,severity:as.ErrorSeverity.ERROR,location:{start:{line:0,column:0},end:{line:0,column:0}},explain:()=>s,elaborate:()=>""}),{status:"error",context:t}}}function*a_(e,t,a,s,i,n,r){if(yield(0,en.Lt)(aT.n))return yield(0,en.T1)(ak,e,t,a,s,n,i,r);a.runtime.debuggerOn=(i===Y.A.evalEditor.type||i===V.A.debuggerResume.type)&&a.chapter>2;let o=i===eS.o.evalStory.type||"stories"===n,l=e[t],{currentStep:d,cseIsActive:u,isFolderModeEnabled:h,needUpdateCse:m,stepLimit:g,substIsActive:y}=yield*function*(){let e=yield*(0,eI.Iu)(n),t=(0,c.pick)(e,["isFolderModeEnabled","stepLimit"]);if("sicp"===n||"playground"===n){let{currentStep:e,updateCse:a,usingCse:s,usingSubst:i}=yield*(0,eI.Iu)(n);return{...t,currentStep:a?-1:e,cseIsActive:s,needUpdateCse:a,substIsActive:i}}if(o){let{usingSubst:e}=yield*(0,eI.BI)(r);return{...t,currentStep:-1,cseIsActive:!1,needUpdateCse:!1,substIsActive:e}}return{...t,currentStep:-1,cseIsActive:!1,needUpdateCse:!1,substIsActive:!1}}(),f=((0,p.qq)(a.chapter)||a.chapter>=eM.Chapter.SOURCE_3)&&u;f&&(a.executionMethod="cse-machine"),(a.chapter===eM.Chapter.FULL_JS||a.chapter===eM.Chapter.FULL_TS)&&(yield(0,en.T1)([am.A,am.A.attachConsole],n));let{result:b,interrupted:x,paused:v}=yield(0,en.O4)({result:yield*function*(){if(i===V.A.debuggerResume.type){let{lastDebuggerResult:e}=yield*(0,eI.Iu)(n);return(0,en.T1)(t0.resume,e)}if(a.variant===eM.Variant.WASM)return(0,en.T1)(aI,l,a,i===Y.A.evalRepl.type);switch(a.chapter){case eM.Chapter.FULL_C:return(0,en.T1)(aE,l,a);case eM.Chapter.FULL_JAVA:{let{usingCse:e,usingUpload:t,files:s}=yield*(0,eI.Iu)("playground");return(0,en.T1)(ay,l,a,d,e,{uploadIsActive:t,uploads:s})}}let r=a.chapter<=eM.Chapter.SOURCE_2&&y;return(0,en.T1)(t0.runFilesInContext,h?e:{[t]:e[t]},t,a,{originalMaxExecTime:s,stepLimit:g,throwInfiniteLoops:!0,useSubst:r,envSteps:d,executionMethod:f?"cse-machine":"auto"})}(),interrupted:(0,en.s)(V.A.beginInterruptExecution.type),paused:(0,en.s)(V.A.beginDebuggerPause.type)});if(x){(0,t0.interrupt)(a),a.errors.push(new t1.InterruptedError(a.runtime.nodes[0])),yield(0,en.yJ)(eS.o.debuggerReset(n)),yield(0,en.yJ)(eS.o.endInterruptExecution(n)),yield(0,en.T1)(ed.JB,"Execution aborted",750);return}if(v){yield(0,en.yJ)(eS.o.endDebuggerPause(n)),yield(0,en.T1)(aC,n),yield(0,en.T1)(ed.JB,"Execution paused",750);return}if(i===Y.A.evalEditor.type&&(yield(0,en.yJ)(eS.o.updateLastDebuggerResult(b,n))),o||(yield(0,en.T1)(aC,n)),"suspended-cse-eval"===b.status){yield(0,en.yJ)(eS.o.endDebuggerPause(n)),yield(0,en.yJ)(eS.o.evalInterpreterSuccess("Breakpoint hit!",n));return}if("finished"!==b.status){if(yield*aS(n,o,r),o)yield(0,en.yJ)(eS.o.evalStoryError(a.errors,r));else{let e=function(e){if(1!==e.length)return null;let t=e[0];return"string"==typeof t.error&&aN.includes(t.error)?t.error:null}(a.errors);null!==e?"source_academy_interrupt"===e?yield*function*(e,t,a){yield(0,en.yJ)(eS.o.evalInterpreterSuccess("Program has been interrupted by module",a)),e.errors=[],yield(0,en.yJ)(eS.o.notifyProgramEvaluated(null,null,t,e,a))}(a,l,n):yield(0,en.yJ)(eS.o.evalInterpreterError(a.errors,n)):(yield(0,en.yJ)(eS.o.evalInterpreterError(a.errors,n)),"cse-machine"===a.executionMethod&&m&&(yield(0,en.yJ)(eS.o.updateStepsTotal(a.runtime.envStepsTotal+1,n)),yield(0,en.yJ)(eS.o.toggleUpdateCse(!1,n)),yield(0,en.yJ)(eS.o.updateBreakpointSteps(a.runtime.breakpointSteps,n)),yield(0,en.yJ)(eS.o.updateChangePointSteps(a.runtime.changepointSteps,n))))}let e=a.errors.length>0?[e3.Bx.ERROR]:[];yield(0,en.yJ)(eS.o.addEvent(e));return}if(yield*aS(n,o,r),i===Y.A.evalEditor.type&&"assessment"===n){let e=[...(0,at.OH)(l,aa.ACORN_PARSE_OPTIONS)].length;yield(0,en.yJ)(eS.o.setTokenCount(n,e))}i!==aw&&(o?yield(0,en.yJ)(eS.o.evalStorySuccess(b.value,r)):yield(0,en.yJ)(eS.o.evalInterpreterSuccess(b.value,n)));let A=yield(0,en.Lt)(e=>e.workspaces[n].lastDebuggerResult);(i===Y.A.evalEditor.type||i===Y.A.evalRepl.type||i===V.A.debuggerResume.type)&&(a.errors.length>0&&(yield(0,en.yJ)(eS.o.addEvent([e3.Bx.ERROR]))),yield(0,en.yJ)(Y.A.notifyProgramEvaluated(b,A,l,a,n))),o&&(yield(0,en.yJ)(N.A.notifyStoriesEvaluated(b,A,l,a,r))),"cse-machine"===a.executionMethod&&m&&(yield(0,en.yJ)(eS.o.updateStepsTotal(a.runtime.envStepsTotal,n)),yield(0,en.yJ)(eS.o.toggleUpdateCse(!1,n)),yield(0,en.yJ)(eS.o.updateBreakpointSteps(a.runtime.breakpointSteps,n)),yield(0,en.yJ)(eS.o.updateChangePointSteps(a.runtime.changepointSteps,n))),"cse-machine"===a.executionMethod&&("stories"!==n?yield(0,en.yJ)(eS.o.removeSideContentAlert("introduction",n)):yield(0,en.yJ)(eS.o.removeSideContentAlert("introduction",`stories.${r}`)))}function*aj(e,t){let a=(0,h.Od)(t=>(e.receiveOutput=t,()=>{e.receiveOutput===t&&delete e.receiveOutput}));try{for(;;){let e=yield(0,en.s)(a);yield(0,en.yJ)(eS.o.handleConsoleLog(t,e))}}finally{(yield(0,en.KW)())&&a.close()}}function*ak(e,t,a,s,i,n,r){let o=yield(0,en.T1)(tw);if(!o?.path){let{timeout:e}=yield(0,en.O4)({evaluatorSelected:(0,en.s)(A.A.setSelectedEvaluator.type),timeout:(0,en.T1)(()=>new Promise(e=>setTimeout(()=>e(!0),5e3)))});if(e)throw Error("language directory could not be loaded in time");if(o=yield(0,en.T1)(tw),!o?.path)throw Error("no evaluator")}let l=o.path,d=yield(0,en.T1)(fetch,l);if(!d.ok)throw Error("can't get evaluator");let c=yield(0,en.T1)([d,"blob"]),u=yield(0,en.T1)(URL.createObjectURL,c),{hostPlugin:h,conduit:p}=yield(0,en.T1)(aA,u,async t=>e[t],e=>{}),m=yield(0,en.Zy)(aj,h,i);for(yield(0,en.T1)([h,"startEvaluator"],t);;){let{stop:e}=yield(0,en.O4)({repl:(0,en.s)(eS.o.evalRepl.type),stop:(0,en.s)(eS.o.beginInterruptExecution.type)});if(e)break;let t=yield(0,en.Lt)(e=>e.workspaces[i].replValue);yield(0,en.yJ)(eS.o.sendReplInputToOutput(t,i)),yield(0,en.yJ)(eS.o.clearReplInput(i)),yield(0,en.T1)([h,"sendChunk"],t)}yield(0,en.T1)([p,"terminate"]),yield(0,en.ZT)(m),yield(0,en.yJ)(eS.o.endInterruptExecution(i)),console.log("killed"),yield(0,en.T1)(URL.revokeObjectURL,u)}let aN=["source_academy_interrupt"],aP=(0,ew.zA)({[N.A.getStoriesList.type]:{takeLatest:function*(){let e=yield eE(),t=yield(0,en.T1)(async()=>await eg(e)??[]);yield(0,en.yJ)(eS.o.updateStoriesList(t))}},[N.A.setCurrentStoryId.type]:function*(e){let t=yield eE(),a=e.payload;if(a){let e=yield(0,en.T1)(ey,t,a);yield(0,en.yJ)(eS.o.setCurrentStory(e))}else{let e={title:"",content:t7.kp,pinOrder:null};yield(0,en.yJ)(eS.o.setCurrentStory(e))}},[N.A.createStory.type]:function*(e){let t=yield eE(),a=e.payload,s=yield(0,en.Lt)(e=>e.stories.userId);if(void 0===s)return void(yield(0,en.T1)(ed.JB,"Failed to create story: Invalid user"));let i=yield(0,en.T1)(ef,t,s,a.title,a.content,a.pinOrder);i&&(yield(0,en.yJ)(eS.o.setCurrentStoryId(i.id))),yield(0,en.yJ)(eS.o.getStoriesList())},[N.A.saveStory.type]:function*(e){let t=yield eE(),{story:a,id:s}=e.payload,i=yield(0,en.T1)(eb,t,s,a.title,a.content,a.pinOrder);i&&(yield(0,en.yJ)(eS.o.setCurrentStory(i))),yield(0,en.yJ)(eS.o.getStoriesList())},[N.A.deleteStory.type]:function*(e){let t=yield eE(),a=e.payload;yield(0,en.T1)(ex,t,a),yield(0,en.yJ)(eS.o.getStoriesList())},[N.A.getStoriesUser.type]:function*(){let e=yield eE(),t=yield(0,en.T1)(ep,e);if(!t){yield(0,en.yJ)(eS.o.setCurrentStoriesUser(void 0,void 0)),yield(0,en.yJ)(eS.o.setCurrentStoriesGroup(void 0,void 0,void 0));return}yield(0,en.yJ)(eS.o.setCurrentStoriesUser(t.id,t.name)),yield(0,en.yJ)(eS.o.setCurrentStoriesGroup(t.groupId,t.groupName,t.role))},[N.A.evalStory.type]:function*(e){let t=e.payload.env,a=e.payload.code,s=yield(0,en.Lt)(e=>e.stories.envs[t].execTime),i=yield(0,en.Lt)(e=>e.stories.envs[t].context),n="/code.js";yield(0,en.yJ)((0,O.SS)(`stories.${t}`)),yield(0,en.T1)(a_,{[n]:a},n,i,s,e.type,"stories",t)},[N.A.fetchAdminPanelStoriesUsers.type]:function*(e){let t=yield eE(),a=yield(0,en.T1)(ev,t);a&&(yield(0,en.yJ)(eS.o.setAdminPanelStoriesUsers(a)))},[ee.A.updateStoriesUserRole.type]:function*(e){let t=yield eE(),{userId:a,role:s}=e.payload;(yield(0,en.T1)(eA,t,a,s))&&(yield(0,en.yJ)(eS.o.fetchAdminPanelStoriesUsers()),yield(0,en.T1)(ed.uT,"Role updated!"))},[ee.A.deleteStoriesUserUserGroups.type]:function*(e){let t=yield eE(),{userId:a}=e.payload;(yield(0,en.T1)(eT,t,a))&&(yield(0,en.yJ)(eS.o.fetchAdminPanelStoriesUsers()),yield(0,en.T1)(ed.uT,"Stories user deleted!"))}});var aR=a(4440),aL=a.n(aR),aM=a(12681),aD=a(99475),aO=a(98396),aU=a(52519);function*aF(e,t,a,s,i){let n=(0,W.FX)(e,t);if(i){let t=(0,W.$L)(n,i),r="/storeValues.js";yield(0,en.T1)(a_,{[r]:t},r,e,a,aw,s)}let r=t.variant===eM.Variant.TYPED?(0,W.Yn)(n):(0,W.rh)(n),o="/nullifier.js";yield(0,en.T1)(a_,{[o]:r},o,e,a,aw,s)}var aG=a(72712);function*az(e,t){let{context:{chapter:a,externalSymbols:s,variant:i,languageOptions:n},externalLibrary:r,globals:o}=yield*(0,eI.Iu)(e);yield(0,en.yJ)(eS.o.beginClearContext(e,{chapter:a,variant:i,external:{name:r,symbols:s},globals:o,languageOptions:n},!1)),yield(0,en.s)(Y.A.endClearContext.type);let l=yield(0,en.Lt)(t=>t.workspaces[e].context);(0,aG.defineSymbol)(l,"__PROGRAM__",t)}var aH=a(32256);function*aB(e){let t,{activeEditorTabIndex:a,programPrependValue:s,editorTabs:i,execTime:n,isFolderModeEnabled:r}=yield*(0,eI.Iu)(e),[o,l]=yield(0,en.Lt)(e=>[e.fileSystem.inBrowserFileSystem,e.session.remoteExecutionSession]);if(null===a)throw Error("Cannot evaluate program without an entrypoint file.");let d=`${aD.V[e]}/program.js`;t=r?yield(0,en.T1)(tY.xe,e,o):{[d]:i[a].value};let c=i[a].filePath??d;if(yield(0,en.yJ)(eS.o.addEvent([e3.Bx.RUN_CODE])),l&&l.workspace===e)yield(0,en.yJ)(eS.o.remoteExecRun(t,c));else{yield(0,en.yJ)(eS.o.beginInterruptExecution(e));let a=t[c];yield*az(e,a),yield(0,en.yJ)(eS.o.clearReplOutput(e));let r=yield(0,en.Lt)(t=>t.workspaces[e].context);for(let a of i){let s=a.filePath??d,i=a.value,n=a.breakpoints;t[s]=yield*function*(e,t,a,s){if((0,p.Kd)(s.chapter)&&(0,aH.parse)(t,s),s.errors.length>0)return s.errors=[],t;let i=t.split("\n"),n=t;for(let r=0;r<a.length;r++)if(a[r]&&(i[r]="debugger;"+i[r],n=i.join("\n"),(0,p.Kd)(s.chapter)&&(0,aH.parse)(n,s),s.errors.length>0)){let a=`Hint: Misplaced breakpoint at line ${r+1}.`;return yield(0,en.yJ)(eS.o.sendReplInputToOutput(a,e)),t}return n}(e,i,n,r)}if(s.length){let t=(0,W.ms)(r),a="/prepend.js";r.variant!==eM.Variant.TYPED&&(yield(0,en.T1)(a_,{[a]:s},a,t,n,aw,e)),yield*aF(t,r,n,e)}if(r.variant===eM.Variant.TYPED){let e=s.split("\n").join("");t[c]=e+t[c]}yield(0,en.T1)(a_,t,c,r,n,Y.A.evalEditor.type,e)}}function*aV(e,t){let{editorTabs:{0:{value:a}},editorTestcases:{[t]:{program:s,type:i}},execTime:n,programPrependValue:r,programPostpendValue:o}=yield*(0,eI.Iu)(e);yield*az(e,a);let l=yield(0,en.Lt)(t=>t.workspaces[e].context),d=(0,W.ms)(l),u="/prepend.js";yield(0,en.T1)(a_,{[u]:r},u,d,n,aw,e);let h=String((0,c.random)(1048576,0x1000000000));yield*aF(d,l,n,e,h);let p="/value.js";if(yield(0,en.T1)(a_,{[p]:a},p,l,n,aw,e),l.errors.length)return yield(0,en.yJ)(eS.o.evalTestcaseFailure(l.errors,e,t)),!1;if(o){yield*function*(e,t,a,s,i){let n=(0,W.FX)(e,t),r=(0,W.wA)(n,i),o="/restorer.js";yield(0,en.T1)(a_,{[o]:r},o,e,a,aw,s)}(d,l,n,e,h);let t="/postpend.js";yield(0,en.T1)(a_,{[t]:o},t,d,n,aw,e),yield*aF(d,l,n,e,h)}return yield*function*(e,t,a,s,i,n){yield(0,en.yJ)(eS.o.resetTestcase(s,i));let{result:r,interrupted:o}=yield(0,en.O4)({result:(0,en.T1)(t0.runInContext,e,t,{originalMaxExecTime:a,throwInfiniteLoops:!0}),interrupted:(0,en.s)(V.A.beginInterruptExecution.type)});if(o){(0,t0.interrupt)(t),yield*aS(s),t.errors.push(new t1.InterruptedError(t.runtime.nodes[0])),yield(0,en.yJ)(eS.o.endInterruptExecution(s)),yield(0,en.T1)(ed.JB,`Execution of testcase ${i} aborted`,750);return}yield*aS(s),"error"===r.status?(yield(0,en.yJ)(eS.o.evalInterpreterError(t.errors,s)),yield(0,en.yJ)(eS.o.evalTestcaseFailure(t.errors,s,i))):"finished"===r.status&&(yield(0,en.yJ)(eS.o.evalInterpreterSuccess(r.value,s)),yield(0,en.yJ)(eS.o.evalTestcaseSuccess(r.value,s,i))),"opaque"===n&&(yield(0,en.yJ)(eS.o.clearReplOutputLast(s)))}(s,d,n,e,t,i),!0}let aJ=(0,ew.zA)({[Y.A.addHtmlConsoleError.type]:function*(e){e.payload.storyEnv?yield(0,en.yJ)(eS.o.handleStoriesConsoleLog(e.payload.storyEnv,e.payload.errorMsg)):yield(0,en.yJ)(eS.o.handleConsoleLog(e.payload.workspaceLocation,e.payload.errorMsg))},[Y.A.toggleFolderMode.type]:function*(e){let t=e.payload.workspaceLocation,a=yield(0,en.Lt)(e=>e.workspaces[t].isFolderModeEnabled);yield(0,en.yJ)(eS.o.setFolderMode(t,!a));let s=`Folder mode ${!a?"enabled":"disabled"}`;yield(0,en.T1)(ed.JB,s,750)},[Y.A.setFolderMode.type]:function*(e){let t=e.payload.workspaceLocation,{editorTabs:a,isFolderModeEnabled:s}=yield*(0,eI.Iu)(t);if(!s&&0===a.length){let e=`${aD.V[t]}/program.js`,a=yield(0,en.Lt)(e=>e.fileSystem.inBrowserFileSystem);if(null===a)return void(yield(0,en.yJ)(eS.o.addEditorTab(t,e,p.MP)));let s=yield new Promise((t,s)=>{a.exists(e,i=>{i?a.readFile(e,"utf-8",(e,a)=>{e?s(e):void 0===a?s(Error("File exists but has no contents.")):t(a)}):(0,tY.Xz)(a,e,p.MP).then(()=>t(p.MP)).catch(e=>s(e))})});yield(0,en.yJ)(eS.o.addEditorTab(t,e,s))}},[Y.A.updateEditorValue.type]:function*(e){let t=e.payload.workspaceLocation,a=e.payload.editorTabIndex,s=yield(0,en.Lt)(e=>e.workspaces[t].editorTabs[a].filePath);if(void 0===s)return;let i=yield(0,en.Lt)(e=>e.fileSystem.inBrowserFileSystem);null!==i&&i.writeFile(s,e.payload.newEditorValue,e=>{e&&console.error(e)})},[Y.A.evalEditor.type]:({payload:{workspaceLocation:e}})=>aB(e),[Y.A.promptAutocomplete.type]:function*(e){let t,a=e.payload.workspaceLocation,{activeEditorTabIndex:s,editorTabs:i,context:n,externalLibrary:r,programPrependValue:o}=yield*(0,eI.Iu)(a),l=i[s??0].value,d=0;o?(d=o.split("\n").length,t=o+"\n"+l):t=l;let[c,u]=yield(0,en.T1)(t0.getNames,t,e.payload.row+d,e.payload.column,n);if(!u)return void(yield(0,en.T1)(e.payload.callback));let h=c.map(e=>({...e,caption:e.name,value:e.name,score:e.score?e.score+1e3:1e3,name:void 0})),p=n.chapter.toString(),m=n.variant??eM.Variant.DEFAULT;m!==eM.Variant.DEFAULT&&(p+="_"+m);let g=aO.H.builtins[p]||[],y=aO.H.externalLibraries[r]||[];yield(0,en.T1)(e.payload.callback,null,h.concat(g,y))},[Y.A.toggleEditorAutorun.type]:function*(e){let t=e.payload.workspaceLocation,a=yield(0,en.Lt)(e=>e.workspaces[t].isEditorAutorun);yield(0,en.T1)(ed.JB,"Autorun "+(a?"Started":"Stopped"),750)},[Y.A.evalRepl.type]:function*(e){if(yield(0,en.Lt)(aT.n))return;let t=e.payload.workspaceLocation,{replValue:a,execTime:s}=yield*(0,eI.Iu)(t);yield(0,en.yJ)(eS.o.beginInterruptExecution(t)),yield(0,en.yJ)(eS.o.clearReplInput(t)),yield(0,en.yJ)(eS.o.sendReplInputToOutput(a,t));let i=yield(0,en.Lt)(e=>e.workspaces[t].context);i.errors=[];let n="/code.js";yield(0,en.T1)(a_,{[n]:a},n,i,s,Y.A.evalRepl.type,t)},[V.A.debuggerResume.type]:function*(e){let t=e.payload.workspaceLocation,a=yield(0,en.Lt)(e=>e.workspaces[t].editorTabs[0].value),s=yield(0,en.Lt)(e=>e.workspaces[t].execTime);yield(0,en.yJ)(eS.o.beginInterruptExecution(t)),yield(0,en.yJ)(eS.o.clearReplOutput(t));let i=yield(0,en.Lt)(e=>e.workspaces[t].context);yield(0,en.yJ)(eS.o.setEditorHighlightedLines(t,0,[]));let n="/code.js";yield(0,en.T1)(a_,{[n]:a},n,i,s,V.A.debuggerResume.type,t)},[V.A.debuggerReset.type]:function*(e){let t=e.payload.workspaceLocation,a=yield(0,en.Lt)(e=>e.workspaces[t].context);yield(0,en.yJ)(eS.o.clearReplOutput(t)),yield(0,en.yJ)(eS.o.setEditorHighlightedLines(t,0,[])),a.runtime.break=!1,yield(0,en.yJ)(eS.o.updateLastDebuggerResult(void 0,t))},[Y.A.setEditorHighlightedLines.type]:function*({payload:{newHighlightedLines:e}}){if(0===e.length)yield(0,en.T1)(W.eq);else try{for(let[t,a]of e)for(let e=t;e<=a;e++)yield(0,en.T1)(W.NK,e)}catch(e){}},[Y.A.setEditorHighlightedLinesControl.type]:function*({payload:{newHighlightedLines:e}}){if(0===e.length)yield(0,en.T1)(W.kd);else try{for(let[t,a]of e)for(let e=t;e<=a;e++)yield(0,en.T1)(W.jP,e)}catch(e){}},[Y.A.evalTestcase.type]:function*(e){let t=e.payload.workspaceLocation;if("stories"===t)return;yield(0,en.yJ)(eS.o.addEvent([e3.Bx.RUN_TESTCASE],t));let a=e.payload.testcaseId;yield*aV(t,a)},[Y.A.chapterSelect.type]:function*(e){let{workspaceLocation:t,chapter:a,variant:s}=e.payload,[i,n,r,o,l]=yield(0,en.Lt)(e=>[e.workspaces[t].context.variant,e.workspaces[t].context.chapter,e.workspaces[t].context.externalSymbols,e.workspaces[t].globals,e.workspaces[t].externalLibrary]),d=a!==n||s!==i;(a===eM.Chapter.FULL_JS?d&&(yield(0,en.T1)(aU.fn)):a===eM.Chapter.FULL_TS?d&&(yield(0,en.T1)(aU.x7)):d)&&(yield(0,en.yJ)(eS.o.beginClearContext(t,{chapter:a,variant:s,external:{name:l,symbols:r},globals:o},!1)),yield(0,en.yJ)(eS.o.clearReplOutput(t)),yield(0,en.yJ)(eS.o.debuggerReset(t)),"stories"!==t&&(yield(0,en.yJ)(eS.o.resetSideContent(t))),yield(0,en.T1)(ed.uT,`Switched to ${(0,p.Kl)(a,s)}`,1e3))},[Y.A.externalLibrarySelect.type]:function*(e){let{workspaceLocation:t,externalLibraryName:a}=e.payload,[s,i,n]=yield(0,en.Lt)(e=>[e.workspaces[t].context.chapter,e.workspaces[t].globals,e.workspaces[t].externalLibrary]),r=eD.r.get(a);(a!==n||e.payload.initialise)&&(yield(0,en.yJ)(eS.o.changeExternalLibrary(a,t)),yield(0,en.yJ)(eS.o.beginClearContext(t,{chapter:s,external:{name:a,symbols:r},globals:i},!0)),yield(0,en.yJ)(eS.o.clearReplOutput(t)),e.payload.initialise||(yield(0,en.T1)(ed.uT,`Switched to ${a} library`,1e3)))},[Y.A.beginClearContext.type]:function*(e){for(let[t,a]of(yield(0,en.T1)([aM.A,aM.A.clear]),yield(0,en.T1)([tJ.A,tJ.A.clear]),e.payload.library.globals))window[t]=a;yield(0,en.yJ)(eS.o.endClearContext({...e.payload.library,moduleParams:{runes:{},phaser:aL()}},e.payload.workspaceLocation)),yield},[Y.A.navigateToDeclaration.type]:function*(e){let t=e.payload.workspaceLocation,a=yield(0,en.Lt)(e=>e.workspaces[t].editorTabs[0].value),s=yield(0,en.Lt)(e=>e.workspaces[t].context),i=(0,t0.findDeclaration)(a,s,{line:e.payload.cursorPosition.row+1,column:e.payload.cursorPosition.column});i&&(yield(0,en.yJ)(eS.o.moveCursor(e.payload.workspaceLocation,0,{row:i.start.line-1,column:i.start.column})))},[Y.A.runAllTestcases.type]:{takeLeading:function*(e){let{workspaceLocation:t}=e.payload;yield(0,en.T1)(aB,t);let a=yield(0,en.Lt)(e=>e.workspaces[t].editorTestcases);if(a.length>0){for(let e of(yield(0,en.T1)(ed.uT,"Running all testcases!",2e3),a.keys()))if(yield new Promise(e=>setTimeout(e,0)),!(yield(0,en.T1)(aV,t,e)))return}}}});function*aW(){yield(0,en.Q7)([(0,en.Zy)($.A.useBackend?eL:e2),(0,en.Zy)(aJ),(0,en.Zy)(tj),(0,en.Zy)(tX),(0,en.Zy)(e6),(0,en.Zy)(tI),(0,en.Zy)(tR),(0,en.Zy)(tv),(0,en.Zy)(t5),(0,en.Zy)(aP),(0,en.Zy)(t9),(0,en.Zy)(e9),(0,en.Zy)(tC),(0,en.Zy)(tQ)])}var aY=a(5775);(0,d.ht)(!1);let aX=(n=[i=(0,h.Ay)()],r=function(e){if(e)return{...p.n6,session:{...p.n6.session,...e.session?e.session:{},githubOctokitObject:{octokit:e.session.githubAccessToken?(0,aY.g)(e.session.githubAccessToken):void 0}},featureFlags:{modifiedFlags:{...p.n6.featureFlags.modifiedFlags,...e.featureFlags}},workspaces:{...p.n6.workspaces,playground:{...p.n6.workspaces.playground,isFolderModeEnabled:e.playgroundIsFolderModeEnabled?e.playgroundIsFolderModeEnabled:p.n6.workspaces.playground.isFolderModeEnabled,activeEditorTabIndex:e.playgroundActiveEditorTabIndex?e.playgroundActiveEditorTabIndex.value:p.n6.workspaces.playground.activeEditorTabIndex,editorTabs:e.playgroundEditorTabs?e.playgroundEditorTabs:p.n6.workspaces.playground.editorTabs,isEditorAutorun:e.playgroundIsEditorAutorun?e.playgroundIsEditorAutorun:p.n6.workspaces.playground.isEditorAutorun,externalLibrary:e.playgroundExternalLibrary?e.playgroundExternalLibrary:p.n6.workspaces.playground.externalLibrary,context:{...p.n6.workspaces.playground.context,chapter:e.playgroundSourceChapter?e.playgroundSourceChapter:p.n6.workspaces.playground.context.chapter,variant:e.playgroundSourceVariant?e.playgroundSourceVariant:p.n6.workspaces.playground.context.variant}}},stories:{...p.n6.stories,...e.stories}}}((()=>{try{let e=localStorage.getItem("storedState");if(!e)return;let t=(0,tB.decompressFromUTF16)(e);if(!t)return;return JSON.parse(t)}catch(e){(0,ed.JB)("Error loading from local storage");return}})())||p.n6,o=(0,l.U1)({reducer:ei,middleware:n,devTools:{serialize:!0,maxAge:300},preloadedState:r}),i.run(aW),o.subscribe((0,c.throttle)(()=>{var e=o.getState();try{let t={session:{accessToken:e.session.accessToken,refreshToken:e.session.refreshToken,courseRegId:e.session.courseRegId,role:e.session.role,group:e.session.group,name:e.session.name,userId:e.session.userId,courses:e.session.courses,courseId:e.session.courseId,courseName:e.session.courseName,courseShortName:e.session.courseShortName,viewable:e.session.viewable,enableGame:e.session.enableGame,enableAchievements:e.session.enableAchievements,enableOverallLeaderboard:e.session.enableContestLeaderboard,enableContestLeaderboard:e.session.enableOverallLeaderboard,topLeaderboardDisplay:e.session.topLeaderboardDisplay,topContestLeaderboardDisplay:e.session.topContestLeaderboardDisplay,enableSourcecast:e.session.enableSourcecast,enableStories:e.session.enableStories,enableLlmGrading:e.session.enableLlmGrading,llmCourseLevelPrompt:e.session.llmCourseLevelPrompt,moduleHelpText:e.session.moduleHelpText,assetsPrefix:e.session.assetsPrefix,assessmentConfigurations:e.session.assessmentConfigurations,githubAccessToken:e.session.githubAccessToken},achievements:e.achievement.achievements,featureFlags:e.featureFlags.modifiedFlags,playgroundIsFolderModeEnabled:e.workspaces.playground.isFolderModeEnabled,playgroundActiveEditorTabIndex:{value:e.workspaces.playground.activeEditorTabIndex},playgroundEditorTabs:e.workspaces.playground.editorTabs,playgroundIsEditorAutorun:e.workspaces.playground.isEditorAutorun,playgroundSourceChapter:e.workspaces.playground.context.chapter,playgroundSourceVariant:e.workspaces.playground.context.variant,playgroundLanguage:e.playground.languageConfig,playgroundExternalLibrary:e.workspaces.playground.externalLibrary,stories:{userId:e.stories.userId,groupId:e.stories.groupId,role:e.stories.role}},a=(0,tB.compressToUTF16)(JSON.stringify(t));localStorage.setItem("storedState",a)}catch(e){(0,ed.JB)("Error saving to local storage")}},1e3)),o)},99475(e,t,a){"use strict";a.d(t,{V:()=>r,x:()=>o});var s=a(99658),i=a(54317),n=a(72442);let r={assessment:"",grading:"",playground:"/playground",sicp:"/sicp",sourcecast:"",sourcereel:"",stories:""},o=e=>new Promise((t,a)=>{(0,s.configure)({fs:"MountableFileSystem",options:{[r.playground]:{fs:"IndexedDB",options:{storeName:"playground"}},[r.sicp]:{fs:"IndexedDB",options:{storeName:"sicp"}}}},n=>{if(n)return void a(n);let r=(0,s.BFSRequire)("fs");e.dispatch((0,i.setInBrowserFileSystem)(r));let o=e.getState().workspaces,d=[];for(let[,e]of Object.entries(o)){let t=e.editorTabs;d.push(l(r,t))}Promise.all(d).then(()=>t()).catch(e=>a(e))})}),l=async(e,t)=>{let a=t.filter(e=>void 0!==e.filePath).map(t=>new Promise((a,s)=>{e.exists(t.filePath,i=>{i?a():(0,n.Xz)(e,t.filePath,t.value).then(()=>a()).catch(e=>s(e))})}));await Promise.all(a)}},75594(e,t,a){"use strict";a.d(t,{wY:()=>eP,ik:()=>eL,fM:()=>eM,sA:()=>ek,mv:()=>eN,Lf:()=>eR});var s=a(74848),i=a(9584),n=a(29890),r=a(64907),o=a(35505),l=a(40249),d=a(87497),c=a(53991),u=a(39798),h=a(52344),p=a(46942),m=a.n(p),g=a(96540),y=a(94201),f=a(41344);let b=()=>(0,s.jsx)("div",{style:{margin:"2em 1em"},children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"board-Layer_1","data-name":"Layer 1",viewBox:"0 0 110.73 170.04",width:"138.92260644554224",height:"213.33333333333334",children:[(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{id:"board-linear-gradient",x1:"-374.89",y1:"432.9",x2:"-374.89",y2:"432.82",gradientTransform:"matrix(110.73 0 0 -106.94 41567.45 46425.3)",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0",stopColor:"#f1f1f1"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#7a7a7a"})]}),(0,s.jsxs)("linearGradient",{id:"board-linear-gradient-2",x1:"-376",y1:"450.74",x2:"-376",y2:"450.72",gradientTransform:"matrix(100.11 0 0 -79.18 37697.19 35762.28)",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0",stopColor:"#a8aaa8"}),(0,s.jsx)("stop",{offset:"1",stopColor:"gray"})]}),(0,s.jsxs)("linearGradient",{id:"board-linear-gradient-3",x1:"-376.21",y1:"614.94",x2:"-376.21",y2:"614.75",gradientTransform:"matrix(98.29 0 0 -23.36 37033.43 14529.9)",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0",stopColor:"#a8aaa8"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#535453"})]}),(0,s.jsxs)("linearGradient",{id:"board-linear-gradient-black",x1:"-382.07",y1:"493.36",x2:"-382.07",y2:"494.25",gradientTransform:"matrix(65.53 0 0 -48.84 25091.11 24228.69)",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0",stopColor:"#6a6a6a"}),(0,s.jsx)("stop",{offset:".52",stopColor:"#6a6a6a"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#6a6a6a"})]}),(0,s.jsxs)("linearGradient",{id:"board-linear-gradient-green",x2:"145",y2:"48",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0",stopColor:"#6a6a6a"}),(0,s.jsx)("stop",{offset:".52",stopColor:"#8CE300"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#6a6a6a"})]}),(0,s.jsxs)("linearGradient",{id:"board-linear-gradient-red",x2:"145",y2:"48",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0",stopColor:"#6a6a6a"}),(0,s.jsx)("stop",{offset:".52",stopColor:"#D02E26"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#6a6a6a"})]}),(0,s.jsxs)("linearGradient",{id:"board-linear-gradient-orange",x2:"145",y2:"48",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0",stopColor:"#6a6a6a"}),(0,s.jsx)("stop",{offset:".52",stopColor:"#F8D039"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#6a6a6a"})]}),(0,s.jsxs)("linearGradient",{id:"board-linear-gradient-5",x1:"-743.87",y1:"1256.85",x2:"-743.87",y2:"1257.21",gradientTransform:"matrix(3.03 0 0 -6.22 2312.41 7891.56)",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0",stopColor:"#757575"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#393939"})]}),(0,s.jsx)("clipPath",{id:"board-clip-path",children:(0,s.jsx)("path",{fill:"none",d:"M86.48 149.58h12.38v12.38H86.48z"})})]}),(0,s.jsxs)("g",{id:"board-EV3",children:[(0,s.jsxs)("g",{id:"board-brick",children:[(0,s.jsx)("path",{id:"board-ev3_body_2","data-name":"ev3 body 2",d:"M2 31.7h106.76a2 2 0 0 1 2 2v103a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-103a2 2 0 0 1 2-2z",fill:"url(#board-linear-gradient)"}),(0,s.jsx)("path",{id:"board-ev3_body_1","data-name":"ev3 body 1",d:"M8.19 127.57h94.35a2 2 0 0 1 2 2v38.53a2 2 0 0 1-2 2H8.19a2 2 0 0 1-2-2v-38.56a2 2 0 0 1 2-2z",fill:"#f1f1f1"}),(0,s.jsx)("path",{id:"board-ev3_screen_grey","data-name":"ev3 screen grey",d:"M7.28 0h96.17a2 2 0 0 1 2 2v75.21a2 2 0 0 1-2 2H7.28a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2z",fill:"url(#board-linear-gradient-2)"}),(0,s.jsx)("path",{id:"board-ev3_screenborder","data-name":"ev3 screenborder",d:"M18.2 10.47h74.48a3.79 3.79 0 0 1 3.79 3.79v41.86a3.8 3.8 0 0 1-3.79 3.8H18.2a3.8 3.8 0 0 1-3.79-3.8V14.26a3.79 3.79 0 0 1 3.79-3.79z",fill:"#393939"}),(0,s.jsx)("path",{id:"board-ev3_screen","data-name":"ev3 screen",d:"M24 12.44h63.22A2.73 2.73 0 0 1 90 15.17v40.35a2.73 2.73 0 0 1-2.73 2.73H24a2.73 2.73 0 0 1-2.73-2.73V15.17A2.73 2.73 0 0 1 24 12.44z",fill:"#97b5a6"}),(0,s.jsx)("path",{id:"board-ev3_grey_buttom","data-name":"ev3 grey buttom",d:"M6.22 146.68h98.29v21.39a2 2 0 0 1-2 2H8.19a2 2 0 0 1-2-2z",fill:"url(#board-linear-gradient-3)"})]}),(0,s.jsxs)("g",{id:"board-buttons",children:[(0,s.jsx)("path",{id:"board-btn_grey","data-name":"btn grey",d:"M48.69 133.94c-5.58-5.39-14.26-14.26-14.26-14.26v-1.82H31a8.27 8.27 0 1 1 0-16.53h3.41V99.5l14.13-14.41h14.11C69 91.61 76.75 99.2 76.75 99.2v2.13H80a8.27 8.27 0 1 1 0 16.53h-3.25v1.82c-7.51 7.73-14 14.26-14 14.26z",fill:"#6a6a6a"}),(0,s.jsx)("path",{id:"board-btn_color","data-name":"btn color",d:"M48.69 133.94c-5.58-5.39-14.26-14.26-14.26-14.26v-1.82H31a8.27 8.27 0 1 1 0-16.53h3.41V99.5l14.13-14.41h14.11C69 91.61 76.75 99.2 76.75 99.2v2.13H80a8.27 8.27 0 1 1 0 16.53h-3.25v1.82c-7.51 7.73-14 14.26-14 14.26z",fill:"url(#board-linear-gradient-black)",style:{fill:'url("#board-linear-gradient-black")'}}),(0,s.jsx)("path",{id:"board-btn_left","data-name":"btn left",d:"M30.87 103.3h10.39v12.28H30.87a6.14 6.14 0 0 1-6.14-6.14 6.14 6.14 0 0 1 6.14-6.14z",fill:"#a8aaa8",className:"sim-button"}),(0,s.jsx)("path",{id:"board-btn_right","data-name":"btn right",d:"M80 115.58H69.62V103.3H80a6.14 6.14 0 0 1 6.15 6.14 6.14 6.14 0 0 1-6.15 6.14z",fill:"#a8aaa8",className:"sim-button"}),(0,s.jsx)("path",{id:"board-btn_enter","data-name":"btn enter",d:"M49.45 103.3h12a.46.46 0 0 1 .46.45v11.38a.46.46 0 0 1-.46.45h-12a.46.46 0 0 1-.46-.45v-11.38a.46.46 0 0 1 .46-.45z",fill:"#393939",className:"sim-button"}),(0,s.jsx)("path",{id:"board-btn_up","data-name":"btn up",d:"M49.15 87.37l12.74-.15 9.55 9.86L67.5 101v7.13h-3.64v-4.1a3 3 0 0 0-3-3H49.78a2.47 2.47 0 0 0-2.58 2.35v4.77h-3.67V101l-3.94-4z",fill:"#a8aaa8",className:"sim-button"}),(0,s.jsx)("path",{id:"board-btn_down","data-name":"btn down",d:"M61.83 131.54l-12.66.1-9.58-9.85 4-3.91v-7.17h3.6v4.11a3.06 3.06 0 0 0 3 3.06c3 .05 11 0 11 0a2.6 2.6 0 0 0 2.65-2.55v-4.62h3.67v7.17l3.91 3.91z",fill:"#a8aaa8",className:"sim-button"}),(0,s.jsx)("path",{id:"board-btn_part_4","data-name":"btn part 4",fill:"#393939",d:"M54 59.76h3.03v13.8H54z"}),(0,s.jsx)("path",{id:"board-btn_part_3","data-name":"btn part 3",fill:"#9a9a9a",d:"M54 72.96h3.03v6.07H54z"}),(0,s.jsx)("path",{id:"board-btn_part_2","data-name":"btn part 2",fill:"url(#board-linear-gradient-5)",d:"M54 72.96h3.03v6.22H54z"}),(0,s.jsx)("path",{id:"board-btn_part_1","data-name":"btn part 1",fill:"gray",d:"M54 79.18h3.03v5.92H54z"}),(0,s.jsx)("path",{id:"board-btn_back","data-name":"btn back",d:"M13.2 79.18h23.66v5.71c-2.62 2.64-6 6-6 6H15.17a2 2 0 0 1-2-2z",fill:"#a8aaa8",className:"sim-button"})]}),(0,s.jsxs)("g",{id:"board-LEGO_logo","data-name":"LEGO logo",children:[(0,s.jsx)("path",{id:"board-logo_white_bg","data-name":"logo white bg",fill:"#fff",d:"M86.56 149.66h12.21v12.21H86.56z"}),(0,s.jsxs)("g",{id:"board-lego",children:[(0,s.jsx)("g",{clipPath:"url(#board-clip-path)",children:(0,s.jsx)("g",{id:"board-logo_part_5","data-name":"logo part 5",children:(0,s.jsx)("path",{id:"board-Path_18","data-name":"Path 18",d:"M86.56 161.87h12.21v-12.21H86.56zM98 154.73a4.76 4.76 0 0 1-.24 1.18c-.43 1.27-.91 2.07-2.07 2.07a1.12 1.12 0 0 1-1.16-.7v-.15l-.09.11a1.86 1.86 0 0 1-1.46.72 1.29 1.29 0 0 1-1-.43l-.07-.09-.06.06a1.6 1.6 0 0 1-1.16.42 1.32 1.32 0 0 1-1-.37h-.09l-.07.07a1.55 1.55 0 0 1-1.11.37.87.87 0 0 1-.95-.79.37.37 0 0 1 0-.11 8.15 8.15 0 0 1 1.09-3.1 1 1 0 0 1 .92-.52.78.78 0 0 1 .57.17c.11.11.11.2.13.42v.28l.16-.24a1.6 1.6 0 0 1 1.52-.65 1 1 0 0 1 .9.37v.09l.06-.07a1.8 1.8 0 0 1 1.2-.39 1.53 1.53 0 0 1 1.12.37.69.69 0 0 1 .13.2l.07.11.08-.11a1.59 1.59 0 0 1 1.31-.57 1.27 1.27 0 0 1 1 .35 1.37 1.37 0 0 1 .26 1",fill:"#ffed00"})})}),(0,s.jsx)("g",{clipPath:"url(#board-clip-path)",children:(0,s.jsx)("g",{id:"board-logo_part_4","data-name":"logo part 4",children:(0,s.jsx)("path",{id:"board-Path_19","data-name":"Path 19",d:"M86.56 161.87h12.21v-12.21H86.56zm11.75-6.66a6.73 6.73 0 0 1-.52 1.59 2.28 2.28 0 0 1-2.1 1.55 1.67 1.67 0 0 1-1.36-.54 2.18 2.18 0 0 1-1.48.54 1.73 1.73 0 0 1-1.09-.35 2.12 2.12 0 0 1-1.22.35 1.8 1.8 0 0 1-1-.3 2.19 2.19 0 0 1-1.18.3 1.28 1.28 0 0 1-1.36-1.21 8.26 8.26 0 0 1 1.18-3.34 1.37 1.37 0 0 1 1.22-.8c.59 0 .79.17.9.37a2.24 2.24 0 0 1 1.46-.4 1.51 1.51 0 0 1 1 .33A2.4 2.4 0 0 1 94 153a1.74 1.74 0 0 1 1.36.45 2 2 0 0 1 1.33-.43 1.53 1.53 0 0 1 1.37.61 1.79 1.79 0 0 1 .29 1.55",fill:"#d42715"})})}),(0,s.jsx)("g",{clipPath:"url(#board-clip-path)",children:(0,s.jsx)("g",{id:"board-logo_part_3","data-name":"logo part 3",children:(0,s.jsx)("path",{id:"board-Path_20","data-name":"Path 20",d:"M86.48 162h12.38v-12.42H86.48zm12.2-.18h-12v-12h12z",fill:"#171714"})})}),(0,s.jsx)("g",{clipPath:"url(#board-clip-path)",children:(0,s.jsx)("g",{id:"board-logo_part_2","data-name":"logo part 2",children:(0,s.jsx)("path",{id:"board-Path_21","data-name":"Path 21",d:"M98.25 153.29v-.09h.06s.07 0 .07.05 0 0-.07 0zm.2.17v-.06c0-.05 0-.07-.06-.07a.09.09 0 0 0 .08-.09.07.07 0 0 0-.07-.08h-.17v.3h.07v-.13.07zm-.16-.39a.24.24 0 0 1 0 .48.24.24 0 0 1-.24-.24.26.26 0 0 1 .24-.24m0-.07a.31.31 0 0 0 0 .62.31.31 0 0 0 .31-.31.32.32 0 0 0-.31-.31",fill:"#171714"})})}),(0,s.jsx)("g",{clipPath:"url(#board-clip-path)",children:(0,s.jsx)("g",{id:"board-logo_part_1","data-name":"logo part 1",children:(0,s.jsx)("path",{id:"board-Path_22","data-name":"Path 22",d:"M96.7 153.33a1.73 1.73 0 0 0-1.38.61.66.66 0 0 0-.15-.22 1.47 1.47 0 0 0-1.16-.41 1.87 1.87 0 0 0-1.25.41 1.1 1.1 0 0 0-1-.41 1.7 1.7 0 0 0-1.6.7.52.52 0 0 0-.15-.46.87.87 0 0 0-.63-.2 1.1 1.1 0 0 0-1 .57 8.73 8.73 0 0 0-1.13 3.17 1 1 0 0 0 1 1h.08a1.53 1.53 0 0 0 1.18-.39 1.35 1.35 0 0 0 1 .39 1.61 1.61 0 0 0 1.23-.46 1.36 1.36 0 0 0 1.09.46 1.92 1.92 0 0 0 1.53-.77 1.2 1.2 0 0 0 1.24.75c1.2 0 1.73-.83 2.16-2.12a4.54 4.54 0 0 0 .27-1.2 1.21 1.21 0 0 0-1-1.37 1.29 1.29 0 0 0-.34 0m-8 3.28c.62-.11.79.11.77.33-.07.61-.63.76-1.12.74a.62.62 0 0 1-.69-.55 8.47 8.47 0 0 1 1.07-3 .72.72 0 0 1 .68-.39c.31 0 .37.15.37.33a14.2 14.2 0 0 1-1.07 2.55m2-.57c0 .11-.11.35-.17.59a3.1 3.1 0 0 1 .61-.09c.31 0 .48.14.48.38 0 .59-.66.76-1.11.76a.85.85 0 0 1-.94-.75v-.08a6 6 0 0 1 .67-2.27 1.36 1.36 0 0 1 1.53-.9c.31 0 .68.13.68.44s-.35.56-.68.59h-.5a3.58 3.58 0 0 0-.24.48c.64-.09.9 0 .79.41s-.59.52-1.12.44m3.13-1.55a.46.46 0 0 0-.37.21 6.33 6.33 0 0 0-.64 1.73c0 .28.09.35.22.35s.46-.24.55-.61c0 0-.42 0-.31-.37s.33-.44.68-.46c.7 0 .63.48.57.76a1.81 1.81 0 0 1-1.7 1.6.9.9 0 0 1-1-.79v-.18a5 5 0 0 1 .4-1.55c.37-.87.76-1.48 1.77-1.48.59 0 1.07.22 1 .76a.67.67 0 0 1-.64.68c-.11 0-.52 0-.39-.42 0-.13 0-.24-.15-.24m3.75.75a7.06 7.06 0 0 1-.59 1.61 1.41 1.41 0 0 1-1.37.86.82.82 0 0 1-.94-.86 5.11 5.11 0 0 1 .39-1.63c.31-.83.63-1.51 1.66-1.49s.94 1.05.85 1.51m-.85-.52a9.84 9.84 0 0 1-.63 1.85.33.33 0 0 1-.31.22c-.13 0-.17-.09-.2-.2a7.75 7.75 0 0 1 .7-1.94c.09-.13.18-.16.26-.13s.18.11.18.2",fill:"#171714"})})})]})]}),(0,s.jsxs)("g",{id:"board-EV3_logo","data-name":"EV3 logo",fill:"#f1f1f1",children:[(0,s.jsx)("path",{id:"board-ev3_3","data-name":"ev3 3",d:"M36 155a.18.18 0 0 1 .2.16v.84a.16.16 0 0 1-.17.14H34a.36.36 0 0 0-.38.33v1.14a.34.34 0 0 0 .38.3h2c.19 0 .17.14.17.14v.82c0 .08-.06.14-.17.14h-3.43a.2.2 0 0 1-.2-.19v-.05a.38.38 0 0 0-.38-.38h-1.12a.38.38 0 0 0-.38.38v1.64a.37.37 0 0 0 .38.33h6.75a.36.36 0 0 0 .39-.3v-6.89a.36.36 0 0 0-.39-.3H30.9a.34.34 0 0 0-.38.3v1.67a.38.38 0 0 0 .35.38H32a.36.36 0 0 0 .35-.36v-.05a.17.17 0 0 1 .16-.19H36z"}),(0,s.jsx)("path",{id:"board-ev3_v","data-name":"ev3 v",d:"M29.29 153.2H27.7c-.24 0-.33.17-.44.38L25.32 158a.27.27 0 0 1-.19.11.23.23 0 0 1-.19-.14L23 153.58c-.11-.21-.22-.38-.46-.38h-1.62c-.35 0-.41.19-.3.41l3.2 6.73c.17.32.28.38.58.38h1.42a.55.55 0 0 0 .57-.38l3.22-6.73c.11-.22 0-.41-.32-.41"}),(0,s.jsx)("path",{id:"board-ev3_e","data-name":"ev3 e",d:"M19.39 156.1a.34.34 0 0 1 .38.3v1.17a.33.33 0 0 1-.38.3h-5.05c-.11 0-.2.06-.2.14v.82c0 .08.09.14.2.14h5.05a.33.33 0 0 1 .38.3v1.15a.33.33 0 0 1-.35.3h-6.75a.35.35 0 0 1-.38-.3v-6.89a.34.34 0 0 1 .38-.3h6.75a.31.31 0 0 1 .35.28v1.17a.31.31 0 0 1-.33.3h-5.08c-.11 0-.22 0-.22.13v.89c0 .08.09.14.19.14z"})]})]})]})}),x=({port:e})=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"port-svg6348",viewBox:"0 0 49.96 58.93",children:(0,s.jsxs)("g",{id:"port-icn_port","data-name":"icn port",children:[(0,s.jsx)("path",{id:"port-port_2","data-name":"port 2",d:"M4.48 0h50v58.93h-50z",transform:"translate(-4.48)",fill:"#eaeaea"}),(0,s.jsx)("path",{id:"port-port_1","data-name":"port 1",d:"M9.74 46.49V18.66h17.11v-6.91h4.72V2.59h12.92v8.82h5.06v35.08h-8v7.43H38.9v-7.51h-2v7.5h-2.19v-7.5h-2.16v7.5h-2.1v-7.5H28.6v7.5h-2.1v-7.5h-1.82v7.5h-2.46v-7.5h-1.68v7.5H18v-7.45z",transform:"translate(-4.48)",fill:"#a8aaa8"}),(0,s.jsx)("g",{id:"port-text10060",style:{isolation:"isolate"},children:(0,s.jsx)("text",{id:"port-port_text",transform:"translate(22.21 40.2)",style:{isolation:"isolate",userSelect:"none"},fontSize:"16",fill:"#fff",fontFamily:"ArialMT,Arial",children:e})})]})});var v=a(31230),A=a(63283),T=a(37852);let w=({src:e,alt:t="Image",text:a})=>(0,s.jsx)("div",{className:"col-xs-3",children:(0,s.jsxs)("div",{className:m()(c.ELEVATION_0),style:{textAlign:"center",padding:12,backgroundColor:"#2f343c"},children:["string"==typeof e?(0,s.jsx)("img",{style:{maxWidth:72},src:e,alt:t}):e,(0,s.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:a})]})});var S=a(92473),C=a(79642),I=a(45111),E=a(31643),_=a(19551),j=a(12316),k=a(68464),N=a(5960),P=a(13489),R=a(17526);function L(e){let t=g.useRef(null),[a,s]=g.useState(!0),i=g.useCallback(()=>{let i=!e||e(t.current?.value);return a!==i&&s(i),i},[a,e]),n=g.useCallback(()=>void i(),[i]);return{ref:t,isValid:a,setIsValid:s,validate:i,onChange:n}}function M(e){return"string"==typeof e&&e.length>0}var D=a(82430);let O=({isOpen:e,onClose:t,deviceToEdit:a,defaultSecret:i})=>{let n=(0,y.wA)(),r=L(M),o=L(),d=L(M),[u,h]=g.useState(!1),[p,f]=g.useState(),[b,x]=g.useState(!1),[A,T]=g.useState("environment"),w=async()=>{let e=function(...e){let t=!0,a=[];for(let s of e)if(s.ref.current){let e=s.validate();t=t&&e,a.push(s.ref.current?.value)}else t=!1;return t?a:null}(r,o,d);if(!e)return;let[s,i,l]=e;try{f(void 0),h(!0),a?await (0,v.dh)({id:a.id,title:s}):await (0,v.MC)({title:s,type:i,secret:l})}catch(e){f(e?.message||"Unknown error occurred."),h(!1);return}n(R.o.remoteExecFetchDevices()),t(),h(!1)},O=(0,s.jsx)(S.m,{content:"Scan QR Code",children:(0,s.jsx)(C.$,{minimal:!0,icon:"clip",onClick:()=>x(()=>!b)})});return(0,s.jsxs)(I.l,{icon:a?"edit":"add",title:a?`Edit ${a.title} (${a.type})`:"Add new device",isOpen:e,className:c.DARK,onClose:t,canEscapeKeyClose:!u,canOutsideClickClose:!u,isCloseButtonShown:!u,onOpening:()=>{f(void 0),r.setIsValid(!0),d.setIsValid(!0)},children:[(0,s.jsxs)(E.R,{children:[(0,s.jsx)(_.g,{label:"Name",labelFor:"sa-remote-execution-name",helperText:"Shown to you only. You can key in a different name from other users.",children:(0,s.jsx)("input",{id:"sa-remote-execution-name",className:m()(c.INPUT,c.FILL,r.isValid||c.INTENT_DANGER),type:"text",ref:r.ref,onChange:r.onChange,disabled:u,...a?{defaultValue:a.title}:void 0})}),(0,s.jsx)(_.g,{label:"Type",labelFor:"sa-remote-execution-type",children:(0,s.jsx)(j.g,{id:"sa-remote-execution-type",className:m()(c.FILL),ref:e=>void(o.ref.current=e),disabled:u||!!a,...a?{value:a.type}:void 0,children:D.I.map(({id:e,name:t})=>(0,s.jsx)("option",{value:e,children:t},e))})}),(0,s.jsx)(_.g,{label:"Secret",labelFor:"sa-remote-execution-secret",children:(0,s.jsx)(k.M,{id:"sa-remote-execution-secret",className:m()(c.FILL,d.isValid||c.INTENT_DANGER),type:"text",inputRef:d.ref,onChange:d.onChange,disabled:u,readOnly:!!a,defaultValue:i,...a?{value:a.secret}:{rightElement:O}})}),b&&(0,s.jsxs)("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",rowGap:"0.5rem"},children:[(0,s.jsx)(P.f,{onResult:e=>{if(e){x(!1);let t=d.ref.current;t&&(t.value=e.getText())}},constraints:{aspectRatio:1,frameRate:{ideal:12},deviceId:{ideal:"0"},facingMode:{ideal:A}},containerStyle:{width:"50%",marginInline:"auto"},videoStyle:{borderRadius:"0.3em"}}),(0,s.jsx)(C.$,{style:{margin:"auto"},icon:"refresh",onClick:()=>{x(!1),T(()=>"user"===A?"environment":"user"),setTimeout(()=>x(!0),1)},children:"Change Camera"})]}),p&&(0,s.jsx)(l.P,{intent:"danger",children:p})]}),(0,s.jsx)(N.E,{actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.$,{onClick:t,disabled:u,children:"Cancel"}),(0,s.jsx)(C.$,{intent:"primary",onClick:w,disabled:u||!function(...e){return -1===e.findIndex(({isValid:e})=>!e)}(r,d),children:a?"Edit":"Add"})]})})]})},U=a.p+"static/svg/motorL.e4c8e91f.svg",F=a.p+"static/svg/sGyro.7d8f200e.svg",G=a.p+"static/svg/sUltrasonic.58e41f90.svg",z=Object.freeze({0:"None",1:"Black",2:"Blue",3:"Green",4:"Yellow",5:"Red",6:"White",7:"Brown"}),H=Object.freeze({"COL-AMBIENT":e=>`Ambient Light: ${e}`,"COL-COLOR":e=>`Color: ${z[e]}`,"COL-REFLECT":e=>`Reflected Light: ${e}`,"GYRO-ANG":e=>`Angle: ${e}\xb0`,"GYRO-RATE":e=>`Rate: ${e}\xb0/s`,TOUCH:e=>`Touch: ${e?"Yes":"No"}`,"US-DIST-CM":e=>`Dist: ${e/10}cm`}),B=Object.freeze({"lego-ev3-color":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGlkPSJzdmc0MSIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIxOTI1LjM1OCA2MTgzLjQzOCAzNi4xMDEgMzYuMTAxIj48ZGVmcyBpZD0iZGVmczIyIj48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudCIgeDE9IjE2LjM3OSIgeDI9IjE2LjM3OSIgeTE9IjI5LjUxNSIgeTI9IjM0Ljk4NSIgZ3JhZGllbnRUcmFuc2Zvcm09InNjYWxlKC45ODE2NiAxLjAxODY5KSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIGlkPSJzdG9wNiIgb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYThhOWE4Ii8+PHN0b3AgaWQ9InN0b3A4IiBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM1NDU1NTQiLz48L2xpbmVhckdyYWRpZW50PjxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj48cGF0aCBpZD0iVW5pb25fNSIgZmlsbD0iI2E4YTlhOCIgZD0iTTMuOTA3IDMzLjM3Yy0xLjA2OSAwLTEuOTM1LS42MTctMS45MzUtMS4zNzd2LTQuMzg3SC43NThBLjc1OC43NTggMCAwIDEgMCAyNi44NDhWNy4xMjlhLjc1OC43NTggMCAwIDEgLjc1OC0uNzU4aDEuMjE0VjEuMzc3QzEuOTcyLjYxNyAyLjgzOCAwIDMuOTA3IDBoMjguMjg3YzEuMDY5IDAgMS45MzUuNjE3IDEuOTM1IDEuMzc3djQuOTk0aDEuMjEzYS43NTguNzU4IDAgMCAxIC43NTkuNzU4djE5LjcxOWEuNzU4Ljc1OCAwIDAgMS0uNzU5Ljc1OGgtMS4yMTN2NC4zODdjMCAuNzYxLS44NjcgMS4zNzctMS45MzUgMS4zNzd6IiBjbGFzcz0iY2xzLTEiIGRhdGEtbmFtZT0iVW5pb24gNSIvPjwvY2xpcFBhdGg+PGZpbHRlciBpZD0iUGF0aF8xIiB3aWR0aD0iNTAuMTU3IiBoZWlnaHQ9IjUxLjM3MSIgeD0iMTkxOC4zMyIgeT0iNjE3Ny40MzgiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PGZlT2Zmc2V0IGlkPSJmZU9mZnNldDExIiBkeT0iMyIvPjxmZUdhdXNzaWFuQmx1ciBpZD0iZmVHYXVzc2lhbkJsdXIxMyIgcmVzdWx0PSJibHVyIiBzdGREZXZpYXRpb249IjMiLz48ZmVGbG9vZCBpZD0iZmVGbG9vZDE1IiBmbG9vZC1vcGFjaXR5PSIuNTAyIi8+PGZlQ29tcG9zaXRlIGlkPSJmZUNvbXBvc2l0ZTE3IiBpbjI9ImJsdXIiIG9wZXJhdG9yPSJpbiIgcmVzdWx0PSJyZXN1bHQxIi8+PGZlQ29tcG9zaXRlIGlkPSJmZUNvbXBvc2l0ZTE5IiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJyZXN1bHQxIi8+PC9maWx0ZXI+PC9kZWZzPjxnIGlkPSJDb2xvcl9TZW5zb3IiIGRhdGEtbmFtZT0iQ29sb3IgU2Vuc29yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ2IDU1NTUuMzY0KSI+PGcgaWQ9Ik1hc2tfR3JvdXBfNSIgY2xpcC1wYXRoPSJ1cmwoI2NsaXAtcGF0aCkiIGRhdGEtbmFtZT0iTWFzayBHcm91cCA1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NzkuMzU4IDYyOS40MzkpIj48ZyBpZD0iR3JvdXBfNCIgZGF0YS1uYW1lPSJHcm91cCA0Ij48ZyBpZD0iR3JvdXBfMiIgZGF0YS1uYW1lPSJHcm91cCAyIj48cGF0aCBpZD0iUGF0aF8yOCIgZmlsbD0iI2E4YTlhOCIgZD0iTS43NTggMGgzNC41ODRhLjc1OC43NTggMCAwIDEgLjc1OC43NTh2MTkuNzE5YS43NTguNzU4IDAgMCAxLS43NTguNzU4SC43NThBLjc1OC43NTggMCAwIDEgMCAyMC40NzdWLjc1OEEuNzU4Ljc1OCAwIDAgMSAuNzU4IDBaIiBjbGFzcz0iY2xzLTEiIGRhdGEtbmFtZT0iUGF0aCAyOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCA2LjM3MSkiLz48ZyBpZD0iZzI2IiBmaWx0ZXI9InVybCgjUGF0aF8xKSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE5MjUuMzYgLTYxODMuNDQpIj48cGF0aCBpZD0iUGF0aF8xLTIiIGZpbGw9InVybCgjbGluZWFyLWdyYWRpZW50KSIgZD0iTTEuOTM1IDBoMjguMjg3YzEuMDY5IDAgMS45MzUuNjE3IDEuOTM1IDEuMzc3djMwLjYxNmMwIC43NjEtLjg2NiAxLjM3Ny0xLjkzNSAxLjM3N0gxLjkzNUMuODY2IDMzLjM3MSAwIDMyLjc1NCAwIDMxLjk5M1YxLjM3N0MwIC42MTcuODY2IDAgMS45MzUgMFoiIGRhdGEtbmFtZT0iUGF0aCAxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOTI3LjMzIDYxODMuNDQpIi8+PC9nPjxwYXRoIGlkPSJSZWN0YW5nbGVfMiIgZD0iTTAgMGguNzU4djYuMDY3SDB6IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSAyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC41ODQgOS40MDQpIi8+PHBhdGggaWQ9IlJlY3RhbmdsZV81IiBkPSJNMCAwaC43NTh2Ni4wNjdIMHoiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC45MSA5LjQwNCkiLz48cGF0aCBpZD0iUmVjdGFuZ2xlXzMiIGQ9Ik0wIDBoLjc1OHY2LjA2N0gweiIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQuNTg0IDE4LjA1KSIvPjxwYXRoIGlkPSJSZWN0YW5nbGVfNCIgZD0iTTAgMGguNzU4djYuMDY3SDB6IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSguOTEgMTguMDUpIi8+PC9nPjxwYXRoIGlkPSJVbmlvbl8xIiBmaWxsPSIjYjcyYjFjIiBkPSJNMi41NzkgMTcuNzQ3YTcgNyAwIDAgMSAuMTYtMS40OTQgOS41NTYgOS41NTYgMCAxIDEgMTMuNjM0IDAgNi45NzggNi45NzggMCAxIDEtMTMuNzk0IDEuNDk0eiIgZGF0YS1uYW1lPSJVbmlvbiAxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjQ5NCA0LjA5NikiLz48cGF0aCBpZD0iVW5pb25fMiIgZD0iTTIuNjcgMTYuMzA4YTUuMzc0IDUuMzc0IDAgMCAxIC4zNzItMS45NzEgOC4wMzkgOC4wMzkgMCAxIDEgMTAuMDIyLS4wMjJBNS4zODggNS4zODggMCAxIDEgMi42NyAxNi4zMDhaIiBkYXRhLW5hbWU9IlVuaW9uIDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLjAxMSA1LjUzNCkiLz48ZyBpZD0iR3JvdXBfMyIgZGF0YS1uYW1lPSJHcm91cCAzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNC40MSAxMC4xNjMpIj48Y2lyY2xlIGlkPSJFbGxpcHNlXzUiIGN4PSIzLjY0IiBjeT0iMy42NCIgcj0iMy42NCIgZmlsbD0iI2YyZjJmMiIgY2xhc3M9ImNscy01IiBkYXRhLW5hbWU9IkVsbGlwc2UgNSIvPjxjaXJjbGUgaWQ9IkVsbGlwc2VfNiIgY3g9IjEuOTcyIiBjeT0iMS45NzIiIHI9IjEuOTcyIiBmaWxsPSIjZjJmMmYyIiBjbGFzcz0iY2xzLTUiIGRhdGEtbmFtZT0iRWxsaXBzZSA2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjY2OSA5LjU1NikiLz48L2c+PC9nPjwvZz48L2c+PC9zdmc+","lego-ev3-gyro":F,"lego-ev3-touch":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIxODI3LjM5MSA2MTgzLjY2NCAzNi4xMDEgMzYuMTAxIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImQiIHgxPSIxNi4zNzkiIHgyPSIxNi4zNzkiIHkxPSIyOS44MSIgeTI9IjM0LjI2NSIgZ3JhZGllbnRUcmFuc2Zvcm09InNjYWxlKC45ODE2NiAxLjAxODY5KSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2E4YTlhOCIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzU0NTU1NCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iLjk0OSIgeDI9Ii4wNTYiIHkxPSIuNSIgeTI9Ii41IiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYjcyYjFjIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjOGIxMTA0Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgeGxpbms6aHJlZj0iI2EiIGlkPSJlIiB4MT0iNy4zMTYiIHgyPSIuNDMyIiB5MT0iMy44NTUiIHkyPSIzLjg1NSIgZ3JhZGllbnRUcmFuc2Zvcm09InNjYWxlKDEuMjM5NTkgLjgwNjcyKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiLz48bGluZWFyR3JhZGllbnQgeGxpbms6aHJlZj0iI2EiIGlkPSJmIiB4MT0iNy4zMTYiIHgyPSIuNDMyIiB5MT0iMy44NTUiIHkyPSIzLjg1NSIgZ3JhZGllbnRUcmFuc2Zvcm09InNjYWxlKDEuMjM5NTkgLjgwNjcyKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiLz48bGluZWFyR3JhZGllbnQgeGxpbms6aHJlZj0iI2EiIGlkPSJnIiB4MT0iNy4zMTYiIHgyPSIuNDMyIiB5MT0iMy44NTUiIHkyPSIzLjg1NSIgZ3JhZGllbnRUcmFuc2Zvcm09InNjYWxlKDEuMjM5NTkgLjgwNjcyKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiLz48bGluZWFyR3JhZGllbnQgeGxpbms6aHJlZj0iI2EiIGlkPSJoIiB4MT0iNy4zMTYiIHgyPSIuNDMyIiB5MT0iMy44NTUiIHkyPSIzLjg1NSIgZ3JhZGllbnRUcmFuc2Zvcm09InNjYWxlKDEuMjM5NTkgLjgwNjcyKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiLz48Y2xpcFBhdGggaWQ9ImIiPjxwYXRoIGZpbGw9IiNhOGE5YTgiIGQ9Ik0zLjk0NCAzMy4zN2MtMS4wNjkgMC0xLjk3Mi0uNi0xLjk3Mi0xLjM2NXYtNC40SDFhMSAxIDAgMCAxLTEtMVY3LjM3MWExIDEgMCAwIDEgMS0xaC45NzJWMS4zNjVDMS45NzIuNiAyLjg3NSAwIDMuOTQ0IDBoMTAuNzY5djEuMzY1aDYuMzcxVjBoMTEuMDczYzEuMDY5IDAgMS45NzIuNiAxLjk3MiAxLjM2NXY1LjAwNmguOTcxYTEgMSAwIDAgMSAxIDF2MTkuMjM2YTEgMSAwIDAgMS0xIDFoLS45NzJWMzJjMCAuNzYxLS45IDEuMzY1LTEuOTcyIDEuMzY1eiIgY2xhc3M9ImNscy0xIiBkYXRhLW5hbWU9IlVuaW9uIDMiLz48L2NsaXBQYXRoPjxmaWx0ZXIgaWQ9ImMiIHdpZHRoPSIzOC4xNTciIGhlaWdodD0iMzkuMzcxIiB4PSIxODI2LjM2MyIgeT0iNjE4MC42NjQiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PGZlT2Zmc2V0Lz48ZmVHYXVzc2lhbkJsdXIgcmVzdWx0PSJibHVyIiBzdGREZXZpYXRpb249IjEiLz48ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIuNTAyIi8+PGZlQ29tcG9zaXRlIGluMj0iYmx1ciIgb3BlcmF0b3I9ImluIiByZXN1bHQ9InJlc3VsdDEiLz48ZmVDb21wb3NpdGUgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0icmVzdWx0MSIvPjwvZmlsdGVyPjwvZGVmcz48ZyBkYXRhLW5hbWU9IlRvdWNoIHNlbnNvciI+PGcgZGF0YS1uYW1lPSJHcm91cCA4Ij48ZyBjbGlwLXBhdGg9InVybCgjYikiIGRhdGEtbmFtZT0iTWFzayBHcm91cCAzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxODI3LjM5MSA2MTg1LjAyOSkiPjxnIGRhdGEtbmFtZT0iR3JvdXAgMiI+PHBhdGggZmlsbD0iI2E4YTlhOCIgZD0iTS43NTggNi4zNzFoMzQuNTg0YS43NTguNzU4IDAgMCAxIC43NTguNzU4djE5LjcxOWEuNzU4Ljc1OCAwIDAgMS0uNzU4Ljc1OEguNzU4QS43NTguNzU4IDAgMCAxIDAgMjYuODQ4VjcuMTI5YS43NTguNzU4IDAgMCAxIC43NTgtLjc1OFoiIGNsYXNzPSJjbHMtMSIgZGF0YS1uYW1lPSJQYXRoIDI3Ii8+PGcgZmlsdGVyPSJ1cmwoI2MpIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgyNy4zOSAtNjE4My42NikiPjxwYXRoIGZpbGw9InVybCgjZCkiIGQ9Ik0xLjk3MiAwaDEwLjc3djEuMzY1aDYuMzcxVjBoMTEuMDcyYzEuMDY5IDAgMS45NzIuNiAxLjk3MiAxLjM2NXYzMC42NGMwIC43NjEtLjkgMS4zNjUtMS45NzIgMS4zNjVIMS45NzJDLjkgMzMuMzcxIDAgMzIuNzY2IDAgMzIuMDA1VjEuMzY1QzAgLjYuOSAwIDEuOTcyIDBaIiBkYXRhLW5hbWU9IlBhdGggMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTgyOS4zNiA2MTgzLjY2KSIvPjwvZz48cGF0aCBkPSJNMzQuNTg0IDkuNDA0aC43NTh2Ni4wNjdoLS43NTh6IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSAyIi8+PHBhdGggZD0iTS45MSA5LjQwNGguNzU4djYuMDY3SC45MXoiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDUiLz48cGF0aCBkPSJNMzQuNTg0IDE4LjA1aC43NTh2Ni4wNjdoLS43NTh6IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSAzIi8+PHBhdGggZD0iTS45MSAxOC4wNWguNzU4djYuMDY3SC45MXoiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDQiLz48L2c+PC9nPjwvZz48ZyBkYXRhLW5hbWU9Ikdyb3VwIDUiPjxwYXRoIGZpbGw9InVybCgjZSkiIGQ9Ik0wIDBoOS41NTZ2Ni4yMTlIMHoiIGNsYXNzPSJjbHMtNCIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTgzMS45NDIgNjE5OS43NDIpIi8+PHBhdGggZmlsbD0idXJsKCNmKSIgZD0iTTAgMGg5LjU1NnY2LjIxOUgweiIgY2xhc3M9ImNscy00IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA5IiB0cmFuc2Zvcm09InJvdGF0ZSg5MCAtMjE3MC4zMjQgNDAxOC44NzYpIi8+PHBhdGggZmlsbD0idXJsKCNnKSIgZD0iTTAgMGg5LjU1NnY2LjIxOUgweiIgY2xhc3M9ImNscy00IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA3IiB0cmFuc2Zvcm09InJvdGF0ZSgxODAgOTI5LjQ3MSAzMTAyLjk4KSIvPjxwYXRoIGZpbGw9InVybCgjaCkiIGQ9Ik0wIDBoOS41NTZ2Ni4yMTlIMHoiIGNsYXNzPSJjbHMtNCIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgOCIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDQwMjkuMjY2IDIxODYuOTM0KSIvPjxnIGZpbGw9IiNiNzJiMWMiIHN0cm9rZT0iIzhiMTEwNCIgc3Ryb2tlLXdpZHRoPSIuMjUiIGRhdGEtbmFtZT0iRWxsaXBzZSAxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxODM5LjM3NSA2MTk2LjcwOCkiPjxjaXJjbGUgY3g9IjYuMDY3IiBjeT0iNi4wNjciIHI9IjYuMDY3IiBzdHJva2U9Im5vbmUiLz48Y2lyY2xlIGN4PSI2LjA2NyIgY3k9IjYuMDY3IiByPSI1Ljk0MiIgZmlsbD0ibm9uZSIvPjwvZz48cGF0aCBkPSJNMTg0My45MTEgNjIwMC4zNTRzLS4wNDguOTE3LS42OS45MjVjLS42NDIuMDA4LTEuMzEyIDAtMS4zMTIgMGEyLjEyMyAyLjEyMyAwIDAgMC0uNDA5IDEuNTJjMCAxLjEzOC4zMjEgMS40NDIuMzIxIDEuNDQyaDEuNDYzYS41OC41OCAwIDAgMSAuNjI4LjYyOHYxLjVhMy40ODcgMy40ODcgMCAwIDAgMS41ODYuMjU4IDUuOCA1LjggMCAwIDAgMS41MDctLjI1OHYtMS41YS42NTUuNjU1IDAgMCAxIC42Ni0uNjI4IDkuNTk0IDkuNTk0IDAgMCAwIDEuMy0uMTI2cy4zNTYtLjMzNi4zOS0xLjQ2N2MuMDM0LTEuMTMxLS4zMTctMS40NzctLjMxNy0xLjQ3N2gtMS41MjJhLjU3Ni41NzYgMCAwIDEtLjY4NS0uNjA5IDEwLjE2OCAxMC4xNjggMCAwIDEgMC0xLjQ3NiA0LjMyNiA0LjMyNiAwIDAgMC0yLjkxNyAwYy0uMDE5LjYyNyAwIDEuMjY4IDAgMS4yNjh6Ii8+PC9nPjwvZz48L3N2Zz4=","lego-ev3-us":G,"lego-ev3-l-motor":U,"lego-ev3-m-motor":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGlkPSJzdmc3NjEwIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjE3MTkuODU4IDYxNzcuMjc2IDQ3LjE0IDQ3LjE0Ij48ZGVmcyBpZD0iZGVmczc1OTEiPjxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50IiB4MT0iLjUiIHgyPSIuNSIgeTE9Ii45MTkiIHkyPSIxLjA3NyIgZ3JhZGllbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giPjxzdG9wIGlkPSJzdG9wNzU3NSIgb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYThhOWE4Ii8+PHN0b3AgaWQ9InN0b3A3NTc3IiBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM1NDU1NTQiLz48L2xpbmVhckdyYWRpZW50PjxmaWx0ZXIgaWQ9IlVuaW9uXzEiIHdpZHRoPSI0Ny4xNCIgaGVpZ2h0PSI0Ny4xNCIgeD0iMTcxOS44NTgiIHk9IjYxNzcuMjc2IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiPjxmZU9mZnNldCBpZD0iZmVPZmZzZXQ3NTgwIi8+PGZlR2F1c3NpYW5CbHVyIGlkPSJmZUdhdXNzaWFuQmx1cjc1ODIiIHJlc3VsdD0iYmx1ciIgc3RkRGV2aWF0aW9uPSIuNSIvPjxmZUZsb29kIGlkPSJmZUZsb29kNzU4NCIgZmxvb2Qtb3BhY2l0eT0iLjMyMiIvPjxmZUNvbXBvc2l0ZSBpZD0iZmVDb21wb3NpdGU3NTg2IiBpbjI9ImJsdXIiIG9wZXJhdG9yPSJpbiIgcmVzdWx0PSJyZXN1bHQxIi8+PGZlQ29tcG9zaXRlIGlkPSJmZUNvbXBvc2l0ZTc1ODgiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9InJlc3VsdDEiLz48L2ZpbHRlcj48c3R5bGUgaWQ9InN0eWxlNzU3MyI+LmNscy0ze2ZpbGw6IzNjM2MzY308L3N0eWxlPjwvZGVmcz48ZyBpZD0iTWVkaXVtX01vdG9yIiBkYXRhLW5hbWU9Ik1lZGl1bSBNb3RvciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM0NiA1NTU0KSI+PGcgaWQ9Ikdyb3VwXzQiIGRhdGEtbmFtZT0iR3JvdXAgNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzc1LjM1OCA2MjQuNzc2KSI+PHBhdGggaWQ9IlBhdGhfMSIgZmlsbD0idXJsKCNsaW5lYXItZ3JhZGllbnQpIiBkPSJNMy4yODEtLjI4N2gzOWEyLjM1NyAyLjM1NyAwIDAgMSAyLjU3IDEuOTcydjQwLjM0OGMwIDEtMS4xIDEuODItMi41NyAxLjgyaC0zOWMtMS40NzMgMC0yLjU3LS44MTUtMi41Ny0xLjgyVjEuNjg1YTIuMzU3IDIuMzU3IDAgMCAxIDIuNTctMS45NzJaIiBkYXRhLW5hbWU9IlBhdGggMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLS43MTEgLjI4NykiLz48L2c+PGcgaWQ9Ikdyb3VwXzciIGRhdGEtbmFtZT0iR3JvdXAgNyIgdHJhbnNmb3JtPSJyb3RhdGUoOTAgLTEwMi42MzkgNTIyLjEzNykiPjxnIGlkPSJnNzU5NiIgZmlsdGVyPSJ1cmwoI1VuaW9uXzEpIiB0cmFuc2Zvcm09InJvdGF0ZSgtOTAgLTIyMDYuNjQgMzk3Mi4xNCkiPjxwYXRoIGlkPSJVbmlvbl8xLTIiIGZpbGw9IiNhOGE5YTgiIGQ9Ik0yMS4yMzYgNDQuMTRhNi4yMTkgNi4yMTkgMCAwIDEtNi4yMTktNi4yMTl2LTguOGgtOC44QTYuMjE5IDYuMjE5IDAgMCAxIDAgMjIuOXYtMS42NjRhNi4yMTkgNi4yMTkgMCAwIDEgNi4yMTktNi4yMTloOC44di04LjhBNi4yMTkgNi4yMTkgMCAwIDEgMjEuMjM2IDBIMjIuOWE2LjIxOSA2LjIxOSAwIDAgMSA2LjIxOSA2LjIxOXY4LjhoOC44YTYuMjE5IDYuMjE5IDAgMCAxIDYuMjE5IDYuMjE5VjIyLjlhNi4yMTkgNi4yMTkgMCAwIDEtNi4yMTkgNi4yMTloLTguOHY4LjhBNi4yMTkgNi4yMTkgMCAwIDEgMjIuOSA0NC4xNFoiIGRhdGEtbmFtZT0iVW5pb24gMSIgdHJhbnNmb3JtPSJyb3RhdGUoOTAgLTIyMDYuNjQgMzk3Mi4xNCkiLz48L2c+PGNpcmNsZSBpZD0iRWxsaXBzZV8xIiBjeD0iNC44NTQiIGN5PSI0Ljg1NCIgcj0iNC44NTQiIGNsYXNzPSJjbHMtMyIgZGF0YS1uYW1lPSJFbGxpcHNlIDEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3LjI5MiAxLjUxNykiLz48Y2lyY2xlIGlkPSJFbGxpcHNlXzIiIGN4PSI0Ljg1NCIgY3k9IjQuODU0IiByPSI0Ljg1NCIgY2xhc3M9ImNscy0zIiBkYXRhLW5hbWU9IkVsbGlwc2UgMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTcuMjkyIDMyLjkxNSkiLz48Y2lyY2xlIGlkPSJFbGxpcHNlXzEtMiIgY3g9IjQuODU0IiBjeT0iNC44NTQiIHI9IjQuODU0IiBjbGFzcz0iY2xzLTMiIGRhdGEtbmFtZT0iRWxsaXBzZSAxIiB0cmFuc2Zvcm09InJvdGF0ZSgtOTAgMTQuMTgzIDEyLjY2NSkiLz48Y2lyY2xlIGlkPSJFbGxpcHNlXzItMiIgY3g9IjQuODU0IiBjeT0iNC44NTQiIHI9IjQuODU0IiBjbGFzcz0iY2xzLTMiIGRhdGEtbmFtZT0iRWxsaXBzZSAyIiB0cmFuc2Zvcm09InJvdGF0ZSgtOTAgMjkuODgxIC0zLjAzNCkiLz48L2c+PGcgaWQ9IkVsbGlwc2VfNCIgZmlsbD0iI2I3MmIxYyIgc3Ryb2tlPSIjOGIxMTA0IiBzdHJva2Utd2lkdGg9Ii4yNSIgZGF0YS1uYW1lPSJFbGxpcHNlIDQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5MC45MDMgNjQwLjE3KSI+PGNpcmNsZSBpZD0iZWxsaXBzZTc2MDMiIGN4PSI2Ljc1MiIgY3k9IjYuNzUyIiByPSI2Ljc1MiIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBpZD0iZWxsaXBzZTc2MDUiIGN4PSI2Ljc1MiIgY3k9IjYuNzUyIiByPSI2LjYyNyIgZmlsbD0ibm9uZSIvPjwvZz48cGF0aCBpZD0iSG9sZSIgZD0iTTU2MDYuNDM3IDk2Mi40MTNzLS4wNTQgMS4wMjEtLjc2OSAxLjAyOS0xLjQ2MSAwLTEuNDYxIDBhMi4zNjMgMi4zNjMgMCAwIDAtLjQ1NSAxLjY5MWMwIDEuMjY2LjM1NyAxLjYuMzU3IDEuNmgxLjYyOGEuNjQ1LjY0NSAwIDAgMSAuNy43djEuNjY3YTMuODgyIDMuODgyIDAgMCAwIDEuNzY2LjI4NyA2LjQ1OSA2LjQ1OSAwIDAgMCAxLjY3Ni0uMjg3di0xLjY2N2EuNzMuNzMgMCAwIDEgLjczNC0uNyAxMC42NzQgMTAuNjc0IDAgMCAwIDEuNDQ0LS4xNHMuNC0uMzc0LjQzNC0xLjYzMi0uMzUzLTEuNjQ0LS4zNTMtMS42NDRoLTEuNjkzYS42NDEuNjQxIDAgMCAxLS43NjItLjY3OCAxMS40MSAxMS40MSAwIDAgMSAwLTEuNjQzIDQuODE1IDQuODE1IDAgMCAwLTMuMjQ2IDBjLS4wMTcuNjk4IDAgMS40MTcgMCAxLjQxN1oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01MjEwLjQ4NiAtMzE4LjE4NikiLz48L2c+PC9zdmc+"});var V=a(12149);let J=({text:e,handleDelete:t,handleEdit:a})=>(0,s.jsxs)(s.Fragment,{children:[e,(0,s.jsxs)("div",{className:"edit-buttons",children:[(0,s.jsx)(C.$,{small:!0,minimal:!0,icon:"edit",onClick:e=>{e.stopPropagation(),a(e)}}),(0,s.jsx)(C.$,{small:!0,minimal:!0,intent:"danger",icon:"trash",onClick:e=>{e.stopPropagation(),t(e)}})]})]}),W=({session:e})=>{if(!e)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Not connected to a deviceprograms are run in your local browser."}),(0,s.jsx)("p",{children:"Select a device from the right."})]});let{device:t,connection:a}=e;switch(a.status){case"CONNECTED":return(0,s.jsxs)("p",{children:["Connected to ",t.title," (",t.type,")."]});case"CONNECTING":return(0,s.jsx)(r.I,{description:"Connecting...",icon:(0,s.jsx)(o.y,{})});default:return(0,s.jsxs)(l.P,{intent:"danger",children:["Could not connect to ",t.title,": ",a.error||"unknown error"]})}},Y=["portA","portB","portC","portD"],X=["port1","port2","port3","port4"],$=e=>{let[t,a]=g.useState(!!e.secretParams||void 0),[i,n]=g.useState(e.secretParams),r=(0,V.N4)(e=>!!e.session.accessToken&&!!e.session.role),o=(0,V.N4)(e=>e.session.remoteExecutionDevices),p=(0,V.N4)(e=>e.session.remoteExecutionSession),S=(0,y.wA)(),C=p?.connection.status==="CONNECTED";g.useEffect(()=>{p&&p.workspace!==e.workspace&&S(R.o.remoteExecUpdateSession({...p,workspace:e.workspace}))},[p,S,e.workspace]),g.useEffect(()=>{!o&&r&&S(R.o.remoteExecFetchDevices())},[S,o,r]),g.useEffect(()=>()=>{S(R.o.remoteExecDisconnect())},[S]);let I=(0,g.useCallback)(async e=>{if(await (0,A.cu)({title:"Really delete device?",contents:`Are you sure you want to delete ${e.title} (${e.type})?`,positiveLabel:"Delete",positiveIntent:"danger",negativeLabel:"No",icon:"trash"})){try{await (0,v.Yl)(e)}catch(e){(0,T.JB)(e.message||"Unknown error occurred.");return}C&&S(R.o.remoteExecDisconnect()),S(R.o.remoteExecFetchDevices())}},[S,C]);if(!r)return(0,s.jsxs)(l.P,{intent:"danger",children:["Please ",(0,s.jsx)(f.k2,{to:"/login",children:"log in"})," to execute on a remote device."]});let E=p?.device;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"sa-remote-execution row",children:[(0,s.jsx)("div",{className:"col-xs-6",children:(0,s.jsx)(W,{session:p})}),(0,s.jsx)("div",{className:"col-xs-6 devices-menu-container",children:(0,s.jsxs)(d.W,{className:m()(c.ELEVATION_0),children:[(0,s.jsx)(u.D,{text:"Browser",onClick:()=>S(R.o.remoteExecDisconnect()),icon:E?void 0:"tick",intent:E?void 0:"success"}),o?.map(t=>{let{id:i,title:n,type:r}=t,o=E?.id===t.id;return(0,s.jsx)(u.D,{onClick:()=>S(R.o.remoteExecConnect(e.workspace,t)),text:`${n} (${r})`,icon:o&&"tick",labelElement:(0,s.jsx)(J,{text:o&&C?"Connected":void 0,handleEdit:()=>a(t),handleDelete:async()=>await I(t)}),intent:o&&C?"success":void 0},i)}),(0,s.jsx)(h.N,{}),(0,s.jsx)(u.D,{text:"Add new device...",icon:"add",onClick:()=>a(!0)})]})}),(0,s.jsx)(O,{isOpen:!!t,deviceToEdit:"object"==typeof t?t:void 0,defaultSecret:!0===t?i:void 0,onClose:()=>{a(void 0),n(void 0),e.callbackFunction&&e.callbackFunction(void 0)}})]}),C&&E&&E.peripherals&&(0,s.jsx)("div",{children:(0,s.jsxs)("div",{style:{textAlign:"center",maxWidth:480,marginInline:"auto",marginBlock:"2rem"},children:[(0,s.jsx)("div",{className:"sa-remote-execution row",children:Y.map(e=>{let t=E.peripherals?.[e];return t?(0,s.jsx)(w,{src:B[t.type],text:`Speed: ${t.speed}\xb0/s
Position: ${t.position}\xb0`}):(0,s.jsx)(w,{src:(0,s.jsx)(x,{port:e.substring(e.length-1)})})})}),(0,s.jsx)(b,{}),(0,s.jsx)("div",{className:"sa-remote-execution row",children:X.map(e=>{let t=E.peripherals?.[e];return t?(0,s.jsx)(w,{src:B[t.type],text:H[t.mode](t.value)}):(0,s.jsx)(w,{src:(0,s.jsx)(x,{port:e.substring(e.length-1)})})})})]})})]})};var Z=a(11678),q=a(89368),Q=a(28761),K=a(61300),ee=a(40503),et=a(61488),ea=a(58049);let es="span-HKZhdL",ei="left-cell-S6a6Gb",en="right-cell-JYWx7u",er="switch-pdgpl6",eo="default-switch-dkkGzC",el="table-ljR0Va",ed="user-icon-cPHoVe";var ec=a(6261);function eu({users:e,playgroundCode:t}){let{t:a}=(0,ee.Bd)("sideContent",{keyPrefix:"sessionManagement"}),[i,n]=(0,g.useState)(!0),[r,o]=(0,g.useState)(!0),[l,d]=(0,g.useState)(Object.fromEntries(Object.entries(e).map(([e])=>[e,!0]))),u=(0,V.N4)(e=>e.workspaces.playground.updateUserRoleCallback);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:es,children:["Toggle all roles in current session:",(0,s.jsx)(Z.dO,{labelElement:i?"Editor":"Viewer",alignIndicator:"left",checked:i,onChange:t=>(t=>{try{Object.keys(e).forEach(e=>{"all"!==e&&u(e,t?K.CollabEditingAccess.EDITOR:K.CollabEditingAccess.VIEWER)})}finally{n(t)}})(t.target.checked),className:m()(er,eo)})]}),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:es,children:["Default role on join:",(0,s.jsx)(Z.dO,{labelElement:r?"Editor":"Viewer",alignIndicator:"left",checked:r,onChange:e=>{var a;return a=e.target.checked,void((0,et.Iu)(t,!a),o(a))},className:m()(er,eo)})]}),(0,s.jsxs)(q._,{compact:!0,className:el,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:a("name")}),(0,s.jsx)("th",{children:a("role")})]})}),(0,s.jsx)("tbody",{children:Object.entries(e).map(([e,t],a)=>(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:m()(c.INTERACTIVE,ei),children:[(0,s.jsx)("div",{style:{backgroundColor:t.color},className:ed}),(0,s.jsx)("div",{children:t.name})]}),(0,s.jsx)("td",{className:en,children:t.role===K.CollabEditingAccess.OWNER?"Admin":(0,s.jsx)(Z.dO,{labelElement:t.role.charAt(0).toUpperCase()+t.role.slice(1),alignIndicator:"right",checked:t.role===K.CollabEditingAccess.EDITOR,onChange:t=>((e,t)=>{if(!l[t]){d(e=>({...e,[t]:!0}));try{u(t,e?K.CollabEditingAccess.EDITOR:K.CollabEditingAccess.VIEWER)}finally{d(e=>({...e,[t]:!1}))}}})(t.target.checked,e),className:er})})]},e))})]})]})}let eh=({users:e,playgroundCode:t,readOnly:a,workspaceLocation:n})=>{let{t:r}=(0,ee.Bd)("sideContent",{keyPrefix:"sessionManagement"}),o=(0,y.wA)();if((0,g.useEffect)(()=>{o((0,ec.Qb)("session_management",n))},[o,n,e]),0===Object.values(e).length)return;let l=Object.values(e)[0];return(0,s.jsxs)("div",{className:"table-container-x0WGBi",children:[(0,s.jsx)("span",{className:es,children:"This is the session management tab. Add users by sharing the session code. If you are the owner of this session, you can manage users' access levels from the table below."}),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:es,children:["Session code:",(0,s.jsx)(ea.A,{text:(0,et.tT)(t),onCopy:()=>(0,T.uT)("Session url copied: "+(0,et.tT)(t)),children:(0,s.jsxs)("div",{className:"session-code-gOG8uJ",children:[(0,et.tT)(t),(0,s.jsx)(Q.I,{icon:i.W.DUPLICATE})]})})]}),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:es,children:["Number of users in the session: ",Object.entries(e).length]}),(0,s.jsx)("div",{className:"session-management-table",children:l.role===K.CollabEditingAccess.OWNER?(0,s.jsx)(eu,{users:e,defaultReadOnly:a,playgroundCode:t}):(0,s.jsxs)(q._,{compact:!0,className:el,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:r("name")}),(0,s.jsx)("th",{children:r("role")})]})}),(0,s.jsx)("tbody",{children:Object.values(e).map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:m()(c.INTERACTIVE,ei),children:[(0,s.jsx)("div",{style:{backgroundColor:e.color},className:ed}),(0,s.jsx)("div",{children:e.name})]}),(0,s.jsx)("td",{className:m()(c.INTERACTIVE,en),children:e.role===K.CollabEditingAccess.OWNER?"Admin":e.role.charAt(0).toUpperCase()+e.role.slice(1)})]},e.color))})]})})]})};a(50447);var ep=a(5193),em=a(51851),eg=a(35537),ey=a(2353),ef=a(7496),eb=a(96402),ex=a(95438),ev=a(24564);let eA=()=>{let{t:e}=(0,ee.Bd)("sideContent",{keyPrefix:"substVisualizer"});return(0,s.jsx)("div",{children:(0,s.jsxs)("div",{id:"substituter-default-text",className:c.RUNNING_TEXT,children:[e("welcome"),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),e("instructions"),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),e("evaluationSteps"),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(ep.c,{}),e("shortcutsTitle"),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),e("shortcuts.a"),(0,s.jsx)("br",{}),e("shortcuts.e"),(0,s.jsx)("br",{}),e("shortcuts.f"),(0,s.jsx)("br",{}),e("shortcuts.b"),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),e("shortcutsNote")]})})},eT=e=>(0,s.jsx)(em.Z,{children:(0,s.jsx)(eg.AC,{className:"result-output",children:e.content})});function ew(e,t){return void 0===e&&void 0===t?void 0:void 0===e?t:void 0===t?e:a=>s=>{let i=e(a)(s);return t(a)(i)}}let eS=({node:e,styleWrapper:t,popoverDepth:a,renderNode:i,renderFunctionArguments:n})=>(0,s.jsx)("div",{className:m()("stepper-popover",c.DARK),children:(0,s.jsxs)("div",{className:"stepper-display",children:[(0,s.jsx)(Q.I,{icon:"code"}),(0,s.jsx)("span",{children:" Function definition"}),(0,s.jsx)("pre",{className:c.CODE_BLOCK,children:(0,s.jsxs)("code",{children:[n(e.params,i,t,a),(0,s.jsx)("span",{className:"stepper-identifier",children:" => "}),i(e.body,{styleWrapper:t??(e=>e=>e),popoverDepth:a+1})]})})]})});function eC(e){let t=(0,g.useCallback)(()=>(function e(t,a){let i=a.styleWrapper,n=a.popoverDepth??0,r=(e,t,a,i)=>{let n=e.map(e=>t(e,{styleWrapper:a??(e=>e=>e),popoverDepth:i})),r=n.slice(1).reduce((e,t)=>(0,s.jsxs)("span",{children:[e,", ",t]}),n[0]);return 1!==n.length&&(r=(0,s.jsxs)("span",{children:["(",r,")"]})),r},o=t=>{let a=t.map(t=>e(t,{styleWrapper:i,popoverDepth:n})),r=a.slice(1).reduce((e,t)=>(0,s.jsxs)("span",{children:[e,", ",t]}),a[0]);return(0,s.jsxs)("span",{children:["(",r,")"]})},l={Literal(e){let t;return(0,s.jsx)("span",{className:"stepper-literal",children:e.raw?e.raw:"string"==typeof(t=e.value)?'"'+t+'"':null!==t?t.toString():"null"})},Identifier:e=>(0,s.jsx)("span",{children:e.name}),UnaryExpression:t=>(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"stepper-operator",children:`${t.operator}`}),e(t.argument,{parentNode:t,styleWrapper:i,popoverDepth:n})]}),BinaryExpression:t=>(0,s.jsxs)("span",{children:[e(t.left,{parentNode:t,isRight:!1,styleWrapper:i,popoverDepth:n}),(0,s.jsx)("span",{className:"stepper-operator",children:` ${t.operator} `}),e(t.right,{parentNode:t,isRight:!0,styleWrapper:i,popoverDepth:n})]}),LogicalExpression:t=>(0,s.jsxs)("span",{children:[e(t.left,{parentNode:t,isRight:!1,styleWrapper:i,popoverDepth:n}),(0,s.jsx)("span",{className:"stepper-operator",children:` ${t.operator} `}),e(t.right,{parentNode:t,isRight:!0,styleWrapper:i,popoverDepth:n})]}),ConditionalExpression:t=>(0,s.jsxs)("span",{children:[e(t.test,{styleWrapper:i,popoverDepth:n}),(0,s.jsx)("span",{className:"stepper-conditional-operator",children:" ? "}),e(t.consequent,{styleWrapper:i,popoverDepth:n}),(0,s.jsx)("span",{className:"stepper-conditional-operator",children:" : "}),e(t.alternate,{styleWrapper:i,popoverDepth:n})]}),ArrayExpression(t){let a=t.elements.filter(e=>null!==e).map(t=>e(t,{styleWrapper:i,popoverDepth:n})),r=a.slice(1).reduce((e,t)=>(0,s.jsxs)("span",{children:[e,", ",t]}),a[0]);return(0,s.jsxs)("span",{children:["[",r,"]"]})},ArrowFunctionExpression(t){function a(o){return"Identifier"===o.type&&o.name===t.name?function(o){return(0,s.jsx)("span",{className:"stepper-mu-term",children:(0,s.jsx)(eb.A,{interactionKind:"hover",placement:"bottom",usePortal:0===n,lazy:!0,popoverClassName:"stepper-popover",content:(0,s.jsx)(eS,{node:t,styleWrapper:ew(i,a),popoverDepth:n,renderNode:e,renderFunctionArguments:r}),children:o})})}:e=>e}return t.name?(0,s.jsx)("span",{className:"stepper-mu-term",children:(0,s.jsx)(eb.A,{interactionKind:"hover",placement:"bottom",usePortal:0===n,lazy:!0,content:(0,s.jsx)(eS,{node:t,styleWrapper:ew(i,a),popoverDepth:n,renderNode:e,renderFunctionArguments:r}),children:t.name})}):(0,s.jsxs)("span",{children:[r(t.params,e,i,n),(0,s.jsx)("span",{className:"stepper-identifier",children:" => "}),e(t.body,{styleWrapper:ew(i,a),popoverDepth:n})]})},CallExpression(t){let a=e(t.callee,{styleWrapper:i,popoverDepth:n});return"ArrowFunctionExpression"===t.callee.type&&void 0===t.callee.name&&(a=(0,s.jsxs)("span",{children:["(",a,")"]})),(0,s.jsxs)("span",{children:[a,o(t.arguments)]})},Program:t=>(0,s.jsx)("span",{children:t.body.map((t,a)=>(0,s.jsx)("div",{children:e(t,{styleWrapper:i,popoverDepth:n})},a))}),IfStatement:t=>(0,s.jsxs)("span",{children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"stepper-identifier",children:"if "}),"(",(0,s.jsx)("span",{children:e(t.test,{styleWrapper:i,popoverDepth:n})}),") "]}),(0,s.jsx)("span",{children:e(t.consequent,{styleWrapper:i,popoverDepth:n})}),t.alternate&&(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"stepper-identifier",children:" else "}),e(t.alternate,{styleWrapper:i,popoverDepth:n})]})]}),ReturnStatement:t=>(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"stepper-operator",children:"return "}),t.argument&&e(t.argument,{styleWrapper:i,popoverDepth:n}),";"]}),BlockStatement:t=>(0,s.jsxs)("span",{children:["{",t.body.map((t,a)=>(0,s.jsx)("div",{style:{marginLeft:"15px"},children:e(t,{styleWrapper:i,popoverDepth:n})},a)),"}"]}),ExpressionStatement:t=>(0,s.jsxs)("span",{children:[e(t.expression,{styleWrapper:i,popoverDepth:n}),";"]}),FunctionDeclaration:t=>(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"stepper-identifier",children:`function ${t.id.name}`}),(0,s.jsx)("span",{children:o(t.params)}),(0,s.jsxs)("span",{children:[" ",e(t.body,{styleWrapper:i,popoverDepth:n})]})]}),VariableDeclaration:t=>(0,s.jsxs)("span",{children:[(0,s.jsxs)("span",{className:"stepper-identifier",children:[t.kind," "]}),t.declarations.map((t,a)=>(0,s.jsxs)("span",{children:[0!==a&&", ",e(t,{styleWrapper:i,popoverDepth:n})]},a)),";"]}),VariableDeclarator:t=>(0,s.jsxs)("span",{children:[e(t.id,{styleWrapper:i,popoverDepth:n})," = ",t.init?e(t.init,{styleWrapper:i,popoverDepth:n}):"undefined"]})}[t.type],d=function(e,t,a){if(void 0===t)return!1;let s=e_[e.type];if(s===eE)return!0;let i=e_[t.type];return void 0!==s&&void 0!==i&&(s!==i?!a&&15===s&&14===i||s<i:"operator"in e&&"operator"in t&&(13===s||14===s)&&("**"===e.operator&&"**"===t.operator?!a:13===s&&13===i&&("??"===e.operator||"??"===t.operator)||eI[e.operator]<=eI[t.operator]))}(t,a.parentNode,a.isRight),c=l?l(t):`<${t.type}>`;return d&&(c=(0,s.jsxs)("span",{children:["(",c,")"]})),i&&(c=i(t)(c)),c})(e.ast,{styleWrapper:function(t){return a=>{if(void 0===e.markers)return a;let i=(0,s.jsx)("span",{children:a});return e.markers.forEach(e=>{if(e.redex===t){let a="FunctionDeclaration"===t.type?"div":"span";i=(0,s.jsx)(a,{className:e.redexType,children:i})}}),i}},popoverDepth:0}),[e]);return(0,s.jsx)("div",{className:"stepper-display",children:t()})}let eI={"||":2,"??":3,"&&":4,"|":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},eE=17,e_={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:17,ClassExpression:17,FunctionExpression:17,ObjectExpression:17,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1},ej=e=>{let[t,a]=(0,g.useState)(1),i=e.content.length,n=0!==i,r=(0,y.wA)(),o=(0,g.useCallback)(()=>r((0,ec.Qb)("subst_visualiser",e.workspaceLocation)),[e.workspaceLocation,r]);(0,g.useEffect)(()=>{(0,ev.HighlightRulesSelector)(2),(0,ev.ModeSelector)(2)},[]),(0,g.useEffect)(()=>{a(1),e.content.length>0&&o()},[e.content,a,o]);let l=()=>a(1),d=()=>a(i),u=()=>a(Math.max(1,t-1)),h=()=>a(Math.min(e.content.length,t+1)),p=(0,ex.vA)(n?[["a",l],["f",h],["b",u],["e",d]]:[["a",()=>{}],["f",()=>{}],["b",()=>{}],["e",()=>{}]]),f=(0,g.useCallback)(t=>{let a=t<=i?t-1:0,s=e.content[a].markers;return void 0===s||void 0===s[0]?"...":s[0].explanation??"..."},[i,e.content]),b=(0,g.useCallback)(t=>{let a=t<=i?t-1:0;return e.content[a]},[i,e.content]);return(0,s.jsxs)("div",{className:m()("sa-substituter",c.DARK),onKeyDown:p,tabIndex:-1,children:[(0,s.jsx)(ey.A,{disabled:!n,min:1,max:i,onChange:a,value:t<=i?t:1}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsxs)(ef.e,{children:[(0,s.jsx)(C.$,{disabled:!n,icon:"double-chevron-left",onClick:l}),(0,s.jsx)(C.$,{disabled:!n||1===t,icon:"chevron-left",onClick:u}),(0,s.jsx)(C.$,{disabled:!n||t===i,icon:"chevron-right",onClick:h}),(0,s.jsx)(C.$,{disabled:!n,icon:"double-chevron-right",onClick:d})]})})," ",(0,s.jsx)("br",{}),n?(0,s.jsx)(eC,{...b(t)}):(0,s.jsx)(eA,{}),n?(0,s.jsx)(eT,{content:f(t)}):null]})},ek=["mobile_editor","mobile_editor_run"],eN=["introduction"],eP=e=>({label:"Introduction",iconName:i.W.HOME,body:(0,s.jsx)(n.A,{content:e,openLinksInNewWindow:!0}),id:"introduction"}),eR=(e,t,a)=>({label:"Session Management",iconName:i.W.PEOPLE,body:(0,s.jsx)(eh,{users:e,playgroundCode:t,readOnly:a,workspaceLocation:"playground"}),id:"session_management"}),eL=(e,t)=>({label:"Remote Execution",iconName:i.W.SATELLITE,body:(0,s.jsx)($,{workspace:"playground",secretParams:e||void 0,callbackFunction:t}),id:"remote_execution"}),eM=(e,t)=>{let a;return{label:"Stepper",iconName:i.W.FLOW_REVIEW,body:(0,s.jsx)(ej,{workspaceLocation:e,content:(a=t[0])&&"result"===a.type&&a.value instanceof Array&&a.value[0]===Object(a.value[0])&&"ast"in a.value[0]?a.value:[]}),id:"subst_visualiser"}}},71283(e,t,a){"use strict";a.d(t,{M:()=>n});var s=a(41344),i=a(21681);class n{route;filters;constructor(e,t){this.route=e,this.filters=t,this.route=e,this.filters=t??[]}check(e,t="/"){return this.filters.push([e,t]),this}build(){return((e,t=[])=>{let a=t.map(([e,t="/"])=>["boolean"==typeof e?()=>e:e,t]);return{...e,loader:t=>{let n=i.M.getState();for(let[e,t]of a)if(!e(n))return(0,s.V2)(t);return e.loader&&"function"==typeof e.loader?e.loader(t):null}}})(this.route,this.filters)}}},58162(e,t,a){"use strict";a.d(t,{hK:()=>T,uE:()=>S,zG:()=>w});var s=a(66406),i=a(41344),n=a(91948),r=a(71283);let o=()=>Promise.all([a.e("16663"),a.e("58549"),a.e("9628")]).then(a.bind(a,48248)),l=()=>a.e("24423").then(a.bind(a,18138)),d=()=>a.e("39756").then(a.bind(a,23687)),c=()=>a.e("4391").then(a.bind(a,84602)),u=()=>a.e("37838").then(a.bind(a,37277)),h=()=>a.e("78352").then(a.bind(a,10323)),p=()=>Promise.all([a.e("44077"),a.e("37854"),a.e("65865"),a.e("75167"),a.e("16326"),a.e("27354"),a.e("64369")]).then(a.bind(a,16545)),m=()=>a.e("2219").then(a.bind(a,66054)),g=()=>a.e("72617").then(a.bind(a,32176)),y=()=>a.e("77707").then(a.bind(a,53126)),f=()=>Promise.all([a.e("44077"),a.e("3229"),a.e("75167"),a.e("70748")]).then(a.bind(a,12778)),b=async()=>{let{EditStoryComponent:e}=await a.e("28339").then(a.bind(a,11646));return{Component:e}},x=async()=>{let{ViewStoryComponent:e}=await a.e("28339").then(a.bind(a,11646));return{Component:e}},v=()=>a.e("22867").then(a.bind(a,39358)),A=[{path:"contributors",lazy:()=>a.e("87147").then(a.bind(a,34150))},{path:"callback/github",lazy:()=>a.e("23897").then(a.bind(a,60512))},{path:"sicpjs/:section?",lazy:()=>Promise.all([a.e("44077"),a.e("37854"),a.e("16663"),a.e("65865"),a.e("21944"),a.e("75167"),a.e("16326"),a.e("27354"),a.e("78195")]).then(a.bind(a,918))},{path:"features",lazy:()=>a.e("3256").then(a.bind(a,61163))}],T=[{path:"*",lazy:o,children:[{path:"",loader:()=>(0,i.HC)("/playground")},{path:"playground",lazy:p},...A,{path:"*",lazy:m}]}],w=({name:e,isLoggedIn:t,courseId:a,academyRoutes:s=[]})=>{let T=e=>new r.M(e).check(e=>void 0!==e.session.name,"/login").check(e=>void 0!==e.session.role,"/welcome").build();return[{path:"nus_login",lazy:l,loader:()=>n.A.hasNusAuthProviders?null:(0,i.V2)("/login"),children:[{path:"",lazy:h}]},{path:"*",lazy:o,children:[{path:"",loader:()=>(t?null===a?(0,i.V2)("/welcome"):null:(0,i.V2)("/login"))||(0,i.HC)(`/courses/${a}`)},{path:"login",lazy:l,loader:()=>n.A.hasOtherAuthProviders?null:(0,i.V2)("/nus_login"),children:[{path:"",lazy:d}]},{path:"login",lazy:l,children:[{path:"callback",lazy:c}]},{path:"login",children:[{path:"vscode_callback",lazy:u}]},{path:"welcome",lazy:g,loader:()=>void 0===e?(0,i.V2)("/login"):null!=a?(0,i.V2)(`/courses/${a}`):null},{path:"courses",loader:()=>(0,i.V2)("/")},T({path:"courses/:courseId/*",lazy:y,children:s}),T({path:"playground/:playgroundCode?",lazy:p}),{path:"mission-control/:assessmentId?/:questionId?",lazy:f},T({path:"courses/:courseId/stories/new",lazy:b}),T({path:"courses/:courseId/stories/view/:id",lazy:x}),T({path:"courses/:courseId/stories/edit/:id",lazy:b}),T({path:"courses/:courseId/stories",lazy:v}),...A,{path:"*",lazy:m}]}]},S=s.PU(i.BV)},51475(){},83870(){},1494(){},51172(){},74316(){},70074(){},27799(){},43540(){},22525(){},86370(){},5496(){},78958(){},14892(){},57047(){},82285(){},17959(){},71350(){},48619(){}},y={};function f(e){var t=y[e];if(void 0!==t)return t.exports;var a=y[e]={id:e,loaded:!1,exports:{}};return g[e].call(a.exports,a,a.exports,f),a.loaded=!0,a.exports}if(f.m=g,t=(e="function"==typeof Symbol)?Symbol("rspack queues"):"__rspack_queues",a=f.aE=e?Symbol("rspack exports"):"__webpack_exports__",s=e?Symbol("rspack error"):"__rspack_error",i=e?Symbol("rspack done"):"__rspack_done",n=f.zS=e?Symbol("rspack defer"):"__rspack_defer",r=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},f.a=(e,o,l)=>{l&&((d=[]).d=-1);var d,c,u,h,p=new Set,m=e.exports,g=new Promise((e,t)=>{h=t,u=e});g[a]=m,g[t]=e=>{d&&e(d),p.forEach(e),g.catch(()=>{})},e.exports=g,o(e=>{c=e.map(e=>{if(null!==e&&"object"==typeof e){if(!e[t]&&e[n]){var o=e[n];if(!o.some(e=>{var t=y[e];return!t||!1===t[i]}))return e;var l=e;e={then(e){Promise.all(o.map(f)).then(()=>e(l))}}}if(e[t])return e;if(e.then){var d=[];d.d=0,e.then(e=>{c[a]=e,r(d)},e=>{c[s]=e,r(d)});var c={};return c[n]=!1,c[t]=e=>e(d),c}}var u={};return u[t]=()=>{},u[a]=e,u});var o,l=()=>c.map(e=>{if(e[n])return e;if(e[s])throw e[s];return e[a]}),u=new Promise(e=>{(o=()=>e(l)).r=0;var a=e=>e!==d&&!p.has(e)&&(p.add(e),e&&!e.d&&(o.r++,e.push(o)));c.map(e=>e[n]||e[t](a))});return o.r?u:l()},e=>(e?h(g[s]=e):u(m),r(d),g[i]=!0)),d&&d.d<0&&(d.d=0)},f.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return f.d(t,{a:t}),t},l=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,f.t=function(e,t){if(1&t&&(e=this(e)),8&t||"object"==typeof e&&e&&(4&t&&e.__esModule||16&t&&"function"==typeof e.then))return e;var a=Object.create(null);f.r(a);var s={};o=o||[null,l({}),l([]),l(l)];for(var i=2&t&&e;("object"==typeof i||"function"==typeof i)&&!~o.indexOf(i);i=l(i))Object.getOwnPropertyNames(i).forEach(t=>{s[t]=()=>e[t]});return s.default=()=>e,f.d(a,s),a},f.d=(e,t)=>{for(var a in t)f.o(t,a)&&!f.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},f.f={},f.e=e=>Promise.all(Object.keys(f.f).reduce((t,a)=>(f.f[a](e,t),t),[])),f.u=e=>"static/js/async/"+(({10042:"date-fns-locale-pl-_lib-localize-index-js",1015:"date-fns-locale-da-_lib-localize-index-js",10289:"date-fns-locale-cy-index-js",1034:"date-fns-locale-ht-_lib-formatRelative-index-js",10466:"date-fns-locale-nb-_lib-match-index-js",10677:"date-fns-locale-ru-_lib-formatRelative-index-js",10848:"date-fns-locale-lv-_lib-match-index-js",11059:"date-fns-locale-be-_lib-formatLong-index-js",11165:"date-fns-locale-km-index-js",12117:"date-fns-locale-fy-_lib-formatRelative-index-js",1218:"date-fns-locale-zh-CN-_lib-formatLong-index-js",12297:"date-fns-locale-ar-_lib-match-index-js",12405:"date-fns-locale-sr-Latn-_lib-match-index-js",12535:"date-fns-locale-it-_lib-match-index-js",12928:"date-fns-locale-en-CA-_lib-formatLong-index-js",1315:"date-fns-locale-fi-_lib-formatLong-index-js",13326:"date-fns-locale-hi-_lib-formatDistance-index-js",13431:"date-fns-locale-bg-_lib-localize-index-js",13587:"date-fns-locale-vi-_lib-formatLong-index-js",14013:"date-fns-locale-sr-_lib-localize-index-js",14166:"date-fns-locale-de-_lib-formatDistance-index-js",14841:"date-fns-locale-ro-_lib-formatLong-index-js",14976:"date-fns-locale-zh-TW-_lib-formatRelative-index-js",15271:"date-fns-locale-ar-EG-_lib-formatDistance-index-js",15301:"date-fns-locale-az-_lib-formatLong-index-js",15408:"date-fns-locale-el-_lib-formatDistance-index-js",15412:"date-fns-locale-id-_lib-formatDistance-index-js",15424:"date-fns-locale-ja-_lib-formatDistance-index-js",15535:"date-fns-locale-he-_lib-formatRelative-index-js",159:"date-fns-locale-da-_lib-formatRelative-index-js",15915:"date-fns-locale-te-_lib-localize-index-js",1610:"date-fns-locale-it-index-js",1641:"date-fns-locale-en-NZ-index-js",16931:"date-fns-locale-it-_lib-formatLong-index-js",16933:"date-fns-locale-zh-TW-_lib-formatDistance-index-js",17173:"date-fns-locale-id-_lib-localize-index-js",17402:"date-fns-locale-vi-index-js",17562:"date-fns-locale-mk-_lib-formatRelative-index-js",17626:"date-fns-locale-mk-_lib-localize-index-js",17633:"date-fns-locale-te-_lib-match-index-js",17712:"date-fns-locale-hu-index-js",17744:"date-fns-locale-gu-_lib-formatLong-index-js",17752:"date-fns-locale-uz-index-js",17949:"date-fns-locale-ar-_lib-formatLong-index-js",1797:"date-fns-locale-zh-HK-_lib-formatDistance-index-js",18116:"date-fns-locale-hr-_lib-localize-index-js",18128:"date-fns-locale-kk-_lib-formatRelative-index-js",18562:"date-fns-locale-pt-_lib-localize-index-js",18837:"date-fns-locale-is-index-js",18852:"date-fns-locale-eu-_lib-formatRelative-index-js",18918:"date-fns-locale-ja-index-js",19276:"date-fns-locale-ko-_lib-formatRelative-index-js",19351:"date-fns-locale-sr-Latn-_lib-localize-index-js",19616:"date-fns-locale-ar-TN-_lib-match-index-js",19620:"date-fns-locale-pt-BR-_lib-formatDistance-index-js",19748:"date-fns-locale-nn-_lib-formatLong-index-js",20085:"date-fns-locale-mn-_lib-formatLong-index-js",20145:"date-fns-locale-hu-_lib-formatLong-index-js",20189:"date-fns-locale-af-_lib-match-index-js",20274:"date-fns-locale-pt-_lib-formatRelative-index-js",20487:"date-fns-locale-vi-_lib-match-index-js",20598:"date-fns-locale-lt-_lib-match-index-js",20759:"date-fns-locale-ko-index-js",20908:"date-fns-locale-sr-_lib-formatDistance-index-js",20959:"date-fns-locale-sv-_lib-formatLong-index-js",20990:"date-fns-locale-ko-_lib-formatLong-index-js",21387:"date-fns-locale-mn-_lib-localize-index-js",21914:"date-fns-locale-de-AT-index-js",21946:"date-fns-locale-af-_lib-formatDistance-index-js",22314:"date-fns-locale-es-_lib-formatRelative-index-js",22372:"date-fns-locale-cs-_lib-match-index-js",22442:"date-fns-locale-ht-_lib-localize-index-js",22576:"date-fns-locale-cs-_lib-formatRelative-index-js",2361:"date-fns-locale-hi-_lib-match-index-js",23903:"date-fns-locale-fr-CH-index-js",24254:"date-fns-locale-ar-_lib-formatDistance-index-js",24355:"date-fns-locale-lb-index-js",24500:"date-fns-locale-be-_lib-formatDistance-index-js",24848:"date-fns-locale-sq-_lib-formatLong-index-js",25088:"date-fns-locale-sk-_lib-localize-index-js",25395:"date-fns-locale-id-_lib-formatLong-index-js",25621:"date-fns-locale-lb-_lib-formatDistance-index-js",25722:"date-fns-locale-ar-DZ-_lib-formatLong-index-js",25781:"date-fns-locale-vi-_lib-formatRelative-index-js",26540:"date-fns-locale-ug-_lib-formatLong-index-js",26662:"date-fns-locale-en-ZA-index-js",2689:"date-fns-locale-el-_lib-localize-index-js",27033:"date-fns-locale-nl-_lib-formatDistance-index-js",27659:"date-fns-locale-gu-_lib-formatDistance-index-js",27898:"date-fns-locale-zh-TW-_lib-formatLong-index-js",27942:"date-fns-locale-km-_lib-match-index-js",27968:"date-fns-locale-ar-SA-_lib-formatLong-index-js",28101:"date-fns-locale-it-_lib-formatRelative-index-js",28118:"date-fns-locale-eo-_lib-localize-index-js",28711:"date-fns-locale-gd-_lib-formatRelative-index-js",28770:"date-fns-locale-fr-_lib-localize-index-js",28774:"date-fns-locale-mn-_lib-formatDistance-index-js",28784:"date-fns-locale-uz-Cyrl-_lib-localize-index-js",29026:"date-fns-locale-ka-_lib-match-index-js",29051:"date-fns-locale-sl-_lib-formatRelative-index-js",29526:"date-fns-locale-ja-Hira-_lib-formatRelative-index-js",29687:"date-fns-locale-ug-_lib-formatDistance-index-js",29734:"date-fns-locale-bs-_lib-formatDistance-index-js",3010:"date-fns-locale-cy-_lib-match-index-js",30234:"date-fns-locale-be-index-js",30294:"date-fns-locale-el-index-js",30426:"date-fns-locale-zh-HK-_lib-formatLong-index-js",30430:"date-fns-locale-eo-_lib-formatRelative-index-js",30457:"date-fns-locale-uz-_lib-formatLong-index-js",30719:"date-fns-locale-uz-_lib-localize-index-js",30853:"date-fns-locale-be-tarask-_lib-formatDistance-index-js",30976:"date-fns-locale-he-index-js",31:"date-fns-locale-sr-Latn-_lib-formatRelative-index-js",31067:"date-fns-locale-sr-_lib-formatLong-index-js",31200:"date-fns-locale-pt-_lib-formatLong-index-js",31394:"date-fns-locale-uk-_lib-localize-index-js",31578:"date-fns-locale-pt-_lib-match-index-js",31633:"date-fns-locale-ht-index-js",31840:"date-fns-locale-en-NZ-_lib-formatLong-index-js",31887:"date-fns-locale-fr-CA-_lib-formatLong-index-js",32040:"date-fns-locale-es-_lib-formatLong-index-js",32089:"date-fns-locale-et-_lib-localize-index-js",32098:"date-fns-locale-ca-_lib-formatRelative-index-js",32212:"date-fns-locale-az-index-js",32478:"date-fns-locale-lt-_lib-formatRelative-index-js",32677:"date-fns-locale-pt-BR-_lib-formatRelative-index-js",33058:"date-fns-locale-hu-_lib-formatDistance-index-js",33122:"date-fns-locale-th-_lib-formatRelative-index-js",33285:"date-fns-locale-ar-DZ-_lib-formatDistance-index-js",33498:"date-fns-locale-bn-_lib-match-index-js",33588:"date-fns-locale-lt-_lib-formatLong-index-js",33694:"date-fns-locale-is-_lib-localize-index-js",33745:"date-fns-locale-ja-_lib-localize-index-js",3386:"date-fns-locale-en-AU-_lib-formatLong-index-js",34063:"date-fns-locale-sr-_lib-match-index-js",34146:"date-fns-locale-ms-_lib-localize-index-js",34636:"date-fns-locale-sk-_lib-match-index-js",34928:"date-fns-locale-zh-CN-_lib-localize-index-js",35058:"date-fns-locale-th-_lib-localize-index-js",35296:"date-fns-locale-ta-index-js",35304:"date-fns-locale-nb-_lib-formatLong-index-js",35338:"date-fns-locale-ca-_lib-match-index-js",35356:"date-fns-locale-ja-Hira-_lib-formatLong-index-js",35629:"date-fns-locale-eo-index-js",35707:"date-fns-locale-sl-_lib-localize-index-js",35817:"date-fns-locale-en-CA-index-js",36403:"date-fns-locale-ar-MA-index-js",36591:"date-fns-locale-eo-_lib-formatDistance-index-js",37195:"date-fns-locale-te-_lib-formatRelative-index-js",37273:"date-fns-locale-ko-_lib-formatDistance-index-js",37473:"date-fns-locale-bs-_lib-match-index-js",37677:"date-fns-locale-gd-_lib-match-index-js",37708:"date-fns-locale-nl-BE-_lib-match-index-js",38072:"date-fns-locale-et-_lib-formatDistance-index-js",38229:"date-fns-locale-fa-IR-_lib-localize-index-js",38311:"date-fns-locale-be-_lib-match-index-js",3835:"date-fns-locale-fr-_lib-formatDistance-index-js",38450:"date-fns-locale-sq-_lib-localize-index-js",38715:"date-fns-locale-az-_lib-formatRelative-index-js",39296:"date-fns-locale-be-tarask-_lib-formatRelative-index-js",39676:"date-fns-locale-zh-CN-_lib-match-index-js",3973:"date-fns-locale-sl-_lib-formatLong-index-js",39763:"date-fns-locale-zh-HK-index-js",40089:"date-fns-locale-sq-index-js",40869:"date-fns-locale-ug-index-js",40917:"date-fns-locale-be-_lib-formatRelative-index-js",40939:"date-fns-locale-sq-_lib-formatDistance-index-js",41098:"date-fns-locale-fi-index-js",41640:"date-fns-locale-ht-_lib-formatLong-index-js",41813:"date-fns-locale-hu-_lib-match-index-js",41877:"date-fns-locale-ja-Hira-index-js",41949:"date-fns-locale-ro-_lib-match-index-js",42213:"date-fns-locale-fi-_lib-localize-index-js",42219:"date-fns-locale-sk-index-js",42532:"date-fns-locale-te-index-js",4284:"date-fns-locale-ar-TN-_lib-formatRelative-index-js",42958:"date-fns-locale-nn-_lib-formatRelative-index-js",43168:"date-fns-locale-tr-_lib-localize-index-js",43236:"date-fns-locale-km-_lib-formatLong-index-js",43480:"date-fns-locale-pl-_lib-formatLong-index-js",43512:"date-fns-locale-mk-_lib-formatLong-index-js",43554:"date-fns-locale-bn-_lib-localize-index-js",43751:"date-fns-locale-fa-IR-_lib-match-index-js",43761:"blueprint-icons-all-paths-loader",43858:"date-fns-locale-tr-_lib-formatLong-index-js",44052:"date-fns-locale-fy-_lib-formatDistance-index-js",44339:"date-fns-locale-es-_lib-formatDistance-index-js",44647:"date-fns-locale-he-_lib-localize-index-js",44896:"date-fns-locale-mt-_lib-formatDistance-index-js",44932:"date-fns-locale-it-_lib-formatDistance-index-js",44968:"date-fns-locale-ar-MA-_lib-localize-index-js",45206:"date-fns-locale-eo-_lib-match-index-js",45339:"date-fns-locale-ja-_lib-match-index-js",45531:"date-fns-locale-az-_lib-localize-index-js",45658:"date-fns-locale-id-index-js",45672:"date-fns-locale-zh-TW-_lib-localize-index-js",45933:"date-fns-locale-hi-_lib-formatLong-index-js",45940:"date-fns-locale-oc-_lib-localize-index-js",46034:"date-fns-locale-mk-_lib-match-index-js",46099:"date-fns-locale-nb-_lib-formatDistance-index-js",46208:"date-fns-locale-ar-DZ-_lib-formatRelative-index-js",46410:"date-fns-locale-cy-_lib-localize-index-js",46613:"date-fns-locale-ru-_lib-localize-index-js",47139:"date-fns-locale-hi-_lib-localize-index-js",47193:"date-fns-locale-th-index-js",47803:"date-fns-locale-uk-_lib-formatDistance-index-js",48059:"date-fns-locale-kn-_lib-match-index-js",48388:"date-fns-locale-kk-_lib-match-index-js",4859:"date-fns-locale-de-_lib-localize-index-js",48777:"date-fns-locale-hy-_lib-match-index-js",48991:"date-fns-locale-km-_lib-formatDistance-index-js",49114:"date-fns-locale-uz-_lib-formatDistance-index-js",4919:"date-fns-locale-fi-_lib-match-index-js",49257:"date-fns-locale-bn-index-js",49471:"date-fns-locale-af-_lib-localize-index-js",49589:"date-fns-locale-te-_lib-formatLong-index-js",50190:"date-fns-locale-ug-_lib-localize-index-js",50386:"date-fns-locale-gu-_lib-localize-index-js",50473:"date-fns-locale-uk-index-js",50492:"date-fns-locale-uz-Cyrl-_lib-match-index-js",5058:"date-fns-locale-ht-_lib-match-index-js",50621:"date-fns-locale-hy-_lib-formatLong-index-js",50707:"date-fns-locale-hy-_lib-localize-index-js",50918:"date-fns-locale-fr-CA-index-js",5107:"date-fns-locale-fa-IR-_lib-formatLong-index-js",51106:"date-fns-locale-es-_lib-match-index-js",51209:"date-fns-locale-pt-index-js",51268:"blueprint-icons-split-paths-by-size-loader",5160:"date-fns-locale-nl-BE-_lib-formatRelative-index-js",51633:"date-fns-locale-kn-_lib-localize-index-js",5183:"date-fns-locale-nn-_lib-formatDistance-index-js",51879:"date-fns-locale-is-_lib-formatDistance-index-js",51949:"date-fns-locale-lt-index-js",52009:"date-fns-locale-lv-_lib-formatDistance-index-js",52121:"date-fns-locale-en-IN-_lib-formatLong-index-js",52145:"date-fns-locale-bg-_lib-formatLong-index-js",52251:"date-fns-locale-ms-_lib-formatDistance-index-js",52424:"date-fns-locale-oc-_lib-match-index-js",52552:"date-fns-locale-zh-HK-_lib-localize-index-js",52562:"date-fns-locale-ar-SA-_lib-formatRelative-index-js",52595:"date-fns-locale-zh-TW-index-js",52706:"date-fns-locale-gl-_lib-formatDistance-index-js",52840:"date-fns-locale-ar-DZ-_lib-localize-index-js",53305:"date-fns-locale-ca-index-js",5359:"date-fns-locale-oc-index-js",53641:"date-fns-locale-fr-index-js",53787:"date-fns-locale-en-IE-index-js",54470:"date-fns-locale-te-_lib-formatDistance-index-js",5449:"date-fns-locale-sv-_lib-formatRelative-index-js",54606:"date-fns-locale-lv-_lib-formatLong-index-js",54753:"date-fns-locale-sv-_lib-localize-index-js",54762:"date-fns-locale-sq-_lib-match-index-js",5479:"date-fns-locale-lv-index-js",54858:"date-fns-locale-gu-_lib-match-index-js",5487:"date-fns-locale-kn-_lib-formatLong-index-js",55376:"date-fns-locale-gl-index-js",55435:"date-fns-locale-bs-_lib-localize-index-js",55538:"date-fns-locale-pl-_lib-match-index-js",55580:"date-fns-locale-ar-EG-_lib-formatLong-index-js",55705:"date-fns-locale-af-_lib-formatLong-index-js",56311:"date-fns-locale-pt-BR-_lib-match-index-js",56556:"date-fns-locale-tr-_lib-match-index-js",56630:"date-fns-locale-sv-index-js",56741:"date-fns-locale-fi-_lib-formatRelative-index-js",56856:"date-fns-locale-uz-Cyrl-_lib-formatRelative-index-js",56880:"date-fns-locale-bg-index-js",56895:"date-fns-locale-bg-_lib-formatRelative-index-js",56902:"date-fns-locale-km-_lib-localize-index-js",5699:"date-fns-locale-cs-index-js",57065:"date-fns-locale-el-_lib-formatRelative-index-js",57220:"date-fns-locale-fi-_lib-formatDistance-index-js",57240:"date-fns-locale-ro-index-js",57256:"date-fns-locale-ka-_lib-formatLong-index-js",5730:"date-fns-locale-sr-Latn-_lib-formatDistance-index-js",57517:"date-fns-locale-nl-BE-_lib-formatDistance-index-js",57718:"date-fns-locale-lt-_lib-localize-index-js",58180:"date-fns-locale-fr-CH-_lib-formatRelative-index-js",58184:"date-fns-locale-be-tarask-_lib-localize-index-js",58791:"date-fns-locale-ru-_lib-match-index-js",58828:"date-fns-locale-nl-_lib-formatRelative-index-js",59060:"date-fns-locale-oc-_lib-formatRelative-index-js",59285:"date-fns-locale-ar-EG-index-js",59348:"date-fns-locale-ar-DZ-_lib-match-index-js",59391:"date-fns-locale-gl-_lib-formatRelative-index-js",59515:"date-fns-locale-mt-_lib-match-index-js",60010:"date-fns-locale-ka-_lib-localize-index-js",6028:"date-fns-locale-ar-TN-_lib-localize-index-js",60290:"date-fns-locale-sq-_lib-formatRelative-index-js",60366:"date-fns-locale-et-index-js",60435:"date-fns-locale-hi-_lib-formatRelative-index-js",60728:"date-fns-locale-en-IN-index-js",60733:"date-fns-locale-zh-CN-_lib-formatDistance-index-js",60785:"date-fns-locale-sl-_lib-match-index-js",61002:"date-fns-locale-nb-_lib-localize-index-js",61161:"date-fns-locale-ar-TN-_lib-formatDistance-index-js",61173:"date-fns-locale-fa-IR-_lib-formatRelative-index-js",61402:"date-fns-locale-ro-_lib-formatDistance-index-js",61743:"date-fns-locale-en-ZA-_lib-formatLong-index-js",62125:"date-fns-locale-tr-_lib-formatDistance-index-js",62171:"date-fns-locale-uz-Cyrl-index-js",62553:"date-fns-locale-kn-_lib-formatRelative-index-js",62634:"date-fns-locale-lb-_lib-formatLong-index-js",62862:"date-fns-locale-km-_lib-formatRelative-index-js",62875:"date-fns-locale-bn-_lib-formatDistance-index-js",63028:"date-fns-locale-fa-IR-_lib-formatDistance-index-js",63111:"date-fns-locale-ja-Hira-_lib-formatDistance-index-js",63228:"date-fns-locale-lv-_lib-formatRelative-index-js",63302:"date-fns-locale-kn-index-js",6347:"date-fns-locale-bs-_lib-formatRelative-index-js",63507:"date-fns-locale-ru-_lib-formatLong-index-js",63733:"date-fns-locale-bg-_lib-match-index-js",63792:"date-fns-locale-sv-_lib-formatDistance-index-js",63863:"date-fns-locale-gl-_lib-localize-index-js",64325:"date-fns-locale-ar-MA-_lib-formatDistance-index-js",64389:"date-fns-locale-he-_lib-match-index-js",6447:"date-fns-locale-lt-_lib-formatDistance-index-js",64504:"date-fns-locale-cs-_lib-localize-index-js",64518:"date-fns-locale-mt-index-js",64751:"date-fns-locale-mt-_lib-formatLong-index-js",64792:"date-fns-locale-eu-_lib-match-index-js",64811:"date-fns-locale-nl-BE-index-js",64959:"date-fns-locale-hr-index-js",65004:"date-fns-locale-lv-_lib-localize-index-js",65306:"date-fns-locale-ar-MA-_lib-formatLong-index-js",65520:"date-fns-locale-sr-Latn-index-js",65917:"date-fns-locale-uz-_lib-match-index-js",66255:"date-fns-locale-gd-_lib-localize-index-js",66470:"date-fns-locale-fr-CH-_lib-formatLong-index-js",66677:"date-fns-locale-gl-_lib-match-index-js",66720:"date-fns-locale-uk-_lib-formatLong-index-js",67138:"date-fns-locale-sr-index-js",67147:"date-fns-locale-el-_lib-match-index-js",67185:"date-fns-locale-az-_lib-match-index-js",67258:"date-fns-locale-ms-_lib-match-index-js",6733:"date-fns-locale-sr-_lib-formatRelative-index-js",67422:"date-fns-locale-ar-EG-_lib-localize-index-js",68219:"date-fns-locale-en-CA-_lib-formatDistance-index-js",68247:"date-fns-locale-hu-_lib-localize-index-js",68379:"date-fns-locale-de-_lib-formatRelative-index-js",68392:"date-fns-locale-tr-_lib-formatRelative-index-js",68617:"date-fns-locale-ms-index-js",68634:"date-fns-locale-be-tarask-_lib-formatLong-index-js",68706:"date-fns-locale-ar-SA-_lib-localize-index-js",68709:"date-fns-locale-de-_lib-formatLong-index-js",68996:"date-fns-locale-mn-index-js",69062:"date-fns-locale-eu-_lib-formatLong-index-js",69169:"date-fns-locale-et-_lib-formatRelative-index-js",69372:"date-fns-locale-is-_lib-formatLong-index-js",69524:"date-fns-locale-ar-MA-_lib-match-index-js",69803:"date-fns-locale-tr-index-js",70041:"date-fns-locale-gu-index-js",70752:"date-fns-locale-fr-_lib-formatLong-index-js",71156:"date-fns-locale-sl-index-js",71243:"date-fns-locale-sv-_lib-match-index-js",71274:"date-fns-locale-gd-_lib-formatDistance-index-js",71996:"date-fns-locale-nl-_lib-localize-index-js",7217:"date-fns-locale-es-index-js",7239:"date-fns-locale-ar-TN-index-js",72394:"date-fns-locale-pt-BR-index-js",73010:"date-fns-locale-fr-_lib-formatRelative-index-js",73232:"date-fns-locale-nl-_lib-match-index-js",73578:"date-fns-locale-th-_lib-match-index-js",73810:"date-fns-locale-nl-BE-_lib-formatLong-index-js",73848:"date-fns-locale-hr-_lib-match-index-js",74006:"date-fns-locale-is-_lib-formatRelative-index-js",74080:"date-fns-locale-bn-_lib-formatLong-index-js",74261:"date-fns-locale-kk-_lib-formatDistance-index-js",74376:"date-fns-locale-cy-_lib-formatLong-index-js",74631:"date-fns-locale-fy-_lib-match-index-js",74838:"date-fns-locale-sl-_lib-formatDistance-index-js",75568:"date-fns-locale-da-index-js",75582:"date-fns-locale-nl-_lib-formatLong-index-js",75820:"date-fns-locale-hy-index-js",76420:"date-fns-locale-eu-_lib-localize-index-js",7658:"date-fns-locale-kk-_lib-formatLong-index-js",76862:"date-fns-locale-ja-Hira-_lib-localize-index-js",77135:"date-fns-locale-ta-_lib-formatRelative-index-js",77210:"date-fns-locale-fa-IR-index-js",77506:"date-fns-locale-gu-_lib-formatRelative-index-js",77537:"date-fns-locale-oc-_lib-formatDistance-index-js",77845:"date-fns-locale-be-_lib-localize-index-js",78104:"date-fns-locale-kk-_lib-localize-index-js",7811:"date-fns-locale-hy-_lib-formatRelative-index-js",78327:"date-fns-locale-uz-_lib-formatRelative-index-js",78437:"date-fns-locale-pt-BR-_lib-localize-index-js",78709:"date-fns-locale-cs-_lib-formatDistance-index-js",78945:"date-fns-locale-mn-_lib-match-index-js",79191:"date-fns-locale-et-_lib-formatLong-index-js",79198:"date-fns-locale-hy-_lib-formatDistance-index-js",79279:"date-fns-locale-ja-_lib-formatLong-index-js",79475:"date-fns-locale-ar-_lib-localize-index-js",79536:"date-fns-locale-th-_lib-formatLong-index-js",79637:"date-fns-locale-bs-_lib-formatLong-index-js",79781:"date-fns-locale-it-_lib-localize-index-js",79891:"date-fns-locale-ka-_lib-formatDistance-index-js",80001:"date-fns-locale-pl-index-js",80049:"date-fns-locale-eu-_lib-formatDistance-index-js",80137:"date-fns-locale-ar-SA-index-js",80226:"date-fns-locale-bg-_lib-formatDistance-index-js",80350:"date-fns-locale-is-_lib-match-index-js",80657:"date-fns-locale-de-_lib-match-index-js",81019:"date-fns-locale-pt-_lib-formatDistance-index-js",81431:"date-fns-locale-af-_lib-formatRelative-index-js",81462:"date-fns-locale-az-_lib-formatDistance-index-js",82039:"date-fns-locale-nl-index-js",82217:"date-fns-locale-gd-_lib-formatLong-index-js",82613:"date-fns-locale-de-AT-_lib-localize-index-js",82627:"date-fns-locale-pt-BR-_lib-formatLong-index-js",82746:"date-fns-locale-pl-_lib-formatRelative-index-js",82835:"date-fns-locale-be-tarask-index-js",82841:"date-fns-locale-mt-_lib-formatRelative-index-js",83343:"date-fns-locale-it-CH-_lib-formatLong-index-js",83377:"date-fns-locale-hr-_lib-formatDistance-index-js",83477:"date-fns-locale-id-_lib-formatRelative-index-js",83840:"date-fns-locale-ms-_lib-formatLong-index-js",8426:"date-fns-locale-cs-_lib-formatLong-index-js",84339:"date-fns-locale-cy-_lib-formatDistance-index-js",84427:"date-fns-locale-th-_lib-formatDistance-index-js",8443:"date-fns-locale-ar-SA-_lib-formatDistance-index-js",84588:"date-fns-locale-ar-index-js",84661:"date-fns-locale-da-_lib-match-index-js",84725:"date-fns-locale-vi-_lib-localize-index-js",84801:"date-fns-locale-ta-_lib-formatLong-index-js",85059:"date-fns-locale-ar-_lib-formatRelative-index-js",85146:"date-fns-locale-fy-index-js",85222:"date-fns-locale-it-CH-index-js",8531:"date-fns-locale-ht-_lib-formatDistance-index-js",85329:"date-fns-locale-da-_lib-formatLong-index-js",85348:"date-fns-locale-hr-_lib-formatRelative-index-js",8598:"date-fns-locale-oc-_lib-formatLong-index-js",862:"date-fns-locale-ar-EG-_lib-match-index-js",86342:"date-fns-locale-nn-_lib-match-index-js",86431:"date-fns-locale-el-_lib-formatLong-index-js",87478:"date-fns-locale-en-GB-index-js",87555:"date-fns-locale-kk-index-js",87598:"date-fns-locale-ar-TN-_lib-formatLong-index-js",87896:"date-fns-locale-af-index-js",87985:"date-fns-locale-sr-Latn-_lib-formatLong-index-js",88142:"date-fns-locale-ug-_lib-match-index-js",88177:"date-fns-locale-nb-index-js",88497:"date-fns-locale-mt-_lib-localize-index-js",88746:"date-fns-locale-ka-_lib-formatRelative-index-js",88952:"date-fns-locale-zh-CN-_lib-formatRelative-index-js",88980:"date-fns-locale-de-index-js",89178:"date-fns-locale-ar-SA-_lib-match-index-js",89506:"date-fns-locale-da-_lib-formatDistance-index-js",90047:"date-fns-locale-en-GB-_lib-formatLong-index-js",90484:"date-fns-locale-eo-_lib-formatLong-index-js",90615:"date-fns-locale-ro-_lib-formatRelative-index-js",90859:"date-fns-locale-mn-_lib-formatRelative-index-js",9105:"date-fns-locale-gl-_lib-formatLong-index-js",91155:"date-fns-locale-ar-DZ-index-js",91437:"date-fns-locale-sk-_lib-formatDistance-index-js",91617:"date-fns-locale-he-_lib-formatLong-index-js",9188:"date-fns-locale-bs-index-js",91892:"date-fns-locale-zh-HK-_lib-match-index-js",91922:"date-fns-locale-uk-_lib-formatRelative-index-js",91965:"date-fns-locale-uz-Cyrl-_lib-formatDistance-index-js",92096:"date-fns-locale-ar-MA-_lib-formatRelative-index-js",92145:"date-fns-locale-ka-index-js",92259:"date-fns-locale-pl-_lib-formatDistance-index-js",92328:"date-fns-locale-gd-index-js",92612:"date-fns-locale-lb-_lib-match-index-js",92614:"date-fns-locale-ug-_lib-formatRelative-index-js",92656:"date-fns-locale-ko-_lib-match-index-js",92928:"date-fns-locale-nl-BE-_lib-localize-index-js",93011:"date-fns-locale-en-AU-index-js",93194:"date-fns-locale-cy-_lib-formatRelative-index-js",93234:"date-fns-locale-ca-_lib-localize-index-js",93243:"date-fns-locale-zh-CN-index-js",93274:"date-fns-locale-uk-_lib-match-index-js",9364:"date-fns-locale-vi-_lib-formatDistance-index-js",93786:"date-fns-locale-ru-index-js",93800:"date-fns-locale-sk-_lib-formatRelative-index-js",93894:"date-fns-locale-hr-_lib-formatLong-index-js",94879:"date-fns-locale-eu-index-js",9503:"date-fns-locale-ro-_lib-localize-index-js",95056:"date-fns-locale-ca-_lib-formatLong-index-js",95092:"date-fns-locale-ru-_lib-formatDistance-index-js",95238:"date-fns-locale-nn-_lib-localize-index-js",95282:"date-fns-locale-he-_lib-formatDistance-index-js",95617:"date-fns-locale-mk-index-js",95924:"date-fns-locale-be-tarask-_lib-match-index-js",95957:"date-fns-locale-fy-_lib-localize-index-js",96075:"date-fns-locale-ca-_lib-formatDistance-index-js",96338:"date-fns-locale-sk-_lib-formatLong-index-js",96370:"date-fns-locale-ms-_lib-formatRelative-index-js",96586:"date-fns-locale-es-_lib-localize-index-js",96739:"date-fns-locale-mk-_lib-formatDistance-index-js",9716:"date-fns-locale-zh-TW-_lib-match-index-js",9727:"date-fns-locale-hu-_lib-formatRelative-index-js",97330:"date-fns-locale-ta-_lib-formatDistance-index-js",97661:"date-fns-locale-nn-index-js",9779:"date-fns-locale-fy-_lib-formatLong-index-js",97831:"date-fns-locale-ta-_lib-localize-index-js",97982:"date-fns-locale-ja-Hira-_lib-match-index-js",98038:"date-fns-locale-ar-EG-_lib-formatRelative-index-js",98076:"date-fns-locale-hi-index-js",98309:"date-fns-locale-ta-_lib-match-index-js",98599:"date-fns-locale-id-_lib-match-index-js",98691:"date-fns-locale-et-_lib-match-index-js",98712:"date-fns-locale-lb-_lib-localize-index-js",98752:"date-fns-locale-kn-_lib-formatDistance-index-js",98762:"date-fns-locale-nb-_lib-formatRelative-index-js",988:"date-fns-locale-ko-_lib-localize-index-js",98841:"date-fns-locale-ja-_lib-formatRelative-index-js",98850:"date-fns-locale-uz-Cyrl-_lib-formatLong-index-js",99186:"date-fns-locale-bn-_lib-formatRelative-index-js",99248:"date-fns-locale-lb-_lib-formatRelative-index-js",99840:"date-fns-locale-zh-HK-_lib-formatRelative-index-js",99866:"date-fns-locale-fr-_lib-match-index-js"})[e]||e)+"."+({10042:"34e1e93b",1015:"0897434b",10289:"45153c28",1034:"ed604a17",10466:"d26799fd",10677:"2f1338c5",10848:"e76d6e89",11059:"06d9e468",11165:"9efe51bd",12117:"b7ed184a",1218:"605d4266",12190:"7662257f",12297:"5b1de270",12405:"36c39050",12535:"9e88b233",12928:"21cf93b0",13:"e10f0467",13080:"ffee9145",1315:"926a312d",13326:"f5cd270b",13431:"c1492f1a",13476:"609a991b",13587:"d6c2e9dc",13827:"6b3c1197",13866:"6a9fa139",14013:"7a534b11",14166:"4457a9a0",14274:"38d0ee4d",14841:"05d865de",14976:"5448d380",15271:"582a673a",15301:"e746aa4c",15408:"1d95b7d0",15412:"338798a3",15424:"b4993165",15535:"21fcad66",159:"6781f1c1",15915:"ba589af2",1610:"d320bbec",16326:"13ce817c",16385:"d2a35f1d",1641:"8d4feba2",16663:"0ac360a7",16931:"ada8e31e",16933:"fdb5e859",17173:"15fdc6cc",17402:"4d0e93d8",17562:"a3f1c2a3",17626:"212c786f",17633:"d5dfc383",17712:"6e8db9f4",17744:"191b34f3",17752:"edf2ffac",17949:"86128a29",1797:"e08a9c5c",18116:"1dbd4380",18128:"ac6923a2",18562:"68209124",18837:"a2dfab8d",18852:"80a847a1",18918:"4f90a8a4",1893:"b0a62197",19276:"1bc14fd7",19351:"d7b05ec0",19616:"6515d84c",19620:"ad344cad",19748:"d9fd8495",19754:"87c411db",20085:"1160ef46",20145:"d45e7c1a",20169:"edf4ee1f",20189:"e8078736",20274:"8ee70676",20487:"189df757",20598:"4e71d63c",20759:"6a31dbd1",20908:"601a33a5",20959:"d8c021d0",20990:"d769e6d4",21387:"45d6132a",21403:"46ad8b0f",21914:"7c5864cd",21946:"3eeee21f",2219:"72024b1a",22314:"764ff3c2",22372:"46ecd837",22402:"b1da5bc0",22442:"29327145",22576:"38e0a6b8",22867:"9df1742b",2361:"75ff3d72",23897:"e7ff742c",23903:"9229428d",24254:"91088982",24355:"167916f4",24423:"1a09ca54",24500:"4535034d",24848:"a28054e6",25088:"95fea4b8",25395:"87bc8fe6",25621:"5d38f508",25683:"053e62b4",25722:"99bfd96f",25781:"5b3f70a5",26540:"999b99fd",26662:"3b3347c9",2689:"7d1b98c3",27033:"feea6cb6",27241:"43c47f3b",27354:"f5a13ed4",27659:"8a263b6b",27898:"96fd591c",27942:"12626dda",27968:"0e1a10ba",28101:"fb6f7531",28118:"3e417665",28339:"512c14d6",28539:"b0dc7a4f",28589:"b4549417",28711:"8c96c8b3",28770:"cc0aa623",28774:"ae167bf1",28784:"9f6733ce",29026:"8cd66e32",29051:"3594e169",29199:"28bd7990",29526:"50c49e4c",29687:"f4d58405",29734:"e6761656",3010:"5d5d3e36",30226:"a1314641",30234:"8145a56c",30294:"cc1cb445",30426:"099ff88d",30430:"ac54a421",30457:"08552b8e",30719:"e3dc6e5d",30853:"8b97dc43",30976:"aab08897",31:"777243cc",31067:"23f97c7d",31200:"5a18cb3b",31394:"c91eeda1",31578:"9ce2473f",31633:"61f7d997",31840:"743e843e",31887:"b08ce218",32040:"d3a4438e",32089:"2718f958",32098:"f20683c0",32212:"4444d5a7",3229:"219e3e65",32478:"5dd64a37",3256:"e117ebe3",32677:"28ea9e47",33058:"99a4aa64",33122:"669daab0",33285:"45de28af",33498:"704fd788",33588:"d6f6f1f3",33694:"a9a89b94",3373:"7b1ea480",33745:"dd73b0f6",3386:"87c19409",34063:"37c717f3",34146:"c7df2fc1",34636:"d9601c09",34928:"11235271",35058:"50164643",35267:"a115698d",35296:"4e386636",35304:"0c49b687",35338:"594539fd",35356:"55a2e966",35629:"94b2e8a6",35707:"68fb9751",35817:"b821c3e6",36403:"5d2b8e50",36591:"0a54b938",37195:"79e8e9e9",37259:"ebba391c",37273:"0f4edb36",37473:"cbb58fc1",37677:"3800a69d",37708:"9f2b22ad",37838:"428ad295",37854:"5de2a6cd",38072:"1f848a04",38229:"503eedc9",38311:"3503d291",3835:"22421be1",38450:"13defdb6",38715:"53acb021",39296:"f1ac25f0",39676:"436341c4",3973:"92d49e05",39756:"f82a5951",39763:"06fe3464",40089:"6189676a",40869:"a800f23f",40917:"f61cd81f",40939:"9404cc80",41098:"8c4b6305",41640:"ebe25944",41723:"0699080e",41813:"69c9f4ce",41877:"612fb616",41949:"cfe41a4a",42213:"04d60665",42219:"9c292b9f",42532:"55651b29",4284:"949703ab",42958:"0a0576dc",43168:"9321e265",43236:"cdaa27cb",43480:"a668fefe",43512:"b70b86c6",43537:"2895f396",43554:"63d0209d",43751:"9a88c1bd",43761:"42d2396e",43858:"c231891b",4391:"0b396911",44052:"4df4ccaf",44077:"9b457f4f",44339:"ddacf517",44647:"ca5ea64b",44896:"c3119fd7",44932:"fc8a22f2",44968:"b5af21ff",45206:"76f1d260",45299:"6c6f0ecf",45339:"91ddf390",45531:"b0a9d9ce",45658:"26d23075",45672:"c844f4c8",45933:"cb0e63d7",45940:"8b5cf129",46034:"c99bbe65",46099:"aa5e7bf9",46208:"479b6139",46410:"2b28a4de",46613:"b03b5987",47139:"615b6de9",47193:"f1376a78",47803:"ab811744",48059:"400f1ada",48388:"5a4ba2e2",4859:"b084dfcc",48777:"9e18cdd0",48991:"1259704c",49114:"a391540d",4919:"abd6f110",49257:"2f9d2e48",49471:"951d3e8d",49574:"5c984d79",49589:"c8bb88bd",50136:"eb743e5c",50190:"b18888d7",50386:"8c5f3b4b",50473:"3406538f",50492:"2b762845",5058:"3bba0cc4",50621:"98725a9e",50707:"8b402dcf",5072:"e26f73e7",50918:"d912edf5",5107:"592d9a3b",51106:"f2f11204",51209:"fe1758f5",51268:"3bc707ba",5160:"c4ed801b",51633:"24e25158",51694:"7fb351f7",5183:"72e22740",51879:"8d901db9",51902:"08a1615d",51949:"52cb38f7",52009:"e2d5015e",52121:"197bb637",52145:"c448ae1f",52251:"49d7aa0e",52424:"3a024d53",52552:"5f460ab7",52562:"bf75de07",52595:"3179310b",52619:"b9a22713",52706:"597fd5f0",52840:"11d9d3f0",53305:"e2699737",53501:"5196ce6d",53506:"59c1c7b6",5359:"2971a4a0",53641:"b7c506d1",53787:"56cb2344",54470:"278b89bd",54479:"c74622e9",5449:"f4dc88e7",54606:"0abd1031",54753:"a12c9b8e",54762:"facbaf08",5479:"bbccbfbf",54858:"f6221375",5487:"cac903ab",55376:"1c246f26",55435:"3d5f4b8f",55538:"be5c4411",55580:"a3eeb281",55705:"dbe2a13f",56159:"41ba8083",56311:"c4750573",56556:"7aea4565",56630:"15d6a455",56741:"a7f1d860",56856:"ad7eab54",56880:"f89f612d",56895:"98f92e0f",56902:"621299b2",5699:"df36c2a7",57065:"4daa125c",57220:"9c505cdb",57240:"f447d457",57256:"89119f57",5730:"e41ec073",57315:"c9bdfd6f",57517:"17022919",57718:"5024a653",58180:"5d24786e",58184:"03fbfeaf",58549:"4bfa7431",58791:"3c6684f6",58828:"d257f325",59060:"8fce0495",59285:"46986cd7",59348:"5500a5c6",59391:"422f5fe2",59515:"ac5a49b7",60010:"75a0155e",6028:"9b836a9b",60290:"53add5d8",60366:"245ef707",60435:"11f45785",60728:"249d5ea1",60733:"c28cab2b",60785:"c03c9e15",61002:"5cf60ce0",61161:"9259d9eb",61173:"8a04047a",61402:"44cd82fb",61562:"2624b2fe",61743:"70f38444",61871:"5d0f2727",62125:"aaeb711d",62171:"85e0d430",62553:"0e6a262d",62634:"691cc489",62862:"671f2cb2",62875:"7e3eeb5c",63028:"3ca1faab",63111:"cf900da2",63228:"523a5bfd",63302:"c741a4c6",6347:"6cf86a5b",63507:"3d6c9358",63733:"f9fe2a8c",63792:"3eda1119",63863:"66e09a22",64325:"20146aec",64389:"b600e0ec",6447:"f64dc937",64504:"50e42e39",64518:"4b4151ac",64751:"0c76c84e",64792:"dedece8f",64811:"f955650e",64959:"ef7a8984",65004:"179b1dd9",6514:"fe9a3e66",65306:"e6e02b2f",65520:"874bde5d",65865:"754e1f28",65917:"466c6138",66255:"a628954d",66470:"be3b548c",66677:"e51439a0",66720:"efb9a4b6",67138:"c820b96c",67147:"1c18701e",67185:"500b9e30",67258:"afd97461",6733:"4dd38f61",67422:"11597902",68219:"207a1f84",68247:"60bded20",68379:"da493cab",68392:"4013f58c",68617:"55413fcc",68634:"9fc70a24",68706:"f1448ec7",68709:"11895191",68996:"8d42914e",69062:"ec9a770d",69169:"44ca2e22",69372:"5c98cd5b",69524:"b624e118",69803:"645ff9a4",70041:"13cf3a50",70515:"2409dcb6",70748:"361c0edc",70752:"8a5e5aa8",71156:"d1fb7ed1",71243:"2130e3b1",71274:"17cd8389",71996:"213ed1b6",7217:"d9339666",7239:"3ab3094c",72394:"31874528",72617:"103b8418",73010:"0be82801",73232:"895845a7",73490:"d6fa3673",73578:"5bdca47e",73810:"3c8c2265",73848:"235f262e",74006:"42179530",74034:"8b521cdd",74080:"d09cd25c",74261:"953d3b03",74376:"a3678f40",74631:"2b6e6c66",74838:"9c591f86",74904:"b743c0b6",75143:"cf81eef1",75167:"ed6a738d",75568:"db3370ed",75582:"90f25206",75820:"b6969f5e",76420:"683f108e",7658:"17e77631",76862:"527a7a11",77135:"7511ff38",77210:"d761ccfd",77506:"af106b42",77537:"b3628770",77707:"fed4c038",77845:"0241a4c9",78104:"1520c34c",7811:"a5e94dcd",78195:"6672fe0b",78327:"8a006955",78352:"7c3934a6",78437:"369e7b19",78709:"e7a79306",78945:"fab41a51",79191:"118492b2",79198:"e187d2dd",79279:"6426c4a8",79475:"1b6ca4b9",79536:"d23adb6f",79637:"480d424e",79781:"0e9367e0",79891:"a28e7167",80001:"276b53e4",80049:"0ec15d18",80137:"a5af7713",80226:"63d12a78",80350:"ceb9d3eb",80657:"7231470f",81019:"f609b46b",81431:"2b4164df",81462:"1ec50bf0",82039:"27aa4c8f",82172:"d7a0fb62",82217:"7b883440",82613:"d38c4060",82627:"1990d5ac",82746:"8779a21d",82835:"6be8484a",82841:"f295b23e",83343:"0ded51db",83377:"029f8964",83477:"b2c8005c",83790:"9c149e63",83840:"c6595031",8426:"9e556f1b",84339:"ac3d2652",84427:"7dc68e5a",8443:"1369fd4d",84588:"db203c62",84661:"8052d638",84725:"98490d63",84801:"0be52816",85059:"3db5d944",85146:"e78d4343",85222:"2b1ebc06",8531:"7842933c",85329:"4ba48740",85348:"8f553a79",85480:"73bbd797",8598:"296694bd",862:"c86fa81c",86342:"8b6b8dc2",86431:"6754b6dd",87147:"baeb52e2",87335:"e0385b9e",87478:"e850b3cf",87555:"4d37741d",87598:"6591644d",87896:"1800feb8",87985:"f3c936eb",88142:"5d7945cd",88177:"d1bb118f",88497:"9354459f",88746:"4a7e184f",88952:"edb09693",88980:"2720910a",89178:"a5fdb01e",89506:"1bd895d1",90047:"0484eabb",90484:"932d7b56",90615:"a6fab652",90859:"bae53217",91028:"c0e20644",9105:"8938bb54",91155:"3d64d87e",91437:"a013234f",91617:"e0d27e8b",9188:"e695a0e3",91892:"601119e8",91922:"aaec37df",91965:"06393399",92096:"7a232a8c",92145:"d478b014",92235:"86eaf3e0",92259:"ff0a8b21",92311:"be2aee69",92328:"4700be37",92612:"223232f8",92614:"2e57bd93",92656:"8282acdf",92928:"f2fd0260",93011:"fd458b6f",93194:"9acdba39",93234:"a97cf4c5",93243:"4033e74d",93274:"af37ecef",9364:"ae4c423b",93786:"e0384075",93800:"f761c1fe",93894:"f6453d14",94024:"59731680",94879:"8e832e6e",9503:"b5346516",95056:"b9928d14",95092:"b144b789",95238:"f9ba32bf",95282:"3ae22982",95381:"99640129",95617:"3ef46c00",95924:"92b53802",95934:"39c645e3",95957:"c81846ec",96075:"18b097c9",9628:"a5d45aec",96338:"46cdca68",96370:"56440517",96586:"0f9d84b2",96739:"142f7530",9716:"1fc8d61d",9727:"b40322bd",97330:"469820e7",97661:"93682a90",9779:"d9e1fcd1",97831:"5ba437c8",97982:"57293df7",98038:"7278484a",98076:"069f6193",98309:"28bfc690",98599:"0666e4da",98691:"20d42fc9",98712:"b2bb50cf",98752:"3d8c8573",98762:"9411ff01",988:"03bc4ea5",98841:"1a9edd15",98850:"7fd7b465",99186:"ada82b3d",99248:"6ac53d14",99840:"088ec1e4",99866:"4bba34fa"})[e]+".js",f.miniCssF=e=>"static/css/async/"+e+"."+({13:"8c458b7b",21944:"6134dca2",22867:"6023e3d9",28589:"ab08cd9d",37838:"5c10b37b",39756:"e87532d1",41723:"31c8fc61",4391:"f1f8b142",45299:"a31e4178",49117:"da6dd527",49574:"72563ff1",51902:"bfec4a53",52619:"837d058a",56159:"18419a53",64369:"c6d7eeab",70748:"72525266",72617:"7b850933",75143:"2e24709a",77707:"f74468da",78195:"915552cd",78352:"335f8b20",87147:"e67b77f9",91028:"d4ce86f6",92235:"3af03389",9628:"b1fe1efc"})[e]+".css",f.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),f.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d={},c="frontend:",f.l=function(e,t,a,s){if(d[e])return void d[e].push(t);if(void 0!==a)for(var i,n,r=document.getElementsByTagName("script"),o=0;o<r.length;o++){var l=r[o];if(l.getAttribute("src")==e||l.getAttribute("data-rspack")==c+a){i=l;break}}i||(n=!0,(i=document.createElement("script")).timeout=120,f.nc&&i.setAttribute("nonce",f.nc),i.setAttribute("data-rspack",c+a),i.src=e),d[e]=[t];var u=function(t,a){i.onerror=i.onload=null,clearTimeout(h);var s=d[e];if(delete d[e],i.parentNode&&i.parentNode.removeChild(i),s&&s.forEach(function(e){return e(a)}),t)return t(a)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),n&&document.head.appendChild(i)},f.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),f.nc=void 0,u=[],f.O=(e,t,a,s)=>{if(t){s=s||0;for(var i=u.length;i>0&&u[i-1][2]>s;i--)u[i]=u[i-1];u[i]=[t,a,s];return}for(var n=1/0,i=0;i<u.length;i++){for(var[t,a,s]=u[i],r=!0,o=0;o<t.length;o++)(!1&s||n>=s)&&Object.keys(f.O).every(e=>f.O[e](t[o]))?t.splice(o--,1):(r=!1,s<n&&(n=s));if(r){u.splice(i--,1);var l=a();void 0!==l&&(e=l)}}return e},f.p="/",f.v=function(e,t,a,s){var i=fetch(f.p+"static/wasm/"+a.slice(0,8)+".module.wasm"),n=function(){return i.then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,s)}).then(function(t){return Object.assign(e,t.instance.exports)})};return i.then(function(t){return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(t,s).then(function(t){return Object.assign(e,t.instance.exports)},function(e){if("application/wasm"!==t.headers.get("Content-Type"))return console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e),n();throw e}):n()})},"u">typeof document){var b=function(e,t,a,s,i){var n=document.createElement("link");return n.rel="stylesheet",n.type="text/css",f.nc&&(n.nonce=f.nc),n.href=t,n.onerror=n.onload=function(a){if(n.onerror=n.onload=null,"load"===a.type)s();else{var r=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.href||t,l=Error("Loading CSS chunk "+e+" failed.\\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=o,n.parentNode&&n.parentNode.removeChild(n),i(l)}},a?a.parentNode.insertBefore(n,a.nextSibling):document.head.appendChild(n),n},x=function(e,t){for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var i=a[s],n=i.getAttribute("data-href")||i.getAttribute("href");if(n&&(n=n.split("?")[0]),"stylesheet"===i.rel&&(n===e||n===t))return i}for(var r=document.getElementsByTagName("style"),s=0;s<r.length;s++){var i=r[s],n=i.getAttribute("data-href");if(n===e||n===t)return i}},v={48410:0};f.f.miniCss=function(e,t){if(v[e])t.push(v[e]);else 0!==v[e]&&({13:1,21944:1,22867:1,28589:1,37838:1,39756:1,41723:1,4391:1,45299:1,49117:1,49574:1,51902:1,52619:1,56159:1,64369:1,70748:1,72617:1,75143:1,77707:1,78195:1,78352:1,87147:1,91028:1,92235:1,9628:1})[e]&&t.push(v[e]=new Promise(function(t,a){var s=f.miniCssF(e),i=f.p+s;if(x(s,i))return t();b(e,i,null,t,a)}).then(function(){v[e]=0},function(t){throw delete v[e],t}))}}h={48410:0},f.f.j=function(e,t){var a=f.o(h,e)?h[e]:void 0;if(0!==a)if(a)t.push(a[2]);else if(/^(21944|49117|64369)$/.test(e))h[e]=0;else{var s=new Promise((t,s)=>a=h[e]=[t,s]);t.push(a[2]=s);var i=f.p+f.u(e),n=Error();f.l(i,function(t){if(f.o(h,e)&&(0!==(a=h[e])&&(h[e]=void 0),a)){var s=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;n.message="Loading chunk "+e+" failed.\n("+s+": "+i+")",n.name="ChunkLoadError",n.type=s,n.request=i,a[1](n)}},"chunk-"+e,e)}},f.O.j=e=>0===h[e],p=(e,t)=>{var a,s,[i,n,r]=t,o=0;if(i.some(e=>0!==h[e])){for(a in n)f.o(n,a)&&(f.m[a]=n[a]);if(r)var l=r(f)}for(e&&e(t);o<i.length;o++)s=i[o],f.o(h,s)&&h[s]&&h[s][0](),h[s]=0;return f.O(l)},(m=globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).forEach(p.bind(null,0)),m.push=p.bind(null,m.push.bind(m));var A=f.O(void 0,["59783","79535","81869"],()=>f(76579));A=f.O(A)})();
//# sourceMappingURL=index.356365a8.js.map