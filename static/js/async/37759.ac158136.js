"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([["37759"],{3186:function(e,t,n){n.d(t,{g:()=>u});var s=n(74848),i=n(11678),o=n(66314);n(96540);var r=n(73329),a=n(64313),l=n(48003),d=n(64088),c=n(41714);let u=e=>{let t=!e.isDebugging&&(0,s.jsx)(c.w,{handleEditorEval:e.handleEditorEval,isEntrypointFileDefined:e.isEntrypointFileDefined,color:e.isRunning?"#39FF14":void 0,className:e.isRunning?"WaitingCursor":void 0},"run"),n=e.isEditorAutorun&&(0,s.jsx)(a.A,{label:"Auto",icon:o.W.AUTOMATIC_UPDATES}),u=(0,l.i)(r.V),h=u&&e.isRunning&&(0,s.jsx)(a.A,{label:"Stop",icon:o.W.STOP,onClick:e.handleInterruptEval}),p=!e.pauseDisabled&&e.isRunning&&!e.isDebugging&&(0,s.jsx)(a.A,{label:"Pause",icon:o.W.STOP,onClick:e.handleDebuggerPause}),g=!e.isRunning&&e.isDebugging&&(0,s.jsx)(a.A,{label:"Resume",icon:o.W.CHEVRON_RIGHT,onClick:e.handleDebuggerResume}),m=t=>e.isDebugging&&(0,s.jsx)(a.A,{label:t,icon:o.W.STOP,onClick:e.handleDebuggerReset}),{isMobileBreakpoint:b}=(0,d.Qs)();return b?(0,s.jsxs)(s.Fragment,{children:[h,p,g,m("Stop")]}):(0,s.jsxs)(s.Fragment,{children:[!e.autorunDisabled&&(0,s.jsx)("div",{className:"Switch",children:(0,s.jsx)(i.dO,{label:"",checked:e.isEditorAutorun,onChange:e.handleToggleEditorAutorun})}),u?(0,s.jsxs)(s.Fragment,{children:[n||t,h]}):n||h||t,p,g,m("Stop Debugger")]})}},39844:function(e,t,n){n.d(t,{m:()=>i});var s=n(53833);function i(e){let t=s.A.parse(e);for(let[e,n]of Object.entries(t))Array.isArray(n)?t[e]=n.join(","):null===n&&delete t[e];return t}},33205:function(e,t,n){let s;n.d(t,{Bk:()=>d,Rm:()=>l});var i,o=n(40086);let r={},a;function l(e,t){var n;a&&(n={...t,questionId:r[e],sessionId:e},new Promise((e,t)=>{u().then(s=>{let i=s.transaction([c],"readwrite");i.oncomplete=e,i.onerror=t,i.objectStore(c).add(n)})}))}function d(e,t){let n=(0,o.A)();return r[n]=e,l(n,{...t,type:"init",time:Date.now()}),n}let c="logs",u=(i=()=>new Promise((e,t)=>{let n=indexedDB.open("evtlogs",1);n.onsuccess=t=>{e(n.result)},n.onerror=e=>{console.error("Failed to get db",e),t(n.error)},n.onupgradeneeded=e=>{(e?.target).result.createObjectStore(c,{keyPath:"id",autoIncrement:!0})}}),s=null,()=>s||(s=i()))},50626:function(e,t,n){n.r(t),n.d(t,{handleHash:()=>e_,default:()=>eW,Component:()=>eB});var s=n(74848),i=n(53991),o=n(66314),r=n(79121),a=n(80952),l=n(53978),d=n.n(l),c=n(50046),u=n(2543),h=n(32992),p=n(96540),g=n(83509),m=n(94894),b=n(82134),x=n(39572),v=n(23574),y=n(92473),S=n(54348),C=n(67849);let j=e=>(0,s.jsx)(y.m,{content:"Execution Time",placement:S.yX.TOP,children:(0,s.jsx)(C.O,{leftIcon:o.W.TIME,style:{width:80},min:1e3,value:e.execTime,onValueChange:e.handleChangeExecTime})});var A=n(38211),f=n(61505),E=n(97862);n(90019),n(81333);var D=n(97210),I=n(27849),w=n(64088),k=n(49900),L=n(96830),O=n(79289),R=n(6457),T=n(18509),N=n(11888),F=n(81720),P=n(23385),M=n(3186),U=n(57017),_=n(20922),V=n(11175),B=n(31365),W=n(81168),H=n(7496),G=n(64313);let J={INACTIVE:B.J.NONE,SAVED:B.J.PRIMARY,DIRTY:B.J.WARNING},K=e=>{let{isMobileBreakpoint:t}=(0,w.Qs)(),n=e.currentFile?e.isDirty?"DIRTY":"SAVED":"INACTIVE",r=(0,s.jsx)(G.A,{label:e.currentFile&&e.currentFile.name||"Google Drive",icon:o.W.CLOUD,options:{intent:J[n]},isDisabled:e.isFolderModeEnabled}),a=(0,s.jsx)(G.A,{label:"Open",icon:o.W.DOCUMENT_OPEN,onClick:e.onClickOpen}),l=(0,s.jsx)(G.A,{label:"Save",icon:o.W.FLOPPY_DISK,onClick:e.onClickSave,isDisabled:"INACTIVE"===n}),d=(0,s.jsx)(G.A,{label:"Save as",icon:o.W.SEND_TO,onClick:e.onClickSaveAs}),c=e.loggedInAs&&(0,s.jsx)(y.m,{content:`Logged in as ${e.loggedInAs}`,children:(0,s.jsx)(G.A,{label:"Log out",icon:o.W.LOG_OUT,onClick:e.onClickLogOut})}),u=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,s.jsx)(y.m,{content:u,disabled:void 0===u,children:(0,s.jsx)(W.A,{autoFocus:!1,content:(0,s.jsx)("div",{children:(0,s.jsxs)(H.e,{large:!t,children:[a,l,d,c]})}),onOpening:e.onPopoverOpening,popoverClassName:i.POPOVER_DISMISS,disabled:e.isFolderModeEnabled,children:r})})};var $=n(61517),z=n(5193),Y=n(19551),X=n(51167),q=n(59399),Q=n(80237),Z=n(41397);function ee(e){(0,Z.JB)(`Could not connect: ${e&&e.message||e||"Unknown error"}`)}function et(e){let t=(0,p.useRef)(""),[n,r]=(0,p.useState)(""),[a,l]=(0,p.useState)(!0),[d,c]=(0,p.useState)(!1),u=(0,p.useCallback)(n=>{n.preventDefault();let s=t.current;(0,Q.mU)(s).then(t=>{null!==t?(e.handleSetEditorSessionId(s),e.handleSetSessionDetails({docId:t.docId,readOnly:t.defaultReadOnly,owner:!1}),r(s),l(t.defaultReadOnly),c(!1)):(e.handleSetEditorSessionId(""),e.handleSetSessionDetails(null),(0,Z.JB)("Could not find a session with that ID."),window.location.href.includes("/playground")&&!window.location.href.endsWith("/playground")&&window.history.pushState({},document.title,"/playground"))},t=>{e.handleSetEditorSessionId(""),ee(t)})},[e.handleSetEditorSessionId,e.handleSetSessionDetails]),h=(0,s.jsx)(G.A,{label:"Leave",icon:o.W.LOG_OUT,onClick:()=>{e.handleSetEditorSessionId(""),t.current="",r("")}}),g=(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:e.editorSessionId?(0,s.jsxs)("div",{style:{padding:"10px",display:"flex",flexDirection:"column"},children:[(0,s.jsxs)($.E,{children:["You have joined the session as"," ",d?"the owner":a?"a viewer":"an editor","."]}),(0,s.jsx)(z.c,{}),n&&(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[(0,s.jsx)(Y.g,{subLabel:"Invite other users to this session",children:(0,s.jsx)("input",{value:n,readOnly:!0})}),(0,s.jsx)(q,{text:n,onCopy:()=>(0,Z.uT)("Copied to clipboard: "+n),children:(0,s.jsx)(G.A,{icon:o.W.DUPLICATE})})]}),h]}):(0,s.jsxs)("div",{style:{padding:"10px",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,s.jsx)($.E,{children:"You are not currently in any session."}),(0,s.jsx)(z.c,{}),(0,s.jsx)(G.A,{label:"Create a new session",icon:o.W.ADD,onClick:()=>{""===e.editorSessionId&&(0,Q.lX)(e.getEditorValue()).then(t=>{r(t.sessionId),e.handleSetEditorSessionId(t.sessionId),e.handleSetSessionDetails({docId:t.docId,readOnly:!1,owner:!0}),c(!0)},ee)}}),(0,s.jsx)("br",{}),(0,s.jsx)("span",{children:"... or join an existing one"}),(0,s.jsx)("br",{}),(0,s.jsxs)("form",{onSubmit:u,style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly"},children:[(0,s.jsx)("input",{type:"text",onChange:e=>{t.current=e.target.value},placeholder:"Type your code here..."}),(0,s.jsx)("span",{className:i.POPOVER_DISMISS,children:(0,s.jsx)(G.A,{icon:o.W.LOG_IN,options:{type:"submit"}})})]})]})}),b=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0,{playgroundCode:x}=(0,m.g)();return(0,p.useEffect)(()=>{x&&(t.current=x,u({preventDefault:()=>{}}))},[x,u]),(0,s.jsx)(y.m,{content:b,disabled:void 0===b,children:(0,s.jsx)(W.A,{content:g,disabled:e.isFolderModeEnabled,children:(0,s.jsx)(G.A,{label:"Session",icon:o.W.SOCIAL_MEDIA,options:{iconColor:""===e.editorSessionId?void 0:e.sharedbConnected?X.J.GREEN3:X.J.RED3},isDisabled:e.isFolderModeEnabled})})})}var en=n(64907),es=n(35505),ei=n(15145);class eo extends p.PureComponent{shareInputElem;constructor(e){super(e),this.selectShareInputText=this.selectShareInputText.bind(this),this.handleChange=this.handleChange.bind(this),this.toggleButton=this.toggleButton.bind(this),this.shareInputElem=p.createRef(),this.state={keyword:"",isLoading:!1}}render(){let e=void 0===this.props.queryString?(0,s.jsx)($.E,{children:"Share your programs! Type something into the editor (left), then click on this button again."}):this.props.isSicp?(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{defaultValue:this.props.queryString,readOnly:!0,ref:this.shareInputElem}),(0,s.jsx)(y.m,{content:"Copy link to clipboard",children:(0,s.jsx)(q,{text:this.props.queryString,children:(0,s.jsx)(G.A,{icon:o.W.DUPLICATE,onClick:this.selectShareInputText})})})]}):(0,s.jsx)(s.Fragment,{children:this.props.shortURL&&"ERROR"!==this.props.shortURL?(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{defaultValue:this.props.shortURL,readOnly:!0,ref:this.shareInputElem}),(0,s.jsx)(y.m,{content:"Copy link to clipboard",children:(0,s.jsx)(q,{text:this.props.shortURL,children:(0,s.jsx)(G.A,{icon:o.W.DUPLICATE,onClick:this.selectShareInputText})})})]},this.props.shortURL):this.state.isLoading&&"ERROR"!==this.props.shortURL?(0,s.jsx)("div",{children:(0,s.jsx)(en.I,{description:"Generating Shareable Link...",icon:(0,s.jsx)(es.y,{size:es.H.SMALL})})}):(0,s.jsxs)("div",{children:[ei.A.urlShortenerBase,"\xa0",(0,s.jsx)("input",{placeholder:"custom string (optional)",onChange:this.handleChange,style:{width:175}}),(0,s.jsx)(G.A,{label:"Get Link",icon:o.W.SHARE,onClick:()=>{this.props.handleShortenURL(this.state.keyword),this.setState({isLoading:!0})}})]})});return(0,s.jsx)(W.A,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:(0,s.jsx)(y.m,{content:"Get shareable link",placement:S.yX.TOP,children:(0,s.jsx)(G.A,{label:"Share",icon:o.W.SHARE,onClick:()=>this.toggleButton()})})})}componentDidUpdate(e){this.props.shortURL!==e.shortURL&&this.setState({keyword:"",isLoading:!1})}toggleButton(){this.props.handleGenerateLz&&this.props.handleGenerateLz(),this.props.handleUpdateShortURL(""),this.setState({keyword:"",isLoading:!1})}handleChange(e){this.setState({keyword:e.currentTarget.value})}selectShareInputText(){null!==this.shareInputElem.current&&(this.shareInputElem.current.focus(),this.shareInputElem.current.select())}}let er=e=>(0,s.jsx)(y.m,{content:"Step Limit",placement:S.yX.TOP,children:(0,s.jsx)(C.O,{leftIcon:o.W.VERTICAL_BAR_CHART_ASC,style:{width:80},min:500,max:5e3,value:e.stepLimit,stepSize:e.stepSize,onBlur:()=>{e.handleOnBlurAutoScale?.(Number(e.stepLimit))},onValueChange:e.handleChangeStepLimit})}),ea=({isFolderModeEnabled:e,isSessionActive:t,isPersistenceActive:n,toggleFolderMode:i})=>{let r=t?"Currently unsupported while a collaborative session is active":n?"Currently unsupported while a persistence method is active":`${e?"Disable":"Enable"} Folder mode`;return(0,s.jsx)(y.m,{content:r,children:(0,s.jsx)(G.A,{label:"Folder",icon:o.W.FOLDER_CLOSE,options:{iconColor:e?X.J.BLUE4:void 0},onClick:i,isDisabled:t||n})})},el=e=>{let{isMobileBreakpoint:t}=(0,w.Qs)(),n=e.githubSaveInfo.filePath||"",r=(n.split("\\").pop()||"").split("/").pop()||"",a=void 0!==e.loggedInAs,l=!a,d=""!==n,c=a&&d,u=B.J.NONE;c&&(u=e.isDirty?B.J.WARNING:B.J.PRIMARY);let h=(0,s.jsx)(G.A,{label:c?r:"GitHub",icon:o.W.GIT_BRANCH,options:{intent:u},isDisabled:e.isFolderModeEnabled}),p=(0,s.jsx)(G.A,{label:"Open",icon:o.W.DOCUMENT_OPEN,onClick:e.onClickOpen,isDisabled:l}),g=(0,s.jsx)(G.A,{label:"Save",icon:o.W.FLOPPY_DISK,onClick:e.onClickSave,isDisabled:l||!c}),m=(0,s.jsx)(G.A,{label:"Save As",icon:o.W.SEND_TO,onClick:e.onClickSaveAs,isDisabled:l}),b=a?(0,s.jsx)(G.A,{label:"Log Out",icon:o.W.LOG_OUT,onClick:e.onClickLogOut}):(0,s.jsx)(G.A,{label:"Log In",icon:o.W.LOG_IN,onClick:e.onClickLogIn}),x=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,s.jsx)(y.m,{content:x,disabled:void 0===x,children:(0,s.jsx)(W.A,{autoFocus:!1,content:(0,s.jsx)("div",{children:(0,s.jsxs)(H.e,{large:!t,children:[p,g,m,b]})}),popoverClassName:i.POPOVER_DISMISS,disabled:e.isFolderModeEnabled,children:h})})};var ed=n(4535),ec=n(73989),eu=n(28761),eh=n(43627),ep=n.n(eh);let eg="file-system-view-node-container-m36XjR",em="file-system-view-input-B9ersw";var eb=n(69096),ex=n(71075),ev=n(45882),ey=n(56259);let eS="context-menu-item-YTI2uf",eC=({children:e,className:t,createNewFile:n,createNewDirectory:o,open:r,rename:a,remove:l})=>{let[c,u]=(0,ex.E)(),[h,g]=p.useState({x:0,y:0});return(0,s.jsxs)("div",{className:t,onContextMenu:e=>{e.preventDefault(),g({x:e.clientX,y:e.clientY}),u(!0)},children:[e,(0,s.jsxs)(ev.k,{menuClassName:d()(i.CARD,i.DARK,"context-menu-xKCaDZ"),...c,anchorPoint:h,onClose:()=>u(!1),children:[n&&(0,s.jsx)(ey.D,{className:eS,onClick:n,children:"New File"}),o&&(0,s.jsx)(ey.D,{className:eS,onClick:o,children:"New Directory"}),r&&(0,s.jsx)(ey.D,{className:eS,onClick:r,children:"Open"}),a&&(0,s.jsx)(ey.D,{className:eS,onClick:a,children:"Rename"}),l&&(0,s.jsx)(ey.D,{className:eS,onClick:l,children:"Delete"})]})]})},ej=({indentationLevel:e})=>{let t={paddingLeft:`${19*e}px`};return(0,s.jsx)("div",{style:t})},eA=({children:e,waitInMsBeforeRender:t})=>{let[n,i]=p.useState(!1);return p.useEffect(()=>{let e=setTimeout(()=>i(!0),t);return()=>clearTimeout(e)},[t]),n?e:(0,s.jsx)(s.Fragment,{})},ef=({workspaceLocation:e,fileSystem:t,basePath:n,fileName:i,isDirectory:o,isEditing:r,setIsEditing:a,refreshDirectory:l})=>{let[d,c]=p.useState(i),u=(0,g.wA)(),h=()=>{a(!1),c(i)};return(0,s.jsxs)(s.Fragment,{children:[r&&(0,s.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:em,value:d,onChange:e=>c(e.target.value),onKeyDown:r=>{if("Enter"===r.key){a(!1);let r=ep().join(n,i),h=ep().join(n,d);r!==h&&t.exists(h,n=>{n?(0,eb.ug)({title:`Unable to rename ${o?"directory":"file"}`,contents:(0,s.jsxs)("p",{children:["A file or folder ",(0,s.jsx)("b",{children:d})," already exists in this location. Please choose a different name."]}),label:"OK"}).then(()=>c(i)):t.rename(r,h,t=>{t&&console.error(t),o?u(L.A.renameEditorTabsForDirectory(e,r,h)):u(L.A.renameEditorTabForFile(e,r,h)),l()})})}else"Escape"===r.key&&h()},onFocus:e=>{let t=e.target.value.lastIndexOf(".");-1!==t?e.target.setSelectionRange(0,t):e.target.select()},onBlur:h}),!r&&(0,s.jsx)("div",{className:"file-system-view-file-name-nB5vjT",children:i})]})},eE=({processFileName:e,removePlaceholder:t})=>{let[n,i]=p.useState(""),o=()=>t();return(0,s.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:em,value:n,onChange:e=>i(e.target.value),onKeyDown:s=>{"Enter"===s.key?(e(n),t()):"Escape"===s.key&&o()},onBlur:o})},eD=({workspaceLocation:e,fileSystem:t,basePath:n,directoryName:i,indentationLevel:r,refreshParentDirectory:a})=>{let l=ep().join(n,i),[d,c]=p.useState(!1),[u,h]=p.useState(!1),[m,b]=p.useState(!1),[x,v]=p.useState(!1),[y,S]=p.useState(0),C=(0,g.wA)(),j=()=>S((y+1)%2);return(0,s.jsxs)("div",{className:"file-system-view-directory-node-container-tD0F0Q",children:[(0,s.jsx)(eC,{createNewFile:()=>{c(!0),b(!0)},createNewDirectory:()=>{c(!0),v(!0)},rename:()=>h(!0),remove:()=>{(0,eb.cu)({icon:"warning-sign",title:`Are you sure you want to delete '${i}' and its contents?`,contents:(0,s.jsxs)("p",{children:["This will result in all of its contained files & subdirectories being deleted. Once a directory is deleted, its contents cannot be recovered!",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then(n=>{n&&(C(L.A.removeEditorTabsForDirectory(e,l)),(0,ec._B)(t,l).then(a))})},children:(0,s.jsxs)("div",{className:eg,onClick:()=>{u||c(!d)},children:[(0,s.jsx)(ej,{indentationLevel:r}),d&&(0,s.jsx)(eu.I,{icon:o.W.CHEVRON_DOWN}),!d&&(0,s.jsx)(eu.I,{icon:o.W.CHEVRON_RIGHT}),(0,s.jsx)(ef,{workspaceLocation:e,fileSystem:t,basePath:n,fileName:i,isDirectory:!0,isEditing:u,setIsEditing:h,refreshDirectory:a})]})}),m&&(0,s.jsxs)("div",{className:eg,children:[(0,s.jsx)(ej,{indentationLevel:r+1}),(0,s.jsx)(eu.I,{icon:o.W.DOCUMENT}),(0,s.jsx)(eE,{processFileName:e=>{let o=ep().join(n,i,e);t.exists(o,n=>{n?(0,eb.ug)({title:"Unable to create file",contents:(0,s.jsxs)("p",{children:["A file or folder ",(0,s.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then(()=>{}):t.writeFile(o,"",e=>{e&&console.error(e),j()})})},removePlaceholder:()=>b(!1)})]}),x&&(0,s.jsxs)("div",{className:eg,children:[(0,s.jsx)(ej,{indentationLevel:r+1}),(0,s.jsx)(eu.I,{icon:o.W.CHEVRON_RIGHT}),(0,s.jsx)(eE,{processFileName:e=>{let o=ep().join(n,i,e);t.exists(o,n=>{n?(0,eb.ug)({title:"Unable to create directory",contents:(0,s.jsxs)("p",{children:["A file or folder ",(0,s.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then(()=>{}):t.mkdir(o,777,e=>{e&&console.error(e),j()})})},removePlaceholder:()=>v(!1)})]}),d&&(0,s.jsx)(ew,{workspaceLocation:e,fileSystem:t,basePath:l,indentationLevel:r+1},y)]})},eI=({workspaceLocation:e,fileSystem:t,basePath:n,fileName:i,indentationLevel:r,refreshDirectory:a})=>{let[l,d]=p.useState(!1),c=(0,g.wA)(),u=ep().join(n,i),h=()=>{t.readFile(u,"utf-8",(t,n)=>{if(t&&console.error(t),void 0===n)throw Error("File contents are undefined.");c(L.A.addEditorTab(e,u,n))})};return(0,s.jsx)(eC,{open:h,rename:()=>d(!0),remove:()=>{(0,eb.cu)({icon:"warning-sign",title:`Are you sure you want to delete '${i}'?`,contents:(0,s.jsxs)("p",{children:["Once a file is deleted, it cannot be recovered!",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then(n=>{n&&t.unlink(u,t=>{t&&console.error(t),c(L.A.removeEditorTabForFile(e,u)),a()})})},children:(0,s.jsxs)("div",{className:eg,onClick:e=>{2===e.detail&&h()},children:[(0,s.jsx)(ej,{indentationLevel:r}),(0,s.jsx)(eu.I,{icon:o.W.DOCUMENT}),(0,s.jsx)(ef,{workspaceLocation:e,fileSystem:t,basePath:n,fileName:i,isDirectory:!1,isEditing:l,setIsEditing:d,refreshDirectory:a})]})})},ew=({workspaceLocation:e,fileSystem:t,basePath:n,indentationLevel:i})=>{let[o,r]=p.useState(void 0),[a,l]=p.useState(void 0),d=()=>{t.readdir(n,async(e,s)=>{if(e&&console.error(e),void 0===s)return;let i=[],o=[];await Promise.all(s.map(e=>{let s=ep().join(n,e);return new Promise((n,r)=>{t.lstat(s,(t,s)=>{if(t)return r(t);void 0!==s&&(s.isFile()?i.push(e):s.isDirectory()&&o.push(e),n(s))})})})),l(i.sort()),r(o.sort())})};return(p.useEffect(d,[t,n]),a&&o)?(0,s.jsxs)("div",{className:"file-system-view-list-container-SJIfy5",children:[o.map(o=>(0,s.jsx)(eD,{workspaceLocation:e,fileSystem:t,basePath:n,directoryName:o,indentationLevel:i,refreshParentDirectory:d},o)),a.map(o=>(0,s.jsx)(eI,{workspaceLocation:e,fileSystem:t,basePath:n,fileName:o,indentationLevel:i,refreshDirectory:d},o))]}):(0,s.jsx)(eA,{waitInMsBeforeRender:200,children:(0,s.jsx)(es.y,{className:"file-system-view-spinner-gXV0Mu",size:es.H.SMALL})})},ek=({workspaceLocation:e,basePath:t})=>{let n=(0,w.N4)(e=>e.fileSystem.inBrowserFileSystem),[i,r]=p.useState(!1),[a,l]=p.useState(!1),[d,c]=p.useState(0),u=()=>c((d+1)%2);return null===n?(0,s.jsx)("div",{className:"file-system-view-error-qF7CJE",children:"Unable to load file system."}):(0,s.jsxs)("div",{className:"file-system-view-container-BFKete",children:[(0,s.jsx)(ew,{workspaceLocation:e,fileSystem:n,basePath:t,indentationLevel:0},d),i&&(0,s.jsxs)("div",{className:eg,children:[(0,s.jsx)(ej,{indentationLevel:0}),(0,s.jsx)(eu.I,{icon:o.W.DOCUMENT}),(0,s.jsx)(eE,{processFileName:e=>{let i=ep().join(t,e);n.exists(i,t=>{t?(0,eb.ug)({title:"Unable to create file",contents:(0,s.jsxs)("p",{children:["A file or folder ",(0,s.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then(()=>{}):n.writeFile(i,"",e=>{e&&console.error(e),u()})})},removePlaceholder:()=>r(!1)})]}),a&&(0,s.jsxs)("div",{className:eg,children:[(0,s.jsx)(ej,{indentationLevel:0}),(0,s.jsx)(eu.I,{icon:o.W.CHEVRON_RIGHT}),(0,s.jsx)(eE,{processFileName:e=>{let i=ep().join(t,e);n.exists(i,t=>{t?(0,eb.ug)({title:"Unable to create directory",contents:(0,s.jsxs)("p",{children:["A file or folder ",(0,s.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then(()=>{}):n.mkdir(i,777,e=>{e&&console.error(e),u()})})},removePlaceholder:()=>l(!1)})]}),(0,s.jsx)(eC,{className:"file-system-view-empty-space-Csqvti",createNewFile:()=>r(!0),createNewDirectory:()=>l(!0)})]})};var eL=n(99869);let eO=`
Welcome to the Source Academy playground!

The book [_Structure and Interpretation of Computer Programs, JavaScript Edition_](https://sourceacademy.org/sicpjs/)
uses JavaScript sublanguages that we call [_Source_](https://docs.sourceacademy.org/). `,eR=`

In the editor on the left, you can use the [_Ace keyboard shortcuts_](https://github.com/ajaxorg/ace/wiki/Default-Keyboard-Shortcuts) 
and also the [_Source Academy keyboard shortcuts_](https://github.com/source-academy/frontend/wiki/Source-Academy-Keyboard-Shortcuts).

`;var eT=n(6726),eN=n(39844),eF=n(80594),eP=n(33205),eM=n(98876),eU=n(79931);async function e_(e,t,n,s,i){let o=(0,eN.m)(e),r=(0,eT.hM)(o.chap)??void 0;if(r===c.Chapter.FULL_JS)(0,k.OW)();else if(r===c.Chapter.FULL_TS)(0,k.AX)();else{if(r===c.Chapter.HTML&&!await (0,k.g6)())return;let e=void 0===o.prgrm?"":(0,h.decompressFromEncodedURIComponent)(o.prgrm),a=(0,F.Zg)(n),l=void 0===o.files?{[a]:e}:(0,eN.m)((0,h.decompressFromEncodedURIComponent)(o.files));null!==i&&await (0,ec.j2)(n,i,l),s(L.A.setFolderMode(n,!1));let d=(0,eT.MH)(o.isFolder)??!1;s(L.A.setFolderMode(n,d));let u=o.tabs?.split(",").map(h.decompressFromEncodedURIComponent)??[a];s(L.A.removeEditorTabsForDirectory(n,eM.V[n])),u.forEach(e=>s(L.A.addEditorTab(n,e,l[e]??"")));let p=(0,eT.hM)(o.tabIdx)??0;if(s(L.A.updateActiveEditorTabIndex(n,p)),r){let e=(0,F.lr)(r,o.variant);t.handleChapterSelect(r,e.variant),s((0,T.yO)(e))}let g=Math.max((0,eT.hM)(o.exec||"1000")||1e3,1e3);g&&t.handleChangeExecTime(g)}}let eV=e=>{let{isSicpEditor:t}=e,n=t?"sicp":"playground",{isMobileBreakpoint:l}=(0,w.Qs)(),h=(0,w.N4)(e=>e.vscode.isVscode),[y,S]=(0,p.useState)(),C=(0,m.zy)(),k=(0,m.Zp)(),B=(0,g.Pj)(),W=new URLSearchParams(C.search).get("add_device"),{editorTabs:H,editorSessionId:G,sessionDetails:J,stepLimit:$,execTime:z,isEditorAutorun:Y,isRunning:X,isDebugging:q,output:Q,replValue:Z,sharedbConnected:ee,usingSubst:en,usingCse:es,isFolderModeEnabled:ec,activeEditorTabIndex:eu,context:{chapter:eh,variant:ep}}=(0,w.N4)(e=>e.workspaces[n]),eg=(0,w.N4)(e=>e.fileSystem.inBrowserFileSystem),{queryString:em,shortURL:eb,persistenceFile:ex,githubSaveInfo:ev}=(0,w.N4)(e=>e.playground),{sourceChapter:ey,sourceVariant:eS,googleUser:eC,githubOctokitObject:ej}=(0,w.N4)(e=>e.session),eA=(0,g.wA)(),{handleChangeExecTime:ef,handleChapterSelect:eE,handleEditorValueChange:eD,handleSetEditorBreakpoints:eI,handleReplEval:ew,handleReplOutputClear:eT,handleUsingSubst:eN}=(0,p.useMemo)(()=>({handleChangeExecTime:e=>eA(L.A.changeExecTime(e,n)),handleChapterSelect:(e,t)=>eA(L.A.chapterSelect(e,t,n)),handleEditorValueChange:(e,t)=>eA(L.A.updateEditorValue(n,e,t)),handleSetEditorBreakpoints:(e,t)=>eA(L.A.setEditorBreakpoint(n,e,t)),handleReplEval:()=>eA(L.A.evalRepl(n)),handleReplOutputClear:()=>eA(L.A.clearReplOutput(n)),handleUsingSubst:e=>eA(L.A.toggleUsingSubst(e,n))}),[eA,n]);W&&!y&&(S(W),k(C.pathname,{replace:!0}));let[eV,eB]=(0,p.useState)(new Date),{selectedTab:eW,setSelectedTab:eH}=(0,I.k9)(n,W?"remote_execution":"introduction"),[eG,eJ]=(0,p.useState)(!1),[eK,e$]=(0,p.useState)(()=>(0,eP.Bk)("playground",{editorValue:H[0]?.value??"",chapter:eh})),[ez,eY]=(0,p.useState)({}),[eX,eq]=(0,p.useState)(!1),eQ=(0,p.useMemo)(()=>[["alt+shift+h",()=>eq(e=>!e)]],[eq]);(0,r.v)(eQ);let eZ=(0,p.useMemo)(()=>(0,eU.ik)(y,S),[y]),e0=(0,p.useMemo)(()=>(0,eU.Lf)(ez,G,J?.readOnly||!1),[ez,G,J?.readOnly]),e1=(0,w.N4)(e=>!!e.session.remoteExecutionSession)&&!t,e3=(0,w.N4)(e=>e.workspaces.playground.externalLibrary);(0,p.useEffect)(()=>{e$((0,eP.Bk)("playground",{editorValue:H[0]?.value??"",chapter:eh}))},[G]);let e9=t?e.initialEditorValueHash:C.hash;(0,p.useEffect)(()=>{if(!e9){if(ey&&eS){eE(ey,eS);let e=(0,F.lr)(ey,eS);eA((0,T.yO)(e)),eA(L.A.setFolderMode(n,!1))}return}e_(e9,{handleChangeExecTime:ef,handleChapterSelect:eE},n,eA,eg)},[eA,eg,e9,ey,eS,n,eE,ef]),(0,p.useEffect)(()=>{eW&&(!h&&l&&eU.mv.includes(eW)?eH("mobile_editor"):!l&&eU.sA.includes(eW)&&eH("introduction"))},[l,h,eW,eH]);let e4=p.useCallback((e,t)=>{eB(new Date),eD(e,t)},[eD]);(0,p.useEffect)(()=>{if("sicp"===n)return;let e=H[0]?.value??"",t=H[0]?.breakpoints??[];(0,N.h0)(N.Ay.NewEditor(n,"playground",1,eh,"",e,t))},[]);let e8=(0,p.useCallback)(e=>{(0,eP.Rm)(eK,e)},[eK]),e2=(0,p.useMemo)(()=>({handleEditorEval:()=>eA(L.A.evalEditor(n)),handleInterruptEval:()=>eA(b.A.beginInterruptExecution(n)),handleToggleEditorAutorun:()=>eA(L.A.toggleEditorAutorun(n)),handleDebuggerPause:()=>eA(b.A.beginDebuggerPause(n)),handleDebuggerReset:()=>eA(b.A.debuggerReset(n)),handleDebuggerResume:()=>eA(b.A.debuggerResume(n))}),[eA,n]),e5=(0,w.N4)(e=>e.playground.languageConfig),e7=(0,p.useMemo)(()=>(0,s.jsx)(M.g,{isEntrypointFileDefined:null!==eu,isDebugging:q,isEditorAutorun:Y,isRunning:X,autorunDisabled:e1,sourceChapter:e5.chapter,pauseDisabled:e1||!(0,F.Kd)(e5.chapter),...e2},"autorun"),[eu,q,Y,X,e5.chapter,e2,e1]),e6=(0,p.useCallback)((e,t)=>{let{chapter:n,variant:s}=e;(n<=2&&eG||"subst_visualiser"===eW)&&eN(!0),n>2&&(eT(),eN(!1)),e8({time:Date.now(),type:"chapterSelect",data:n}),(0,N.h0)(N.Ay.ChangeChapter("playground",1,n,s)),eE(n,s),eA((0,T.yO)(e))},[eA,eG,eW,e8,eT,eN,eE]),te=(0,p.useMemo)(()=>(0,s.jsx)(U.e,{handleChapterSelect:e6,isFolderModeEnabled:ec,sourceChapter:e5.chapter,sourceVariant:e5.variant,disabled:e1},"chapter"),[e6,ec,e5.chapter,e5.variant,e1]),tt=(0,p.useMemo)(()=>"subst_visualiser"===eW?null:(0,s.jsx)(_.g,{handleReplOutputClear:eT},"clear_repl"),[eT,eW]),tn=(0,p.useMemo)(()=>"subst_visualiser"===eW?null:(0,s.jsx)(V.T,{handleReplEval:ew,isRunning:X},"eval_repl"),[ew,X,eW]),ts=ex&&(!ex.lastSaved||ex.lastSaved<eV),ti=(0,p.useMemo)(()=>(0,s.jsx)(K,{isFolderModeEnabled:ec,currentFile:ex,loggedInAs:eC,isDirty:ts,onClickSaveAs:()=>eA(R.A.persistenceSaveFileAs()),onClickOpen:()=>eA(R.A.persistenceOpenPicker()),onClickSave:ex?()=>eA(R.A.persistenceSaveFile(ex)):void 0,onClickLogOut:()=>eA(x.A.logoutGoogle()),onPopoverOpening:()=>eA(R.A.persistenceInitialise())},"googledrive"),[ec,ex,eC,ts,eA]),to=ev&&(!ev.lastSaved||ev.lastSaved<eV),tr=(0,p.useMemo)(()=>(0,s.jsx)(el,{isFolderModeEnabled:ec,loggedInAs:ej.octokit,githubSaveInfo:ev,isDirty:to,onClickOpen:()=>eA(O.A.githubOpenFile()),onClickSaveAs:()=>eA(O.A.githubSaveFileAs()),onClickSave:()=>eA(O.A.githubSaveFile()),onClickLogIn:()=>eA(x.A.loginGitHub()),onClickLogOut:()=>eA(x.A.logoutGitHub())},"github"),[eA,ej.octokit,to,ev,ec]),ta=(0,p.useMemo)(()=>(0,s.jsx)(j,{execTime:z,handleChangeExecTime:ef},"execution_time"),[z,ef]),tl=(0,p.useMemo)(()=>(0,s.jsx)(er,{stepLimit:$,stepSize:en?2:1,handleChangeStepLimit:e=>{eA(L.A.changeStepLimit(e,n)),es&&eA(L.A.toggleUpdateCse(!0,n))},handleOnBlurAutoScale:e=>{e%2!=0&&en?eA(L.A.changeStepLimit(e+1,n)):eA(L.A.changeStepLimit(e,n)),es&&eA(L.A.toggleUpdateCse(!0,n))}},"step_limit"),[eA,$,en,es,n]),td=(0,p.useCallback)(()=>B.getState().workspaces[n].editorTabs[0].value,[B,n]),tc=(0,p.useCallback)(e=>eA((0,v.LG)(n,e)),[eA,n]),tu=(0,p.useCallback)(e=>eA((0,v.$Z)(n,e)),[eA,n]),th=(0,p.useMemo)(()=>(0,s.jsx)(et,{isFolderModeEnabled:ec,editorSessionId:G,getEditorValue:td,handleSetEditorSessionId:tc,handleSetSessionDetails:tu,sharedbConnected:ee},"session"),[ec,G,td,tc,tu,ee]),tp=(0,p.useMemo)(()=>{let n=t?"https://sourceacademy.org/playground#"+e.initialEditorValueHash:em;return(0,s.jsx)(eo,{handleGenerateLz:()=>eA((0,T.fX)()),handleShortenURL:e=>eA((0,T.r0)(e)),handleUpdateShortURL:e=>eA((0,T.$8)(e)),queryString:n,shortURL:eb,isSicp:t},"share")},[eA,t,e.initialEditorValueHash,em,eb]),tg=(0,p.useMemo)(()=>(0,s.jsx)(ea,{isFolderModeEnabled:ec,isSessionActive:""!==G,isPersistenceActive:void 0!==ex||""!==ev.repoName,toggleFolderMode:()=>eA(L.A.toggleFolderMode(n))},"folder"),[eA,ev.repoName,ec,ex,G,n]);(0,p.useEffect)(()=>{let e=(0,F.lr)(eh,ep);eA((0,T.yO)(e))},[eA,eh,ep]);let tm=e5.supports.dataVisualizer,tb=e5.supports.cseMachine,tx=e5.supports.substVisualizer,tv=(0,p.useMemo)(()=>{var e;return(0,eU.wY)((e=e5.chapter,eO+((e,t)=>{if(e===c.Chapter.FULL_JS)return"However, you have chosen full JavaScript; your program will be run directly using JavaScript strict mode [_(ECMAScript 2021)_](https://262.ecma-international.org/12.0/).\n\n<b>Warning:</b> If your program freezes during execution, you can try refreshing the tab. Note that you need to open the browser console (typically by pressing `F12`) before using breakpoints.";if(e===c.Chapter.HTML)return"However, you have chosen HTML, the standard markup language for webpages. Your code will be rendered directly as a HTML document.\n\nJavaScript code can be added to a HTML document using the `<script>` tag; any script errors will be displayed in the output below.\n\n<b>Note:</b> Error messages may differ between browsers, e.g. when using Safari, errors can only be viewed on the browser console itself. Please check the browser console (typically by pressing `F12`) for more detailed errors and warnings.";let n=`https://docs.sourceacademy.org/source_${e}${t!==c.Variant.DEFAULT&&t!==c.Variant.NATIVE?`_${t}`:""}/`;return`You have chosen the sublanguage [_${(0,F.Kl)(e,t)}_](${n}).`})(e,e5.variant)+eR))},[e5]),ty=(0,p.useMemo)(()=>{let e=[tv];return e5.chapter===c.Chapter.HTML?Q.length>0&&"result"===Q[0].type&&e.push((0,E.A)(Q[0],e=>eA(L.A.addHtmlConsoleError(e,n)),n)):(c.Chapter.FULL_JAVA,!e1&&(tm&&e.push((0,f.A)(n)),tb&&e.push((0,A.Ay)(n)),tx&&e.push((0,eU.fM)(n,Q))),t||ei.A.playgroundOnly||(e.push(eZ),""!==G&&e.push(e0))),e},[tv,e5.chapter,e1,t,Q,n,eA,tm,tb,tx,eZ,G,e0]),tS=[...ty].filter(({id:e})=>!(e&&eU.mv.includes(e))),tC=(0,p.useCallback)(t=>{let n=()=>{t.getSession().addFold("    ",new a.Range(1,0,e.prependLength,0)),t.renderer.off("afterRender",n)};t.renderer.on("afterRender",n)},[e.prependLength]),tj=(0,p.useCallback)((e,t)=>{e8({time:Date.now(),type:"codeDelta",data:t}),eA(L.A.toggleUpdateCse(!0,n)),eA(L.A.setEditorHighlightedLines(n,0,[]))},[e8,eA,n]),tA=(0,p.useCallback)(e=>{e8({time:Date.now(),type:"cursorPositionChange",data:e.getCursor()})},[e8]),tf=(0,p.useCallback)(e=>{let t=e.getRange(),n=e.isBackwards();(0,u.isEqual)(t.start,t.end)||e8({time:Date.now(),type:"selectionRangeData",data:{range:t,isBackwards:n}})},[e8]),tE=(0,p.useCallback)((e,t)=>{let s=t.filter(e=>!!e).length;s>0&&(eJ(!0),eh<=2&&eN(!0)),0===s&&(eJ(!1),"subst_visualiser"!==eW&&(eT(),eN(!1))),eI(e,t),eA(L.A.toggleUpdateCse(!0,n))},[eW,eA,n,eI,eT,eN,eh]),tD=!e5.supports.repl||e1,tI=(0,p.useMemo)(()=>({handleDeclarationNavigate:e=>eA(L.A.navigateToDeclaration(n,e)),handlePromptAutocomplete:(e,t,s)=>eA(L.A.promptAutocomplete(n,e,t,s)),handleSendReplInputToOutput:e=>eA(L.A.sendReplInputToOutput(e,n)),handleSetSharedbConnected:e=>eA((0,v.PU)(n,e)),setActiveEditorTabIndex:e=>eA(L.A.updateActiveEditorTabIndex(n,e)),removeEditorTabByIndex:e=>eA(L.A.removeEditorTab(n,e))}),[eA,n]),tw={editorSessionId:G,sessionDetails:J,isEditorAutorun:Y,editorVariant:"normal",baseFilePath:eM.V[n],isFolderModeEnabled:ec,activeEditorTabIndex:eu,setActiveEditorTabIndex:tI.setActiveEditorTabIndex,removeEditorTabByIndex:tI.removeEditorTabByIndex,editorTabs:H.map(ed.U),handleDeclarationNavigate:tI.handleDeclarationNavigate,handleEditorEval:e2.handleEditorEval,handlePromptAutocomplete:tI.handlePromptAutocomplete,handleSendReplInputToOutput:tI.handleSendReplInputToOutput,handleSetSharedbConnected:tI.handleSetSharedbConnected,onChange:tj,onCursorChange:tA,onSelectionChange:tf,onLoad:t&&e.prependLength?tC:void 0,sourceChapter:e5.chapter,externalLibraryName:e3,sourceVariant:e5.variant,handleEditorValueChange:e4,handleEditorUpdateBreakpoints:tE,setUsers:eY,updateLanguageCallback:e6},tk=(0,p.useMemo)(()=>({handleBrowseHistoryDown:()=>eA(L.A.browseReplHistoryDown(n)),handleBrowseHistoryUp:()=>eA(L.A.browseReplHistoryUp(n)),handleReplValueChange:e=>eA(L.A.updateReplValue(e,n))}),[eA,n]),tL={output:Q,replValue:Z,handleReplEval:ew,usingSubst:en,handleBrowseHistoryDown:tk.handleBrowseHistoryDown,handleBrowseHistoryUp:tk.handleBrowseHistoryUp,handleReplValueChange:tk.handleReplValueChange,sourceChapter:e5.chapter,sourceVariant:e5.variant,externalLibrary:P.O.NONE,hidden:"subst_visualiser"===eW||"cse_machine"===eW,inputHidden:tD,replButtons:[tD?null:tn,tt],disableScrolling:t},tO=(0,p.useMemo)(()=>({tabs:[...ec?[{label:"Folder",body:(0,s.jsx)(ek,{workspaceLocation:"playground",basePath:eM.V[n]}),iconName:o.W.FOLDER_CLOSE,id:"folder"}]:[]]}),[ec,n]),tR={controlBarProps:{editorButtons:[e7,e5.chapter===c.Chapter.FULL_JS?null:tp,te,t?null:th,e5.supports.multiFile?tg:null,ti,tr,en||es||(0,F.f_)(e5.variant)?tl:(0,F.Kd)(e5.chapter)?ta:null]},editorContainerProps:tw,handleSideContentHeightChange:(0,p.useCallback)(e=>eA((0,D.k1)(e,n)),[eA,n]),replProps:tL,sideBarProps:tO,sideContentProps:{selectedTabId:eW,tabs:{beforeDynamicTabs:ty,afterDynamicTabs:[]},workspaceLocation:n},sideContentIsResizeable:"subst_visualiser"!==eW&&"cse_machine"!==eW},tT={editorContainerProps:tw,replProps:tL,sideBarProps:tO,mobileSideContentProps:{mobileControlBarProps:{editorButtons:[e7,te,e5.chapter===c.Chapter.FULL_JS?null:tp,t?null:th,e5.supports.multiFile?tg:null,ti,tr]},selectedTabId:eW,onChange:eH,tabs:{beforeDynamicTabs:tS,afterDynamicTabs:[]},workspaceLocation:n}};return!h&&l?(0,s.jsx)("div",{className:d()("Playground",i.DARK,eX&&"GreenScreen"),children:(0,s.jsx)(eL.A,{...tT})}):(0,s.jsx)("div",{className:d()("Playground",i.DARK,eX&&"GreenScreen"),children:(0,s.jsx)(eF.A,{...tR})})},eB=eV;eB.displayName="Playground";let eW=eV}}]);
//# sourceMappingURL=37759.ac158136.js.map