(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([["26286"],{5725:function(e,s,t){"use strict";t.d(s,{A:()=>n});let n={Application__main:"Application__main-FyRL2F",applicationMain:"Application__main-FyRL2F",WorkspaceParent:"WorkspaceParent-ilinZ5",workspaceParent:"WorkspaceParent-ilinZ5","bp6-tag":"bp6-tag-gPpFKc",bp6Tag:"bp6-tag-gPpFKc",badge:"badge-wLoBkQ","bp6-overlay":"bp6-overlay-KCe4sM",bp6Overlay:"bp6-overlay-KCe4sM","bp6-popover-content":"bp6-popover-content-A7Ze1C",bp6PopoverContent:"bp6-popover-content-A7Ze1C","badge-tag":"badge-tag-H0B9ej",badgeTag:"badge-tag-H0B9ej",Academy:"Academy-lw8LSz",academy:"Academy-lw8LSz","Academy-switching-courses":"Academy-switching-courses-vYPkQG",academySwitchingCourses:"Academy-switching-courses-vYPkQG","listing-xp":"listing-xp-TG5lwB",listingXp:"listing-xp-TG5lwB"}},97375:function(e){e.exports=function(e,s){var t=s.prototype,n=t.format;t.format=function(e){var s=this,t=this.$locale();if(!this.isValid())return n.bind(this)(e);var a=this.$utils(),i=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(e){switch(e){case"Q":return Math.ceil((s.$M+1)/3);case"Do":return t.ordinal(s.$D);case"gggg":return s.weekYear();case"GGGG":return s.isoWeekYear();case"wo":return t.ordinal(s.week(),"W");case"w":case"ww":return a.s(s.week(),"w"===e?1:2,"0");case"W":case"WW":return a.s(s.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return a.s(String(0===s.$H?24:s.$H),"k"===e?1:2,"0");case"X":return Math.floor(s.$d.getTime()/1e3);case"x":return s.$d.getTime();case"z":return"["+s.offsetName()+"]";case"zzz":return"["+s.offsetName("long")+"]";default:return e}});return n.bind(this)(i)}}},6279:function(e){e.exports=function(e,s,t){e=e||{};var n=s.prototype,a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,s,t,a){return n.fromToBase(e,s,t,a)}t.en.relativeTime=a,n.fromToBase=function(s,n,i,r,o){for(var l,d,c,u=i.$locale().relativeTime||a,m=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],h=m.length,p=0;p<h;p+=1){var x=m[p];x.d&&(l=r?t(s).diff(i,x.d,!0):i.diff(s,x.d,!0));var g=(e.rounding||Math.round)(Math.abs(l));if(c=l>0,g<=x.r||!x.r){g<=1&&p>0&&(x=m[p-1]);var b=u[x.l];o&&(g=o(""+g)),d="string"==typeof b?b.replace("%d",g):b(g,n,x.l,c);break}}if(n)return d;var v=c?u.future:u.past;return"function"==typeof v?v(d):v.replace("%s",d)},n.to=function(e,s){return i(e,s,this,!0)},n.from=function(e,s){return i(e,s,this)};var r=function(e){return e.$u?t.utc():t()};n.toNow=function(e){return this.to(r(this),e)},n.fromNow=function(e){return this.from(r(this),e)}}},3185:function(e,s,t){"use strict";e.exports=t.p+"static/image/default_cover_image.6b01e3a0.jpg"},12951:function(e,s,t){"use strict";t.d(s,{A:()=>o});var n=t(74848),a=t(51851),i=t(7064),r=t(96540);let o=e=>((0,r.useEffect)(()=>{e.loadContentDispatch?.()},[]),(0,n.jsx)("div",{className:"ContentDisplay row center-xs",children:(0,n.jsx)("div",{className:`${e.fullWidth?"col-md-12":"col-md-10 col-xs-11"} contentdisplay-content-parent`,children:(0,n.jsx)(a.Z,{className:"contentdisplay-content",elevation:i.e.THREE,children:e.display})})}))},12450:function(e,s,t){"use strict";t.r(s),t.d(s,{default:()=>eP,Component:()=>e_});var n=t(74848),a=t(92473),i=t(54348),r=t(79642),o=t(31365),l=t(64907),d=t(35505),c=t(76129),u=t(45111),m=t(31643),h=t(61517),p=t(5960),x=t(66314),g=t(2543),b=t(96540),v=t(83509),j=t(94894),C=t(703),f=t(11888),A=t(39572),y=t(81720),N=t(53991),w=t(51851),E=t(53978),k=t.n(E),T=t(50046),R=t(69096),S=t(64936);t(88462);var I=t(41397);let _=(e,s,t,n)=>()=>{if(!n)return e();if("mcq"===s.type){if(null===s.answer)return(0,I.JB)("Please select an option!",750);if(void 0===s.solution)return e();if(s.answer!==s.solution)return(0,I.JB)("Your MCQ solution is incorrect!",750)}else if("programming"===s.type&&!t.reduce((e,s)=>e&&(0,S.stringify)(s.result)===s.answer,!0))return(0,I.JB)("Your solution has not passed all testcases!",750);return e()};var P=t(5849),W=t(79931),M=t(33205),D=t(57017),O=t(20922),B=t(11175),L=t(14822),$=t(84126),G=t(17514),H=t(33564),V=t(41714),F=t(55126),q=t(64313),Y=t(4535),z=t(48299),U=t(99869),X=t(49098),Q=t(28761),Z=t(81333),J=t(7064),K=t(35537);let ee=({handleContestEntryClick:e,contestEntry:s,rank:t})=>(0,n.jsx)("div",{className:k()("LeaderboardCard"),children:(0,n.jsxs)(w.Z,{className:N.INTERACTIVE,elevation:J.e.ONE,onClick:()=>e(s.submission_id,s.answer.code??""),"data-testid":"SideContentLeaderboardCard",children:[(0,n.jsx)(K.AC,{className:"contestentry-entryid",children:s.student_name}),(0,n.jsx)(K.AC,{className:"contestentry-rank",children:t}),(0,n.jsx)(K.AC,{className:"contestentry-score","data-testid":"contestentry-score",children:s.final_score})]})}),es=e=>{let{t:s}=(0,Z.Bd)("sideContent",{keyPrefix:"contestLeaderboard"}),{orderedContestEntries:t,handleContestEntryClick:i,leaderboardType:o}=e,[l,d]=(0,b.useState)(!0),u=(0,b.useMemo)(()=>"score_leaderboard"===o?s("titles.score"):"popular_vote_leaderboard"===o?s("titles.popularVote"):s("titles.default"),[o,s]),m=(0,b.useMemo)(()=>"score_leaderboard"===o?s("tooltips.score"):"popular_vote_leaderboard"===o?s("tooltips.popularVote"):s("tooltips.default"),[o,s]),h=(e,s)=>(0,n.jsxs)("div",{className:e,children:[s,(0,n.jsx)(Q.I,{icon:x.W.CARET_DOWN})]}),p=(0,b.useMemo)(()=>(0,n.jsxs)("div",{className:"leaderboard-header",children:[h("header-entryid",s("headers.studentName")),h("header-entryrank",s("headers.rank")),h("header-score","score_leaderboard"===o?s("headers.score.calculated"):"popular_vote_leaderboard"===o?s("headers.score.popularity"):s("headers.score.default"))]}),[o,s]),g=(0,b.useMemo)(()=>(0,n.jsxs)("div",{children:[p,t.length>0?t.map((e,s)=>(0,n.jsx)(ee,{handleContestEntryClick:i,contestEntry:e,rank:e.rank??s+1},e.submission_id)):(0,n.jsx)("div",{className:"noResults",children:s("noEntries")})]}),[i,t,p,s]);return(0,n.jsxs)("div",{className:"ContestLeaderboard",children:[(0,n.jsxs)(r.$,{className:"collapse-button",icon:l?x.W.CARET_DOWN:x.W.CARET_RIGHT,minimal:!0,onClick:()=>d(!l),children:[(0,n.jsx)("span",{children:u}),(0,n.jsx)(a.m,{content:m,children:(0,n.jsx)(Q.I,{icon:x.W.HELP})})]}),(0,n.jsx)(c.S,{isOpen:l,keepChildrenMounted:!0,children:g})]})},et=[{name:"S",color:"rgb(255, 127, 127)",score:10},{name:"A",color:"rgb(255, 223, 127)",score:7},{name:"B",color:"rgb(255, 255, 127)",score:4},{name:"C",color:"rgb(191, 255, 127)",score:2},{name:"D",color:"rgb(127, 191, 255)",score:1}],en=({contestEntries:e,canSave:s,isValid:t,handleContestEntryClick:i,handleVotingSubmissionChange:o})=>{let{t:l}=(0,Z.Bd)("sideContent",{keyPrefix:"contestVoting"}),[d,u]=(0,b.useState)(!0),[m,h]=(0,b.useState)(null),[p,g]=(0,b.useState)(null),v=(0,b.useMemo)(()=>[...e].sort((e,s)=>e.submission_id-s.submission_id),[e]),j=e=>{h(e.currentTarget),e.dataTransfer.effectAllowed="move"},C=(0,b.useCallback)(e=>s=>{let t=s.currentTarget.closest(".tier");if(t){let s=t.id.split("-")[1],n=et.find(e=>e.name.toLowerCase()===s);o(e.submission_id,n?.score||0)}g(null)},[o]),f=(0,b.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),A=(0,b.useCallback)(e=>{setTimeout(()=>{let s=e.target.closest(".tier");s&&g(s.id)},0)},[]),y=(0,b.useCallback)(e=>{let s=e.target.closest(".tier");s&&s.id===p&&g(null)},[p]),E=(0,b.useCallback)(e=>{e.preventDefault();let s=e.target.closest(".item-container");s&&s.appendChild(m)},[m]),T=(0,b.useRef)({}),R=(0,b.useRef)({}),S=(0,b.useMemo)(()=>et.map((e,s)=>(0,n.jsxs)("div",{className:k()("tier",{"hovered-tier":p===`tier-${e.name.toLowerCase()}`}),id:`tier-${e.name.toLowerCase()}`,"data-testid":"tier",children:[(0,n.jsx)("h2",{style:{backgroundColor:e.color},children:e.name}),(0,n.jsx)("div",{className:"item-container",onDragOver:f,onDragLeave:y,onDragEnter:A,onDrop:E,ref:e=>R.current[s]=e})]},`tier-${e.name.toLowerCase()}`)),[p,f,y,A,E]),I=(0,b.useMemo)(()=>(0,n.jsxs)("div",{className:"tier-list",children:[S,v.length>0?(0,n.jsx)("div",{className:"tier",id:"bank","data-testid":"tier",children:(0,n.jsx)("div",{className:"item-container",id:"items",onDragOver:f,onDragLeave:y,onDragEnter:A,onDrop:E,"data-testid":"voting-item-container",children:v.map((e,a)=>(0,n.jsx)("div",{className:k()("item",{wrong:!t}),draggable:s,id:`item-${a+1}`,onDragStart:j,onDragEnd:C(e),ref:e=>T.current[a]=e,"data-testid":"voting-item",children:(0,n.jsx)(w.Z,{className:N.INTERACTIVE,elevation:J.e.ONE,onClick:()=>i(e.submission_id,e.answer.code??""),children:(0,n.jsx)(K.AC,{className:"contestentry-entryid",children:a+1})})},`item-${a+1}`))})}):(0,n.jsx)("div",{className:"noResults",children:l("noEntries")})]}),[S,v,f,y,A,E,l,t,s,C,i]);return(0,b.useEffect)(()=>{v.forEach((e,s)=>{if(null!==e.score){let t=et.findIndex(s=>!!e.score&&s.score<=e.score);if(-1!==t){let e=R.current[t],n=T.current[s];e&&n&&e.appendChild(n)}}})},[v]),(0,n.jsxs)("div",{className:"ContestEntryVoting",children:[(0,n.jsxs)(r.$,{className:"collapse-button",icon:d?x.W.CARET_DOWN:x.W.CARET_RIGHT,variant:"minimal",onClick:()=>u(!d),children:[(0,n.jsx)("span",{children:l("title")}),(0,n.jsx)(a.m,{content:(0,n.jsx)("span",{children:l("tooltip")}),children:(0,n.jsx)(Q.I,{icon:x.W.HELP})})]}),(0,n.jsx)(c.S,{isOpen:d,keepChildrenMounted:!0,children:I})]})},ea=({canSave:e,contestEntries:s,handleSave:t,handleContestEntryClick:a})=>{let[i,r]=(0,b.useState)(!0),[o,l]=(0,b.useState)([]);return(0,b.useEffect)(()=>{l(s)},[s]),(0,n.jsx)(en,{isValid:i,canSave:e,handleContestEntryClick:a,handleVotingSubmissionChange:(e,s)=>{let n=o.map(t=>t.submission_id===e?{...t,score:s}:t);l(n),n.reduce((e,s)=>e&&void 0!==s.score&&null!==s.score,!0)?(t(n),r(!0)):((0,I.JB)("Please assign every entry to a tier."),r(!1))},contestEntries:o})};var ei=t(40134),er=t(97210),eo=t(27849),el=t(15145),ed=t(64088),ec=t(6726),eu=t(96122),em=t(80594),eh=t(96830),ep=t(89368),ex=t(5193),eg=t(88806);let eb=e=>(0,n.jsx)("div",{className:"GradingResult",children:(0,n.jsxs)("div",{className:"grading-result-table",children:[(0,n.jsx)(ep._,{children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"XP:"}),(0,n.jsx)("td",{children:(0,n.jsxs)(h.E,{children:[e.xp," / ",e.maxXp]})})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Comments:"}),(0,n.jsx)("td",{children:!e.comments&&(0,n.jsx)(h.E,{children:"None"})})]})]})}),e.comments&&(0,n.jsx)(ep._,{children:(0,n.jsx)("tbody",{children:(0,n.jsx)("tr",{children:(0,n.jsxs)("td",{children:[(0,n.jsx)(ex.c,{}),(0,n.jsx)(z.A,{content:e.comments,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0,openLinksInNewWindow:!0}),(0,n.jsx)(ex.c,{})]})})})}),(0,n.jsx)("br",{}),(0,n.jsx)("div",{className:"grading-result-info",children:(0,n.jsxs)(h.E,{children:["Graded by ",(0,n.jsx)("b",{children:e.graderName})," on ",(0,eg.Hw)(e.gradedAt)]})})]})}),ev="assessment",ej=e=>{let[s,t]=(0,b.useState)(!1),[a,i]=(0,b.useState)(!1),[c,h]=(0,b.useState)(!1),[C,E]=(0,b.useState)(""),[S,I]=(0,b.useState)(!1),{isMobileBreakpoint:Q}=(0,ed.Qs)(),Z=(0,ed.N4)(e=>e.vscode.isVscode),J=(0,ed.N4)(s=>s.session.assessments[e.assessmentId]),K=(0,ed.N4)(e=>e.session.assessmentOverviews),ee=(0,ed.N4)(e=>e.session.teamFormationOverview),et=K?.find(e=>e.id===J?.id),{selectedTab:en,setSelectedTab:ep}=(0,eo.k9)(ev,J?.questions[e.questionId].grader!==void 0?"grading":"question_overview"),ex=(0,j.Zp)(),{courseId:eg}=(0,ed.N4)(e=>e.session),{isFolderModeEnabled:ej,activeEditorTabIndex:eC,editorTabs:ef,autogradingResults:eA,editorTestcases:ey,hasUnsavedChanges:eN,isRunning:ew,output:eE,replValue:ek,currentAssessment:eT,currentQuestion:eR}=(0,ed.N4)(e=>e.workspaces[ev]),eS=(0,v.wA)(),{handleTeamOverviewFetch:eI,handleTestcaseEval:e_,handleClearContext:eP,handleChangeExecTime:eW,handleUpdateCurrentAssessmentId:eM,handleResetWorkspace:eD,handleRunAllTestcases:eO,handleEditorEval:eB,handleAssessmentFetch:eL,handleEditorValueChange:e$,handleEditorUpdateBreakpoints:eG,handleReplEval:eH,handleSave:eV,handleCheckLastModifiedAt:eF,handleUpdateHasUnsavedChanges:eq,handleEnableTokenCounter:eY,handleDisableTokenCounter:ez}=(0,b.useMemo)(()=>({handleTeamOverviewFetch:e=>eS(A.A.fetchTeamFormationOverview(e)),handleTestcaseEval:e=>eS(eh.A.evalTestcase(ev,e)),handleClearContext:(e,s)=>eS(eh.A.beginClearContext(ev,e,s)),handleChangeExecTime:e=>eS(eh.A.changeExecTime(e,ev)),handleUpdateCurrentAssessmentId:(e,s)=>eS(eh.A.updateCurrentAssessmentId(e,s)),handleResetWorkspace:e=>eS(eh.A.resetWorkspace(ev,e)),handleRunAllTestcases:()=>eS(eh.A.runAllTestcases(ev)),handleEditorEval:()=>eS(eh.A.evalEditor(ev)),handleAssessmentFetch:(e,s)=>eS(A.A.fetchAssessment(e,s)),handleEditorValueChange:(e,s)=>eS(eh.A.updateEditorValue(ev,e,s)),handleEditorUpdateBreakpoints:(e,s)=>eS(eh.A.setEditorBreakpoint(ev,e,s)),handleReplEval:()=>eS(eh.A.evalRepl(ev)),handleCheckLastModifiedAt:(e,s,t)=>eS(A.A.checkAnswerLastModifiedAt(e,s,t)),handleSave:(e,s)=>eS(A.A.submitAnswer(e,s)),handleUpdateHasUnsavedChanges:e=>eS(eh.A.updateHasUnsavedChanges(ev,e)),handleEnableTokenCounter:()=>eS(eh.A.enableTokenCounter(ev)),handleDisableTokenCounter:()=>eS(eh.A.disableTokenCounter(ev))}),[eS]),eU=(0,ed.N4)(e=>e.leaderboard.code),eX=(0,ed.N4)(e=>e.leaderboard.initialRun),eQ=e.assessmentId;(0,b.useEffect)(()=>{eX[eQ]&&e.fromContestLeaderboard&&""!=eU&&(eS(eh.A.updateEditorValue(ev,0,eU)),eS(P.A.clearCode()))},[eS]),(0,b.useEffect)(()=>{et&&et.maxTeamSize>1&&eI(e.assessmentId)},[et,eI,e.assessmentId]),(0,b.useEffect)(()=>{let s=null;if(e.needsPassword&&!(s=window.prompt("Please enter password.","")))return void window.history.back();if(eL(e.assessmentId,s||void 0),0===e.questionId&&e.notAttempted&&t(!0),!J)return},[]),(0,b.useEffect)(()=>{e0()}),(0,b.useEffect)(()=>{J?.hasTokenCounter?eY():ez()},[J?.hasTokenCounter,eY,ez]),(0,b.useEffect)(()=>{en&&(!Q||Z)&&W.sA.includes(en)&&ep("question_overview")},[Q,Z,e,en,ep]);let eZ=(0,b.useCallback)(e=>(0,M.Rm)(C,e),[C]),eJ=(0,b.useRef)(en);eJ.current=en;let eK=(0,b.useCallback)(()=>{"autograder"===eJ.current?eO():eB(),eZ({time:Date.now(),type:"keyboardCommand",data:"run"})},[eB,eO,eZ]),e0=()=>{if(void 0===J)return;let{assessmentId:s,questionId:t}=e;if(eT===s&&eR===t)return;let n=J.questions[t],a={};switch(n.type){case"programming":a.autogradingResults=n.autogradingResults,a.programPrependValue=n.prepend,a.programPostpendValue=n.postpend,a.editorTestcases=n.testcases,a.editorValue=n.answer||n.solutionTemplate,C||E((0,M.Bk)(`${J.number}/${e.questionId}`,{chapter:n.library.chapter,externalLibrary:n?.library?.external?.name||"NONE",editorValue:a.editorValue}));break;case"voting":a.programPrependValue=n.prepend,e.fromContestLeaderboard&&(a.editorValue=eU),a.programPostpendValue=n.postpend,eS(P.A.setWorkspaceInitialRun(eQ))}eG(0,[]),eM(s,t),eD((0,eu.j)()({autogradingResults:a.autogradingResults??[],editorTabs:[{value:a.editorValue??"",highlightedLines:[],breakpoints:[]}],programPrependValue:a.programPrependValue??"",programPostpendValue:a.programPostpendValue??"",editorTestcases:a.editorTestcases??[]})),eW(n.library.execTimeMs??y.Kn.assessment.execTime),eP(n.library,!0),eq(!1);let i=n.library.chapter;switch(n.type){case"mcq":(0,f.h0)(f.Ay.McqQuestion(ev,`assessment${J.id}`,n.id,i,n.choices.map(e=>e.content)));break;case"programming":{let s=n.prepend,t=n.answer??n.solutionTemplate,a=ef[0]?.breakpoints??[];(0,f.h0)(f.Ay.NewEditor(ev,`assessment${J.id}`,e.questionId,i,s,t,a))}}a.editorValue?e$(0,a.editorValue):e$(0,"")},e1=(e,s)=>{let t=J.questions[s],a=void 0!==t.grader,i=void 0!==et&&et.maxTeamSize>1,r=t?.type==="voting",o=et?.isPublished,l=(e,n)=>{e$(0,n);let a=ef[0]?.breakpoints??[];(0,f.h0)(f.Ay.NewEditor(ev,`submission${e}`,s,t.library.chapter,"",n,a))},d=[{label:`Question ${s+1}`,iconName:x.W.NINJA,body:(0,n.jsx)(z.A,{content:t.content}),id:"question_overview"}];return i&&d.push({label:"Team",iconName:x.W.PEOPLE,body:(0,n.jsx)("div",{children:void 0===ee?"You are not assigned to any team!":(0,n.jsxs)("div",{children:["Your teammates for this assessment:"," ",ee.studentNames.map((e,s)=>(0,n.jsxs)("span",{children:[s>0?", ":"",e]},s))]})})}),r?(d.push({label:"Contest Voting Briefing",iconName:x.W.BRIEFCASE,body:(0,n.jsx)(z.A,{content:J.longSummary}),id:"briefing"},{label:"Contest Voting",iconName:x.W.NEW_LAYERS,body:(0,n.jsx)(ea,{canSave:e.canSave,handleSave:e=>eV(t.id,e),handleContestEntryClick:l,contestEntries:t?.contestEntries??[]}),id:"contest_voting"}),o&&d.push({label:"Score Leaderboard",iconName:x.W.CROWN,body:(0,n.jsx)(es,{handleContestEntryClick:l,orderedContestEntries:t?.scoreLeaderboard??[],leaderboardType:"score_leaderboard"}),id:"score_leaderboard"},{label:"Popular Vote Leaderboard",iconName:x.W.PEOPLE,body:(0,n.jsx)(es,{handleContestEntryClick:l,orderedContestEntries:t?.popularVoteLeaderboard??[],leaderboardType:"popular_vote_leaderboard"}),id:"popular_vote_leaderboard"})):d.push({label:"Briefing",iconName:x.W.BRIEFCASE,body:(0,n.jsx)(z.A,{className:"sidecontent-overview",content:J.longSummary}),id:"briefing"},{label:"Autograder",iconName:x.W.AIRPLANE,body:(0,n.jsx)(X.A,{testcases:ey,autogradingResults:a||!e.assessmentConfiguration.isManuallyGraded?eA:[],handleTestcaseEval:e_,workspaceLocation:"assessment"}),id:"autograder"}),a&&d.push({label:"Report Card",iconName:x.W.TICK,body:(0,n.jsx)(eb,{graderName:t.grader.name,gradedAt:t.gradedAt,xp:t.xp,maxXp:t.maxXp,comments:t.comments}),id:"grading"}),t.library.external.symbols.includes("get_matrix")&&d.push({label:"Tone Matrix",iconName:x.W.GRID_VIEW,body:(0,n.jsx)(ei.A,{}),id:"tone_matrix"}),{selectedTabId:en,tabs:{beforeDynamicTabs:d,afterDynamicTabs:[]},onChange:(e,s,t)=>{e!==s&&ep(e)},workspaceLocation:ev}},e4=s=>{let t=`/courses/${eg}/${(0,ec.zS)(J.type)}`,r=t+`/${J.id.toString()}`,o=J.questions,l=o[s],d=[s+1,o.length],c=()=>{ex(r+`/${(s+1).toString()}`),ep("question_overview")},u=()=>ex(t),m=()=>{eS(A.A.submitAssessment(J.id)),I(!0)},p=async s=>{(et?.maxTeamSize===0||"programming"!==l.type||!s||await (0,R.cu)({contents:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:"Save answer?"}),(0,n.jsx)("p",{children:"Note: The changes made by your teammate will be lost."})]}),positiveIntent:"danger",positiveLabel:"Save"}))&&(eV(l.id,ef[0].value),setTimeout(()=>{eL(e.assessmentId)},1e3))},x=s>=o.filter(e=>null!==e.answer).length-1,g=(0,n.jsx)(L.G,{onClickNext:l.blocking?_(c,l,ey,x):c,onClickReturn:l.blocking?_(u,l,ey,x):u,onClickSubmit:l.blocking?_(m,l,ey,x):m,questionProgress:d,submitOnFinish:J.isMinigame},"next_question"),b=(0,n.jsx)($.S,{onClick:()=>{ex(r+`/${(s-1).toString()}`),ep("question_overview")},questionProgress:d},"previous_question"),v=(0,n.jsx)(G.Y,{questionProgress:d},"question_view"),j="mcq"!==l.type?(0,n.jsx)(H.a,{onClick:()=>{h(!0)}},"reset_template"):null,C=(0,n.jsx)(V.w,{isEntrypointFileDefined:null!==eC,handleEditorEval:eK},"run"),f=e.canSave&&"programming"===l.type?(0,n.jsx)(F.z,{hasUnsavedChanges:eN,isDisabled:et?.maxTeamSize!==1&&!ee,onClickSave:()=>{a||(i(!0),et?.maxTeamSize!==0&&"programming"===l.type&&eF(l.id,l.lastModifiedAt,p),setTimeout(()=>{i(!1)},3e3))}},"save"):null,y=(0,n.jsx)(D.e,{handleChapterSelect:()=>{},isFolderModeEnabled:ej,sourceChapter:l.library.chapter,sourceVariant:l.library.variant??el.A.defaultSourceVariant,disabled:!0},"chapter");return{editorButtons:!Q||Z?[C,f,j,y]:[f,j],flowButtons:[b,v,g]}},e3=(0,b.useMemo)(()=>{let e=(0,n.jsx)(O.g,{handleReplOutputClear:()=>eS(eh.A.clearReplOutput(ev))},"clear_repl");return[(0,n.jsx)(B.T,{handleReplEval:eH,isRunning:ew},"eval_repl"),e]},[eS,ew,eH]),e5=(0,b.useMemo)(()=>({setActiveEditorTabIndex:e=>eS(eh.A.updateActiveEditorTabIndex(ev,e)),removeEditorTabByIndex:e=>eS(eh.A.removeEditorTab(ev,e)),handleDeclarationNavigate:e=>eS(eh.A.navigateToDeclaration(ev,e)),handlePromptAutocomplete:(e,s,t)=>eS(eh.A.promptAutocomplete(ev,e,s,t))}),[eS]),e6=(0,b.useMemo)(()=>({handleBrowseHistoryDown:()=>eS(eh.A.browseReplHistoryDown(ev)),handleBrowseHistoryUp:()=>eS(eh.A.browseReplHistoryUp(ev)),handleReplValueChange:e=>eS(eh.A.updateReplValue(e,ev))}),[eS]),e8=(0,b.useMemo)(()=>({handleSideContentHeightChange:e=>eS((0,er.k1)(e,ev))}),[eS]);if(!J?.questions.length)return(0,n.jsx)(l.I,{className:k()("WorkspaceParent",N.DARK),description:"Getting mission ready...",icon:(0,n.jsx)(d.y,{size:d.H.LARGE})});let e2=(0,n.jsx)(u.l,{className:"assessment-briefing",isOpen:s,children:(0,n.jsxs)(w.Z,{children:[(0,n.jsx)(z.A,{content:J.longSummary}),(0,n.jsx)(r.$,{className:"assessment-briefing-button",onClick:()=>t(!1),text:"Continue"})]})}),e9=(0,n.jsx)(u.l,{className:"assessment-briefing",isOpen:S,children:(0,n.jsx)(w.Z,{children:(0,n.jsx)(z.A,{content:`## ${J.type.substring(0,J.type.length-1)} complete!
You've successfully submitted this ${J.type.substring(0,J.type.length-1)}!
It is safe to close this window.`})})}),e7=()=>h(!1),se=(0,n.jsxs)(u.l,{className:"assessment-reset",icon:x.W.ERROR,isCloseButtonShown:!0,isOpen:c,onClose:e7,title:"Confirmation: Reset editor?",children:[(0,n.jsxs)(m.R,{children:[(0,n.jsx)(z.A,{content:"Are you sure you want to reset the template?"}),(0,n.jsx)(z.A,{content:"*Note this will not affect the saved copy of your program, unless you save over it.*"})]}),(0,n.jsx)(p.E,{actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.A,{label:"Cancel",onClick:e7,options:{minimal:!1}}),(0,n.jsx)(q.A,{label:"Confirm",onClick:()=>{e7(),e$(0,J.questions[ss].solutionTemplate),eq(!0),Z&&(0,f.h0)(f.Ay.ResetEditor(ev,J.questions[ss].solutionTemplate))},options:{minimal:!1,intent:o.J.DANGER}})]})})]}),ss=e.questionId>=J.questions.length?J.questions.length-1:e.questionId,st=J.questions[ss],sn="programming"===st.type||"voting"===st.type?{editorVariant:"normal",isFolderModeEnabled:ej,activeEditorTabIndex:eC,setActiveEditorTabIndex:e5.setActiveEditorTabIndex,removeEditorTabByIndex:e5.removeEditorTabByIndex,editorTabs:ef.map(Y.U),editorSessionId:"",sessionDetails:null,sourceChapter:st.library.chapter||T.Chapter.SOURCE_4,sourceVariant:st.library.variant??T.Variant.DEFAULT,externalLibraryName:st.library.external.name||"NONE",handleDeclarationNavigate:e5.handleDeclarationNavigate,handleEditorEval:eK,handleEditorValueChange:e$,handleUpdateHasUnsavedChanges:eq,handleEditorUpdateBreakpoints:eG,handlePromptAutocomplete:e5.handlePromptAutocomplete,isEditorAutorun:!1,onChange:(e,s)=>{eq?.(!0),e$(0,e),eZ({time:Date.now(),type:"codeDelta",data:s})},onCursorChange:e=>{eZ({time:Date.now(),type:"cursorPositionChange",data:e.getCursor()})},onSelectionChange:e=>{let s=e.getRange(),t=e.isBackwards();(0,g.isEqual)(s.start,s.end)||eZ({time:Date.now(),type:"selectionRangeData",data:{range:s,isBackwards:t}})}}:void 0,sa={mcq:st,handleMCQSubmit:e=>eV(J.questions[ss].id,e)},si={handleBrowseHistoryDown:e6.handleBrowseHistoryDown,handleBrowseHistoryUp:e6.handleBrowseHistoryUp,handleReplEval:eH,handleReplValueChange:e6.handleReplValueChange,output:eE,replValue:ek,sourceChapter:st?.library?.chapter||T.Chapter.SOURCE_4,sourceVariant:st.library.variant??T.Variant.DEFAULT,externalLibrary:st?.library?.external?.name||"NONE",replButtons:e3},sr={tabs:[]},so={controlBarProps:e4(ss),editorContainerProps:sn,handleSideContentHeightChange:e8.handleSideContentHeightChange,hasUnsavedChanges:eN,mcqProps:sa,sideBarProps:sr,sideContentProps:e1(e,ss),replProps:si},sl={editorContainerProps:sn,hasUnsavedChanges:eN,mcqProps:sa,replProps:si,sideBarProps:sr,mobileSideContentProps:{mobileControlBarProps:{...e4(ss)},...e1(e,ss),onChange:(e,s,t)=>{e!==s&&("autograder"!==s||"mobile_editor_run"!==e)&&ep(e)},selectedTabId:en,handleEditorEval:eK}};return(0,n.jsxs)("div",{className:k()("WorkspaceParent",N.DARK),children:[e9,e2,se,Z||!Q?(0,n.jsx)(em.A,{...so}):(0,n.jsx)(U.A,{...sl})]})};var eC=t(12951);let ef=()=>(0,n.jsx)("div",{className:k()("NoPage",N.DARK),children:(0,n.jsx)(l.I,{icon:x.W.ERROR,title:"Assessment Not Found",description:"Please check the top right dropdown menu to see if you are in the right course."})});var eA=t(5725),ey=t(3185),eN=t(4303),ew=t(83365);let eE=({overview:e})=>{let s=(0,ed.N4)(e=>e.session.courseId),t=(0,v.wA)(),{icon:a,label:i,optionalLabel:o}=(e=>{let s,t,n;switch(e){case"not_attempted":s=x.W.PLAY,t="Attempt";break;case"attempting":s=x.W.PLAY,t="Continue",n=" Attempt";break;case"attempted":s=x.W.EDIT,t="Review",n=" Attempt";break;case"submitted":s=x.W.EYE_OPEN,t="Review",n=" Submission";break;default:s=x.W.PLAY,t="Review"}return{icon:s,label:t,optionalLabel:n}})(e.status);return(0,n.jsx)(j.k2,{to:`/courses/${s}/${(0,ec.zS)(e.type)}/${e.id.toString()}/${el.A.defaultQuestionId}`,children:(0,n.jsxs)(r.$,{icon:a,variant:"minimal",onClick:()=>t(A.A.acknowledgeNotifications((0,ew.iL)(e.id))),children:[(0,n.jsx)("span",{"data-testid":"Assessment-Attempt-Button",children:i}),o&&(0,n.jsx)("span",{className:"custom-hidden-xxxs",children:o})]})})},ek=({overview:e,renderProgressStatus:s,makeSubmissionButton:t})=>(0,n.jsxs)("div",{className:"listing-header",children:[(0,n.jsx)(h.E,{ellipsize:!0,children:(0,n.jsxs)(K.H4,{className:"listing-title",children:[e.title,e.private?(0,n.jsx)(a.m,{className:"listing-title-tooltip",content:"This assessment is password-protected.",children:(0,n.jsx)(Q.I,{icon:"lock"})}):null,s?eT(e.isGradingPublished):null]})}),(0,n.jsx)("div",{className:"listing-button",children:t(e)})]}),eT=e=>{let s,t,r;return e?(s=x.W.TICK,t=o.J.SUCCESS,r="Fully graded"):(s=x.W.TIME,t=o.J.WARNING,r="Grading in progress"),(0,n.jsx)(a.m,{className:"listing-title-tooltip",content:r,placement:i.yX.RIGHT,children:(0,n.jsx)(Q.I,{icon:s,intent:t})})},eR=({overview:e,renderAttemptButton:s,renderGradingTooltip:t,makeSubmissionButton:i})=>{let{isMobileBreakpoint:r}=(0,ed.Qs)();return(0,n.jsx)("div",{children:(0,n.jsxs)(w.Z,{className:"row listing",elevation:J.e.ONE,children:[(0,n.jsxs)("div",{className:k()("listing-picture",!r&&"col-xs-3"),children:[(0,n.jsx)(eN.A,{className:"badge",notificationFilter:(0,ew.iL)(e.id),large:!0}),(0,n.jsx)("img",{alt:"Assessment",className:`cover-image-${e.status}`,src:e.coverImage?e.coverImage:ey})]}),(0,n.jsxs)("div",{className:k()("listing-text",!r&&"col-xs-9"),children:[(0,n.jsx)(ek,{overview:e,renderProgressStatus:t,makeSubmissionButton:i}),(0,n.jsxs)("div",{className:eA.A["listing-xp"],children:[(0,n.jsx)(K.H6,{children:e.isGradingPublished?`XP: ${e.xp} / ${e.maxXp}`:`Max XP: ${e.maxXp}`}),e.earlySubmissionXp>0&&(0,n.jsx)(a.m,{content:`Max XP ends on ${(0,eg.sC)(e.openAt,e.hoursBeforeEarlyXpDecay)}`,children:(0,n.jsx)(Q.I,{icon:x.W.INFO_SIGN})})]}),(0,n.jsx)("div",{className:"listing-description",children:(0,n.jsx)(z.A,{content:e.shortSummary})}),e.maxTeamSize>1?(0,n.jsx)("div",{className:"listing-team_information",children:(0,n.jsx)(K.H6,{children:" This is a team assessment. "})}):(0,n.jsx)("div",{children:(0,n.jsx)(K.H6,{children:" This is an individual assessment. "})}),(0,n.jsxs)("div",{className:"listing-footer",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(h.E,{className:"listing-due-date",children:[(0,n.jsx)(Q.I,{className:"listing-due-icon",size:12,icon:x.W.CALENDAR}),`${(0,eg.G3)(e.openAt)?"Opened":"Opens"}: ${(0,eg.Hw)(e.openAt)}`]}),(0,eg.G3)(e.openAt)&&(0,n.jsxs)(h.E,{className:"listing-due-date",children:[(0,n.jsx)(Q.I,{className:"listing-due-icon",size:12,icon:x.W.TIME}),`Due: ${(0,eg.Hw)(e.closeAt)}`]})]}),(0,n.jsx)("div",{className:"listing-button",children:s?(0,n.jsx)(eE,{overview:e}):null})]})]})]})})},eS=()=>{let e,s=(0,j.g)(),[t,N]=(0,b.useState)(null),[w,E]=(0,b.useState)(!1),[k,T]=(0,b.useState)(!0),[R,S]=(0,b.useState)(!0),{courseId:I,role:_,assessmentOverviews:P}=(0,ed.wV)(),W=(0,v.wA)();(0,b.useEffect)(()=>{P&&I&&(0,f.h0)(f.Ay.NotifyAssessmentsOverview(P.map(e=>({type:e.type,closeAt:e.closeAt,id:e.id,isPublished:e.isPublished,title:e.title})),I))},[P,I]);let M=()=>N(null),D=e=>(0,g.sortBy)(e,[e=>-e.id]),O=e=>(0,n.jsx)(a.m,{disabled:"attempted"===e.status,content:"You can finalize after saving an answer for each question!",position:i.yX.RIGHT,children:(0,n.jsxs)(r.$,{disabled:"attempted"!==e.status,icon:x.W.CONFIRM,intent:"attempted"===e.status?o.J.DANGER:o.J.NONE,variant:"minimal",onClick:()=>N(e),children:[(0,n.jsx)("span",{children:"Finalize"}),(0,n.jsx)("span",{className:"custom-hidden-xxs",children:" Submission"})]})}),B=(0,j.LG)(),L=(0,b.useMemo)(()=>P?.filter(e=>e.type===B.type),[B.type,P]),$=!!(0,ed.N4)(e=>e.leaderboard.code);if(s.assessmentId&&!s.assessmentId?.match(C.F0)||s.questionId&&!s.questionId?.match(C.F0))return(0,n.jsx)(j.C5,{to:`/courses/${I}/${B.type}`});let G=(0,ec.hM)(s.assessmentId),H=(0,ec.hM)(s.questionId)||el.A.defaultQuestionId;if(null!==G&&void 0!==L){let e=L.filter(e=>e.id===G)[0];if(!e)return(0,n.jsx)(ef,{});let s="not_attempted"===e.status,t={assessmentId:G,questionId:H,notAttempted:s,needsPassword:!!e.private&&s,canSave:_!==y.Xh.Student||"submitted"!==e.status&&!(0,eg.G3)(e.closeAt),assessmentConfiguration:B,fromContestLeaderboard:$};return(0,n.jsx)(ej,{...t})}if(void 0===L)e=(0,n.jsx)(l.I,{description:"Fetching assessment...",icon:(0,n.jsx)(d.y,{})});else if(0===L.length)e=(0,n.jsx)(l.I,{title:"There are no assessments.",icon:x.W.FLAME});else{let s=e=>!(0,eg.G3)(e.closeAt)&&!(0,eg.G3)(e.openAt),t=D(L.filter(s)).map(e=>(0,n.jsx)(eR,{overview:e,renderAttemptButton:_!==y.Xh.Student,renderGradingTooltip:!1,makeSubmissionButton:O},e.id)),a=e=>!(0,eg.G3)(e.closeAt)&&(0,eg.G3)(e.openAt)&&"submitted"!==e.status,i=D(L.filter(e=>a(e))).map(e=>(0,n.jsx)(eR,{overview:e,renderAttemptButton:!0,renderGradingTooltip:!1,makeSubmissionButton:O},e.id)),r=D(L.filter(e=>!a(e)&&!s(e))).map(e=>(0,n.jsx)(eR,{overview:e,renderAttemptButton:!0,renderGradingTooltip:!0,makeSubmissionButton:O},e.id)),o=(0,n.jsxs)(n.Fragment,{children:[eI("Upcoming",R,()=>S(!R)),(0,n.jsx)(c.S,{isOpen:R,children:t})]}),l=(0,n.jsxs)(n.Fragment,{children:[eI("Open",k,()=>T(!k)),(0,n.jsx)(c.S,{isOpen:k,children:i})]}),d=(0,n.jsxs)(n.Fragment,{children:[eI("Closed",w,()=>E(!w)),(0,n.jsx)(c.S,{isOpen:w,children:r})]});e=(0,n.jsxs)(n.Fragment,{children:[t.length>0?o:null,i.length>0?l:null,r.length>0?d:null]})}let V=t?.earlySubmissionXp>0?(0,n.jsxs)("p",{children:["Finalising your submission early grants you additional XP, but"," ",(0,n.jsx)("span",{className:"warning",children:"this action is irreversible."})]}):(0,n.jsxs)("p",{children:["Finalising your submission early does not grant you additional XP, and"," ",(0,n.jsx)("span",{className:"warning",children:"this action is irreversible."})]}),F=t?(0,n.jsxs)("p",{children:["You are about to finalise your submission for the ",t.type.toLowerCase()," ",(0,n.jsxs)("i",{children:['"',t.title,'"']}),"."]}):(0,n.jsx)("p",{children:"You are about to finalise your submission."}),Y=(0,n.jsxs)(n.Fragment,{children:[F,V]}),z=(0,n.jsxs)(u.l,{className:"betcha-dialog",icon:x.W.ERROR,isCloseButtonShown:!0,isOpen:null!==t,onClose:M,title:"Finalise submission?",children:[(0,n.jsx)(m.R,{children:(0,n.jsx)(h.E,{children:Y})}),(0,n.jsx)(p.E,{actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.A,{label:"Cancel",onClick:M,options:{minimal:!1}}),(0,n.jsx)(q.A,{label:"Finalise",onClick:()=>{t&&(W(A.A.submitAssessment(t.id)),M())},options:{minimal:!1,intent:o.J.DANGER}})]})})]});return(0,n.jsxs)("div",{className:"Assessment",children:[(0,n.jsx)(eC.A,{display:e,loadContentDispatch:()=>W(A.A.fetchAssessmentOverviews())}),z]})},eI=(e,s,t)=>(0,n.jsx)(q.A,{label:e,icon:s?x.W.CARET_DOWN:x.W.CARET_RIGHT,onClick:t,options:{minimal:!0,className:"collapse-button"}}),e_=eS;e_.displayName="Assessment";let eP=eS},14822:function(e,s,t){"use strict";t.d(s,{G:()=>l});var n=t(74848),a=t(66314);t(96540);var i=t(64313);let r=({onClick:e})=>(0,n.jsx)(i.A,{label:"Return to Academy",icon:a.W.ARROW_RIGHT,onClick:e,options:{iconOnRight:!0}}),o=({onClick:e})=>(0,n.jsx)(i.A,{label:"Submit",icon:a.W.ARROW_RIGHT,onClick:e,options:{iconOnRight:!0}}),l=e=>e.questionProgress[0]===e.questionProgress[1]?e.submitOnFinish?(0,n.jsx)(o,{onClick:e.onClickSubmit}):(0,n.jsx)(r,{onClick:e.onClickReturn},"return_to_academy"):(0,n.jsx)(i.A,{label:"Next",icon:a.W.ARROW_RIGHT,onClick:e.onClickNext,options:{iconOnRight:!0}})},84126:function(e,s,t){"use strict";t.d(s,{S:()=>r});var n=t(74848),a=t(66314);t(96540);var i=t(64313);let r=e=>e.questionProgress[0]<=1?null:(0,n.jsx)(i.A,{label:"Previous",icon:a.W.ARROW_LEFT,onClick:e.onClick})},17514:function(e,s,t){"use strict";t.d(s,{Y:()=>i});var n=t(74848);t(96540);var a=t(64313);let i=({questionProgress:e})=>(0,n.jsx)(a.A,{label:`Question ${e[0]} of ${e[1]}  `,isDisabled:!0})},33564:function(e,s,t){"use strict";t.d(s,{a:()=>r});var n=t(74848),a=t(66314);t(96540);var i=t(64313);let r=({onClick:e})=>(0,n.jsx)(i.A,{label:"Reset",icon:a.W.REPEAT,onClick:e})},55126:function(e,s,t){"use strict";t.d(s,{z:()=>o});var n=t(74848),a=t(31365),i=t(66314);t(96540);var r=t(64313);let o=e=>{let s=e.hasUnsavedChanges?{intent:a.J.WARNING,minimal:!1}:{};return(0,n.jsx)(r.A,{label:"Save",icon:i.W.FLOPPY_DISK,onClick:e.onClickSave,options:s,isDisabled:e.isDisabled})}},4303:function(e,s,t){"use strict";t.d(s,{A:()=>h});var n=t(74848),a=t(55741),i=t(31365),r=t(81168),o=t(80667),l=t(54348);t(96540);var d=t(83509),c=t(39572),u=t(64088),m=t(83365);let h=e=>{let s=(0,d.wA)(),{notifications:t}=(0,u.wV)(),h=e.notificationFilter?e.notificationFilter(t):t;if(!h.length)return null;let p=(0,n.jsx)(a.v,{intent:i.J.DANGER,round:!0,large:e.large,"data-testid":"NotificationBadge",children:h.length});if(!e.disableHover){let t=(0,n.jsx)("div",{className:"col",children:h.map(e=>(0,n.jsx)(a.v,{className:"row badge-tag",minimal:!0,multiline:!0,onRemove:()=>s(c.A.acknowledgeNotifications((0,m.V8)(e.id))),children:(e=>{switch(e){case"new":return"This assessment is new.";case"submitted":return"This submission is new.";case"unsubmitted":return"This assessment has been unsubmitted.";case"published_grading":return"This submission's grading has been published.";case"unpublished_grading":return"This submission's grading has been unpublished.";case"new_message":return"There are new messages.";default:return"Unknown notification"}})(e.type)},`${e.id}`))});return(0,n.jsx)(r.A,{className:e.className,content:t,interactionKind:o.E.HOVER,placement:l.yX.RIGHT,hoverOpenDelay:50,hoverCloseDelay:50,lazy:!0,children:p})}return p}},83365:function(e,s,t){"use strict";function n(e){return s=>s.filter(s=>!s.submission_id&&s.assessment_id===e)}function a(e){return s=>s.filter(s=>"Grading"===e?void 0!==s.submission_id:!s.submission_id&&e===s.assessment_type)}function i(e){return s=>s.filter(s=>s.id===e)}t.d(s,{SA:()=>a,V8:()=>i,iL:()=>n})},49098:function(e,s,t){"use strict";t.d(s,{A:()=>N});var n=t(74848),a=t(79642),i=t(92473),r=t(68178),o=t(28761),l=t(76129),d=t(66314),c=t(96540),u=t(81333),m=t(64313),h=t(51851),p=t(7064),x=t(35537),g=t(53978),b=t.n(g);let v=({index:e,result:s})=>{let{t}=(0,u.Bd)("sideContent",{keyPrefix:"resultCard"});return(0,n.jsx)("div",{className:b()("ResultCard","pass"===s.resultType?"correct":"wrong"),"data-testid":"ResultCard",children:(0,n.jsxs)(h.Z,{elevation:p.e.ONE,children:[(0,n.jsxs)("div",{className:"result-data",children:[(0,n.jsx)("div",{className:"result-idx","data-testid":"result-idx",children:e+1}),(0,n.jsx)("div",{className:"result-status","data-testid":"result-status",children:s.resultType.toUpperCase()})]}),(0,n.jsx)(x.AC,{className:"result-expected","data-testid":"result-expected",children:s.expected}),(0,n.jsx)(x.AC,{className:"result-actual","data-testid":"result-actual",children:"error"===s.resultType?s.errors.map(e=>{switch(e.errorType){case"timeout":return t("timeout");case"syntax":return t("syntax",{line:e.line,errorExplanation:e.errorExplanation});case"runtime":return t("runtime",{line:e.line,errorExplanation:e.errorExplanation});case"systemError":return t("systemError",{errorMessage:e.errorMessage});default:return t("unknown",{errorType:e.errorType})}}).join("\n\n"):s.actual})]})})};var j=t(53991),C=t(57415),f=t(64936);t(88462);let A=e=>{let{index:s,testcase:t,handleTestcaseEval:a}=e,i=c.useMemo(()=>{let e=void 0!==t.result||t.errors,s=(0,f.stringify)(t.result)===t.answer;return{correct:e&&s,wrong:e&&!s,secret:"secret"===t.type||"opaque"===t.type}},[t]),r=c.useCallback(()=>{a(s)},[s,a]);return(0,n.jsx)("div",{className:b()("AutograderCard",i),"data-testid":"AutograderCard",children:(0,n.jsx)(h.Z,{className:j.INTERACTIVE,elevation:p.e.ONE,onClick:r,children:"opaque"===t.type&&"assessment"===e.workspaceLocation?(0,n.jsx)(x.AC,{className:"testcase-placeholder","data-testid":"testcase-placeholder",children:"Hidden testcase"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.AC,{className:"testcase-program",children:t.program}),(0,n.jsx)(x.AC,{className:"testcase-expected",children:t.answer}),(0,n.jsx)(x.AC,{className:"testcase-actual","data-testid":"testcase-actual",children:t.errors?(0,C.parseError)(t.errors):void 0!==t.result?(0,f.stringify)(t.result):"No Answer"})]})})})},y=(e,s)=>(0,n.jsxs)("div",{className:e,children:[s,(0,n.jsx)(o.I,{icon:d.W.CARET_DOWN})]}),N=e=>{let s,t,h,{t:p}=(0,u.Bd)("sideContent",{keyPrefix:"autograder"}),[x,g]=(0,c.useState)(!0),[b,j]=(0,c.useState)(!0),{testcases:C,autogradingResults:f,handleTestcaseEval:N,workspaceLocation:w}=e,E=(0,c.useMemo)(()=>(0,n.jsxs)("div",{className:"autograder-help-tooltip",children:[(0,n.jsx)("p",{children:p("tooltip.clickTestcase")}),(0,n.jsx)("p",{children:p("tooltip.executeAll")}),(0,n.jsx)("p",{children:p("tooltip.backgroundInfo")}),(0,n.jsx)("p",{children:p("tooltip.privateTestcases")})]}),[p]),k=(0,c.useMemo)(()=>(0,n.jsxs)("div",{className:"testcases-header","data-testid":"testcases-header",children:[y("header-fn",p("headers.testcase")),y("header-expected",p("headers.expected")),y("header-actual",p("headers.actual"))]}),[p]),T=(0,c.useMemo)(()=>(0,n.jsxs)("div",{className:"results-header","data-testid":"results-header",children:[(0,n.jsxs)("div",{className:"header-data",children:[y("header-sn",p("headers.sn")),y("header-status",p("headers.status"))]}),y("header-expected",p("headers.expected")),y("header-actual",p("headers.actual"))]}),[p]),R=(0,c.useMemo)(()=>C.length>0?(0,n.jsxs)("div",{className:"testcaseCards",children:[k,C.map((e,s)=>(0,n.jsx)(A,{index:s,testcase:e,handleTestcaseEval:N,workspaceLocation:w},s))]}):(0,n.jsx)("div",{className:"noResults","data-testid":"noResults",children:p("noTestcases")}),[C,k,p,N,w]),S=(0,c.useMemo)(()=>f.length>0?(0,n.jsxs)("div",{children:[T,f.map((e,s)=>(0,n.jsx)(v,{index:s,result:e},s))]}):(0,n.jsx)("div",{className:"noResults","data-testid":"noResults",children:p("noResults")}),[f,T,p]),I=(0,c.useCallback)(()=>{g(!x)},[x]),_=(0,c.useCallback)(()=>j(!b),[b]);return(0,n.jsxs)("div",{className:"Autograder",children:[(0,n.jsxs)(a.$,{className:"collapse-button",icon:x?d.W.CARET_DOWN:d.W.CARET_RIGHT,minimal:!0,onClick:I,children:[(0,n.jsx)("span",{children:p("testcases")}),(0,n.jsx)(i.m,{content:E,placement:r.$.LEFT,children:(0,n.jsx)(o.I,{icon:d.W.HELP})})]}),(0,n.jsx)(l.S,{isOpen:x,keepChildrenMounted:!0,children:R}),(s=p("results"),t=b,h=_,(0,n.jsx)(m.A,{label:s,icon:t?d.W.CARET_DOWN:d.W.CARET_RIGHT,onClick:h,options:{className:"collapse-button",minimal:!0}})),(0,n.jsx)(l.S,{isOpen:b,keepChildrenMounted:!0,children:S})]})}},40134:function(e,s,t){"use strict";t.d(s,{A:()=>d});var n=t(74848),a=t(53991),i=t(79642),r=t(53978),o=t.n(r),l=t(96540);let d=l.memo(()=>{let e=(0,l.useRef)(null);return(0,l.useEffect)(()=>{window.ToneMatrix&&window.ToneMatrix.initialise_matrix(e.current)},[]),(0,n.jsxs)("div",{className:"sa-tone-matrix",children:[(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("div",{className:o()("controls","col-xs-12",a.DARK,a.BUTTON_GROUP),children:[(0,n.jsx)(i.$,{id:"clear-matrix",onClick:()=>{window.ToneMatrix.clear_matrix()},children:"Clear"}),(0,n.jsx)(i.$,{id:"randomise-matrix",onClick:()=>{window.ToneMatrix.randomise_matrix()},children:"Randomise"})]})}),(0,n.jsx)("div",{className:"row",children:(0,n.jsx)("div",{className:"col-xs-12",ref:e})})]})},()=>!0)},88806:function(e,s,t){"use strict";t.d(s,{G3:()=>d,Hw:()=>c,if:()=>m,jW:()=>u,sC:()=>h});var n=t(74353),a=t.n(n),i=t(97375),r=t.n(i),o=t(6279),l=t.n(o);a().extend(r()),a().extend(l());let d=e=>{let s=a()(e),t=a()();return s.isBefore(t)},c=e=>a()(e).format("Do MMMM, HH:mm"),u=e=>a()(e).format("MMMM Do YYYY, HH:mm"),m=e=>a()(e).format("MMMM Do YYYY"),h=(e,s)=>{let t=a()(e).add(s,"hours"),n=t.format("Do MMMM, HH:mm"),i=t.fromNow();return`${n} (${i})`}},33205:function(e,s,t){"use strict";let n;t.d(s,{Bk:()=>d,Rm:()=>l});var a,i=t(40086);let r={},o;function l(e,s){var t;o&&(t={...s,questionId:r[e],sessionId:e},new Promise((e,s)=>{u().then(n=>{let a=n.transaction([c],"readwrite");a.oncomplete=e,a.onerror=s,a.objectStore(c).add(t)})}))}function d(e,s){let t=(0,i.A)();return r[t]=e,l(t,{...s,type:"init",time:Date.now()}),t}let c="logs",u=(a=()=>new Promise((e,s)=>{let t=indexedDB.open("evtlogs",1);t.onsuccess=s=>{e(t.result)},t.onerror=e=>{console.error("Failed to get db",e),s(t.error)},t.onupgradeneeded=e=>{(e?.target).result.createObjectStore(c,{keyPath:"id",autoIncrement:!0})}}),n=null,()=>n||(n=a()))}}]);
//# sourceMappingURL=26286.3ee1d5fa.js.map