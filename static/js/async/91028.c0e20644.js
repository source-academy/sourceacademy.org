"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([["91028"],{13853(){},47351(e,a,r){e.exports=r.p+"static/image/default-avatar.0f35ddf2.jpg"},6016(e,a,r){e.exports=r.p+"static/image/leaderboard_background.e75c6c87.jpg"},56799(e,a,r){r.r(a),r.d(a,{Component:()=>N,default:()=>j});var t=r(74848),o=r(96540),l=r(41344),s=r(12149),n=r(66054);r(13853);var d=r(80346),c=r(66875),i=r(94201),u=r(49540),p=r(47351),m=r(6016),v=r(18918),h=r(18311),b=r(35961),f=r(39961);let x=({type:e,contest:{contest_id:a,title:r}})=>{let n=(0,s.N4)(e=>e.session.courseId),x=(0,s.N4)(e=>e.session?.topContestLeaderboardDisplay??10),g=(0,i.wA)(),N=(0,s.N4)(a=>"score"===e?a.leaderboard.contestScore:a.leaderboard.contestPopularVote);(0,o.useEffect)(()=>{"score"===e?g(u.A.getAllContestScores(a,x)):g(u.A.getAllContestPopularVotes(a,x))},[g,a,e]),(0,o.useEffect)(()=>{g(u.A.getContests())},[g]),(0,o.useEffect)(()=>{let e=document.body.style.background;return document.body.style.background=`url(${m}) center/cover no-repeat fixed`,()=>{document.body.style.background=e}},[]);let j=N.filter(e=>e.rank<=3),y=N.filter(e=>e.rank<=Number(x)).slice(j.length);N.map(e=>{e.avatar=`/assets/Sample_Profile_${(0,f.convertToRandomNumber)(e.username)}.jpg`});let A=(0,l.Zp)(),k=(0,o.useMemo)(()=>[{field:"rank",headerName:"Rank",flex:84,sortable:!0,cellRenderer:e=>{let a=e.value;return`${a} ${1===a?"\uD83E\uDD47":2===a?"\uD83E\uDD48":3===a?"\uD83E\uDD49":""}`}},{field:"avatar",headerName:"Avatar",flex:180,sortable:!1,cellRenderer:e=>(0,t.jsx)("img",{src:e.value,alt:"avatar",className:"avatar",onError:e=>e.currentTarget.src=p,style:{width:"40px",height:"40px",borderRadius:"50%"}})},{field:"name",headerName:"Name",flex:520,sortable:!0},{field:"score",headerName:"Score",flex:154,sortable:!0,valueFormatter:e=>e.value?.toFixed(2)},{field:"code",headerName:"Code",flex:260,sortable:!1,cellRenderer:e=>(0,t.jsx)("a",{href:"code",onClick:a=>{var r,t;a.preventDefault(),r=e.data.code,t=e.data.votingId,g(u.A.saveCode(r)),A(`/courses/${n}/contests/${t}/0`)},style:{color:"white",fontStyle:"italic"},children:"\uD83D\uDD17 Open Code"})}],[]);return(0,t.jsxs)("div",{className:"leaderboard-container",children:[(0,t.jsx)(b.A,{type:"contest",data:N,outputType:"image"}),(0,t.jsxs)("div",{className:"buttons-container",children:[(0,t.jsx)(v.A,{}),(0,t.jsx)(h.A,{type:e,contest:r,contestID:a})]}),(0,t.jsxs)("div",{className:"leaderboard-table-container",children:[(0,t.jsx)("h2",{children:"Contest Winners"}),(0,t.jsx)(c.W6,{theme:d.r$M,rowData:j,columnDefs:k,domLayout:"autoHeight",rowHeight:60,pagination:j.length>10,paginationPageSize:10,paginationPageSizeSelector:[10]})]}),(0,t.jsx)("div",{className:"table-gap"}),(0,t.jsxs)("div",{className:"leaderboard-table-container",children:[(0,t.jsx)("h2",{children:"Honourable Mentions"}),(0,t.jsx)(c.W6,{theme:d.r$M,rowData:y,columnDefs:k,domLayout:"autoHeight",rowHeight:60,pagination:!0,paginationPageSize:10,paginationPageSizeSelector:[10,25,50]})]})]})},g=()=>{let{contestId:e,leaderboardType:a}=(0,l.g)(),r=(0,s.N4)(e=>e.leaderboard.contests).find(a=>a.contest_id===parseInt(e,10));return r?(0,t.jsx)(x,{type:a,contest:r}):(0,t.jsx)(n.default,{})},N=g;N.displayName="ContestLeaderboardWrapper";let j=g},18918(e,a,r){r.d(a,{A:()=>n});var t=r(74848);r(13853);var o=r(96540),l=r(41344),s=r(12149);let n=()=>{let e=(0,s.N4)(e=>e.session.enableOverallLeaderboard),a=(0,s.N4)(e=>e.session.enableContestLeaderboard),r=(0,s.N4)(e=>e.session.courseId),n=`/courses/${r}/leaderboard`,d=(0,l.Zp)(),c=(0,l.zy)().pathname,i=(0,s.N4)(e=>e.leaderboard.contests),u=a?i.filter(e=>e.published):[];return(0,t.jsxs)("select",{className:"dropdown",onChange:e=>{d(e.target.value)},value:c,children:[e&&(0,t.jsx)("option",{value:`${n}/overall`,children:"Overall XP"}),a&&u.map(({title:e,contest_id:a})=>(0,t.jsxs)(o.Fragment,{children:[(0,t.jsxs)("option",{value:`${n}/contests/${a}/score`,children:[e," (Score)"]}),(0,t.jsxs)("option",{value:`${n}/contests/${a}/popularvote`,children:[e," (Popular Vote)"]})]},a))]})}},18311(e,a,r){r.d(a,{A:()=>n});var t=r(74848);r(13853),r(96540);var o=r(61499),l=r(31230),s=r(12149);let n=({type:e,contest:a,contestID:r})=>{let{role:n,accessToken:d,refreshToken:c}=(0,s.wV)(),i=async()=>{let a={accessToken:d,refreshToken:c};if("overall"===e){let e=await (0,l.BR)(a);e&&u(e)}else if("score"===e){let e=await (0,l.Qh)(r,Number.MAX_SAFE_INTEGER,a);e&&u(e)}else if("popularvote"===e){let e=await (0,l.HL)(r,Number.MAX_SAFE_INTEGER,a);e&&u(e)}},u=r=>{let t=r.map(a=>{var r;let t;return[a.rank,a.name,a.username,"overall"===e?a.xp:a.score,"overall"===e?a.achievements:(r=a.code,t=(r?.toString()??"").replace(/"/g,'""'),`"${t}"`)]}),o=new Blob([[["Rank","Name","Username","overall"===e?"XP":"Score","overall"===e?"Achievements":"Code"].join(","),...t.map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=URL.createObjectURL(o),l.download="overall"===e?"Overall Leaderboard.csv":"popularvote"===e?`${a} Popular Vote Leaderboard.csv`:`${a} Score Leaderboard.csv`,l.click()};return n===o.Xh.Admin||n===o.Xh.Staff?(0,t.jsx)("button",{onClick:i,className:"export-button",children:"Export as CSV"}):""}},35961(e,a,r){r.d(a,{A:()=>o});var t=r(74848);r(13853),r(96540);let o=({type:e,data:a,outputType:r})=>(0,t.jsx)("div",{className:"top-three-podium",children:a.filter(e=>e.rank<=3).slice(0,3).map((a,r)=>(0,t.jsxs)("div",{className:`top-player ${1===a.rank?"first":2===a.rank?"second":"third"}`,children:[(0,t.jsx)("p",{className:"player-name",children:a.name}),(0,t.jsxs)("div",{className:"player-bar",children:[(0,t.jsx)("p",{className:"player-rank",children:a.rank}),(0,t.jsxs)("p",{className:"player-xp",children:["overall"===e?a.xp:a.score.toFixed(2),"overall"===e?" XP":""]})]})]},a.username))})},39961(e,a,r){r.r(a),r.d(a,{Component:()=>x,convertToRandomNumber:()=>h,default:()=>g});var t=r(74848);r(13853);var o=r(80346),l=r(66875),s=r(96540),n=r(94201),d=r(47351),c=r(12149),i=r(49540),u=r(6016),p=r(18918),m=r(18311),v=r(35961);function h(e){let a=e.slice(1),r=0;for(let e=0;e<a.length;e++)r=(r<<5)-r+a.charCodeAt(e);return Math.abs(r)%7+1}let b=[{field:"rank",headerName:"Rank",flex:84,sortable:!0,cellRenderer:e=>{let a=e.value;return`${a} ${1===a?"\uD83E\uDD47":2===a?"\uD83E\uDD48":3===a?"\uD83E\uDD49":""}`}},{field:"avatar",headerName:"Avatar",flex:180,sortable:!1,cellRenderer:e=>(0,t.jsx)("img",{src:e.value,alt:"avatar",className:"avatar",onError:e=>e.currentTarget.src=d,style:{flex:"40px",height:"40px",borderRadius:"50%"}})},{field:"name",headerName:"Name",flex:520,sortable:!0},{field:"xp",headerName:"XP",flex:414,sortable:!0}],f=()=>{let e=(0,n.wA)();(0,s.useEffect)(()=>{e(i.A.getContests())},[e]),(0,s.useEffect)(()=>{let e=document.body.style.background;return document.body.style.background=`url(${u}) center/cover no-repeat fixed`,()=>{document.body.style.background=e}},[]);let a=(0,c.N4)(e=>e.leaderboard.paginatedUserXp),r=(0,c.N4)(e=>e.session?.topLeaderboardDisplay??Number.MAX_SAFE_INTEGER),[d,f]=(0,s.useState)([]);(0,s.useEffect)(()=>{e(i.A.getOverallLeaderboardXP(1,25))},[e]);let x=(0,s.useRef)(null),g=(0,s.useRef)({getRows:async a=>{let r=a.startRow,t=a.endRow-r;e(i.A.getOverallLeaderboardXP(r/t+1,t)),x.current=a}});return(0,s.useEffect)(()=>{if(x.current&&a.rows.length>0){let{successCallback:e}=x.current;0===x.current.startRow&&f(a.rows.slice(0,3)),e(a.rows,Math.min(a.userCount,r)),x.current=null}},[a]),a.rows.map(e=>{e.avatar=`/assets/Sample_Profile_${h(e.username)}.jpg`}),(0,t.jsxs)("div",{className:"leaderboard-container",children:[(0,t.jsx)(v.A,{type:"overall",data:d,outputType:void 0}),(0,t.jsxs)("div",{className:"buttons-container",children:[(0,t.jsx)(p.A,{}),(0,t.jsx)(m.A,{type:"overall"})]}),(0,t.jsx)("div",{className:"leaderboard-table-container",children:(0,t.jsx)(l.W6,{theme:o.r$M,pagination:!0,suppressCellFocus:!0,suppressMovableColumns:!0,paginationPageSizeSelector:!1,columnDefs:b,rowModelType:"infinite",paginationPageSize:25,domLayout:"autoHeight",rowHeight:60,cacheBlockSize:25,maxBlocksInCache:5,datasource:g.current})})]})},x=f;x.displayName="OverallLeaderboard";let g=f},66054(e,a,r){r.r(a),r.d(a,{Component:()=>i,default:()=>u});var t=r(74848),o=r(53991),l=r(64907),s=r(9584),n=r(46942),d=r.n(n);r(96540);let c=()=>(0,t.jsx)("div",{className:d()("NoPage",o.DARK),"data-testid":"NotFound-Component",children:(0,t.jsx)(l.I,{icon:s.W.ERROR,title:"404 Not Found",description:"The requested resource could not be found"})}),i=c;i.displayName="NotFound";let u=c}}]);
//# sourceMappingURL=91028.c0e20644.js.map