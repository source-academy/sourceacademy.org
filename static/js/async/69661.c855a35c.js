"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([["69661"],{76664:function(){},82493:function(e,a,t){e.exports=t.p+"static/image/default-avatar.0f35ddf2.jpg"},29202:function(e,a,t){e.exports=t.p+"static/image/leaderboard_background.e75c6c87.jpg"},14732:function(e,a,t){t.r(a),t.d(a,{default:()=>j,Component:()=>N});var r=t(74848),o=t(96540),l=t(94894),s=t(64088),n=t(95633);t(76664);var d=t(97426),c=t(22083),i=t(83509),u=t(5849),p=t(82493),m=t(29202),f=t(54333),v=t(26651),h=t(98922),b=t(74907);let x=({type:e,contest:{contest_id:a,title:t}})=>{let n=(0,s.N4)(e=>e.session.courseId),x=(0,s.N4)(e=>e.session?.topContestLeaderboardDisplay??10),g=(0,i.wA)(),N=(0,s.N4)(a=>"score"===e?a.leaderboard.contestScore:a.leaderboard.contestPopularVote);(0,o.useEffect)(()=>{"score"===e?g(u.A.getAllContestScores(a,x)):g(u.A.getAllContestPopularVotes(a,x))},[g,a,e]),(0,o.useEffect)(()=>{g(u.A.getContests())},[g]),(0,o.useEffect)(()=>{let e=document.body.style.background;return document.body.style.background=`url(${m}) center/cover no-repeat fixed`,()=>{document.body.style.background=e}},[]);let j=N.filter(e=>e.rank<=3),y=N.filter(e=>e.rank<=Number(x)).slice(j.length);N.map(e=>{e.avatar=`/assets/Sample_Profile_${(0,b.convertToRandomNumber)(e.username)}.jpg`});let A=(0,l.Zp)(),k=(0,o.useMemo)(()=>[{field:"rank",headerName:"Rank",flex:84,sortable:!0,cellRenderer:e=>{let a=e.value;return`${a} ${1===a?"\uD83E\uDD47":2===a?"\uD83E\uDD48":3===a?"\uD83E\uDD49":""}`}},{field:"avatar",headerName:"Avatar",flex:180,sortable:!1,cellRenderer:e=>(0,r.jsx)("img",{src:e.value,alt:"avatar",className:"avatar",onError:e=>e.currentTarget.src=p,style:{width:"40px",height:"40px",borderRadius:"50%"}})},{field:"name",headerName:"Name",flex:520,sortable:!0},{field:"score",headerName:"Score",flex:154,sortable:!0,valueFormatter:e=>e.value?.toFixed(2)},{field:"code",headerName:"Code",flex:260,sortable:!1,cellRenderer:e=>(0,r.jsx)("a",{href:"code",onClick:a=>{var t,r;a.preventDefault(),t=e.data.code,r=e.data.votingId,g(u.A.saveCode(t)),A(`/courses/${n}/contests/${r}/0`)},style:{color:"white",fontStyle:"italic"},children:"\uD83D\uDD17 Open Code"})}],[]);return(0,r.jsxs)("div",{className:"leaderboard-container",children:[(0,r.jsx)(h.A,{type:"contest",data:N,outputType:"image"}),(0,r.jsxs)("div",{className:"buttons-container",children:[(0,r.jsx)(f.A,{}),(0,r.jsx)(v.A,{type:e,contest:t,contestID:a})]}),(0,r.jsxs)("div",{className:"leaderboard-table-container",children:[(0,r.jsx)("h2",{children:"Contest Winners"}),(0,r.jsx)(c.W6,{theme:d.r$M,rowData:j,columnDefs:k,domLayout:"autoHeight",rowHeight:60,pagination:j.length>10,paginationPageSize:10,paginationPageSizeSelector:[10]})]}),(0,r.jsx)("div",{className:"table-gap"}),(0,r.jsxs)("div",{className:"leaderboard-table-container",children:[(0,r.jsx)("h2",{children:"Honourable Mentions"}),(0,r.jsx)(c.W6,{theme:d.r$M,rowData:y,columnDefs:k,domLayout:"autoHeight",rowHeight:60,pagination:!0,paginationPageSize:10,paginationPageSizeSelector:[10,25,50]})]})]})},g=()=>{let{contestId:e,leaderboardType:a}=(0,l.g)(),t=(0,s.N4)(e=>e.leaderboard.contests).find(a=>a.contest_id===parseInt(e,10));return t?(0,r.jsx)(x,{type:a,contest:t}):(0,r.jsx)(n.default,{})},N=g;N.displayName="ContestLeaderboardWrapper";let j=g},54333:function(e,a,t){t.d(a,{A:()=>n});var r=t(74848);t(76664);var o=t(96540),l=t(94894),s=t(64088);let n=()=>{let e=(0,s.N4)(e=>e.session.enableOverallLeaderboard),a=(0,s.N4)(e=>e.session.enableContestLeaderboard),t=(0,s.N4)(e=>e.session.courseId),n=`/courses/${t}/leaderboard`,d=(0,l.Zp)(),c=(0,l.zy)().pathname,i=(0,s.N4)(e=>e.leaderboard.contests),u=a?i.filter(e=>e.published):[];return(0,r.jsxs)("select",{className:"dropdown",onChange:e=>{d(e.target.value)},value:c,children:[e&&(0,r.jsx)("option",{value:`${n}/overall`,children:"Overall XP"}),a&&u.map(({title:e,contest_id:a})=>(0,r.jsxs)(o.Fragment,{children:[(0,r.jsxs)("option",{value:`${n}/contests/${a}/score`,children:[e," (Score)"]}),(0,r.jsxs)("option",{value:`${n}/contests/${a}/popularvote`,children:[e," (Popular Vote)"]})]},a))]})}},26651:function(e,a,t){t.d(a,{A:()=>n});var r=t(74848);t(76664),t(96540);var o=t(81720),l=t(13971),s=t(64088);let n=({type:e,contest:a,contestID:t})=>{let{role:n,accessToken:d,refreshToken:c}=(0,s.wV)(),i=async()=>{let a={accessToken:d,refreshToken:c};if("overall"===e){let e=await (0,l.BR)(a);e&&u(e)}else if("score"===e){let e=await (0,l.Qh)(t,Number.MAX_SAFE_INTEGER,a);e&&u(e)}else if("popularvote"===e){let e=await (0,l.HL)(t,Number.MAX_SAFE_INTEGER,a);e&&u(e)}},u=t=>{let r=t.map(a=>{var t;let r;return[a.rank,a.name,a.username,"overall"===e?a.xp:a.score,"overall"===e?a.achievements:(t=a.code,r=(t?.toString()??"").replace(/"/g,'""'),`"${r}"`)]}),o=new Blob([[["Rank","Name","Username","overall"===e?"XP":"Score","overall"===e?"Achievements":"Code"].join(","),...r.map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=URL.createObjectURL(o),l.download="overall"===e?"Overall Leaderboard.csv":"popularvote"===e?`${a} Popular Vote Leaderboard.csv`:`${a} Score Leaderboard.csv`,l.click()};return n===o.Xh.Admin||n===o.Xh.Staff?(0,r.jsx)("button",{onClick:i,className:"export-button",children:"Export as CSV"}):""}},98922:function(e,a,t){t.d(a,{A:()=>o});var r=t(74848);t(76664),t(96540);let o=({type:e,data:a,outputType:t})=>(0,r.jsx)("div",{className:"top-three-podium",children:a.filter(e=>e.rank<=3).slice(0,3).map((a,t)=>(0,r.jsxs)("div",{className:`top-player ${1===a.rank?"first":2===a.rank?"second":"third"}`,children:[(0,r.jsx)("p",{className:"player-name",children:a.name}),(0,r.jsxs)("div",{className:"player-bar",children:[(0,r.jsx)("p",{className:"player-rank",children:a.rank}),(0,r.jsxs)("p",{className:"player-xp",children:["overall"===e?a.xp:a.score.toFixed(2),"overall"===e?" XP":""]})]})]},a.username))})},74907:function(e,a,t){t.r(a),t.d(a,{Component:()=>x,convertToRandomNumber:()=>v,default:()=>g});var r=t(74848);t(76664);var o=t(97426),l=t(22083),s=t(96540),n=t(83509),d=t(82493),c=t(64088),i=t(5849),u=t(29202),p=t(54333),m=t(26651),f=t(98922);function v(e){let a=e.slice(1),t=0;for(let e=0;e<a.length;e++)t=(t<<5)-t+a.charCodeAt(e);return Math.abs(t)%7+1}let h=[{field:"rank",headerName:"Rank",flex:84,sortable:!0,cellRenderer:e=>{let a=e.value;return`${a} ${1===a?"\uD83E\uDD47":2===a?"\uD83E\uDD48":3===a?"\uD83E\uDD49":""}`}},{field:"avatar",headerName:"Avatar",flex:180,sortable:!1,cellRenderer:e=>(0,r.jsx)("img",{src:e.value,alt:"avatar",className:"avatar",onError:e=>e.currentTarget.src=d,style:{flex:"40px",height:"40px",borderRadius:"50%"}})},{field:"name",headerName:"Name",flex:520,sortable:!0},{field:"xp",headerName:"XP",flex:414,sortable:!0}],b=()=>{let e=(0,n.wA)();(0,s.useEffect)(()=>{e(i.A.getContests())},[e]),(0,s.useEffect)(()=>{let e=document.body.style.background;return document.body.style.background=`url(${u}) center/cover no-repeat fixed`,()=>{document.body.style.background=e}},[]);let a=(0,c.N4)(e=>e.leaderboard.paginatedUserXp),t=(0,c.N4)(e=>e.session?.topLeaderboardDisplay??Number.MAX_SAFE_INTEGER),[d,b]=(0,s.useState)([]);(0,s.useEffect)(()=>{e(i.A.getOverallLeaderboardXP(1,25))},[e]);let x=(0,s.useRef)(null),g=(0,s.useRef)({getRows:async a=>{let t=a.startRow,r=a.endRow-t;e(i.A.getOverallLeaderboardXP(t/r+1,r)),x.current=a}});return(0,s.useEffect)(()=>{if(x.current&&a.rows.length>0){let{successCallback:e}=x.current;0===x.current.startRow&&b(a.rows.slice(0,3)),e(a.rows,Math.min(a.userCount,t)),x.current=null}},[a]),a.rows.map(e=>{e.avatar=`/assets/Sample_Profile_${v(e.username)}.jpg`}),(0,r.jsxs)("div",{className:"leaderboard-container",children:[(0,r.jsx)(f.A,{type:"overall",data:d,outputType:void 0}),(0,r.jsxs)("div",{className:"buttons-container",children:[(0,r.jsx)(p.A,{}),(0,r.jsx)(m.A,{type:"overall"})]}),(0,r.jsx)("div",{className:"leaderboard-table-container",children:(0,r.jsx)(l.W6,{theme:o.r$M,pagination:!0,suppressCellFocus:!0,suppressMovableColumns:!0,paginationPageSizeSelector:!1,columnDefs:h,rowModelType:"infinite",paginationPageSize:25,domLayout:"autoHeight",rowHeight:60,cacheBlockSize:25,maxBlocksInCache:5,datasource:g.current})})]})},x=b;x.displayName="OverallLeaderboard";let g=b},95633:function(e,a,t){t.r(a),t.d(a,{Component:()=>i,default:()=>u});var r=t(74848),o=t(53991),l=t(64907),s=t(66314),n=t(53978),d=t.n(n);t(96540);let c=()=>(0,r.jsx)("div",{className:d()("NoPage",o.DARK),"data-testid":"NotFound-Component",children:(0,r.jsx)(l.I,{icon:s.W.ERROR,title:"404 Not Found",description:"The requested resource could not be found"})}),i=c;i.displayName="NotFound";let u=c}}]);
//# sourceMappingURL=69661.c855a35c.js.map