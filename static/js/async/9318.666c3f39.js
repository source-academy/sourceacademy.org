"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([["9318"],{57017:function(e,t,o){o.d(t,{e:()=>j});var l=o(74848),n=o(87497),a=o(39798),i=o(79642),s=o(66314),r=o(33114);o(96540);var d=o(83509),c=o(20659),m=o(88663),u=o(48003),b=o(64088),p=o(92473),g=o(50046),h=o(81720),y=o(15145);let x=({itemsParentRef:e,renderItem:t,items:o})=>{let i=o.filter(({variant:e})=>e===g.Variant.DEFAULT),s=o.filter(({variant:e})=>e!==g.Variant.DEFAULT);return(0,l.jsxs)(n.W,{ulRef:e,style:{display:"flex",flexDirection:"column"},children:[i.map(t),s.length>0&&(0,l.jsx)(a.D,{text:"Variants",icon:"cog",children:s.map(t)},"variant-menu")]})},f=r.l.ofType(),v=({isFolderModeEnabled:e,sourceChapter:t,sourceVariant:o,handleChapterSelect:n=()=>{},disabled:r=!1})=>{let d=(0,b.N4)(e=>e.playground.languageConfig.mainLanguage),c=[...h.ph,...y.A.playgroundOnly?[h.lU,h.HU,h.iH]:[],...h.L5,...h.hM,...h.eo];return(0,l.jsx)(f,{items:c.filter(({mainLanguage:e})=>e===d),onItemSelect:n,itemRenderer:(t,{handleClick:o})=>{let n=e&&t.chapter===g.Chapter.SOURCE_1,i=n?"Folder mode makes use of lists which are not available in Source 1. To switch to Source 1, disable Folder mode.":void 0;return(0,l.jsx)(p.m,{content:i,disabled:void 0===i,children:(0,l.jsx)(a.D,{onClick:o,text:t.displayName,disabled:n})},t.displayName)},itemListRenderer:x,filterable:!1,disabled:r,children:(0,l.jsx)(i.$,{minimal:!0,text:(0,h.Kl)(t,o),rightIcon:r?null:s.W.DOUBLE_CARET_VERTICAL,disabled:r})})},j=({isFolderModeEnabled:e,sourceChapter:t,sourceVariant:o,handleChapterSelect:p=()=>{},disabled:g=!1})=>{let h=(0,d.wA)(),y=(0,u.i)(c.j),x=(0,b.N4)(e=>e.languageDirectory.selectedLanguageId),f=(0,b.N4)(e=>e.languageDirectory.selectedEvaluatorId),j=(0,b.N4)(e=>e.languageDirectory.languages);if(!y)return(0,l.jsx)(v,{isFolderModeEnabled:e,sourceChapter:t,sourceVariant:o,handleChapterSelect:p,disabled:g});let P=r.l.ofType(),w=j.find(e=>e.id===x),C=w?.evaluators??[],E=C.find(e=>e.id===f);return(0,l.jsx)(P,{items:C,onItemSelect:e=>{h(m.A.setSelectedEvaluator(e.id))},itemRenderer:(e,{handleClick:t})=>(0,l.jsx)(a.D,{onClick:t,text:e.name},e.id),itemListRenderer:({itemsParentRef:e,renderItem:t,items:o})=>(0,l.jsx)(n.W,{ulRef:e,style:{display:"flex",flexDirection:"column"},children:o.map(t)}),filterable:!1,disabled:g,children:(0,l.jsx)(i.$,{minimal:!0,text:E?E.name:"Select Evaluator",rightIcon:g?null:s.W.DOUBLE_CARET_VERTICAL,"data-testid":"ControlBarEvaluatorSelect",disabled:g})})}},99869:function(e,t,o){o.d(t,{A:()=>I});var l=o(74848),n=o(29124),a=o(66314),i=o(19081),s=o(96540),r=o(8381),d=o(4535),c=o(87749),m=o(2166),u=o(55794),b=o.n(u),p=o(21078);let g=e=>(0,l.jsx)(b(),{axis:"y",handle:"#dragHandle",position:e.position,bounds:{top:-500,left:0,right:0,bottom:0},onDrag:e.onDrag,disabled:e.disabled,children:(0,l.jsxs)("div",{className:"mobile-draggable",children:[e.disabled?(0,l.jsx)("div",{className:"handle disabled",id:"draghandle",children:["1","2","3"].map(e=>(0,l.jsx)("div",{className:"circle"},e))}):(0,l.jsx)("div",{className:"handle enabled",id:"dragHandle",children:["1","2","3"].map(e=>(0,l.jsx)("div",{className:"circle"},e))}),(0,l.jsx)("div",{className:"REPL-content",children:(0,l.jsx)(p.A,{...e.replProps})})]})});var h=o(40278),y=o.n(h);let x=e=>{let[t,o]=s.useState(!1),[n,a]=s.useState("ᐸ"),[i,r]=s.useState({x:0,y:0}),[d,c]=s.useState(null),[m,u]=s.useState(""),[p,g]=s.useState({x:0,y:0,time:0});return(0,l.jsx)(b(),{axis:"y",handle:"#floating-dragHandle",position:i,bounds:{top:-200,left:0,right:0,bottom:200},onDrag:(e,t)=>{r(t)},children:(0,l.jsxs)("div",{className:"mobile-floating-keyboard",id:"mobile-floating-toggle",children:[(0,l.jsx)("button",{className:"mobile-floating-toggle",onClick:e=>{t?(document.getElementById("mobile-keyboard-toggle").style.setProperty("display","none"),document.getElementById("mobile-floating-toggle").style.setProperty("width","42px"),document.getElementById("mobile-floating-toggle").style.setProperty("opacity","0.6"),a("ᐸ"),o(!1)):(document.getElementById("mobile-keyboard-toggle").style.setProperty("display","flex"),document.getElementById("mobile-floating-toggle").style.setProperty("width","99%"),document.getElementById("mobile-floating-toggle").style.setProperty("opacity","1"),a("ᐳ"),o(!0))},onMouseDown:e=>{e.preventDefault()},children:n}),(0,l.jsx)("div",{className:"mobile-keyboard-toggle-container",id:"mobile-keyboard-toggle",children:(0,l.jsx)("div",{className:"mobile-keyboard-container",onTouchStart:e=>{let t=e.touches[0];g({x:t.clientX,y:t.clientY,time:Date.now()})},onTouchEnd:e=>{let t=e.changedTouches[0],o=t.clientX-p.x,l=t.clientY-p.y,n=Date.now()-p.time;30>Math.abs(o)&&30>Math.abs(l)&&n<200&&d&&("{arrowleft}"===m?d.navigateLeft():"{arrowright}"===m?d.navigateRight():"{bksp}"===m?d.remove("left"):"{tab}"===m?d.insert("	"):["+","-","*","/","%","=>","===","&&","||"].includes(m)?d.insert(" "+m+" "):d.insert(m))},children:(0,l.jsx)(y(),{onKeyPress:t=>{e.targetKeyboardInput&&(c(e.targetKeyboardInput),u(t))},disableButtonHold:!0,baseClass:"simple-keyboard-shortcut",layout:{default:["{ } ( ) \" ' _ => ; {tab} && || ! < > = === + - * / % // {arrowleft} {arrowright}"]},buttonTheme:[{class:"mobile-navigation",buttons:"{arrowleft} {arrowright}"},{class:"big-buttons",buttons:"=== &&"}],theme:"hg-theme-default",preventMouseDownDefault:!0,disableCaretPositioning:!1})})}),(0,l.jsx)("div",{id:"floating-dragHandle",children:":"})]})})};var f=o(92473),v=o(28761),j=o(10720),P=o(11903),w=o(53991),C=o(53978),E=o.n(C),S=o(27849),D=o(12588),k=o(80392),N=o(81168),A=o(79642);let T=e=>{let t=(0,l.jsxs)("div",{className:"mobile-control-bar",children:[e.editorButtons,e.flowButtons,e.editingWorkspaceButtons]});return(0,l.jsx)(N.A,{content:t,autoFocus:!1,children:(0,l.jsx)(A.$,{minimal:!0,icon:a.W.COG,className:"mobile-control-bar-button"})})},_=s.memo(({renderActiveTabPanelOnly:e,mobileControlBarProps:t,onChange:o,selectedTabId:n,...a})=>{let i=/iPhone|iPod/.test(navigator.platform);return(0,l.jsx)(D.A,{...a,children:({tabs:n,selectedTab:s})=>(0,l.jsxs)(l.Fragment,{children:[n.map(e=>((e,t)=>{if(!e.body)return;let o=t?{...e.body,props:{...e.body.props,workspaceLocation:t}}:e.body;return(0,l.jsx)("div",{className:e.id===s?"mobile-selected-panel":"mobile-unselected-panel",children:o},e.id)})(e,a.workspaceLocation)),(0,l.jsx)("div",{className:"mobile-tabs-container",children:(0,l.jsxs)(P.t,{id:"mobile-side-content",onChange:o,renderActiveTabPanelOnly:e,selectedTabId:s,className:E()(w.DARK,"mobile-side-content"),children:[n.map(e=>{let t,o;return t=void 0===e.id?e.label:e.id,o=(0,l.jsx)(f.m,{content:e.label,onOpening:()=>{i&&document.getElementById((0,S.UK)(t))?.click()},children:(0,l.jsx)("div",{className:"side-content-tooltip",id:(0,S.UK)(t),children:(0,l.jsx)(v.I,{icon:e.iconName,size:20})})}),(0,l.jsx)(j.o,{id:t,title:o,disabled:e.disabled,className:"side-content-tab"},t)}),("playground"===a.workspaceLocation||"sicp"===a.workspaceLocation)&&(0,l.jsx)(T,{...t})]})})]})})},k.P),I=e=>{let t,o=/Android/.test(navigator.userAgent),a=(0,i.U)("(orientation: portrait)"),[u,b]=(0,s.useState)({x:0,y:0}),[p,h]=(0,s.useState)(!1);n.$.onlyShowFocusOnTabs(),(0,s.useEffect)(()=>("assessment"===e.mobileSideContentProps.workspaceLocation&&document.documentElement.style.setProperty("--mobile-panel-height","calc(100% - 100px - 1.1rem)"),()=>{document.documentElement.style.setProperty("--mobile-panel-height","calc(100% - 70px)")}),[]),(0,s.useEffect)(()=>(a&&o&&(document.documentElement.style.setProperty("overflow","auto"),document.querySelector("meta[name=viewport]").setAttribute("content","height="+window.innerHeight+", width=device-width")),()=>{o&&(document.documentElement.style.setProperty("overflow","hidden"),document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0")),j()}),[a,o]);let[y,f]=(0,s.useState)(null),v=e=>{document.documentElement.style.setProperty("--mobile-repl-height",Math.max(-e,0)+"px"),b({x:0,y:e})},j=()=>{b({x:0,y:0}),document.documentElement.style.setProperty("--mobile-repl-height","0px")},P=e.editorContainerProps?.handleEditorEval,w=(0,s.useCallback)((e,t)=>{"mobile_editor_run"===e&&P?.(),"mobile_editor_run"===e&&"subst_visualiser"!==t&&"cse_machine"!==t&&"autograder"!==t&&"testcases"!==t?v(-300):j(),"folder"===e||"subst_visualiser"===e||"cse_machine"===e||"subst_visualiser"===t&&"mobile_editor_run"===e||"cse_machine"===t&&"mobile_editor_run"===e?h(!0):h(!1)},[P]),C=e.mobileSideContentProps.onChange,E=(0,s.useCallback)((e,t,o)=>{C(e,t,o),w(e,t)},[w,C]),S=e.sideBarProps.tabs.filter(e=>void 0!==e.id),D=(0,s.useCallback)(()=>({...e.mobileSideContentProps,onChange:E,tabs:{beforeDynamicTabs:[...S,B,...e.mobileSideContentProps.tabs?.beforeDynamicTabs??[]],afterDynamicTabs:[...e.mobileSideContentProps.tabs?.afterDynamicTabs??[],L]}}),[E,e.mobileSideContentProps,S]),k="assessment"===e.mobileSideContentProps.workspaceLocation;return(0,l.jsxs)("div",{className:"workspace mobile-workspace",children:[(0,l.jsx)(m.X,{when:!!e.hasUnsavedChanges,message:"You have changes that may not be saved. Are you sure you want to leave?"}),k&&(0,l.jsx)(r.A,{...e.mobileSideContentProps.mobileControlBarProps}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"mobile-editor-panel",children:(()=>{if(!e.editorContainerProps)return(0,l.jsx)(c.A,{...e.mcqProps});{let t,o={...e.editorContainerProps};return"sourcecast"===o.editorVariant&&(o.setDraggableReplPosition=()=>v(-100)),(0,l.jsx)(d.A,{...t=e.editorContainerProps,onFocus:(e,o)=>{t.onFocus?.(e,o),o&&f(o)},onBlur:(e,o)=>{t.onBlur?.(e,o),f(null)}})}})()}),(0,l.jsx)(_,{...D()})]}),(0,l.jsx)(g,{position:u,onDrag:(e,t)=>{document.documentElement.style.setProperty("--mobile-repl-height",Math.max(-t.y,0)+"px"),b(t)},disabled:p,replProps:{...t=e.replProps,onFocus:e=>{t.onFocus?.(e),f(e)},onBlur:()=>{t.onBlur?.(),f(null)}}},"repl"),(0,l.jsx)(x,{targetKeyboardInput:y})]})},B={label:"Editor",iconName:a.W.EDIT,body:null,id:"mobile_editor"},L={label:"Run",iconName:a.W.PLAY,body:null,id:"mobile_editor_run"}}}]);
//# sourceMappingURL=9318.666c3f39.js.map