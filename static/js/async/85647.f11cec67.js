"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([["85647"],{12951:function(e,s,a){a.d(s,{A:()=>o});var t=a(74848),n=a(51851),i=a(7064),r=a(96540);let o=e=>((0,r.useEffect)(()=>{e.loadContentDispatch?.()},[]),(0,t.jsx)("div",{className:"ContentDisplay row center-xs",children:(0,t.jsx)("div",{className:`${e.fullWidth?"col-md-12":"col-md-10 col-xs-11"} contentdisplay-content-parent`,children:(0,t.jsx)(n.Z,{className:"contentdisplay-content",elevation:i.e.THREE,children:e.display})})}))},25817:function(e,s,a){a.d(s,{A:()=>l});var t=a(74848),n=a(81168),i=a(87497),r=a(39798),o=a(79642);let l=({options:e,selectedValue:s,onClick:a,buttonProps:l,popoverProps:d})=>{let c;return(0,t.jsx)(n.A,{...d,interactionKind:"click",content:(0,t.jsx)(i.W,{children:e.map(({value:e,label:s})=>(0,t.jsx)(r.D,{text:s,onClick:()=>{a?.(e)}},s))}),children:(0,t.jsx)(o.$,{...l,children:(c=e.find(({value:e})=>e===s),c?.label)})})}},14822:function(e,s,a){a.d(s,{G:()=>l});var t=a(74848),n=a(66314);a(96540);var i=a(64313);let r=({onClick:e})=>(0,t.jsx)(i.A,{label:"Return to Academy",icon:n.W.ARROW_RIGHT,onClick:e,options:{iconOnRight:!0}}),o=({onClick:e})=>(0,t.jsx)(i.A,{label:"Submit",icon:n.W.ARROW_RIGHT,onClick:e,options:{iconOnRight:!0}}),l=e=>e.questionProgress[0]===e.questionProgress[1]?e.submitOnFinish?(0,t.jsx)(o,{onClick:e.onClickSubmit}):(0,t.jsx)(r,{onClick:e.onClickReturn},"return_to_academy"):(0,t.jsx)(i.A,{label:"Next",icon:n.W.ARROW_RIGHT,onClick:e.onClickNext,options:{iconOnRight:!0}})},84126:function(e,s,a){a.d(s,{S:()=>r});var t=a(74848),n=a(66314);a(96540);var i=a(64313);let r=e=>e.questionProgress[0]<=1?null:(0,t.jsx)(i.A,{label:"Previous",icon:n.W.ARROW_LEFT,onClick:e.onClick})},17514:function(e,s,a){a.d(s,{Y:()=>i});var t=a(74848);a(96540);var n=a(64313);let i=({questionProgress:e})=>(0,t.jsx)(n.A,{label:`Question ${e[0]} of ${e[1]}  `,isDisabled:!0})},49098:function(e,s,a){a.d(s,{A:()=>E});var t=a(74848),n=a(79642),i=a(92473),r=a(68178),o=a(28761),l=a(76129),d=a(66314),c=a(96540),u=a(81333),m=a(64313),h=a(51851),p=a(7064),x=a(35537),g=a(53978),j=a.n(g);let v=({index:e,result:s})=>{let{t:a}=(0,u.Bd)("sideContent",{keyPrefix:"resultCard"});return(0,t.jsx)("div",{className:j()("ResultCard","pass"===s.resultType?"correct":"wrong"),"data-testid":"ResultCard",children:(0,t.jsxs)(h.Z,{elevation:p.e.ONE,children:[(0,t.jsxs)("div",{className:"result-data",children:[(0,t.jsx)("div",{className:"result-idx","data-testid":"result-idx",children:e+1}),(0,t.jsx)("div",{className:"result-status","data-testid":"result-status",children:s.resultType.toUpperCase()})]}),(0,t.jsx)(x.AC,{className:"result-expected","data-testid":"result-expected",children:s.expected}),(0,t.jsx)(x.AC,{className:"result-actual","data-testid":"result-actual",children:"error"===s.resultType?s.errors.map(e=>{switch(e.errorType){case"timeout":return a("timeout");case"syntax":return a("syntax",{line:e.line,errorExplanation:e.errorExplanation});case"runtime":return a("runtime",{line:e.line,errorExplanation:e.errorExplanation});case"systemError":return a("systemError",{errorMessage:e.errorMessage});default:return a("unknown",{errorType:e.errorType})}}).join("\n\n"):s.actual})]})})};var A=a(53991),b=a(57415),N=a(64936);a(88462);let C=e=>{let{index:s,testcase:a,handleTestcaseEval:n}=e,i=c.useMemo(()=>{let e=void 0!==a.result||a.errors,s=(0,N.stringify)(a.result)===a.answer;return{correct:e&&s,wrong:e&&!s,secret:"secret"===a.type||"opaque"===a.type}},[a]),r=c.useCallback(()=>{n(s)},[s,n]);return(0,t.jsx)("div",{className:j()("AutograderCard",i),"data-testid":"AutograderCard",children:(0,t.jsx)(h.Z,{className:A.INTERACTIVE,elevation:p.e.ONE,onClick:r,children:"opaque"===a.type&&"assessment"===e.workspaceLocation?(0,t.jsx)(x.AC,{className:"testcase-placeholder","data-testid":"testcase-placeholder",children:"Hidden testcase"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.AC,{className:"testcase-program",children:a.program}),(0,t.jsx)(x.AC,{className:"testcase-expected",children:a.answer}),(0,t.jsx)(x.AC,{className:"testcase-actual","data-testid":"testcase-actual",children:a.errors?(0,b.parseError)(a.errors):void 0!==a.result?(0,N.stringify)(a.result):"No Answer"})]})})})},w=(e,s)=>(0,t.jsxs)("div",{className:e,children:[s,(0,t.jsx)(o.I,{icon:d.W.CARET_DOWN})]}),E=e=>{let s,a,h,{t:p}=(0,u.Bd)("sideContent",{keyPrefix:"autograder"}),[x,g]=(0,c.useState)(!0),[j,A]=(0,c.useState)(!0),{testcases:b,autogradingResults:N,handleTestcaseEval:E,workspaceLocation:f}=e,T=(0,c.useMemo)(()=>(0,t.jsxs)("div",{className:"autograder-help-tooltip",children:[(0,t.jsx)("p",{children:p("tooltip.clickTestcase")}),(0,t.jsx)("p",{children:p("tooltip.executeAll")}),(0,t.jsx)("p",{children:p("tooltip.backgroundInfo")}),(0,t.jsx)("p",{children:p("tooltip.privateTestcases")})]}),[p]),y=(0,c.useMemo)(()=>(0,t.jsxs)("div",{className:"testcases-header","data-testid":"testcases-header",children:[w("header-fn",p("headers.testcase")),w("header-expected",p("headers.expected")),w("header-actual",p("headers.actual"))]}),[p]),R=(0,c.useMemo)(()=>(0,t.jsxs)("div",{className:"results-header","data-testid":"results-header",children:[(0,t.jsxs)("div",{className:"header-data",children:[w("header-sn",p("headers.sn")),w("header-status",p("headers.status"))]}),w("header-expected",p("headers.expected")),w("header-actual",p("headers.actual"))]}),[p]),k=(0,c.useMemo)(()=>b.length>0?(0,t.jsxs)("div",{className:"testcaseCards",children:[y,b.map((e,s)=>(0,t.jsx)(C,{index:s,testcase:e,handleTestcaseEval:E,workspaceLocation:f},s))]}):(0,t.jsx)("div",{className:"noResults","data-testid":"noResults",children:p("noTestcases")}),[b,y,p,E,f]),I=(0,c.useMemo)(()=>N.length>0?(0,t.jsxs)("div",{children:[R,N.map((e,s)=>(0,t.jsx)(v,{index:s,result:e},s))]}):(0,t.jsx)("div",{className:"noResults","data-testid":"noResults",children:p("noResults")}),[N,R,p]),S=(0,c.useCallback)(()=>{g(!x)},[x]),M=(0,c.useCallback)(()=>A(!j),[j]);return(0,t.jsxs)("div",{className:"Autograder",children:[(0,t.jsxs)(n.$,{className:"collapse-button",icon:x?d.W.CARET_DOWN:d.W.CARET_RIGHT,minimal:!0,onClick:S,children:[(0,t.jsx)("span",{children:p("testcases")}),(0,t.jsx)(i.m,{content:T,placement:r.$.LEFT,children:(0,t.jsx)(o.I,{icon:d.W.HELP})})]}),(0,t.jsx)(l.S,{isOpen:x,keepChildrenMounted:!0,children:k}),(s=p("results"),a=j,h=M,(0,t.jsx)(m.A,{label:s,icon:a?d.W.CARET_DOWN:d.W.CARET_RIGHT,onClick:h,options:{className:"collapse-button",minimal:!0}})),(0,t.jsx)(l.S,{isOpen:j,keepChildrenMounted:!0,children:I})]})}},40134:function(e,s,a){a.d(s,{A:()=>d});var t=a(74848),n=a(53991),i=a(79642),r=a(53978),o=a.n(r),l=a(96540);let d=l.memo(()=>{let e=(0,l.useRef)(null);return(0,l.useEffect)(()=>{window.ToneMatrix&&window.ToneMatrix.initialise_matrix(e.current)},[]),(0,t.jsxs)("div",{className:"sa-tone-matrix",children:[(0,t.jsx)("div",{className:"row",children:(0,t.jsxs)("div",{className:o()("controls","col-xs-12",n.DARK,n.BUTTON_GROUP),children:[(0,t.jsx)(i.$,{id:"clear-matrix",onClick:()=>{window.ToneMatrix.clear_matrix()},children:"Clear"}),(0,t.jsx)(i.$,{id:"randomise-matrix",onClick:()=>{window.ToneMatrix.randomise_matrix()},children:"Randomise"})]})}),(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-xs-12",ref:e})})]})},()=>!0)},88806:function(e,s,a){a.d(s,{G3:()=>d,Hw:()=>c,if:()=>m,jW:()=>u,sC:()=>h});var t=a(74353),n=a.n(t),i=a(97375),r=a.n(i),o=a(6279),l=a.n(o);n().extend(r()),n().extend(l());let d=e=>{let s=n()(e),a=n()();return s.isBefore(a)},c=e=>n()(e).format("Do MMMM, HH:mm"),u=e=>n()(e).format("MMMM Do YYYY, HH:mm"),m=e=>n()(e).format("MMMM Do YYYY"),h=(e,s)=>{let a=n()(e).add(s,"hours"),t=a.format("Do MMMM, HH:mm"),i=a.fromNow();return`${t} (${i})`}},49761:function(e,s,a){a.r(s),a.d(s,{default:()=>ec,Component:()=>ed});var t=a(74848),n=a(64907),i=a(35505),r=a(79642),o=a(54348),l=a(28761),d=a(66314),c=a(96540),u=a(83509),m=a(94894),h=a(39572),p=a(81720),x=a(51566),g=a(51062),j=a(13971),v=a(25817),A=a(64088),b=a(96830),N=a(703),C=a(74971),w=a(12951),E=a(6726),f=a(7146),T=a(53991),y=a(53978),R=a.n(y),k=a(50046),I=a(97210),S=a(69096);a(88462);var M=a(20922),W=a(11175),O=a(14822),P=a(84126),q=a(17514),H=a(41714),D=a(4535),G=a(48299),B=a(49098),X=a(40134),$=a(27849),L=a(80594),_=a(31365),U=a(35537),V=a(67849),F=a(5193),Y=a(58365),J=a(64313),K=a(2166),Q=a(88806),z=a(41397);let Z="grading-editor-button",ee={header:[d.W.HEADER,"Header Styles"],bold:[d.W.BOLD,"Bold"],italic:[d.W.ITALIC,"Italic"],strikethrough:[d.W.STRIKETHROUGH,"Strikethrough"],link:[d.W.LINK,"Link"],quote:[d.W.CITATION,"Quote"],code:[d.W.CODE,"Monospaced"],image:[d.W.MEDIA,"Image"],"unordered-list":[d.W.UNGROUP_OBJECTS,"Bullets"],"ordered-list":[d.W.NUMBERED_LIST,"Numbering"],"checked-list":[d.W.SQUARE,"Checkboxes"]},es=e=>{let s=(0,u.wA)(),{handleGradingSave:a,handleGradingSaveAndContinue:n,handleReautogradeAnswer:i}=(0,c.useMemo)(()=>({handleGradingSave:(...e)=>s(h.A.submitGrading(...e)),handleGradingSaveAndContinue:(...e)=>s(h.A.submitGradingAndContinue(...e)),handleReautogradeAnswer:(...e)=>s(h.A.reautogradeAnswer(...e))}),[s]),[m,p]=(0,c.useState)(e.xpAdjustment.toString()),[x,g]=(0,c.useState)(e.comments),[j,v]=(0,c.useState)("write"),[A,b]=(0,c.useState)(!1);(0,c.useEffect)(()=>{N()},[e.submissionId,e.questionId]);let N=()=>{p(e.xpAdjustment.toString()),g(e.comments),v("write"),b(!1)},C=s=>()=>{let a=(0,E.hM)(m||void 0)||void 0,t=e.initialXp+(a||0);t<0||t>e.maxXp?(0,z.JB)(`XP ${t.toString()} is out of bounds. Maximum xp is ${e.maxXp.toString()}.`):s(e.submissionId,e.questionId,a,x)},w=async()=>{await (0,S.cu)({contents:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Reautograde this answer?"}),(0,t.jsx)("p",{children:"Note: manual adjustments will be reset to 0."})]}),positiveLabel:"Reautograde",positiveIntent:"danger"})&&i(e.submissionId,e.questionId)},f=()=>{let s=(0,E.hM)(m||void 0);return e.xpAdjustment!==s||e.comments!==x},T=f(),y=void 0===e.gradedAt,R={intent:T||y?_.J.WARNING:_.J.NONE,minimal:!T&&!y,className:Z},k={intent:T?_.J.DANGER:_.J.NONE,minimal:!T,className:Z},I={intent:T||y?_.J.SUCCESS:_.J.NONE,minimal:!T&&!y,className:Z},M=e.initialXp+((0,E.hM)(m||void 0)||0),W=`${e.initialXp>0?"-":""}${e.initialXp} to ${e.maxXp-e.initialXp}`;return(0,t.jsxs)("div",{className:"GradingEditor",children:[(0,t.jsx)(K.X,{when:!A&&(T||y),message:"You have unsaved changes. Are you sure you want to leave?"}),(0,t.jsx)("div",{className:"grading-editor-header",children:(0,t.jsxs)(U.H3,{children:["Currently Grading:",(0,t.jsx)("br",{}),e.studentNames.map((s,a)=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{children:[s," (",e.studentUsernames[a],")"]}),(0,t.jsx)("br",{})]},a))]})}),null!==e.solution?(0,t.jsx)("div",{className:"grading-editor-marking-scheme",children:(0,t.jsxs)(U.AC,{children:[e.solution.toString()," "]})}):null,(0,t.jsx)("div",{className:"grading-editor-container",children:(0,t.jsxs)("div",{className:"grading-editor-xp",children:[(0,t.jsxs)("div",{className:"autograder-xp",children:[(0,t.jsx)("div",{children:"Autograder XP:"}),(0,t.jsxs)("div",{children:[`${e.initialXp} / ${e.maxXp}`," ",(0,t.jsx)(r.$,{icon:"refresh",small:!0,minimal:!0,onClick:w})]})]}),(0,t.jsxs)("div",{className:"xp-adjustment",children:[(0,t.jsx)("div",{children:"XP adjustment:"}),(0,t.jsx)("div",{children:(0,t.jsx)(V.O,{className:"adjustment-input",onValueChange:(e,s)=>{p(s)},value:m||"",buttonPosition:o.yX.RIGHT,fill:!0,placeholder:W,intent:M<0||M>e.maxXp?_.J.DANGER:_.J.NONE,min:0-e.initialXp,max:e.maxXp>e.initialXp?e.maxXp-e.initialXp:void 0,stepSize:50,minorStepSize:25,majorStepSize:100})})]}),(0,t.jsxs)("div",{className:"final-xp",children:[(0,t.jsx)("div",{children:"Final XP:"}),(0,t.jsx)("div",{children:`${M} / ${e.maxXp}`})]})]})}),(0,t.jsx)("div",{className:"react-mde-parent",children:(0,t.jsx)(Y.default,{value:x,onChange:g,selectedTab:j,onTabChange:e=>v(e),generateMarkdownPreview:e=>Promise.resolve((0,t.jsx)(G.A,{content:e,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0,openLinksInNewWindow:!0})),minEditorHeight:200,maxEditorHeight:1e3,minPreviewHeight:240,getIcon:function(e){let s=(e=>{switch(e){case"header":case"bold":case"italic":case"strikethrough":case"link":case"quote":case"code":case"image":case"unordered-list":case"ordered-list":case"checked-list":{let[s,a]=ee[e];return{iconName:s,title:a}}default:return{iconName:d.W.HELP}}})(e);return(0,t.jsx)(l.I,{icon:s.iconName,htmlTitle:s.title})}})}),"write"===j&&(0,t.jsxs)("div",{className:"grading-editor-draft-buttons",children:[(0,t.jsx)("div",{className:"grading-editor-save-button",children:(0,t.jsx)(J.A,{label:"Save Changes",icon:d.W.FLOPPY_DISK,onClick:C(a),options:R})}),(0,t.jsx)("div",{className:"grading-editor-discard-button",children:(0,t.jsx)(J.A,{label:"Discard Changes",icon:d.W.TRASH,onClick:()=>{(!f()||window.confirm("This will reset the editor. Are you sure?"))&&(p(e.xpAdjustment.toString()),g(e.comments),(0,z.uT)("Discarded!",1e3))},options:k})})]}),(0,t.jsx)("div",{className:"grading-editor-save-continue-button",children:(0,t.jsx)(J.A,{label:"Save and Continue",icon:d.W.UPDATED,onClick:C((e,s,a,t)=>{b(!0),n(e,s,a,t)}),options:I})}),e.graderName&&e.gradedAt&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.c,{}),(0,t.jsxs)("div",{className:"grading-editor-last-graded-details",children:["Last edited by ",(0,t.jsx)("b",{children:e.graderName})," on ",(0,Q.Hw)(e.gradedAt)]})]})]})},ea="grading",et=`// This answer does not have significant changes from the given solution
// template and has thus been flagged as unanswered.
// If you think this is wrong, please ignore and grade accordingly.


`,en=e=>{var s,a;let r,o,l,x,g,j,v,N,C=(0,m.Zp)(),{selectedTab:w,setSelectedTab:E}=(0,$.k9)(ea,"grading"),f=(0,A.N4)(s=>s.session.gradings[e.submissionId]),y=(0,A.N4)(e=>e.session.courseId),{autogradingResults:_,isFolderModeEnabled:U,activeEditorTabIndex:V,editorTabs:F,editorTestcases:Y,isRunning:J,output:K,replValue:Q,currentSubmission:z,currentQuestion:Z}=(0,A.N4)(e=>e.workspaces[ea]),ee=(0,u.wA)(),{handleBrowseHistoryDown:en,handleBrowseHistoryUp:ei,handleClearContext:er,handleDeclarationNavigate:eo,handleEditorEval:el,handleSetActiveEditorTabIndex:ed,handleRemoveEditorTabByIndex:ec,handleEditorValueChange:eu,handleEditorUpdateBreakpoints:em,handleGradingFetch:eh,handleReplEval:ep,handleReplOutputClear:ex,handleReplValueChange:eg,handleResetWorkspace:ej,handleChangeExecTime:ev,handleSideContentHeightChange:eA,handleTestcaseEval:eb,handleRunAllTestcases:eN,handleUpdateCurrentSubmissionId:eC,handleUpdateHasUnsavedChanges:ew,handlePromptAutocomplete:eE}=(0,c.useMemo)(()=>({handleBrowseHistoryDown:()=>ee(b.A.browseReplHistoryDown(ea)),handleBrowseHistoryUp:()=>ee(b.A.browseReplHistoryUp(ea)),handleClearContext:(e,s)=>ee(b.A.beginClearContext(ea,e,s)),handleDeclarationNavigate:e=>ee(b.A.navigateToDeclaration(ea,e)),handleEditorEval:()=>ee(b.A.evalEditor(ea)),handleSetActiveEditorTabIndex:e=>ee(b.A.updateActiveEditorTabIndex(ea,e)),handleRemoveEditorTabByIndex:e=>ee(b.A.removeEditorTab(ea,e)),handleEditorValueChange:(e,s)=>ee(b.A.updateEditorValue(ea,0,s)),handleEditorUpdateBreakpoints:(e,s)=>ee(b.A.setEditorBreakpoint(ea,e,s)),handleGradingFetch:e=>ee(h.A.fetchGrading(e)),handleReplEval:()=>ee(b.A.evalRepl(ea)),handleReplOutputClear:()=>ee(b.A.clearReplOutput(ea)),handleReplValueChange:e=>ee(b.A.updateReplValue(e,ea)),handleResetWorkspace:e=>ee(b.A.resetWorkspace(ea,e)),handleChangeExecTime:e=>ee(b.A.changeExecTime(e,ea)),handleSideContentHeightChange:e=>ee((0,I.k1)(e,ea)),handleTestcaseEval:e=>ee(b.A.evalTestcase(ea,e)),handleRunAllTestcases:()=>ee(b.A.runAllTestcases(ea)),handleUpdateCurrentSubmissionId:(e,s)=>ee(b.A.updateCurrentSubmissionId(e,s)),handleUpdateHasUnsavedChanges:e=>ee(b.A.updateHasUnsavedChanges(ea,e)),handlePromptAutocomplete:(e,s,a)=>ee(b.A.promptAutocomplete(ea,e,s,a))}),[ee]);(0,c.useEffect)(()=>{if(eh(e.submissionId),!f)return;let s=e.questionId;e.questionId>=f.answers.length&&(s=f.answers.length-1);let a=f.answers[s].question,t="";"programming"===a.type&&(a.answer?a.answer.trim()===a.solutionTemplate.trim()?(t=et+a.answer,(0,S.ug)({contents:"Question has not been answered."})):t=a.answer:t=a.solutionTemplate||""),eu(0,t)},[]),(0,c.useEffect)(()=>{if(void 0===f)return;let s=e.questionId;void 0===f.answers[s]?C(`/courses/${y}/grading`):ef(e)});let ef=e=>{let s=e.submissionId,a=e.questionId;if(z===s&&Z===a)return;let t=f.answers[a].question,n=[],i="",r="",o="",l=[];"programming"===t.type&&(n=t.autogradingResults,r=t.prepend,o=t.postpend,l=t.testcases,(i=t.answer)||(i=t.solutionTemplate),i.trim()===t.solutionTemplate?.trim()&&((0,S.ug)({contents:"Question has not been answered."}),i=et+i)),em(0,[]),eC(s,a),ej({autogradingResults:n,editorTabs:[{value:i,highlightedLines:[],breakpoints:[]}],programPrependValue:r,programPostpendValue:o,editorTestcases:l}),ev(t.library.execTimeMs??p.Kn.grading.execTime),er(t.library,!0),ew(!1),i&&eu(0,i)},eT=()=>{el(),"autograder"===w&&eN()};if(void 0===f)return(0,t.jsx)(n.I,{className:R()("WorkspaceParent",T.DARK),description:"Getting assessment ready...",icon:(0,t.jsx)(i.y,{size:i.H.LARGE})});let ey=e.questionId>=f.answers.length?f.answers.length-1:e.questionId,eR=f.answers[ey].question,ek={controlBarProps:(o=(r=`/courses/${y}/grading`)+`/${e.submissionId}`,l=[ey+1,f.answers.length],x=(0,t.jsx)(O.G,{onClickNext:()=>C(o+`/${(ey+1).toString()}`),onClickReturn:()=>C(r),questionProgress:l},"next_question"),g=(0,t.jsx)(P.S,{onClick:()=>C(o+`/${(ey-1).toString()}`),questionProgress:l},"previous_question"),j=(0,t.jsx)(q.Y,{questionProgress:l},"question_view"),{editorButtons:[(0,t.jsx)(H.w,{isEntrypointFileDefined:null!==V,handleEditorEval:eT},"run")],flowButtons:[g,j,x]}),editorContainerProps:"programming"===eR.type||"voting"===eR.type?{editorVariant:"normal",isFolderModeEnabled:U,activeEditorTabIndex:V,setActiveEditorTabIndex:ed,removeEditorTabByIndex:ec,editorTabs:F.map(D.U),editorSessionId:"",sessionDetails:null,handleDeclarationNavigate:eo,handleEditorEval:eT,handleEditorValueChange:eu,handleEditorUpdateBreakpoints:em,handlePromptAutocomplete:eE,isEditorAutorun:!1,sourceChapter:eR?.library?.chapter||k.Chapter.SOURCE_4,sourceVariant:eR?.library?.variant??k.Variant.DEFAULT,externalLibraryName:eR?.library?.external?.name||"NONE"}:void 0,handleSideContentHeightChange:eA,mcqProps:{mcq:eR,handleMCQSubmit:e=>{}},sideBarProps:{tabs:[]},sideContentProps:(v=[{label:`Grading: Question ${ey+1}`,iconName:d.W.TICK,body:(0,t.jsx)(es,{solution:f.answers[ey].question.solution,questionId:f.answers[ey].question.id,submissionId:e.submissionId,initialXp:f.answers[ey].grade.xp,xpAdjustment:f.answers[ey].grade.xpAdjustment,maxXp:f.answers[ey].question.maxXp,studentNames:(s=f.answers[ey].student.name,a=f.answers[ey].team,s?[s]:null!=a?a.map(e=>e.name):[""]),studentUsernames:f.answers[ey].student.username?[f.answers[ey].student.username]:f.answers[ey].team.map(e=>e.username),comments:f.answers[ey].grade.comments??"",graderName:f.answers[ey].grade.grader?f.answers[ey].grade.grader.name:void 0,gradedAt:f.answers[ey].grade.gradedAt?f.answers[ey].grade.gradedAt:void 0}),id:"grading"},{label:`Question ${ey+1}`,iconName:d.W.NINJA,body:(0,t.jsx)(G.A,{content:f.answers[ey].question.content}),id:"question_overview"},{label:"Autograder",iconName:d.W.AIRPLANE,body:(0,t.jsx)(B.A,{testcases:Y,autogradingResults:_,handleTestcaseEval:eb,workspaceLocation:"grading"}),id:"autograder"},{label:"Briefing",iconName:d.W.BRIEFCASE,body:(0,t.jsx)(G.A,{content:f?f.assessment.summaryLong:"Briefing Unavailable. Try refreshing the page."}),id:"briefing"}],f.answers[ey].question.library.external.symbols.includes("get_matrix")&&v.push({label:"Tone Matrix",iconName:d.W.GRID_VIEW,body:(0,t.jsx)(X.A,{}),id:"tone_matrix"}),{onChange:(e,s,a)=>{e!==s&&E(e)},tabs:{beforeDynamicTabs:v,afterDynamicTabs:[]},workspaceLocation:ea}),replProps:{handleBrowseHistoryDown:en,handleBrowseHistoryUp:ei,handleReplEval:ep,handleReplValueChange:eg,output:K,replValue:Q,sourceChapter:eR?.library?.chapter||k.Chapter.SOURCE_4,sourceVariant:eR?.library?.variant??k.Variant.DEFAULT,externalLibrary:eR?.library?.external?.name||"NONE",replButtons:(N=(0,t.jsx)(M.g,{handleReplOutputClear:ex},"clear_repl"),[(0,t.jsx)(W.T,{handleReplEval:ep,isRunning:J},"eval_repl"),N])}};return(0,t.jsx)("div",{className:R()("WorkspaceParent",T.DARK),children:(0,t.jsx)(L.A,{...ek})})},ei=[{value:!0,label:"my groups"},{value:!1,label:"all groups"}],er=[{value:!1,label:"unpublished"},{value:!0,label:"all"}],eo=[{value:10,label:"10"},{value:15,label:"15"},{value:25,label:"25"},{value:50,label:"50"}],el=()=>{let{courseId:e,gradingOverviews:s,role:a,group:T}=(0,A.wV)(),y=(0,m.g)(),R=a===p.Xh.Admin,[k,I]=(0,c.useState)(!R&&null!==T),[S,M]=(0,c.useState)(10),[W,O]=(0,c.useState)(!1),[P,q]=(0,c.useState)({page:1,filterParams:{}}),[H,D]=(0,c.useState)(!1),[G,B]=(0,c.useState)(!1),[X,$]=(0,c.useState)([]),L=(0,u.wA)(),_=(0,A.N4)(e=>e.workspaces.grading.allColsSortStates),U=(0,A.N4)(e=>e.workspaces.grading.hasLoadedBefore),V=(0,A.N4)(e=>e.workspaces.grading.requestCounter),F=(0,A.N4)(e=>e.session.accessToken),Y=(0,A.N4)(e=>e.session.refreshToken),J=(0,c.useMemo)(()=>V>0,[V]),K=(0,c.useCallback)((e,s)=>{q({page:e,filterParams:s}),L(b.A.setGradingHasLoadedBefore()),L(b.A.increaseRequestCounter()),L(h.A.fetchGradingOverviews(k,(0,C.lu)(W),(0,C.MY)(e,S),s,_))},[L,k,W,S,_]);if((0,c.useEffect)(()=>{H&&(L(b.A.increaseRequestCounter()),L(h.A.fetchGradingOverviews(k,(0,C.lu)(W),(0,C.MY)(P.page,S),P.filterParams,_)),D(!1))},[L,k,W,S,_,H,P]),(0,c.useEffect)(()=>{$(s?.data?.map(e=>e.studentName?e:{...e,studentName:Array.isArray(e.studentNames)?e.studentNames.join(", "):e.studentNames})??[]),L(b.A.decreaseRequestCounter())},[s,L]),y.submissionId&&!y.submissionId?.match(N.F0)||y.questionId&&!y.questionId?.match(N.F0))return(0,t.jsx)(m.C5,{to:`/courses/${e}/grading`});let Q=(0,E.hM)(y.submissionId),z=(0,E.hM)(y.questionId)||0;if(null!==Q)return(0,t.jsx)(en,{questionId:z,submissionId:Q});let Z=(0,t.jsx)(n.I,{className:"Grading",description:"Fetching submissions...",icon:(0,t.jsx)(i.y,{size:i.H.LARGE})});return(0,t.jsx)(w.A,{loadContentDispatch:()=>{U||L(h.A.fetchGradingOverviews(k))},display:s?.data===void 0?Z:(0,t.jsxs)("div",{className:"grading-table-wrapper",children:[(0,t.jsx)(x.A,{justifyContent:"space-between",children:(0,t.jsxs)(x.A,{justifyContent:"flex-start",style:{columnGap:"1.5rem"},children:[(0,t.jsx)(g.A,{style:{fontSize:"1.125rem",opacity:.9},children:"Submissions"}),(0,t.jsx)(r.$,{minimal:!0,icon:d.W.EXPORT,onClick:()=>{(0,j.UW)({accessToken:F,refreshToken:Y}).then(e=>(0,C.lL)(e?.data))},className:"export-csv-btn",children:"Export to CSV"})]})}),(0,t.jsxs)(x.A,{justifyContent:"flex-start",style:{columnGap:"0.5rem",marginTop:"0.5rem"},children:[(0,t.jsx)(g.A,{children:"Viewing"}),(0,t.jsx)(v.A,{options:er,selectedValue:W,onClick:O,popoverProps:{position:o.yX.BOTTOM},buttonProps:{minimal:!0,rightIcon:"caret-down"}}),(0,t.jsx)(g.A,{children:"submissions from"}),(0,t.jsx)(v.A,{options:ei,selectedValue:k,onClick:I,popoverProps:{position:o.yX.BOTTOM},buttonProps:{minimal:!0,rightIcon:"caret-down"}}),(0,t.jsx)(g.A,{children:"showing"}),(0,t.jsx)(v.A,{options:eo,selectedValue:S,onClick:M,popoverProps:{position:o.yX.BOTTOM},buttonProps:{minimal:!0,rightIcon:"caret-down"}}),(0,t.jsx)(g.A,{children:"entries per page."}),(0,t.jsx)(r.$,{className:G?"grading-refresh-loop":"",minimal:!0,style:{padding:0},onClick:e=>{D(!0),B(!0)},onAnimationEnd:e=>B(!1),disabled:J,children:(0,t.jsx)(l.I,{htmlTitle:"Refresh",icon:d.W.REFRESH})})]}),(0,t.jsx)(f.Ay,{showAllSubmissions:W,totalRows:s.count,pageSize:S,submissions:X,updateEntries:K})]}),fullWidth:!0})},ed=el;ed.displayName="Grading";let ec=el}}]);
//# sourceMappingURL=85647.f11cec67.js.map