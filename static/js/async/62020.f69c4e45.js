"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([["62020"],{25817:function(e,s,t){t.d(s,{A:()=>o});var n=t(74848),a=t(81168),i=t(87497),l=t(39798),r=t(79642);let o=({options:e,selectedValue:s,onClick:t,buttonProps:o,popoverProps:c})=>{let d;return(0,n.jsx)(a.A,{...c,interactionKind:"click",content:(0,n.jsx)(i.W,{children:e.map(({value:e,label:s})=>(0,n.jsx)(l.D,{text:s,onClick:()=>{t?.(e)}},s))}),children:(0,n.jsx)(r.$,{...o,children:(d=e.find(({value:e})=>e===s),d?.label)})})}},57069:function(e,s,t){t.d(s,{i1:()=>a,qD:()=>i});var n=t(96540);let a={editorBinding:""},i=n.createContext(null)},94447:function(e,s,t){t.r(s),t.d(s,{default:()=>eK,Component:()=>ez});var n=t(74848),a=t(96540),i=t(83509),l=t(94894),r=t(11888),o=t(9132),c=t(57178),d=t(79642),u=t(99389),h=t(41537),p=t(53991),x=t(29124),m=t(12003),g=t(81168),j=t(54348),b=t(28761),C=t(58830),f=t(66314),v=t(53978),N=t.n(v),A=t(81333),w=t(38783),y=t(39798),S=t(87497),T=t(82378),k=t(64313),E=t(64907),O=t(35505),I=t(39572);t(88462);var L=t(15145),W=t(64088),R=t(6592),M=t(40249),P=t(6726);let D=e=>{let{item:s}=e,t=s.maxXp<=0&&0===s.xp,a=(0,n.jsxs)("div",{className:"xp-details","data-testid":"profile-xp-details",children:[(0,n.jsx)("div",{className:"title","data-testid":"profile-title",children:"XP"}),(0,n.jsxs)("div",{className:"value","data-testid":"profile-value",children:[s.xp," / ",s.maxXp]}),(0,n.jsx)(R.z,{animate:!1,className:"value-bar"+e.parseColour(e.getFrac(s.xp,s.maxXp)),stripes:!1,value:e.getFrac(s.xp,s.maxXp)})]});return(0,n.jsx)(l.k2,{className:"profile-summary-navlink",target:"_blank",to:`/courses/${e.courseId}/${(0,P.zS)(s.type)}/${s.id}/0`,"data-testid":"profile-summary-navlink",children:(0,n.jsx)(M.P,{className:"profile-summary-callout",icon:e.renderIcon(s.type),title:s.title,"data-testid":"profile-summary-callout",children:t?"":a},`${s.title}-${s.id}`)},`${s.title}-${s.id}`)},F=e=>{let s,{isLoggedIn:t,isEnrolledInACourse:l,name:r,role:o,assessmentOverviews:c,assessmentConfigurations:d,xp:u,courseId:p}=(0,W.wV)(),x=(0,i.wA)();(0,a.useEffect)(()=>{t&&l&&!c&&x(I.A.fetchAssessmentOverviews())},[c,x,t,l,u]),(0,a.useEffect)(()=>{l&&!u&&x(I.A.fetchTotalXp())},[l,x,u]);let[m,g]=(0,a.useState)(t&&l&&c);if((0,a.useEffect)(()=>{g(t&&l&&c)},[c,t,l]),m){let e=c.filter(e=>"submitted"===e.status).length,t=u||0,a=L.A.caFulfillmentLevel,i=1e3*a,l=(0,n.jsx)("div",{className:"profile-header",children:(0,n.jsxs)("div",{className:"profile-username",children:[(0,n.jsx)("div",{className:"name",children:r}),(0,n.jsx)("div",{className:"role",children:o})]})});if(0===e)s=(0,n.jsxs)("div",{className:"profile-content",children:[l,(0,n.jsx)("div",{className:"profile-placeholder","data-testid":"profile-placeholder",children:"There are no closed assessments to render grade and XP of."})]});else{let e=(e,s)=>s<=0||e/s>1?1:e/s,r=e=>e<0?"":e>=.8?" progress-steelblue":e>=.45?" progress-deepskyblue":" progress-skyblue",o=e=>{let s=[f.W.FLAME,f.W.LIGHTBULB,f.W.PREDICTIVE_ANALYSIS,f.W.COMPARISON,f.W.MANUAL];if(!d)return f.W.PULSE;{let t=d.findIndex(s=>s.type===e);return t>0?s[t]:f.W.PULSE}},u=c.filter(e=>e.isGradingPublished).map((s,t)=>(0,n.jsx)(D,{item:s,getFrac:e,parseColour:r,renderIcon:o,courseId:p},t));s=(0,n.jsxs)("div",{className:"profile-content",children:[l,(0,n.jsx)("div",{className:"profile-progress","data-testid":"profile-progress",children:(0,n.jsxs)("div",{className:"profile-xp",children:[(0,n.jsx)(O.y,{className:"profile-spinner"+r(e(t,i)),size:144,value:e(t,i),"data-testid":"profile-spinner"}),(0,n.jsx)("div",{className:"type","data-testid":"profile-type",children:"XP Progress"}),(0,n.jsxs)("div",{className:"total-value","data-testid":"profile-total-value",children:[t," / ",i,"*"]}),(0,n.jsxs)("div",{className:"percentage","data-testid":"profile-percentage",children:[(100*e(t,i)).toFixed(2),"%"]})]})}),(0,n.jsxs)("div",{className:"profile-xp-footer",children:["*",i,"XP needed to reach full CA level of ",a]}),(0,n.jsx)("div",{className:"profile-callouts","data-testid":"profile-callouts",children:u})]})}}else s=(0,n.jsx)(E.I,{description:"Loading...",icon:(0,n.jsx)(O.y,{})});return(0,n.jsx)(h._,{className:"profile",icon:f.W.USER,isCloseButtonShown:!0,isOpen:e.isOpen,onClose:e.onClose,title:"User Profile",position:"left",size:h.f.SMALL,children:s})};var B=t(45111),_=t(31643);let H=e=>(0,n.jsx)(B.l,{style:{textAlign:"justify"},icon:f.W.HELP,isCloseButtonShown:!0,isOpen:e.isOpen,onClose:e.onClose,title:"About",children:(0,n.jsxs)(_.R,{children:[(0,n.jsxs)("p",{children:["The ",(0,n.jsx)("i",{children:"Source Academy"})," is a computer-mediated learning environment for studying the structure and interpretation of computer programs. Students write and run their programs in their web browser, using sublanguages of JavaScript called"," ",(0,n.jsx)("a",{href:"https://docs.sourceacademy.org/",children:"Source"}),", designed for the textbook"," ",(0,n.jsx)("a",{href:"https://sourceacademy.org/sicpjs/",children:"Structure and Interpretation of Computer Programs, JavaScript Edition"}),"."]}),(0,n.jsxs)("p",{children:["The Source Academy is available under the Apache License 2.0 at the GitHub organisation"," ",(0,n.jsx)("a",{href:"https://github.com/source-academy",children:"source-academy"}),". More information and resources are available at the ",(0,n.jsx)("a",{href:"https://about.sourceacademy.org",children:"about pages"})," of the Source Academy."]})]})});var $=t(12316),V=t(81720);let G=({isOpen:e,onClose:s,courses:t,courseId:a})=>{let i=(0,l.Zp)(),r=t.map(e=>({value:e.courseId,label:e.courseName.concat(e.viewable?"":" - disabled"),disabled:!e.viewable&&e.role!==V.Xh.Admin}));return(0,n.jsx)(B.l,{icon:f.W.PROPERTIES,isCloseButtonShown:!0,isOpen:e,onClose:s,title:"My Courses",children:(0,n.jsxs)(_.R,{children:[(0,n.jsx)("p",{children:"Select a course to switch to:"}),(0,n.jsx)($.g,{value:a,options:r,fill:!0,onChange:e=>{i(`/courses/${e.currentTarget.value}`),s()},disabled:t.length<=1})]})})};var U=t(35537),X=t(19551),q=t(58270),z=t(61517),K=t(11903),J=t(10720),Q=t(51138),Y=t(11678),Z=t(50046),ee=t(31465);t(43157);var es=t(48299),et=t(41397);let en=e=>{let s,t=(0,i.wA)(),[l,r]=a.useState({courseName:"",courseShortName:"",viewable:!0,enableGame:!0,enableAchievements:!0,enableSourcecast:!0,enableStories:!1,sourceChapter:Z.Chapter.SOURCE_1,sourceVariant:Z.Variant.DEFAULT,moduleHelpText:""}),[o,c]=a.useState("WRITE"),u=[{value:Z.Chapter.SOURCE_1},{value:Z.Chapter.SOURCE_2},{value:Z.Chapter.SOURCE_3},{value:Z.Chapter.SOURCE_4}],h=a.useCallback((e,s,t)=>{e!==s&&c(e)},[c]);return(0,n.jsx)(B.l,{className:"create-course",icon:f.W.ADD,isCloseButtonShown:!0,canOutsideClickClose:!1,isOpen:e.isOpen,onClose:e.onClose,title:"Create Course",children:(0,n.jsxs)(_.R,{children:[(0,n.jsx)(U.H6,{children:"Create your own Source Academy course and manage your own learners!"}),(0,n.jsx)("br",{}),(0,n.jsx)(X.g,{helperText:"Please enter the course name that will be used for course selection",label:"Course Name",labelInfo:"(* required)",labelFor:"courseName",children:(0,n.jsx)(q.M,{id:"courseName",value:l.courseName,onChange:e=>r({...l,courseName:e.target.value})})}),(0,n.jsx)(X.g,{helperText:"Usually the module code of the course. This will be displayed on the top left.",label:"Course Short Name",labelInfo:"(optional)",labelFor:"courseShortName",children:(0,n.jsx)(q.M,{id:"courseShortName",value:l.courseShortName,onChange:e=>r({...l,courseShortName:e.target.value})})}),(0,n.jsxs)(X.g,{helperText:"The module help text will be used in the course help dialog.",labelFor:"moduleHelpText",children:[(0,n.jsx)(z.E,{tagName:"span",children:"Module Help Text\xa0"}),(0,n.jsx)(z.E,{tagName:"span",className:"optional-text",children:"(optional)"}),(0,n.jsxs)(K.t,{selectedTabId:o,onChange:h,className:"module-help-text-tabs",children:[(0,n.jsx)(J.o,{id:"WRITE",title:"Write"}),(0,n.jsx)(J.o,{id:"PREVIEW",title:"Preview"})]}),"WRITE"===o&&(0,n.jsx)(Q.f,{id:"moduleHelpText",className:"input-textarea",fill:!0,value:l.moduleHelpText,onChange:e=>r({...l,moduleHelpText:e.target.value})}),"PREVIEW"===o&&(0,n.jsx)("div",{className:"input-markdown",children:(0,n.jsx)(es.A,{content:l.moduleHelpText||"",openLinksInNewWindow:!0})})]}),(0,n.jsxs)("div",{className:"boolean-container",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(Y.dO,{checked:l.viewable,inline:!0,label:"Viewable",onChange:e=>r({...l,viewable:e.target.checked})}),(0,n.jsx)(Y.dO,{checked:l.enableAchievements,inline:!0,label:"Enable Achievements",onChange:e=>r({...l,enableAchievements:e.target.checked})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(Y.dO,{checked:l.enableGame,inline:!0,label:"Enable Game",onChange:e=>r({...l,enableGame:e.target.checked})}),(0,n.jsx)(Y.dO,{checked:l.enableSourcecast,inline:!0,label:"Enable Sourcecast",onChange:e=>r({...l,enableSourcecast:e.target.checked})}),(0,n.jsx)(Y.dO,{checked:l.enableStories,inline:!0,label:"Enable Stories",onChange:e=>r({...l,enableStories:e.target.checked})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(X.g,{label:"Default Source Chapter",labelInfo:"(configurable later on)",labelFor:"source-chapter",children:(0,n.jsx)($.g,{id:"source-chapter",options:u,value:l.sourceChapter,onChange:e=>{r({...l,sourceChapter:parseInt(e.target.value)})},fill:!0})}),(0,n.jsx)(X.g,{label:"Default Source Variant",labelInfo:"(configurable later on)",labelFor:"source-variant",children:(0,n.jsx)($.g,{id:"source-variant",options:(s=l.sourceChapter,V.ph.filter(e=>e.chapter===s).map(e=>({label:e.variant.replace(/^\w/,e=>e.toUpperCase()),value:e.variant}))),value:l.sourceVariant,onChange:e=>{r({...l,sourceVariant:e.target.value})},fill:!0})})]}),(0,n.jsx)("div",{className:"create-course-button-container",children:(0,n.jsx)(d.$,{text:"Create Course",onClick:()=>{""===l.courseName?(0,et.JB)("Course Name cannot be empty!"):(t(ee.A.createCourse(l)),e.onClose())}})})]})})},ea=e=>{let s=(0,W.N4)(e=>e.session.moduleHelpText);return(0,n.jsx)(B.l,{style:{textAlign:"justify"},icon:f.W.ERROR,isCloseButtonShown:!0,isOpen:e.isOpen,onClose:e.onClose,title:"Help",children:(0,n.jsx)(_.R,{children:s?(0,n.jsx)(es.A,{content:s,openLinksInNewWindow:!0}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["We recommend recent updates of the browsers ",(0,n.jsx)("b",{children:"Google Chrome"}),","," ",(0,n.jsx)("b",{children:"Microsoft Edge"}),", or ",(0,n.jsx)("b",{children:"Mozilla Firefox"})," to visit the Source Academy."]}),(0,n.jsxs)("p",{children:["If you encounter issues with the Source Academy using these browsers, please use the issue system of the"," ",(0,n.jsx)("a",{href:"https://github.com/source-academy/frontend/issues",children:"Source Academy frontend repository on GitHub"}),"."]})]})})})};var ei=t(92473),el=t(68178),er=t(57069),eo=t(91138),ec=t(53734);let ed=Object.keys(ec.ES).map(e=>({label:ec.ES[e]?.name,value:e})),eu=()=>{let[e,s]=(0,a.useState)(eo.A.language);return(0,n.jsxs)(X.g,{label:"Language: ",labelFor:"language-binding",inline:!0,children:[(0,n.jsx)($.g,{id:"language-binding",options:ed,value:e,onChange:e=>{let t=e.target.value;s(t),eo.A.changeLanguage(t)}}),(0,n.jsx)(ei.m,{position:el.$.TOP,className:"form-field-help-text",content:"Choose your language.",children:(0,n.jsx)(b.I,{icon:f.W.Help})})]})},eh=[{label:"None",value:""},{label:"Vim",value:"vim"},{label:"Emacs",value:"emacs"}],ep=({isOpen:e,onClose:s})=>{let[t,i]=(0,a.useContext)(er.qD),r=(0,l.Zp)();return(0,n.jsx)(B.l,{className:"settings",icon:f.W.COG,isCloseButtonShown:!0,isOpen:e,onClose:s,title:"Settings",children:(0,n.jsxs)(_.R,{children:[(0,n.jsxs)(X.g,{label:"Editor Binding: ",labelFor:"editor-binding",inline:!0,children:[(0,n.jsx)($.g,{id:"editor-binding",options:eh,value:t.editorBinding,onChange:e=>{i({...t,editorBinding:e.target.value})}}),(0,n.jsx)(ei.m,{position:el.$.TOP,className:"form-field-help-text",content:"Optional editor bindings for advanced users. Set to 'None' for default text editor behaviour.",children:(0,n.jsx)(b.I,{icon:f.W.Help})})]}),(0,n.jsx)(eu,{}),(0,n.jsx)(d.$,{onClick:()=>{r("/features"),s()},icon:f.W.FLAG,children:"Feature Flags"})]})})},ex=()=>{let[e,s]=(0,a.useState)(!1),[t,l]=(0,a.useState)(!1),[r,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1),{t:m}=(0,A.Bd)("commons",{keyPrefix:"dropdown"}),{isLoggedIn:b,name:C,courses:v,courseId:N}=(0,W.wV)(),w=(0,i.wA)(),E=()=>{s(e=>!e)},O=()=>{l(e=>!e)},I=()=>o(e=>!e),L=()=>d(e=>!e),R=()=>h(e=>!e),M=()=>x(e=>!e),P=b&&null!=N?(0,n.jsx)(y.D,{icon:f.W.USER,onClick:L,text:C.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())}):null,D=b?(0,n.jsx)(y.D,{icon:f.W.PROPERTIES,onClick:R,text:m("My Courses")}):null,B=b?(0,n.jsx)(y.D,{icon:f.W.ADD,onClick:M,text:m("Create Course")}):null,_=b?(0,n.jsx)(y.D,{icon:f.W.LOG_OUT,text:m("Logout"),onClick:()=>w((0,T.je)())}):null,$=(0,n.jsxs)(S.W,{children:[P,D,B,(0,n.jsx)(y.D,{icon:f.W.COG,onClick:E,text:m("Settings")}),(0,n.jsx)(y.D,{icon:f.W.HELP,onClick:O,text:m("About")}),(0,n.jsx)(y.D,{icon:f.W.ERROR,onClick:I,text:m("Help")}),_]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.A,{content:$,inheritDarkTheme:!1,placement:j.yX.BOTTOM,children:(0,n.jsx)(k.A,{icon:f.W.CARET_DOWN})}),(0,n.jsx)(ep,{isOpen:e,onClose:E}),(0,n.jsx)(H,{isOpen:t,onClose:O}),(0,n.jsx)(ea,{isOpen:r,onClose:I}),b?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G,{isOpen:u,onClose:R,courses:v,courseId:N}),(0,n.jsx)(en,{isOpen:p,onClose:M}),(0,n.jsx)(F,{isOpen:c,onClose:L})]}):null]})};var em=t(4303),eg=t(83365);let ej=[f.W.FLAME,f.W.LIGHTBULB,f.W.PREDICTIVE_ANALYSIS,f.W.COMPARISON,f.W.MANUAL,f.W.GRAPH,f.W.FORM,f.W.LAB_TEST,f.W.CALCULATOR],eb=({assessmentTypes:e=[],courseId:s,isEnrolledInACourse:t})=>e.map((e,n)=>({to:`/courses/${s}/${(0,P.zS)(e)}`,icon:ej[n],text:e,disabled:!t,hasNotifications:!0,hiddenInBreakpoints:["xs","sm"]})),eC=({isEnrolledInACourse:e,courseId:s,role:t})=>[...(({courseId:e,role:s})=>{let t=s===V.Xh.Admin||s===V.Xh.Staff,n=s===V.Xh.Admin;return[{to:`/courses/${e}/groundcontrol`,icon:f.W.SATELLITE,text:"Ground Control",disabled:!n,hiddenInBreakpoints:["xs","sm"]},{to:`/courses/${e}/dashboard`,icon:f.W.GLOBE,text:"Dashboard",disabled:!t,hiddenInBreakpoints:["xs","sm"]},{to:`/courses/${e}/sourcereel`,icon:f.W.MOBILE_VIDEO,text:"Sourcereel",disabled:!t,hiddenInBreakpoints:["xs","sm","md"]},{to:`/courses/${e}/teamformation`,icon:f.W.FORM,text:"Team Formation",disabled:!t,hiddenInBreakpoints:["xs","sm","md"]},{to:`/courses/${e}/grading`,icon:f.W.ENDORSED,text:"Grading",disabled:!t,hasNotifications:!0,hiddenInBreakpoints:["xs","sm","md"]},{to:`/courses/${e}/gamesimulator`,icon:f.W.CROWN,text:"Game Simulator",disabled:!t,hiddenInBreakpoints:["xs","sm","md"]},{to:`/courses/${e}/adminpanel`,icon:f.W.SETTINGS,text:"Admin Panel",disabled:!n,hiddenInBreakpoints:["xs","sm","md","lg"]}]})({courseId:s,role:t})],ef=({assessmentTypes:e})=>{let{role:s,courseId:t}=(0,W.wV)(),i=!!s,l=(0,a.useMemo)(()=>eb({assessmentTypes:e,courseId:t,isEnrolledInACourse:i}),[e,t,i]),r=(0,a.useMemo)(()=>eC({isEnrolledInACourse:i,courseId:t,role:s}),[i,t,s]);return void 0!==t&&i?(0,n.jsxs)(m.F,{className:"NavigationBar secondary-navbar",children:[(0,n.jsx)(o.y,{align:c.C.LEFT,children:l.map((e,s)=>(0,n.jsx)(eV,{...e},s))}),(0,n.jsx)(o.y,{align:c.C.RIGHT,children:r.map((e,s)=>(0,n.jsx)(eV,{...e},s))})]}):null};var ev=t(48003),eN=t(25817),eA=t(20659),ew=t(88663),ey=t(96830),eS=t(18509);let eT=()=>{let[e,s]=(0,a.useState)(!1),t=(0,W.N4)(e=>e.playground.languageConfig.mainLanguage),l=(0,i.wA)(),r={JavaScript:V.ph["0"],Python:V.hM["0"],Scheme:V.L5["0"],Java:V.eo["0"],C:V.h_["0"]};return(0,n.jsx)(eN.A,{options:V.Fc.map(e=>({value:e,label:e})),onClick:e=>{let{chapter:t,variant:n}=r[e];l((0,eS.yO)((0,V.lr)(t,n))),l(ey.A.chapterSelect(t,n,"playground")),s(!1)},selectedValue:t,popoverProps:{position:j.yX.BOTTOM_RIGHT,onClose:()=>s(!1),isOpen:e},buttonProps:{rightIcon:"caret-down",onClick:()=>s(!0),"data-testid":"NavigationBarLangSelectButton"}})},ek=()=>{let[e,s]=(0,a.useState)(!1),t=(0,W.N4)(e=>e.languageDirectory.selectedLanguageId),l=(0,i.wA)(),r=(0,W.N4)(e=>e.languageDirectory.languages).map(e=>({value:e.id,label:e.name}));return(0,ev.i)(eA.j)?(0,n.jsx)(eN.A,{options:r,onClick:e=>{l(ew.A.setSelectedLanguage(e)),s(!1)},selectedValue:t??void 0,popoverProps:{position:j.yX.BOTTOM_RIGHT,onClose:()=>s(!1),isOpen:e},buttonProps:{rightIcon:"caret-down",onClick:()=>s(!0),"data-testid":"NavigationBarLangSelectButton"}}):(0,n.jsx)(eT,{})};var eE=t(55741),eO=t(49111),eI=t(74213),eL=t(28675),eW=t(86186),eR=t(93816);class eM extends a.PureComponent{constructor(){super(...arguments),this.renderQueryList=e=>{let{inputProps:s={},isOpen:t,overlayProps:a={}}=this.props,{handleKeyDown:i,handleKeyUp:l}=e;return(0,n.jsx)(eO.v,{hasBackdrop:!0,...a,isOpen:t,className:N()(eW.y5,a.className),onClose:this.handleOverlayClose,children:(0,n.jsxs)("div",{className:N()(eW.Xl,e.className),...t?{onKeyDown:i,onKeyUp:l}:{},children:[(0,n.jsx)(q.M,{autoFocus:!0,leftIcon:(0,n.jsx)(eL.v,{}),placeholder:"Search...",size:"large",...s,onChange:e.handleQueryChange,value:e.query}),e.itemList]})})},this.handleOverlayClose=e=>{var s,t,n,a;null==(t=null==(s=this.props.overlayProps)?void 0:s.onClose)||t.call(s,e),null==(a=(n=this.props).onClose)||a.call(n,e)}}static ofType(){return eM}render(){let{isOpen:e,inputProps:s,overlayProps:t,...a}=this.props,i="initialContent"in this.props?this.props.initialContent:null;return(0,n.jsx)(eR.r,{...a,menuProps:{role:"menu"},initialContent:i,renderer:this.renderQueryList})}}eM.displayName=`${eI.l}.Omnibar`;var eP=t(7978),eD=t(20980);let eF=({handleOpenToc:e})=>(0,n.jsx)(k.A,{label:"Table of Contents",onClick:e});var eB=t(44692);let e_=()=>{let[e,s]=a.useState(!1),{section:t}=(0,l.g)(),i=(0,l.Zp)(),r=(0,eD.l)(t),u=(0,eD.E)(t),x=()=>s(!1),g=e=>{i("/sicpjs/"+e)},C=(0,n.jsx)(eF,{handleOpenToc:()=>s(!0)},"toc"),v=r&&(0,n.jsx)("div",{children:(0,n.jsx)(k.A,{label:"Previous",icon:f.W.ARROW_LEFT,onClick:()=>g(r)})},"prev"),N=u&&(0,n.jsx)("div",{children:(0,n.jsx)(k.A,{label:"Next",icon:f.W.ARROW_RIGHT,onClick:()=>g(u),options:{iconOnRight:!0}})},"next"),A={onClose:x,autoFocus:!0,canEscapeKeyClose:!0,canOutsideClickClose:!0,enforceFocus:!0,hasBackdrop:!0,isOpen:e,position:j.yX.LEFT,usePortal:!1};function w(e,s){let t=[...e],n=s;for(let e=0;e<t.length;e++){if(void 0===n||void 0===n.children||!n.children[t[e]])return[];n=n.children[t[e]]}return n.value}function T(e){return w(e.split(" ").reduce((e,s)=>e.length>s.length?e:s,""),W.textTrie).filter(s=>W.idToContentMap[s].toLowerCase().replaceAll("\n"," ").includes(e))}function E(e,s,t=25){let n=s;for(let s=0;s<e.length;s++){if(!n.children[e[s]])return[];n=n.children[e[s]]}let a=[],i=[n];for(;i.length>0&&a.length<t;){let e=i.shift();if(e&&e.value.length>0&&a.push(e.key),e&&e.children)for(let s of Object.values(e.children))i.push(s)}return a}function O(e,s=25){let t=e[0].toLowerCase()+e.slice(1),n=e[0].toUpperCase()+e.slice(1),a=E(t,W.indexTrie,s),i=E(n,W.indexTrie,s);for(;a.length<s&&i.length>0;){let e=i.shift();if(void 0===e){console.log("when searching, got undefined toPush");continue}a.push(e)}return a}function I(e,s=25){let t=e.split(" ");if(0===t.length)return[];if(1===t.length)return E(t[0],W.textTrie,s);let n=T(t.slice(0,-1).join(" ")).map(e=>W.idToContentMap[e].toLowerCase()),a=[];for(;a.length<s&&n.length>0;){let s=n.shift();if(void 0===s)continue;let t=(s=s.replaceAll("\n"," ")).indexOf(e)+e.length;if(t>=e.length){let n=s.slice(t),i=n.search(/[^a-zA-Z _]/);-1===i&&(i=n.length);let l=e+n.slice(0,i);a.includes(l.trim())||a.push(l.trim())}}return a}let W=a.useMemo(()=>{let e=new XMLHttpRequest,s=L.A.sicpBackendUrl+"json/rewritedSearchData.json";if(e.open("GET",s,!1),e.send(),200===e.status)return JSON.parse(e.responseText);throw alert("Unable to get rewrited search data. Error code = "+e.status+" url is "+s),Error("Unable to get search data. Error code = "+e.status+" url is "+s)},[]),[R,M]=a.useState(!1),[P,D]=a.useState("text"),[F,B]=a.useState(null),[_,H]=a.useState(""),[$,V]=a.useState([]),G=(0,n.jsx)(k.A,{label:"Text Search",icon:f.W.SEARCH,onClick:()=>{D("text"),M(!0),H(""),V([])}}),U=(0,n.jsx)(k.A,{label:"Index Search",icon:f.W.SEARCH,onClick:()=>{D("index"),M(!0),H(""),V([])}}),X=(0,n.jsxs)("div",{style:{width:"100%",display:"flex",gap:2,justifyContent:"center"},children:[G,U]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eM,{className:"sicp-search-bar",isOpen:R,inputProps:{disabled:"submenu"===P,placeholder:`${P.charAt(0).toUpperCase()}${P.slice(1)} Search...`},overlayProps:{className:p.OVERLAY_SCROLL_CONTAINER},onClose:()=>M(!1),items:$,onItemSelect:()=>{},query:_,onQueryChange:e=>{if(H(e),0===e.length)return void V([]);switch(P){case"text":V(I(e));break;case"index":V(O(e))}},itemListRenderer:({itemsParentRef:e,renderItem:s,items:t})=>(0,n.jsxs)(S.W,{ulRef:e,children:["submenu"===P&&(0,n.jsxs)(z.E,{className:p.TEXT_MUTED,style:{padding:6},children:["Showing results for ",(0,n.jsx)("strong",{children:_}),"…"," ",(0,n.jsxs)(d.$,{small:!0,intent:"primary",minimal:!0,style:{padding:0,minHeight:0,verticalAlign:"baseline"},onClick:()=>{switch(D(F),B(null),F){case"text":V(I(_));break;case"index":V(O(_))}},children:["back to ",F," search"]})]}),t.map(s)]}),itemRenderer:e=>{switch(P){case"text":case"index":return(0,n.jsx)(y.D,{text:e,onClick:()=>(e=>{switch(H(e),B(P),D("submenu"),P){case"text":V(T(e));break;case"index":V(w(e,W.indexTrie).filter(e=>e.id).sort((e,s)=>e.hasSubindex&&!s.hasSubindex?1:!e.hasSubindex&&s.hasSubindex?-1:e.order.localeCompare(s.order)))}})(e),labelElement:(0,n.jsx)(b.I,{icon:f.W.CARET_RIGHT})});case"submenu":switch(F){case"text":let s;return(0,n.jsx)(y.D,{multiline:!0,text:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eE.v,{minimal:!0,children:["Section ",-1===(s=e.indexOf("#"))?e:e.slice(0,s)]}),(0,n.jsx)("br",{}),((e,s)=>{let t=(e=e.replaceAll("\n"," ").toLowerCase()).indexOf(s),a=t;for(;a>0&&!e[a-1].match(/[^a-zA-Z, _]/);)a--;let i=t+s.length;for(;i<e.length&&!e[i].match(/[^a-zA-Z _,]/);)i++;let l=e.slice(a,i);return a>0&&(l="..."+l),i<e.length&&(l+="..."),l=l.trim(),(0,n.jsxs)(n.Fragment,{children:[l.slice(0,l.indexOf(s)),(0,n.jsx)("mark",{children:(0,n.jsx)("strong",{children:l.slice(l.indexOf(s),l.indexOf(s)+s.length)})}),l.slice(l.indexOf(s)+s.length)]})})(W.idToContentMap[e],_)]}),onClick:()=>{g(e),M(!1)}});case"index":return(0,n.jsx)(y.D,{text:(0,n.jsx)(eP.A,{children:e.text.replaceAll("LATEX: ","")}),onClick:()=>{g(e.id),M(!1)}})}}}}),(0,n.jsxs)(m.F,{className:"SicpNavigationBar secondary-navbar",children:[(0,n.jsx)(o.y,{align:c.C.LEFT,children:C}),(0,n.jsx)(o.y,{align:c.C.RIGHT,children:[v,N]}),(0,n.jsx)(o.y,{align:c.C.CENTER,children:X})]}),(0,n.jsx)(h._,{...A,className:"sicp-toc-drawer",children:(0,n.jsx)(eB.A,{handleCloseToc:x})})]})},eH=({navlinks:e})=>{let[s,t]=(0,a.useState)(!1),i=e.filter(e=>!e.disabled),r=i.length>0,{courseShortName:x,courseId:m}=(0,W.wV)();return(0,n.jsxs)(o.y,{align:c.C.LEFT,children:[r&&(0,n.jsx)(d.$,{onClick:()=>t(!s),icon:f.W.MENU,large:!0,minimal:!0}),(0,n.jsx)(l.k2,{className:"NavigationBar__link",to:L.A.playgroundOnly?"/":null==m?"/welcome":`/courses/${m}`,children:(0,n.jsx)(u.r,{children:(0,n.jsx)(d.$,{className:"app-title",minimal:!0,icon:f.W.SYMBOL_DIAMOND,children:x||L.A.sourceAcademyDeploymentName})})}),r&&(0,n.jsx)(h._,{isOpen:s,position:"left",onClose:()=>t(!1),title:"",className:p.DARK,style:{overflowY:"auto"},children:i.map((e,s)=>(0,n.jsx)(eG,{...e,handleClick:()=>t(!1)},s))})]})},e$=[{to:"/playground",icon:f.W.CODE,text:"Playground"},{to:"/sicpjs",icon:f.W.BOOK,text:"SICP JS"}],eV=e=>{let s=(0,W.Qs)(),t=e.hiddenInBreakpoints?.some(e=>s[e]);return e.disabled?null:(0,n.jsxs)(l.k2,{className:({isActive:e})=>N()(e&&p.ACTIVE),to:e.to,title:e.text,children:[(0,n.jsx)(d.$,{minimal:!0,icon:e.icon,children:!t&&(0,n.jsx)(A.wD,{ns:"commons",keyPrefix:"navigationBar",children:s=>s(e.text,{defaultValue:e.text})})}),e.hasNotifications&&(0,n.jsx)(em.A,{notificationFilter:(0,eg.SA)(e.text),disableHover:!0})]},e.text)},eG=e=>e.disabled?null:(0,n.jsxs)(l.k2,{to:e.to,className:({isActive:e})=>N()(e&&p.ACTIVE),onClick:e.handleClick,children:[(0,n.jsx)(d.$,{minimal:!0,large:!0,icon:e.icon,children:(0,n.jsx)(A.wD,{ns:"commons",keyPrefix:"navigationBar",children:s=>s(e.text,{defaultValue:e.text})})}),e.hasNotifications&&(0,n.jsx)(em.A,{notificationFilter:(0,eg.SA)(e.text),disableHover:!0})]},e.text),eU=()=>{let e,s,t,i,{isMobileBreakpoint:r}=(0,W.Qs)(),h=(0,l.zy)(),{isLoggedIn:v,isEnrolledInACourse:A,role:y,courseId:S,courseShortName:T,enableAchievements:k,enableOverallLeaderboard:E,enableContestLeaderboard:O,enableSourcecast:I,enableStories:R,assessmentConfigurations:M}=(0,W.wV)(),P=(0,a.useMemo)(()=>M?.map(e=>e.type),[M]);x.$.onlyShowFocusOnTabs();let D=(0,a.useMemo)(()=>eb({assessmentTypes:P,courseId:S,isEnrolledInACourse:A}),[P,S,A]),F=(0,a.useMemo)(()=>[{to:`/courses/${S}/sourcecast`,icon:f.W.MUSIC,text:"Sourcecast",disabled:!(A&&I)},{to:"/playground",icon:f.W.CODE,text:"Playground",disabled:!A},{to:"/sicpjs",icon:f.W.BOOK,text:"SICP JS",disabled:!v},{to:`/courses/${S}/achievements`,icon:f.W.MOUNTAIN,text:"Achievements",disabled:!(A&&k)},{to:`/courses/${S}/stories`,icon:f.W.GIT_REPO,text:"Stories",disabled:!(A&&R)},{to:`/courses/${S}/leaderboard`,icon:f.W.TIMELINE_BAR_CHART,text:"Leaderboard",disabled:!(A&&(O||E))}],[S,A,I,R,v,k,O,E]),B=(0,a.useMemo)(()=>eC({isEnrolledInACourse:A,courseId:S,role:y}),[A,S,y]),_=(0,a.useMemo)(()=>[...D,...F,...B],[D,F,B]),H=(0,n.jsxs)(o.y,{align:c.C.RIGHT,children:[(0,n.jsx)(ek,{}),(0,n.jsx)(l.k2,{className:({isActive:e})=>N()("NavigationBar__link",p.BUTTON,p.MINIMAL,{[p.ACTIVE]:e}),to:"/contributors",children:(0,n.jsx)(b.I,{icon:f.W.HEART})}),(0,n.jsx)("div",{className:"visible-xs",children:(0,n.jsx)(C.c,{className:"thin-divider"})}),(0,n.jsx)("div",{className:"hidden-xs",children:(0,n.jsx)(C.c,{className:"default-divider"})}),(0,n.jsx)(ex,{})]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(m.F,{className:N()("NavigationBar","primary-navbar","primary-navbar-e6yDiK",p.DARK),children:[L.A.playgroundOnly?r?(0,n.jsx)(eH,{navlinks:e$}):(0,n.jsx)(o.y,{align:c.C.LEFT,children:e$.map((e,s)=>(0,n.jsx)(eV,{...e},s))}):r?(0,n.jsx)(eH,{navlinks:_}):(e=eb({assessmentTypes:P,courseId:S,isEnrolledInACourse:A}),s=(0,n.jsx)(m.F,{children:(0,n.jsx)(o.y,{children:e.map((e,s)=>(0,n.jsx)(eV,{...e},s))})}),t=["/playground","/sicpjs","/contributors",`/courses/${S}/sourcecast`,`/courses/${S}/achievements`,`/courses/${S}/leaderboard`],i=null!=S&&!!t.find(e=>h.pathname.startsWith(e)),(0,n.jsxs)(o.y,{align:c.C.LEFT,children:[(0,n.jsx)(g.A,{position:j.yX.BOTTOM_RIGHT,interactionKind:"hover",content:s,popoverClassName:"desktop-navbar-popover",disabled:!i,children:(0,n.jsx)(l.k2,{className:"NavigationBar__link",to:null==S?"/welcome":`/courses/${S}`,children:(0,n.jsx)(u.r,{children:(0,n.jsx)(d.$,{className:"app-title",minimal:!0,icon:f.W.SYMBOL_DIAMOND,active:!t.find(e=>h.pathname.startsWith(e)),children:T||L.A.sourceAcademyDeploymentName})})})}),F.map((e,s)=>(0,n.jsx)(eV,{...e},s))]})),H]}),(0,n.jsxs)(w.uE,{children:[(0,n.jsx)(l.qh,{path:"/playground/*",element:null}),(0,n.jsx)(l.qh,{path:"/contributors",element:null}),(0,n.jsx)(l.qh,{path:"/courses/:courseId/sourcecast",element:null}),(0,n.jsx)(l.qh,{path:"/courses/:courseId/achievements",element:null}),(0,n.jsx)(l.qh,{path:"/courses/:courseId/leaderboard/*",element:null}),(0,n.jsx)(l.qh,{path:"/sicpjs/:section?",element:(0,n.jsx)(e_,{})}),(0,n.jsx)(l.qh,{path:"*",element:L.A.playgroundOnly||!A||r?null:(0,n.jsx)(ef,{assessmentTypes:P})})]})]})};var eX=t(8702);let eq=()=>{let e=(0,i.wA)(),{isLoggedIn:s}=(0,W.wV)(),t=/iPhone|iPad|Android/.test(navigator.userAgent),o=window.matchMedia("(display-mode: standalone)").matches,c=a.useRef({height:0,width:0}),[d,u]=(0,W.Vc)(L.A.workspaceSettingsLocalStorageKey,er.i1);return a.useEffect(()=>{s&&e(I.A.fetchUserAndCourse())},[]),a.useEffect(()=>{let e=()=>{window.innerHeight<c.current.height&&window.innerWidth===c.current.width||document.documentElement.style.setProperty("--application-height",window.innerHeight+"px"),c.current={height:window.innerHeight,width:window.innerWidth}};return!o&&t&&(e(),window.addEventListener("resize",e)),()=>{!o&&t&&window.removeEventListener("resize",e)}},[o,t]),a.useEffect(()=>{window.confirm||(window.confirm=e=>(console.log(`Confirmation automatically accepted: ${e??"No text provided"}`),!0));let s=r.Ay.ExtensionPing(window.origin);(0,r.h0)(s),window.addEventListener("message",s=>{let t=s.data;if(s.origin.startsWith("vscode-webview://"))switch(t.type){case r.M9.ExtensionPong:if(console.log("Received WebviewStarted message, will set vsc"),e(eX.A.setVscode()),t.token){let s=JSON.parse(t.token.trim());console.log(`FRONTEND: WebviewStarted: ${s}`),e(I.A.setTokens({accessToken:s.accessToken,refreshToken:s.refreshToken})),e(I.A.fetchUserAndCourse())}break;case r.M9.Text:{let{workspaceLocation:s,code:n}=t;console.log(`FRONTEND: TextMessage: ${n}`),e(ey.A.updateEditorValue(s,0,n));break}case r.M9.EvalEditor:e(ey.A.evalEditor(t.workspaceLocation));break;case r.M9.Navigate:window.location.pathname=t.route;break;case r.M9.McqQuestion:e(ey.A.showMcqPane(t.workspaceLocation,t.options));break;case r.M9.McqAnswer:console.log(`FRONTEND: MCQAnswerMessage: ${t}`),e(I.A.submitAnswer(t.questionId,t.choice));break;case r.M9.AssessmentAnswer:e(I.A.submitAnswer(t.questionId,t.answer));break;case r.M9.SetEditorBreakpoints:e(ey.A.setEditorBreakpoint(t.workspaceLocation,0,t.newBreakpoints))}})},[]),(0,n.jsx)(er.qD.Provider,{value:[d,u],children:(0,n.jsxs)("div",{className:"Application",children:[(0,n.jsx)(eU,{}),(0,n.jsx)("div",{className:"Application__main",children:(0,n.jsx)(l.sv,{})})]})})},ez=eq;ez.displayName="Application";let eK=eq},48003:function(e,s,t){t.d(s,{i:()=>a});var n=t(64088);function a(e){let{flagName:s,defaultValue:t}=e;return(0,n.N4)(e=>e.featureFlags.modifiedFlags[s])??t}},4303:function(e,s,t){t.d(s,{A:()=>p});var n=t(74848),a=t(55741),i=t(31365),l=t(81168),r=t(80667),o=t(54348);t(96540);var c=t(83509),d=t(39572),u=t(64088),h=t(83365);let p=e=>{let s=(0,c.wA)(),{notifications:t}=(0,u.wV)(),p=e.notificationFilter?e.notificationFilter(t):t;if(!p.length)return null;let x=(0,n.jsx)(a.v,{intent:i.J.DANGER,round:!0,large:e.large,"data-testid":"NotificationBadge",children:p.length});if(!e.disableHover){let t=(0,n.jsx)("div",{className:"col",children:p.map(e=>(0,n.jsx)(a.v,{className:"row badge-tag",minimal:!0,multiline:!0,onRemove:()=>s(d.A.acknowledgeNotifications((0,h.V8)(e.id))),children:(e=>{switch(e){case"new":return"This assessment is new.";case"submitted":return"This submission is new.";case"unsubmitted":return"This assessment has been unsubmitted.";case"published_grading":return"This submission's grading has been published.";case"unpublished_grading":return"This submission's grading has been unpublished.";case"new_message":return"There are new messages.";default:return"Unknown notification"}})(e.type)},`${e.id}`))});return(0,n.jsx)(l.A,{className:e.className,content:t,interactionKind:r.E.HOVER,placement:o.yX.RIGHT,hoverOpenDelay:50,hoverCloseDelay:50,lazy:!0,children:x})}return x}},83365:function(e,s,t){function n(e){return s=>s.filter(s=>!s.submission_id&&s.assessment_id===e)}function a(e){return s=>s.filter(s=>"Grading"===e?void 0!==s.submission_id:!s.submission_id&&e===s.assessment_type)}function i(e){return s=>s.filter(s=>s.id===e)}t.d(s,{SA:()=>a,V8:()=>i,iL:()=>n})},43157:function(e,s,t){t.d(s,{A:()=>m});var n=t(74848),a=t(51138),i=t(35537),l=t(19551),r=t(58270),o=t(11903),c=t(10720),d=t(5193),u=t(11678),h=t(96540),p=t(64088),x=t(48299);let m=e=>{let{isMobileBreakpoint:s}=(0,p.Qs)(),[t,m]=h.useState("WRITE"),{courseName:g,courseShortName:j,viewable:b,enableGame:C,enableAchievements:f,enableOverallLeaderboard:v,enableContestLeaderboard:N,topLeaderboardDisplay:A,topContestLeaderboardDisplay:w,enableSourcecast:y,enableStories:S,moduleHelpText:T}=e.courseConfiguration,k=(0,n.jsx)(a.f,{id:"moduleHelpText",className:"input-textarea",fill:!0,value:T||"",onChange:s=>e.setCourseConfiguration({...e.courseConfiguration,moduleHelpText:s.target.value})}),E=(0,n.jsx)("div",{className:"input-markdown",children:(0,n.jsx)(x.A,{content:T||"",openLinksInNewWindow:!0})}),O=h.useCallback((e,s,t)=>{e!==s&&m(e)},[m]);return(0,n.jsxs)("div",{className:"course-configuration",children:[(0,n.jsx)(i.H2,{children:g}),(0,n.jsx)(i.H3,{children:j}),(0,n.jsxs)("div",{className:"inputs",children:[(0,n.jsxs)("div",{className:"text",children:[(0,n.jsx)(l.g,{helperText:"Please enter the course name that will be used for course selection.",inline:!0,label:"Course Name",labelFor:"courseName",children:(0,n.jsx)(r.M,{id:"courseName",defaultValue:g,onChange:s=>e.setCourseConfiguration({...e.courseConfiguration,courseName:s.target.value})})}),(0,n.jsx)(l.g,{helperText:"Please enter the course short name. This will be displayed on the top left.",inline:!0,label:"Course Short Name",labelFor:"courseShortName",children:(0,n.jsx)(r.M,{id:"courseShortName",defaultValue:j,onChange:s=>e.setCourseConfiguration({...e.courseConfiguration,courseShortName:s.target.value})})}),(0,n.jsxs)(l.g,{helperText:"Please enter the module help text that will be used in the course help dialog.",inline:!0,label:"Module Help Text",labelFor:"moduleHelpText",children:[(0,n.jsxs)(o.t,{selectedTabId:t,onChange:O,className:"module-help-text-tabs",children:[(0,n.jsx)(c.o,{id:"WRITE",title:"Write"}),(0,n.jsx)(c.o,{id:"PREVIEW",title:"Preview"})]}),"WRITE"===t&&k,"PREVIEW"===t&&E]}),(0,n.jsx)(l.g,{helperText:"Enter the Top XX students to be displayed on the Overall Leaderboard",inline:!0,label:"Top Leaderboard Display",labelFor:"topLeaderboardDisplay",children:(0,n.jsx)(r.M,{id:"topLeaderboardDisplay",value:String(A),onChange:s=>e.setCourseConfiguration({...e.courseConfiguration,topLeaderboardDisplay:Number(s.target.value)})})}),(0,n.jsx)(l.g,{helperText:"Enter the Top XX students to be displayed on the Contest Leaderboard",inline:!0,label:"Top Contest Leaderboard Display",labelFor:"topContestLeaderboardDisplay",children:(0,n.jsx)(r.M,{id:"topContestLeaderboardDisplay",value:String(w),onChange:s=>e.setCourseConfiguration({...e.courseConfiguration,topContestLeaderboardDisplay:Number(s.target.value)})})})]}),!s&&(0,n.jsx)(d.c,{}),(0,n.jsxs)("div",{className:"booleans",children:[(0,n.jsx)(u.dO,{checked:b,label:"Viewable",onChange:s=>e.setCourseConfiguration({...e.courseConfiguration,viewable:s.target.checked})}),(0,n.jsx)(u.dO,{checked:C,label:"Enable Game",onChange:s=>e.setCourseConfiguration({...e.courseConfiguration,enableGame:s.target.checked})}),(0,n.jsx)(u.dO,{checked:f,label:"Enable Achievements",onChange:s=>e.setCourseConfiguration({...e.courseConfiguration,enableAchievements:s.target.checked})}),(0,n.jsx)(u.dO,{checked:y,label:"Enable Sourcecast",onChange:s=>e.setCourseConfiguration({...e.courseConfiguration,enableSourcecast:s.target.checked})}),(0,n.jsx)(u.dO,{checked:S,label:"Enable Stories",onChange:s=>e.setCourseConfiguration({...e.courseConfiguration,enableStories:s.target.checked})}),(0,n.jsx)(u.dO,{checked:v,label:"Enable Overall Leaderboard",onChange:s=>e.setCourseConfiguration({...e.courseConfiguration,enableOverallLeaderboard:s.target.checked})}),(0,n.jsx)(u.dO,{checked:N,label:"Enable Contest Leaderboard",onChange:s=>e.setCourseConfiguration({...e.courseConfiguration,enableContestLeaderboard:s.target.checked})})]})]})]})}}}]);
//# sourceMappingURL=62020.f69c4e45.js.map