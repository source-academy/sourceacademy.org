"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([["37838"],{82635(e,n,o){o.d(n,{A:()=>i});let i={Application__main:"Application__main-_IHTYK",applicationMain:"Application__main-_IHTYK",WorkspaceParent:"WorkspaceParent-tU0Skp",workspaceParent:"WorkspaceParent-tU0Skp","bp6-tag":"bp6-tag-EbQW8k",bp6Tag:"bp6-tag-EbQW8k",badge:"badge-iQb6sN","bp6-overlay":"bp6-overlay-p05_lF",bp6Overlay:"bp6-overlay-p05_lF","bp6-popover-content":"bp6-popover-content-nv64Bc",bp6PopoverContent:"bp6-popover-content-nv64Bc","badge-tag":"badge-tag-QPwQzY",badgeTag:"badge-tag-QPwQzY",Login:"Login-Q3dcgo",login:"Login-Q3dcgo","login-header":"login-header-GM5CkC",loginHeader:"login-header-GM5CkC","login-icon":"login-icon-qu83Vg",loginIcon:"login-icon-qu83Vg"}},69533(e,n,o){o.d(n,{m:()=>a});var i=o(95113);function a(e){let n=i.A.parse(e);for(let[e,o]of Object.entries(n))Array.isArray(o)?n[e]=o.join(","):null===o&&delete n[e];return n}},37277(e,n,o){o.r(n),o.d(n,{Component:()=>C,default:()=>_});var i=o(74848),a=o(53991),s=o(51851),c=o(7064),l=o(64907),r=o(35505),t=o(35537),d=o(28761),p=o(7496),g=o(79642),h=o(9584),b=o(46942),v=o.n(b),k=o(96540),u=o(40503),A=o(94201),j=o(41344),x=o(46807);o(91948);var m=o(12149),f=o(69533),w=o(82635);let y=()=>{let e=(0,j.Zp)(),n=(0,A.wA)(),o=(0,j.zy)(),{t:b}=(0,u.Bd)("login"),{isLoggedIn:y,courseId:C}=(0,m.wV)(),{code:_,provider:L,"client-request-id":N}=(0,f.m)(o.search),Q=(0,m.N4)(e=>e.vscode.isVscode),{access_token:T,refresh_token:I}=(0,f.m)(o.search),O=()=>{window.location.href=`vscode://source-academy.source-academy/sso/sso?code=${_}&client-request-id=${N}`};return(0,k.useEffect)(()=>{_&&(Q?(y&&(void 0!==C?e(`/courses/${C}`):e("/welcome")),n(x.A.fetchAuth(_,L))):O()),T&&I&&(n(x.A.setTokens({accessToken:T,refreshToken:I})),n(x.A.fetchUserAndCourse()),e("/welcome"))},[Q]),Q?(0,i.jsx)("div",{className:v()(w.A.Login,a.DARK),children:(0,i.jsx)(s.Z,{elevation:c.e.FOUR,children:(0,i.jsx)("div",{children:(0,i.jsx)(l.I,{description:b("Logging In"),icon:(0,i.jsx)(r.y,{size:r.H.LARGE})})})})}):(0,i.jsx)("div",{className:v()(w.A.Login,a.DARK),children:(0,i.jsx)(s.Z,{elevation:c.e.FOUR,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:w.A["login-header"],children:(0,i.jsxs)(t.H4,{children:[(0,i.jsx)(d.I,{className:w.A["login-icon"],icon:h.W.LOG_IN}),"Sign in with SSO"]})}),(0,i.jsxs)("p",{children:["Click ",(0,i.jsx)("b",{children:"Open link"})," on the dialog shown by your browser."]}),(0,i.jsx)("p",{children:"If you don't see a dialog, click the button below."}),(0,i.jsx)("div",{children:(0,i.jsx)(p.e,{fill:!0,children:(0,i.jsx)(g.$,{onClick:O,className:a.LARGE,children:"Launch VS Code extension"})})})]})})})},C=y;C.displayName="LoginVscodeCallback";let _=y}}]);
//# sourceMappingURL=37838.428ad295.js.map