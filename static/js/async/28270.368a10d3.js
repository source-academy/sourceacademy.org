/*! For license information please see 28270.368a10d3.js.LICENSE.txt */
(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([["28270"],{87603:function(e,t,n){!function(e,i){i(t,n(80952))}(0,function(e,t){"use strict";var n=function(){function e(e,t,n,i,r){this._session=e,this._label=n,this._color=i,this._ranges=r||[],this._selectionId=t,this._id=null,this._markerElement=document.createElement("div")}return e.prototype.update=function(e,t,n,i){for(var r=this;this._markerElement.hasChildNodes();)this._markerElement.removeChild(this._markerElement.lastChild);this._ranges.forEach(function(e){r._renderRange(t,n,i,e)}),this._markerElement.remove(),t.elt("remote-selection",""),(t.element.childNodes[t.i-1]||t.element.lastChild).appendChild(this._markerElement)},e.prototype.setSelection=function(e){null==e?this._ranges=[]:e instanceof Array?this._ranges=e:this._ranges=[e],this._forceSessionUpdate()},e.prototype.getLabel=function(){return this._label},e.prototype.selectionId=function(){return this._selectionId},e.prototype.markerId=function(){return this._id},e.prototype._renderLine=function(e){var t=document.createElement("div");t.className="ace-multi-selection",t.style.backgroundColor=this._color,"number"==typeof e.height&&(t.style.height=e.height+"px"),"number"==typeof e.width&&(t.style.width=e.width+"px"),"number"==typeof e.top&&(t.style.top=e.top+"px"),"number"==typeof e.left&&(t.style.left=e.left+"px"),"number"==typeof e.bottom&&(t.style.bottom=e.bottom+"px"),"number"==typeof e.right&&(t.style.right=e.right+"px"),this._markerElement.append(t)},e.prototype._renderRange=function(e,t,n,i){var r=i.toScreenRange(t),o=n.lineHeight,s=e.$getTop(r.start.row,n),a=0,c=0,l=e.$padding+r.start.column*n.characterWidth;if(r.isMultiLine()){if(this._renderLine({height:o,right:c,top:s,left:l}),s=e.$getTop(r.end.row,n),a=r.end.column*n.characterWidth,this._renderLine({height:o,width:a,top:s,left:e.$padding}),(o=(r.end.row-r.start.row-1)*n.lineHeight)<0)return;s=e.$getTop(r.start.row+1,n),this._renderLine({height:o,right:c,top:s,left:e.$padding})}else a=(i.end.column-i.start.column)*n.characterWidth,this._renderLine({height:o,width:a,top:s,left:l})},e.prototype._forceSessionUpdate=function(){this._session._signal("changeBackMarker")},e}(),i=function(){function e(e){this._selections={},this._session=e}return e.prototype.addSelection=function(e,t,i,r){if(void 0!==this._selections[e])throw Error("Selection with id already defined: "+e);var o=new n(this._session,e,t,i,r);this._selections[e]=o,this._session.addDynamicMarker(o,!1)},e.prototype.setSelection=function(e,t){this._getSelection(e).setSelection(t)},e.prototype.clearSelection=function(e){this._getSelection(e).setSelection(null)},e.prototype.removeSelection=function(e){var t=this._selections[e];if(void 0===t)throw Error("Selection not found: "+e);this._session.removeMarker(t.id),delete this._selections[e]},e.prototype.removeAll=function(){var e=this;Object.getOwnPropertyNames(this._selections).forEach(function(t){e.removeSelection(e._selections[t].selectionId())})},e.prototype._getSelection=function(e){var t=this._selections[e];if(void 0===t)throw Error("Selection not found: "+e);return t},e}(),r=function(){function e(e,t,n,i,r){this._session=e,this._label=n,this._color=i,this._position=r?this._convertPosition(r):null,this._cursorId=t,this._id=null,this._visible=!1,this._tooltipTimeout=null,this._markerElement=document.createElement("div"),this._cursorElement=document.createElement("div"),this._cursorElement.className="ace-multi-cursor",this._cursorElement.style.background=this._color,this._markerElement.append(this._cursorElement),this._tooltipElement=document.createElement("div"),this._tooltipElement.className="ace-multi-cursor-tooltip",this._tooltipElement.style.background=this._color,this._tooltipElement.style.opacity="0",this._tooltipElement.innerHTML=n,this._markerElement.append(this._tooltipElement)}return e.prototype.update=function(e,t,n,i){if(null!==this._position){var r=this._session.documentToScreenPosition(this._position.row,this._position.column),o=t.$getTop(r.row,i),s=t.$padding+r.column*i.characterWidth,a=i.lineHeight,c=o+2,l=a-3,u=s,h=2;this._cursorElement.style.height=l+"px",this._cursorElement.style.width=h+"px",this._cursorElement.style.top=c+"px",this._cursorElement.style.left=u+"px";var p=c-a;p<5&&(p=c+a-1);var d=u;this._tooltipElement.style.top=p-2+"px",this._tooltipElement.style.left=d-2+"px",this._markerElement.remove(),t.elt("remote-cursor","");var f=t.element.childNodes[t.i-1]||t.element.lastChild;f.appendChild(this._markerElement)}},e.prototype.setPosition=function(e){this._position=this._convertPosition(e),this._forceSessionUpdate(),this._tooltipElement.style.opacity="1",this._scheduleTooltipHide()},e.prototype.setVisible=function(e){var t=this._visible;this._visible=e,t!==this._visible&&(this._markerElement.style.visibility=e?"visible":"hidden",this._forceSessionUpdate())},e.prototype.isVisible=function(){return this._visible},e.prototype.cursorId=function(){return this._cursorId},e.prototype.markerId=function(){return this._id},e.prototype.getLabel=function(){return this._label},e.prototype._forceSessionUpdate=function(){this._session._signal("changeFrontMarker")},e.prototype._convertPosition=function(e){if(null===e)return null;if("number"==typeof e)return this._session.getDocument().indexToPosition(e,0);if("number"==typeof e.row&&"number"==typeof e.column)return e;throw Error("Invalid position: "+e)},e.prototype._scheduleTooltipHide=function(){var e=this;null!==this._tooltipTimeout&&clearTimeout(this._tooltipTimeout),this._tooltipTimeout=setTimeout(function(){e._tooltipElement.style.opacity="0",e._tooltipTimeout=null},2e3)},e}(),o=function(){function e(e){this._cursors={},this._session=e}return e.prototype.addCursor=function(e,t,n,i){if(void 0!==this._cursors[e])throw Error("Cursor with id already defined: "+e);var o=new r(this._session,e,t,n,i);this._cursors[e]=o,this._session.addDynamicMarker(o,!0)},e.prototype.setCursor=function(e,t){this._getCursor(e).setPosition(t)},e.prototype.clearCursor=function(e){this._getCursor(e).setPosition(null)},e.prototype.removeCursor=function(e){var t=this._cursors[e];if(void 0===t)throw Error("Cursor not found: "+e);this._session.removeMarker(t.id),delete this._cursors[e]},e.prototype.removeAll=function(){var e=this;Object.getOwnPropertyNames(this._cursors).forEach(function(t){e.removeCursor(e._cursors[t].cursorId())})},e.prototype._getCursor=function(e){var t=this._cursors[e];if(void 0===t)throw Error("Cursor not found: "+e);return t},e}(),s=function(){function e(){}return e.rangeToJson=function(e){return{start:{row:e.start.row,column:e.start.column},end:{row:e.end.row,column:e.end.column}}},e.jsonToRange=function(e){return new t.Range(e.start.row,e.start.column,e.end.row,e.end.column)},e.rangesToJson=function(t){return t.map(function(t){return e.rangeToJson(t)})},e.jsonToRanges=function(t){return t.map(function(t){return e.jsonToRange(t)})},e.toJson=function(t){return Array.isArray(t)?e.rangesToJson(t):e.rangeToJson(t)},e.fromJson=function(t){return Array.isArray(t)?e.jsonToRanges(t):e.jsonToRange(t)},e}(),a=function(){function e(e,t,n,i,r){var o=this;this._label=e,this._color=t,this._viewRows=n,this._cursorRow=i,this._editor=r,this._docLineCount=r.getSession().getLength(),this._editorListener=function(){var e=o._editor.getSession().getLength();e!==o._docLineCount&&(o._docLineCount=e,o.update())},this._editor.on("change",this._editorListener),this._scrollElement=document.createElement("div"),this._scrollElement.className="ace-radar-view-scroll-indicator",this._scrollElement.style.borderColor=this._color,this._scrollElement.style.background=this._color,this._scrollElement.title=this._label,this._scrollElement.addEventListener("click",function(){var e=(o._viewRows.end-o._viewRows.start)/2+o._viewRows.start;o._editor.scrollToLine(e,!0,!1,function(){})},!1),this._cursorElement=document.createElement("div"),this._cursorElement.className="ace-radar-view-cursor-indicator",this._cursorElement.style.background=this._color,this._cursorElement.title=this._label,this._cursorElement.addEventListener("click",function(){o._editor.scrollToLine(o._cursorRow,!0,!1,function(){})},!1),this._wrapper=document.createElement("div"),this._wrapper.className="ace-radar-view-wrapper",this._wrapper.style.display="none",this._wrapper.appendChild(this._scrollElement),this._wrapper.appendChild(this._cursorElement)}return e.prototype.element=function(){return this._wrapper},e.prototype.setCursorRow=function(e){this._cursorRow=e,this.update()},e.prototype.setViewRows=function(e){this._viewRows=e,this.update()},e.prototype.update=function(){if(c(this._viewRows)||c(this._cursorRow)){this._wrapper.style.display=null;var e=this._docLineCount-1;if(c(this._viewRows)){var t=Math.min(e,this._viewRows.start)/e*100,n=100-Math.min(e,this._viewRows.end)/e*100;this._scrollElement.style.top=t+"%",this._scrollElement.style.bottom=n+"%",this._scrollElement.style.display=null}else this._scrollElement.style.display="none";if(c(this._cursorRow)){var i=Math.min(this._cursorRow,e)/e*((this._wrapper.offsetHeight-this._cursorElement.offsetHeight)/this._wrapper.offsetHeight)*100;this._cursorElement.style.top=i+"%",this._cursorElement.style.display=null}else this._cursorElement.style.display="none"}else this._wrapper.style.display="none"},e.prototype.dispose=function(){this._wrapper.parentNode.removeChild(this._wrapper),this._editor.off("change",this._editorListener)},e}();function c(e){return null!=e}var l=function(){function e(e,t){this._container=null,"string"==typeof e?this._container=document.getElementById(e):this._container=e,this._container.style.position="relative",this._views={},this._editor=t}return e.prototype.addView=function(e,t,n,i,r){var o=new a(t,n,i,r,this._editor);this._container.appendChild(o.element()),o.update(),this._views[e]=o},e.prototype.hasView=function(e){return void 0!==this._views[e]},e.prototype.setViewRows=function(e,t){this._views[e].setViewRows(t)},e.prototype.setCursorRow=function(e,t){this._views[e].setCursorRow(t)},e.prototype.clearView=function(e){var t=this._views[e];t.setCursorRow(null),t.setViewRows(null)},e.prototype.removeView=function(e){this._views[e].dispose(),delete this._views[e]},e}(),u=function(){function e(){}return e.getVisibleIndexRange=function(e){var t=e.getFirstVisibleRow(),n=e.getLastVisibleRow();return!e.isRowFullyVisible(t)&&t++,!e.isRowFullyVisible(n)&&n--,{start:e.getSession().getDocument().positionToIndex({row:t,column:0},0),end:e.getSession().getDocument().positionToIndex({row:n,column:0},0)}},e.indicesToRows=function(e,t,n){return{start:e.getSession().getDocument().indexToPosition(t,0).row,end:e.getSession().getDocument().indexToPosition(n,0).row}},e}();e.AceMultiCursorManager=o,e.AceMultiSelectionManager=i,e.AceRadarView=l,e.AceRangeUtil=s,e.AceViewportUtil=u,Object.defineProperty(e,"__esModule",{value:!0})})},88659:function(){},12850:function(e,t,n){"use strict";var i=Object.create,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t,n,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of s(t))c.call(e,a)||a===n||r(e,a,{get:()=>t[a],enumerable:!(i=o(t,a))||i.enumerable});return e},u=(e,t,n)=>(n=null!=e?i(a(e)):{},l(!t&&e&&e.__esModule?n:r(n,"default",{value:e,enumerable:!0}),e)),h=e=>l(r({},"__esModule",{value:!0}),e),p={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(p,{default:()=>w}),e.exports=h(p);var d=u(n(37007)),f=n(76655),g=n(99092),m=n(87603),v=u(n(22454));function y(e,t){for(let n of t)e=e[n];return e}var b=class{editor;session;user;doc;path;cursorManager;selectionManager;radarManager;languageSelectHandler;usersPresence;logger;suppress=!1;localPresence;connectedUsers;docSubmitted=e=>{var t;e?(null==(t=this.onError)||t.call(this,e),this.logger.log(`*local*: op error: ${e}`)):this.logger.log("*local*: op submitted")};onError;constructor(e){this.editor=e.ace,this.session=this.editor.getSession(),this.path=e.path,this.doc=e.doc,this.user=e.user,this.cursorManager=e.cursorManager,this.selectionManager=e.selectionManager,this.radarManager=e.radarManager,this.usersPresence=e.usersPresence,this.languageSelectHandler=e.languageSelectHandler,this.onError=e.onError,this.logger=(0,v.default)("shareace"),this.setInitialValue(),this.listen()}setInitialValue=()=>{var e,t,n;for(let[i,r]of(this.suppress=!0,this.session.setValue(y(this.doc.data,this.path)),this.suppress=!1,null==(e=this.cursorManager)||e.removeAll(),null==(t=this.selectionManager)||t.removeAll(),null==(n=this.radarManager)||n.removeAllViews(),this.initializeLocalPresence(),Object.entries(this.usersPresence.remotePresences)))this.updatePresence(i,r);this.connectedUsers={[this.localPresence.presenceId]:this.user}};listen=()=>{this.doc.on("op",this.onRemoteChange),this.doc.on("load",this.onRemoteReload),this.session.on("change",this.onLocalChange),this.usersPresence.on("receive",this.updatePresence),this.session.selection.on("changeCursor",this.onLocalCursorChange),this.session.selection.on("changeSelection",this.onLocalSelectionChange),this.editor.renderer.on("afterRender",this.onLocalViewChange),"owner"===this.user.role&&this.session.on("changeMode",this.onLocalModeChange)};unlisten=()=>{this.doc.off("op",this.onRemoteChange),this.doc.off("load",this.onRemoteReload),this.session.removeListener("change",this.onLocalChange),this.usersPresence.off("receive",this.updatePresence),this.session.selection.off("changeCursor",this.onLocalCursorChange),this.session.selection.off("changeSelection",this.onLocalSelectionChange),this.editor.renderer.off("afterRender",this.onLocalViewChange),"owner"===this.user.role&&this.session.off("changeMode",this.onLocalModeChange)};deltaTransform=e=>{let t,n=this.session.getDocument(),i=n.positionToIndex(e.start),r=n.positionToIndex(e.end);this.logger.log(`start: ${i} end: ${r}`);let o=e.lines.join("\n");if("insert"===e.action)t={p:[...this.path,i],si:o};else if("remove"===e.action)t={p:[...this.path,i],sd:o};else throw Error(`action ${e.action} not supported`);return t};opTransform=e=>{let t=e=>{let t,n,i,r=e.p.at(-1),o=this.session.doc.indexToPosition(r,0);if("sd"in e){t="remove";let o=(n=e.sd.split("\n")).reduce((e,t)=>e+t.length,n.length-1);i=this.session.doc.indexToPosition(r+o,0)}else if("si"in e)t="insert",i=1===(n=e.si.split("\n")).length?{row:o.row,column:o.column+e.si.length}:{row:o.row+(n.length-1),column:n[n.length-1].length};else throw Error(`Invalid Operation: ${JSON.stringify(e)}`);return{start:o,end:i,action:t,lines:n}};return e.map(t)};onLocalChange=e=>{var t;try{if(this.logger.log(`*local*: fired ${Date.now()}`),this.logger.log(`*local*: delta received: ${JSON.stringify(e)}`),this.suppress)return void this.logger.log("*local*: local delta, _skipping_");let t=this.deltaTransform(e);if(this.logger.log(`*local*: transformed op: ${JSON.stringify(t)}`),!this.doc.type)return;this.doc.submitOp(t,{source:this},this.docSubmitted)}catch(e){null==(t=this.onError)||t.call(this,e)}};onLocalModeChange=()=>{var e;let t=this.session.getMode().$id,n=t.substring(t.lastIndexOf("/")+1);null==(e=this.localPresence)||e.submit({user:this.user,newMode:n})};onRemoteChange=(e,t)=>{var n;try{this.logger.log(`*remote*: fired ${Date.now()}`);let n=e[0].p.slice(0,e[0].p.length-1).toString();if(this.logger.log(n),t===this)return void this.logger.log("*remote*: op origin is self; _skipping_");if(n!==this.path.toString())return void this.logger.log("*remote*: not from my path; _skipping_");let i=this.opTransform(e);this.logger.log(`*remote*: op received: ${JSON.stringify(e)}`),this.logger.log(`*remote*: transformed delta: ${JSON.stringify(i)}`),this.suppress=!0,this.session.getDocument().applyDeltas(i),this.suppress=!1,this.logger.log("*remote*: session value"),this.logger.log(JSON.stringify(this.session.getValue())),this.logger.log("*remote*: delta applied")}catch(e){null==(n=this.onError)||n.call(this,e)}};updatePresence=(e,t)=>{var n,i,r,o;if(null===t){try{null==(n=this.cursorManager)||n.removeCursor(e)}catch{}try{null==(i=this.selectionManager)||i.removeSelection(e)}catch{}try{null==(r=this.radarManager)||r.removeView(e)}catch{}if(this.connectedUsers&&e in this.connectedUsers){let{[e]:t,...n}=this.connectedUsers;this.connectedUsers=n}return}if(this.connectedUsers={...this.connectedUsers,[e]:t.user},t.newRole&&(this.connectedUsers={...this.connectedUsers,[t.newRole.userId]:{...this.connectedUsers[t.newRole.userId],role:t.newRole.newRole}}),this.cursorManager&&t.cursorPos)try{this.cursorManager.setCursor(e,t.cursorPos)}catch{this.cursorManager.addCursor(e,t.user.name,t.user.color,t.cursorPos)}if(this.selectionManager&&t.selectionRange){let n=m.AceRangeUtil.fromJson(t.selectionRange);try{this.selectionManager.setSelection(e,n)}catch{this.selectionManager.addSelection(e,t.user.name,t.user.color,n)}}if(this.radarManager&&t.radarViewRows){let n=m.AceViewportUtil.indicesToRows(this.editor,t.radarViewRows.start,t.radarViewRows.end);try{this.radarManager.setViewRows(e,n)}catch{this.radarManager.addView(e,t.user.name,t.user.color,n,t.radarCursorRow||0)}}t.newMode&&(null==(o=this.languageSelectHandler)||o.call(this,t.newMode))};onLocalViewChange=()=>{var e;let t=m.AceViewportUtil.getVisibleIndexRange(this.editor);null==(e=this.localPresence)||e.submit({user:this.user,radarViewRows:t})};onLocalCursorChange=()=>{var e;let t=this.session.selection.getCursor();null==(e=this.localPresence)||e.submit({user:this.user,cursorPos:t,radarCursorRow:t.row})};onLocalSelectionChange=()=>{var e;let t=this.session.selection.getAllRanges();null==(e=this.localPresence)||e.submit({user:this.user,selectionRange:m.AceRangeUtil.toJson(t)})};changeUserRole=(e,t)=>{var n;null==(n=this.localPresence)||n.submit({user:this.user,newRole:{userId:e,newRole:t}})};initializeLocalPresence=()=>{this.localPresence=this.usersPresence.create();let e=this.session.selection.getCursor(),t=this.session.selection.getAllRanges(),n=m.AceViewportUtil.getVisibleIndexRange(this.editor);this.localPresence.submit({user:this.user,cursorPos:e,selectionRange:t,radarViewRows:n,radarCursorRow:e.row})};destroyPresence=()=>{var e;null==(e=this.localPresence)||e.destroy(),this.localPresence=void 0};onRemoteReload=()=>{this.logger.log("*remote*: reloading document"),this.setInitialValue()}};function _(e){return Error(e)}var w=class extends d.default{id;user;WS;doc;usersPresence;connections;constructor(e,t){if(super(),this.id=e,this.user=t.user,null===t.WsUrl)throw _("wsUrl not provided.");this.WS=new f.WebSocket(t.WsUrl);const n=new g.Connection(this.WS);if(null===t.namespace)throw _("namespace not provided.");const i=t.namespace,r=n.get(i,e),o=e=>{if(e)throw e;if(!r.type)throw Error("ShareDB document uninitialized. Please check if you have the correct id or that you have initialized the document in the server.");this.emit("ready")};r.subscribe(o);const s=n.getPresence("users-"+e);s.subscribe(),this.doc=r,this.usersPresence=s,this.connections={},this.WS.addEventListener("open",()=>{Object.values(this.connections).forEach(e=>e.onRemoteReload())})}add=(e,t,n,i)=>{let r=t||[],o=new b({id:this.id,ace:e,doc:this.doc,user:this.user,path:r,cursorManager:n.cursorManager,selectionManager:n.selectionManager,radarManager:n.radarManager,usersPresence:this.usersPresence,languageSelectHandler:null==i?void 0:i.languageSelectHandler,onError:e=>this.emit("error",t,e)});return this.connections[t.join("-")]=o,o}}},20047:function(e,t,n){e=n.nmd(e),ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(e,t,n){"use strict";var i=e("./lib/dom"),r=e("./lib/oop"),o=e("./lib/event_emitter").EventEmitter,s=e("./lib/lang"),a=e("./range").Range,c=e("./range_list").RangeList,l=e("./keyboard/hash_handler").HashHandler,u=e("./tokenizer").Tokenizer,h=e("./clipboard"),p={CURRENT_WORD:function(e){return e.session.getTextRange(e.session.getWordRange())},SELECTION:function(e,t,n){var i=e.session.getTextRange();return n?i.replace(/\n\r?([ \t]*\S)/g,"\n"+n+"$1"):i},CURRENT_LINE:function(e){return e.session.getLine(e.getCursorPosition().row)},PREV_LINE:function(e){return e.session.getLine(e.getCursorPosition().row-1)},LINE_INDEX:function(e){return e.getCursorPosition().row},LINE_NUMBER:function(e){return e.getCursorPosition().row+1},SOFT_TABS:function(e){return e.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(e){return e.session.getTabSize()},CLIPBOARD:function(e){return h.getText&&h.getText()},FILENAME:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0]},FILENAME_BASE:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(e){return this.FILEPATH(e).replace(/[^/\\]*$/,"")},FILEPATH:function(e){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.start||""},BLOCK_COMMENT_END:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.end||""},LINE_COMMENT:function(e){return(e.session.$mode||{}).lineCommentStart||""},CURRENT_YEAR:d.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:d.bind(null,{year:"2-digit"}),CURRENT_MONTH:d.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:d.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:d.bind(null,{month:"short"}),CURRENT_DATE:d.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:d.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:d.bind(null,{weekday:"short"}),CURRENT_HOUR:d.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:d.bind(null,{minute:"2-digit"}),CURRENT_SECOND:d.bind(null,{second:"2-digit"})};function d(e){var t=new Date().toLocaleString("en-us",e);return 1==t.length?"0"+t:t}p.SELECTED_TEXT=p.SELECTION;var f=function(){function e(){this.snippetMap={},this.snippetNameMap={},this.variables=p}return e.prototype.getTokenizer=function(){return e.$tokenizer||this.createTokenizer()},e.prototype.createTokenizer=function(){function t(e){return(e=e.substr(1),/^\d+$/.test(e))?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function n(e){return"(?:[^\\\\"+e+"]|\\\\.)"}var i={regex:"/("+n("/")+"+)/",onMatch:function(e,t,n){var i=n[0];return i.fmtString=!0,i.guard=e.slice(1,-1),i.flag="",""},next:"formatString"};return e.$tokenizer=new u({start:[{regex:/\\./,onMatch:function(e,t,n){var i=e[1];return"}"==i&&n.length?e=i:-1!="`$\\".indexOf(i)&&(e=i),[e]}},{regex:/}/,onMatch:function(e,t,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:t},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(e,n,i){var r=t(e.substr(1));return i.unshift(r[0]),r},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+n("\\|")+"*\\|",onMatch:function(e,t,n){var i=e.slice(1,-1).replace(/\\[,|\\]|,/g,function(e){return 2==e.length?e[1]:"\0"}).split("\0").map(function(e){return{value:e}});return n[0].choices=i,[i[0]]},next:"start"},i,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(e,t,n){return n.length&&n[0].expectElse?(n[0].expectElse=!1,n[0].ifEnd={elseEnd:n[0]},[n[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(e,t,n){var i=e[1];return"}"==i&&n.length||-1!="`$\\".indexOf(i)?e=i:"n"==i?e="\n":"t"==i?e="	":-1!="ulULE".indexOf(i)&&(e={changeCase:i,local:i>"a"}),[e]}},{regex:"/\\w*}",onMatch:function(e,t,n){var i=n.shift();return i&&(i.flag=e.slice(1,-1)),this.next=i&&i.tabstopId?"start":"",[i||e]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(e,t,n){return[{text:e.slice(1)}]}},{regex:/\${\w+/,onMatch:function(e,t,n){var i={text:e.slice(2)};return n.unshift(i),[i]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(e,t,n){var i=n.shift();return this.next=i&&i.tabstopId?"start":"",[i||e]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(e,t,n){return n[0].formatFunction=e.slice(2,-1),[n.shift()]},next:"formatString"},i,{regex:/:[\?\-+]?/,onMatch:function(e,t,n){"+"==e[1]&&(n[0].ifEnd=n[0]),"?"==e[1]&&(n[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),e.$tokenizer},e.prototype.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})},e.prototype.getVariableValue=function(e,t,n){if(/^\d+$/.test(t))return(this.variables.__||{})[t]||"";if(/^[A-Z]\d+$/.test(t))return(this.variables[t[0]+"__"]||{})[t.substr(1)]||"";if(t=t.replace(/^TM_/,""),!this.variables.hasOwnProperty(t))return"";var i=this.variables[t];return"function"==typeof i&&(i=this.variables[t](e,t,n)),null==i?"":i},e.prototype.tmStrFormat=function(e,t,n){if(!t.fmt)return e;var i=t.flag||"",r=t.guard;r=new RegExp(r,i.replace(/[^gim]/g,""));var o="string"==typeof t.fmt?this.tokenizeTmSnippet(t.fmt,"formatString"):t.fmt,s=this;return e.replace(r,function(){var e=s.variables.__;s.variables.__=[].slice.call(arguments);for(var t=s.resolveVariables(o,n),i="E",r=0;r<t.length;r++){var a=t[r];if("object"==typeof a)if(t[r]="",a.changeCase&&a.local){var c=t[r+1];c&&"string"==typeof c&&("u"==a.changeCase?t[r]=c[0].toUpperCase():t[r]=c[0].toLowerCase(),t[r+1]=c.substr(1))}else a.changeCase&&(i=a.changeCase);else"U"==i?t[r]=a.toUpperCase():"L"==i&&(t[r]=a.toLowerCase())}return s.variables.__=e,t.join("")})},e.prototype.tmFormatFunction=function(e,t,n){return"upcase"==t.formatFunction?e.toUpperCase():"downcase"==t.formatFunction?e.toLowerCase():e},e.prototype.resolveVariables=function(e,t){for(var n=[],i="",r=!0,o=0;o<e.length;o++){var s=e[o];if("string"==typeof s){n.push(s),"\n"==s?(r=!0,i=""):r&&(i=/^\t*/.exec(s)[0],r=/\S/.test(s));continue}if(s){if(r=!1,s.fmtString){var a=e.indexOf(s,o+1);-1==a&&(a=e.length),s.fmt=e.slice(o+1,a),o=a}if(s.text){var c=this.getVariableValue(t,s.text,i)+"";s.fmtString&&(c=this.tmStrFormat(c,s,t)),s.formatFunction&&(c=this.tmFormatFunction(c,s,t)),c&&!s.ifEnd?(n.push(c),l(s)):!c&&s.ifEnd&&l(s.ifEnd)}else s.elseEnd?l(s.elseEnd):null!=s.tabstopId?n.push(s):null!=s.changeCase&&n.push(s)}}function l(t){var n=e.indexOf(t,o+1);-1!=n&&(o=n)}return n},e.prototype.getDisplayTextForSnippet=function(e,t){return g.call(this,e,t).text},e.prototype.insertSnippetForSelection=function(e,t,n){void 0===n&&(n={});var i=g.call(this,e,t,n),r=e.getSelectionRange(),o=e.session.replace(r,i.text),s=new m(e),a=e.inVirtualSelectionMode&&e.selection.index;s.addTabstops(i.tabstops,r.start,o,a)},e.prototype.insertSnippet=function(e,t,n){void 0===n&&(n={});var i=this;if(e.inVirtualSelectionMode)return i.insertSnippetForSelection(e,t,n);e.forEachSelection(function(){i.insertSnippetForSelection(e,t,n)},null,{keepOrder:!0}),e.tabstopManager&&e.tabstopManager.tabNext()},e.prototype.$getScope=function(e){var t=e.session.$mode.$id||"";if("html"===(t=t.split("/").pop())||"php"===t){"php"!==t||e.session.$mode.inlinePhp||(t="html");var n=e.getCursorPosition(),i=e.session.getState(n.row);"object"==typeof i&&(i=i[0]),i.substring&&("js-"==i.substring(0,3)?t="javascript":"css-"==i.substring(0,4)?t="css":"php-"==i.substring(0,4)&&(t="php"))}return t},e.prototype.getActiveScopes=function(e){var t=this.$getScope(e),n=[t],i=this.snippetMap;return i[t]&&i[t].includeScopes&&n.push.apply(n,i[t].includeScopes),n.push("_"),n},e.prototype.expandWithTab=function(e,t){var n=this,i=e.forEachSelection(function(){return n.expandSnippetForSelection(e,t)},null,{keepOrder:!0});return i&&e.tabstopManager&&e.tabstopManager.tabNext(),i},e.prototype.expandSnippetForSelection=function(e,t){var n,i=e.getCursorPosition(),r=e.session.getLine(i.row),o=r.substring(0,i.column),s=r.substr(i.column),a=this.snippetMap;return this.getActiveScopes(e).some(function(e){var t=a[e];return t&&(n=this.findMatchingSnippet(t,o,s)),!!n},this),!!n&&(!!t&&!!t.dryRun||(e.session.doc.removeInLine(i.row,i.column-n.replaceBefore.length,i.column+n.replaceAfter.length),this.variables.M__=n.matchBefore,this.variables.T__=n.matchAfter,this.insertSnippetForSelection(e,n.content),this.variables.M__=this.variables.T__=null,!0))},e.prototype.findMatchingSnippet=function(e,t,n){for(var i=e.length;i--;){var r=e[i];if((!r.startRe||r.startRe.test(t))&&(!r.endRe||r.endRe.test(n))&&(r.startRe||r.endRe))return r.matchBefore=r.startRe?r.startRe.exec(t):[""],r.matchAfter=r.endRe?r.endRe.exec(n):[""],r.replaceBefore=r.triggerRe?r.triggerRe.exec(t)[0]:"",r.replaceAfter=r.endTriggerRe?r.endTriggerRe.exec(n)[0]:"",r}},e.prototype.register=function(e,t){var n=this.snippetMap,i=this.snippetNameMap,r=this;function o(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function a(e,t,n){return e=o(e),t=o(t),n?(e=t+e)&&"$"!=e[e.length-1]&&(e+="$"):(e+=t)&&"^"!=e[0]&&(e="^"+e),new RegExp(e)}function c(e){e.scope||(e.scope=t||"_"),n[t=e.scope]||(n[t]=[],i[t]={});var o=i[t];if(e.name){var c=o[e.name];c&&r.unregister(c),o[e.name]=e}n[t].push(e),e.prefix&&(e.tabTrigger=e.prefix),!e.content&&e.body&&(e.content=Array.isArray(e.body)?e.body.join("\n"):e.body),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=s.escapeRegExp(e.tabTrigger)),(e.trigger||e.guard||e.endTrigger||e.endGuard)&&(e.startRe=a(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger),e.endRe=a(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger))}e||(e=[]),Array.isArray(e)?e.forEach(c):Object.keys(e).forEach(function(t){c(e[t])}),this._signal("registerSnippets",{scope:t})},e.prototype.unregister=function(e,t){var n=this.snippetMap,i=this.snippetNameMap;function r(e){var r=i[e.scope||t];if(r&&r[e.name]){delete r[e.name];var o=n[e.scope||t],s=o&&o.indexOf(e);s>=0&&o.splice(s,1)}}e.content?r(e):Array.isArray(e)&&e.forEach(r)},e.prototype.parseSnippetFile=function(e){e=e.replace(/\r/g,"");for(var t,n=[],i={},r=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;t=r.exec(e);){if(t[1])try{i=JSON.parse(t[1]),n.push(i)}catch(e){}if(t[4])i.content=t[4].replace(/^\t/gm,""),n.push(i),i={};else{var o=t[2],s=t[3];if("regex"==o){var a=/\/((?:[^\/\\]|\\.)*)|$/g;i.guard=a.exec(s)[1],i.trigger=a.exec(s)[1],i.endTrigger=a.exec(s)[1],i.endGuard=a.exec(s)[1]}else"snippet"==o?(i.tabTrigger=s.match(/^\S*/)[0],i.name||(i.name=s)):o&&(i[o]=s)}}return n},e.prototype.getSnippetByName=function(e,t){var n,i=this.snippetNameMap;return this.getActiveScopes(t).some(function(t){var r=i[t];return r&&(n=r[e]),!!n},this),n},e}();r.implement(f.prototype,o);var g=function(e,t,n){void 0===n&&(n={});var i=e.getCursorPosition(),r=e.session.getLine(i.row),o=e.session.getTabString(),s=r.match(/^\s*/)[0];i.column<s.length&&(s=s.slice(0,i.column)),t=t.replace(/\r/g,"");var a=this.tokenizeTmSnippet(t);a=(a=this.resolveVariables(a,e)).map(function(e){return"\n"!=e||n.excludeExtraIndent?"string"==typeof e?e.replace(/\t/g,o):e:e+s});var c=[];a.forEach(function(e,t){if("object"==typeof e){var n=e.tabstopId,i=c[n];if(i||((i=c[n]=[]).index=n,i.value="",i.parents={}),-1===i.indexOf(e)){e.choices&&!i.choices&&(i.choices=e.choices),i.push(e);var r=a.indexOf(e,t+1);if(-1!==r){var o=a.slice(t+1,r),s=o.some(function(e){return"object"==typeof e});s&&!i.value?i.value=o:o.length&&(!i.value||"string"!=typeof i.value)&&(i.value=o.join(""))}}}}),c.forEach(function(e){e.length=0});var l={};function u(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];if("object"==typeof i){if(l[i.tabstopId])continue;i=t[e.lastIndexOf(i,n-1)]||{tabstopId:i.tabstopId}}t[n]=i}return t}for(var h=0;h<a.length;h++){var p=a[h];if("object"==typeof p){var d=p.tabstopId,f=c[d],g=a.indexOf(p,h+1);if(l[d]){l[d]===p&&(delete l[d],Object.keys(l).forEach(function(e){f.parents[e]=!0}));continue}l[d]=p;var m=f.value;"string"!=typeof m?m=u(m):p.fmt&&(m=this.tmStrFormat(m,p,e)),a.splice.apply(a,[h+1,Math.max(0,g-h)].concat(m,p)),-1===f.indexOf(p)&&f.push(p)}}var v=0,y=0,b="";return a.forEach(function(e){if("string"==typeof e){var t=e.split("\n");t.length>1?(y=t[t.length-1].length,v+=t.length-1):y+=e.length,b+=e}else e&&(e.start?e.end={row:v,column:y}:e.start={row:v,column:y})}),{text:b,tabstops:c,tokens:a}},m=function(){function e(e){if(this.index=0,this.ranges=[],this.tabstops=[],e.tabstopManager)return e.tabstopManager;e.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=s.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e)}return e.prototype.attach=function(e){this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.session=e.session,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},e.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges.length=0,this.tabstops.length=0,this.selectedTabstop=null,this.editor.off("change",this.$onChange),this.editor.off("changeSelection",this.$onChangeSelection),this.editor.off("changeSession",this.$onChangeSession),this.editor.commands.off("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.session=null,this.editor=null},e.prototype.onChange=function(e){for(var t="r"==e.action[0],n=this.selectedTabstop||{},i=n.parents||{},r=this.tabstops.slice(),o=0;o<r.length;o++){var s=r[o],a=s==n||i[s.index];if(s.rangeList.$bias=+!a,"remove"==e.action&&s!==n){var c=s.parents&&s.parents[n.index],l=s.rangeList.pointIndex(e.start,c);l=l<0?-l-1:l+1;var u=s.rangeList.pointIndex(e.end,c);u=u<0?-u-1:u-1;for(var h=s.rangeList.ranges.slice(l,u),p=0;p<h.length;p++)this.removeRange(h[p])}s.rangeList.$onChange(e)}var d=this.session;this.$inChange||!t||1!=d.getLength()||d.getValue()||this.detach()},e.prototype.updateLinkedFields=function(){var e=this.selectedTabstop;if(e&&e.hasLinkedRanges&&e.firstNonLinked){this.$inChange=!0;for(var n=this.session,i=n.getTextRange(e.firstNonLinked),r=0;r<e.length;r++){var o=e[r];if(o.linked){var s=o.original,a=t.snippetManager.tmStrFormat(i,s,this.editor);n.replace(o,a)}}this.$inChange=!1}},e.prototype.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},e.prototype.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,n=this.editor.selection.isEmpty(),i=0;i<this.ranges.length;i++)if(!this.ranges[i].linked){var r=this.ranges[i].contains(e.row,e.column),o=n||this.ranges[i].contains(t.row,t.column);if(r&&o)return}this.detach()}},e.prototype.onChangeSession=function(){this.detach()},e.prototype.tabNext=function(e){var t=this.tabstops.length,n=this.index+(e||1);(n=Math.min(Math.max(n,1),t))==t&&(n=0),this.selectTabstop(n),this.updateTabstopMarkers(),0===n&&this.detach()},e.prototype.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,(t=this.tabstops[this.index])&&t.length){this.selectedTabstop=t;var n=t.firstNonLinked||t;if(t.choices&&(n.cursor=n.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(n);else{var i=this.editor.multiSelect;i.toSingleRange(n);for(var r=0;r<t.length;r++)t.hasLinkedRanges&&t[r].linked||i.addRange(t[r].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},e.prototype.addTabstops=function(e,t,n){var i=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!e[0]){var r=a.fromPoints(n,n);y(r.start,t),y(r.end,t),e[0]=[r],e[0].index=0}var o=[this.index+1,0],s=this.ranges,l=this.snippetId=(this.snippetId||0)+1;e.forEach(function(e,n){var r=this.$openTabstops[n]||e;r.snippetId=l;for(var u=0;u<e.length;u++){var h=e[u],p=a.fromPoints(h.start,h.end||h.start);v(p.start,t),v(p.end,t),p.original=h,p.tabstop=r,s.push(p),r!=e?r.unshift(p):r[u]=p,h.fmtString||r.firstNonLinked&&i?(p.linked=!0,r.hasLinkedRanges=!0):r.firstNonLinked||(r.firstNonLinked=p)}r.firstNonLinked||(r.hasLinkedRanges=!1),r===e&&(o.push(r),this.$openTabstops[n]=r),this.addTabstopMarkers(r),r.rangeList=r.rangeList||new c,r.rangeList.$bias=0,r.rangeList.addList(r)},this),o.length>2&&(this.tabstops.length&&o.push(o.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,o))},e.prototype.addTabstopMarkers=function(e){var t=this.session;e.forEach(function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))})},e.prototype.removeTabstopMarkers=function(e){var t=this.session;e.forEach(function(e){t.removeMarker(e.markerId),e.markerId=null})},e.prototype.updateTabstopMarkers=function(){if(this.selectedTabstop){var e=this.selectedTabstop.snippetId;0===this.selectedTabstop.index&&e--,this.tabstops.forEach(function(t){t.snippetId===e?this.addTabstopMarkers(t):this.removeTabstopMarkers(t)},this)}},e.prototype.removeRange=function(e){var t=e.tabstop.indexOf(e);-1!=t&&e.tabstop.splice(t,1),-1!=(t=this.ranges.indexOf(e))&&this.ranges.splice(t,1),-1!=(t=e.tabstop.rangeList.ranges.indexOf(e))&&e.tabstop.splice(t,1),this.session.removeMarker(e.markerId),!e.tabstop.length&&(-1!=(t=this.tabstops.indexOf(e.tabstop))&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},e}();m.prototype.keyboardHandler=new l,m.prototype.keyboardHandler.bindKeys({Tab:function(e){t.snippetManager&&t.snippetManager.expandWithTab(e)||(e.tabstopManager.tabNext(1),e.renderer.scrollCursorIntoView())},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1),e.renderer.scrollCursorIntoView()},Esc:function(e){e.tabstopManager.detach()}});var v=function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row},y=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row};i.importCssString("\n.ace_snippet-marker {\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n    background: rgba(194, 193, 208, 0.09);\n    border: 1px dotted rgba(211, 208, 235, 0.62);\n    position: absolute;\n}","snippets.css",!1),t.snippetManager=new f,(function(){this.insertSnippet=function(e,n){return t.snippetManager.insertSnippet(this,e,n)},this.expandSnippet=function(e){return t.snippetManager.expandWithTab(this,e)}}).call(e("./editor").Editor.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/config","ace/lib/useragent"],function(e,t,n){"use strict";var i=e("../virtual_renderer").VirtualRenderer,r=e("../editor").Editor,o=e("../range").Range,s=e("../lib/event"),a=e("../lib/lang"),c=e("../lib/dom"),l=e("../config").nls,u=e("./../lib/useragent"),h=function(e){return"suggest-aria-id:".concat(e)},p=u.isSafari?"menu":"listbox",d=u.isSafari?"menuitem":"option",f=u.isSafari?"aria-current":"aria-selected",g=function(e){var t=new i(e);t.$maxLines=4;var n=new r(t);return n.setHighlightActiveLine(!1),n.setShowPrintMargin(!1),n.renderer.setShowGutter(!1),n.renderer.setHighlightGutterLine(!1),n.$mouseHandler.$focusTimeout=0,n.$highlightTagPending=!0,n},m=function(){return function(e){var t,n=c.createElement("div"),i=g(n);e&&e.appendChild(n),n.style.display="none",i.renderer.content.style.cursor="default",i.renderer.setStyle("ace_autocomplete"),i.renderer.$textLayer.element.setAttribute("role",p),i.renderer.$textLayer.element.setAttribute("aria-roledescription",l("autocomplete.popup.aria-roledescription","Autocomplete suggestions")),i.renderer.$textLayer.element.setAttribute("aria-label",l("autocomplete.popup.aria-label","Autocomplete suggestions")),i.renderer.textarea.setAttribute("aria-hidden","true"),i.setOption("displayIndentGuides",!1),i.setOption("dragDelay",150);var r=function(){};i.focus=r,i.$isFocused=!0,i.renderer.$cursorLayer.restartTimer=r,i.renderer.$cursorLayer.element.style.opacity="0",i.renderer.$maxLines=8,i.renderer.$keepTextAreaAtCursor=!1,i.setHighlightActiveLine(!1),i.session.highlight(""),i.session.$searchHighlight.clazz="ace_highlight-marker",i.on("mousedown",function(e){var t=e.getDocumentPosition();i.selection.moveToPosition(t),m.start.row=m.end.row=t.row,e.stop()});var u=new o(-1,0,-1,1/0),m=new o(-1,0,-1,1/0);m.id=i.session.addMarker(m,"ace_active-line","fullLine"),i.setSelectOnHover=function(e){e?u.id&&(i.session.removeMarker(u.id),u.id=null):u.id=i.session.addMarker(u,"ace_line-hover","fullLine")},i.setSelectOnHover(!1),i.on("mousemove",function(e){if(!t){t=e;return}if(t.x!=e.x||t.y!=e.y){t=e,t.scrollTop=i.renderer.scrollTop,i.isMouseOver=!0;var n=t.getDocumentPosition().row;u.start.row!=n&&(u.id||i.setRow(n),y(n))}}),i.renderer.on("beforeRender",function(){if(t&&-1!=u.start.row){t.$pos=null;var e=t.getDocumentPosition().row;u.id||i.setRow(e),y(e,!0)}}),i.renderer.on("afterRender",function(){for(var e=i.renderer.$textLayer,t=e.config.firstRow,n=e.config.lastRow;t<=n;t++){var r=e.element.childNodes[t-e.config.firstRow];r.setAttribute("role",d),r.setAttribute("aria-roledescription",l("autocomplete.popup.item.aria-roledescription","item")),r.setAttribute("aria-setsize",i.data.length),r.setAttribute("aria-describedby","doc-tooltip"),r.setAttribute("aria-posinset",t+1);var o=i.getData(t);if(o){var s="".concat(o.caption||o.value).concat(o.meta?", ".concat(o.meta):"");r.setAttribute("aria-label",s)}r.querySelectorAll(".ace_completion-highlight").forEach(function(e){e.setAttribute("role","mark")})}}),i.renderer.on("afterRender",function(){var e=i.getRow(),t=i.renderer.$textLayer,n=t.element.childNodes[e-t.config.firstRow],r=document.activeElement;if(n!==i.selectedNode&&i.selectedNode&&(c.removeCssClass(i.selectedNode,"ace_selected"),i.selectedNode.removeAttribute(f),i.selectedNode.removeAttribute("id")),r.removeAttribute("aria-activedescendant"),i.selectedNode=n,n){var o=h(e);c.addCssClass(n,"ace_selected"),n.id=o,t.element.setAttribute("aria-activedescendant",o),r.setAttribute("aria-activedescendant",o),n.setAttribute(f,"true")}});var v=function(){y(-1)},y=function(e,t){e!==u.start.row&&(u.start.row=u.end.row=e,t||i.session._emit("changeBackMarker"),i._emit("changeHoverMarker"))};i.getHoveredRow=function(){return u.start.row},s.addListener(i.container,"mouseout",function(){i.isMouseOver=!1,v()}),i.on("hide",v),i.on("changeSelection",v),i.session.doc.getLength=function(){return i.data.length},i.session.doc.getLine=function(e){var t=i.data[e];return"string"==typeof t?t:t&&t.value||""};var b=i.session.bgTokenizer;return b.$tokenizeRow=function(e){var t=i.data[e],n=[];if(!t)return n;"string"==typeof t&&(t={value:t});var r=t.caption||t.value||t.name;function o(e,i){e&&n.push({type:(t.className||"")+(i||""),value:e})}for(var s=r.toLowerCase(),a=(i.filterText||"").toLowerCase(),c=0,l=0,u=0;u<=a.length;u++)if(u!=l&&(t.matchMask&1<<u||u==a.length)){var h=a.slice(l,u);l=u;var p=s.indexOf(h,c);if(-1==p)continue;o(r.slice(c,p),""),c=p+h.length,o(r.slice(p,c),"completion-highlight")}return o(r.slice(c,r.length),""),n.push({type:"completion-spacer",value:" "}),t.meta&&n.push({type:"completion-meta",value:t.meta}),t.message&&n.push({type:"completion-message",value:t.message}),n},b.$updateOnChange=r,b.start=r,i.session.$computeWidth=function(){return this.screenWidth=0},i.isOpen=!1,i.isTopdown=!1,i.autoSelect=!0,i.filterText="",i.isMouseOver=!1,i.data=[],i.setData=function(e,t){i.filterText=t||"",i.setValue(a.stringRepeat("\n",e.length),-1),i.data=e||[],i.setRow(0)},i.getData=function(e){return i.data[e]},i.getRow=function(){return m.start.row},i.setRow=function(e){e=Math.max(this.autoSelect?0:-1,Math.min(this.data.length-1,e)),m.start.row!=e&&(i.selection.clearSelection(),m.start.row=m.end.row=e||0,i.session._emit("changeBackMarker"),i.moveCursorTo(e||0,0),i.isOpen&&i._signal("select"))},i.on("changeSelection",function(){i.isOpen&&i.setRow(i.selection.lead.row),i.renderer.scrollCursorIntoView()}),i.hide=function(){this.container.style.display="none",i.anchorPos=null,i.anchor=null,i.isOpen&&(i.isOpen=!1,this._signal("hide"))},i.tryShow=function(e,n,r,o){if(!o&&i.isOpen&&i.anchorPos&&i.anchor&&i.anchorPos.top===e.top&&i.anchorPos.left===e.left&&i.anchor===r)return!0;var s=this.container,a=this.renderer.scrollBar.width||10,c=window.innerHeight-a,l=window.innerWidth-a,u=this.renderer,h=u.$maxLines*n*1.4,p={top:0,bottom:0},d=c-e.top-3*this.$borderSize-n,f=e.top-3*this.$borderSize;r||(r=f<=d||d>=h?"bottom":"top"),"top"===r?(p.bottom=e.top-this.$borderSize,p.top=p.bottom-h):"bottom"===r&&(p.top=e.top+n+this.$borderSize,p.bottom=p.top+h);var g=p.top>=0&&p.bottom<=c;if(!o&&!g)return!1;g?u.$maxPixelHeight=null:"top"===r?u.$maxPixelHeight=f:u.$maxPixelHeight=d,"top"===r?(s.style.top="",s.style.bottom=c+a-p.bottom+"px",i.isTopdown=!1):(s.style.top=p.top+"px",s.style.bottom="",i.isTopdown=!0),s.style.display="";var m=e.left;return m+s.offsetWidth>l&&(m=l-s.offsetWidth),s.style.left=m+"px",s.style.right="",i.isOpen||(i.isOpen=!0,this._signal("show"),t=null),i.anchorPos=e,i.anchor=r,!0},i.show=function(e,t,n){this.tryShow(e,t,n?"bottom":void 0,!0)},i.goTo=function(e){var t=this.getRow(),n=this.session.getLength()-1;switch(e){case"up":t=t<=0?n:t-1;break;case"down":t=t>=n?-1:t+1;break;case"start":t=0;break;case"end":t=n}this.setRow(t)},i.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},i.$imageSize=0,i.$borderSize=1,i}}();c.importCssString('\n.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\n    background-color: #CAD6FA;\n    z-index: 1;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\n    background-color: #3a674e;\n}\n.ace_editor.ace_autocomplete .ace_line-hover {\n    border: 1px solid #abbffe;\n    margin-top: -1px;\n    background: rgba(233,233,253,0.4);\n    position: absolute;\n    z-index: 2;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {\n    border: 1px solid rgba(109, 150, 13, 0.8);\n    background: rgba(58, 103, 78, 0.62);\n}\n.ace_completion-meta {\n    opacity: 0.5;\n    margin-left: 0.9em;\n}\n.ace_completion-message {\n    margin-left: 0.9em;\n    color: blue;\n}\n.ace_editor.ace_autocomplete .ace_completion-highlight{\n    color: #2d69c7;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{\n    color: #93ca12;\n}\n.ace_editor.ace_autocomplete {\n    width: 300px;\n    z-index: 200000;\n    border: 1px lightgray solid;\n    position: fixed;\n    box-shadow: 2px 3px 5px rgba(0,0,0,.2);\n    line-height: 1.4;\n    background: #fefefe;\n    color: #111;\n}\n.ace_dark.ace_editor.ace_autocomplete {\n    border: 1px #484747 solid;\n    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);\n    line-height: 1.4;\n    background: #25282c;\n    color: #c1c1c1;\n}\n.ace_autocomplete .ace_text-layer  {\n    width: calc(100% - 8px);\n}\n.ace_autocomplete .ace_line {\n    display: flex;\n    align-items: center;\n}\n.ace_autocomplete .ace_line > * {\n    min-width: 0;\n    flex: 0 0 auto;\n}\n.ace_autocomplete .ace_line .ace_ {\n    flex: 0 1 auto;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n.ace_autocomplete .ace_completion-spacer {\n    flex: 1;\n}\n.ace_autocomplete.ace_loading:after  {\n    content: "";\n    position: absolute;\n    top: 0px;\n    height: 2px;\n    width: 8%;\n    background: blue;\n    z-index: 100;\n    animation: ace_progress 3s infinite linear;\n    animation-delay: 300ms;\n    transform: translateX(-100%) scaleX(1);\n}\n@keyframes ace_progress {\n    0% { transform: translateX(-100%) scaleX(1) }\n    50% { transform: translateX(625%) scaleX(2) } \n    100% { transform: translateX(1500%) scaleX(3) } \n}\n@media (prefers-reduced-motion) {\n    .ace_autocomplete.ace_loading:after {\n        transform: translateX(625%) scaleX(2);\n        animation: none;\n     }\n}\n',"autocompletion.css",!1),t.AcePopup=m,t.$singleLineEditor=g,t.getAriaId=h}),ace.define("ace/autocomplete/inline_screenreader",["require","exports","module"],function(e,t,n){"use strict";t.AceInlineScreenReader=function(){function e(e){this.editor=e,this.screenReaderDiv=document.createElement("div"),this.screenReaderDiv.classList.add("ace_screenreader-only"),this.editor.container.appendChild(this.screenReaderDiv)}return e.prototype.setScreenReaderContent=function(e){for(!this.popup&&this.editor.completer&&this.editor.completer.popup&&(this.popup=this.editor.completer.popup,this.popup.renderer.on("afterRender",(function(){var e=this.popup.getRow(),t=this.popup.renderer.$textLayer,n=t.element.childNodes[e-t.config.firstRow];if(n){for(var i="doc-tooltip ",r=0;r<this._lines.length;r++)i+="ace-inline-screenreader-line-".concat(r," ");n.setAttribute("aria-describedby",i)}}).bind(this)));this.screenReaderDiv.firstChild;)this.screenReaderDiv.removeChild(this.screenReaderDiv.firstChild);this._lines=e.split(/\r\n|\r|\n/);var t=this.createCodeBlock();this.screenReaderDiv.appendChild(t)},e.prototype.destroy=function(){this.screenReaderDiv.remove()},e.prototype.createCodeBlock=function(){var e=document.createElement("pre");e.setAttribute("id","ace-inline-screenreader");for(var t=0;t<this._lines.length;t++){var n=document.createElement("code");n.setAttribute("id","ace-inline-screenreader-line-".concat(t));var i=document.createTextNode(this._lines[t]);n.appendChild(i),e.appendChild(n)}return e},e}()}),ace.define("ace/autocomplete/inline",["require","exports","module","ace/snippets","ace/autocomplete/inline_screenreader"],function(e,t,n){"use strict";var i=e("../snippets").snippetManager,r=e("./inline_screenreader").AceInlineScreenReader;t.AceInline=function(){function e(){this.editor=null}return e.prototype.show=function(e,t,n){if(n=n||"",e&&this.editor&&this.editor!==e&&(this.hide(),this.editor=null,this.inlineScreenReader=null),!e||!t)return!1;this.inlineScreenReader||(this.inlineScreenReader=new r(e));var o=t.snippet?i.getDisplayTextForSnippet(e,t.snippet):t.value;return!t.hideInlinePreview&&!!o&&!!o.startsWith(n)&&(this.editor=e,this.inlineScreenReader.setScreenReaderContent(o),""===(o=o.slice(n.length))?e.removeGhostText():e.setGhostText(o),!0)},e.prototype.isOpen=function(){return!!this.editor&&!!this.editor.renderer.$ghostText},e.prototype.hide=function(){return!!this.editor&&(this.editor.removeGhostText(),!0)},e.prototype.destroy=function(){this.hide(),this.editor=null,this.inlineScreenReader&&(this.inlineScreenReader.destroy(),this.inlineScreenReader=null)},e}()}),ace.define("ace/autocomplete/util",["require","exports","module"],function(e,t,n){"use strict";t.parForEach=function(e,t,n){var i=0,r=e.length;0===r&&n();for(var o=0;o<r;o++)t(e[o],function(e,t){++i===r&&n(e,t)})};var i=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;t.retrievePrecedingIdentifier=function(e,t,n){n=n||i;for(var r=[],o=t-1;o>=0;o--)if(n.test(e[o]))r.push(e[o]);else break;return r.reverse().join("")},t.retrieveFollowingIdentifier=function(e,t,n){n=n||i;for(var r=[],o=t;o<e.length;o++)if(n.test(e[o]))r.push(e[o]);else break;return r},t.getCompletionPrefix=function(e){var t,n=e.getCursorPosition(),i=e.session.getLine(n.row);return e.completers.forEach((function(e){e.identifierRegexps&&e.identifierRegexps.forEach((function(e){!t&&e&&(t=this.retrievePrecedingIdentifier(i,n.column,e))}).bind(this))}).bind(this)),t||this.retrievePrecedingIdentifier(i,n.column)},t.triggerAutocomplete=function(e,t){var t=null==t?e.session.getPrecedingCharacter():t;return e.completers.some(function(e){if(e.triggerCharacters&&Array.isArray(e.triggerCharacters))return e.triggerCharacters.includes(t)})}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/inline","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config","ace/lib/event","ace/lib/scroll"],function(e,t,n){"use strict";var i=e("./keyboard/hash_handler").HashHandler,r=e("./autocomplete/popup").AcePopup,o=e("./autocomplete/inline").AceInline,s=e("./autocomplete/popup").getAriaId,a=e("./autocomplete/util"),c=e("./lib/lang"),l=e("./lib/dom"),u=e("./snippets").snippetManager,h=e("./config"),p=e("./lib/event"),d=e("./lib/scroll").preventParentScroll,f=function(e,t){t.completer&&t.completer.destroy()},g=function(){function e(){this.autoInsert=!1,this.autoSelect=!0,this.autoShown=!1,this.exactMatch=!1,this.inlineEnabled=!1,this.keyboardHandler=new i,this.keyboardHandler.bindKeys(this.commands),this.parentNode=null,this.setSelectOnHover=!1,this.hasSeen=new Set,this.showLoadingState=!1,this.stickySelectionDelay=500,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.changeTimer=c.delayedCall((function(){this.updateCompletions(!0)}).bind(this)),this.tooltipTimer=c.delayedCall(this.updateDocTooltip.bind(this),50),this.popupTimer=c.delayedCall(this.$updatePopupPosition.bind(this),50),this.stickySelectionTimer=c.delayedCall((function(){this.stickySelection=!0}).bind(this),this.stickySelectionDelay),this.$firstOpenTimer=c.delayedCall((function(){var t=this.completionProvider&&this.completionProvider.initialPosition;this.autoShown||this.popup&&this.popup.isOpen||!t||0===this.editor.completers.length||(this.completions=new v(e.completionsForLoading),this.openPopup(this.editor,t.prefix,!1),this.popup.renderer.setStyle("ace_loading",!0))}).bind(this),this.stickySelectionDelay)}return Object.defineProperty(e,"completionsForLoading",{get:function(){return[{caption:h.nls("autocomplete.loading","Loading..."),value:""}]},enumerable:!1,configurable:!0}),e.prototype.$init=function(){return this.popup=new r(this.parentNode||document.body||document.documentElement),this.popup.on("click",(function(e){this.insertMatch(),e.stop()}).bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.$onPopupShow.bind(this)),this.popup.on("hide",this.$onHidePopup.bind(this)),this.popup.on("select",this.$onPopupChange.bind(this)),p.addListener(this.popup.container,"mouseout",this.mouseOutListener.bind(this)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup.renderer.on("afterRender",this.$onPopupRender.bind(this)),this.popup},e.prototype.$initInline=function(){if(this.inlineEnabled&&!this.inlineRenderer)return this.inlineRenderer=new o,this.inlineRenderer},e.prototype.getPopup=function(){return this.popup||this.$init()},e.prototype.$onHidePopup=function(){this.inlineRenderer&&this.inlineRenderer.hide(),this.hideDocTooltip(),this.stickySelectionTimer.cancel(),this.popupTimer.cancel(),this.stickySelection=!1},e.prototype.$seen=function(e){!this.hasSeen.has(e)&&e&&e.completer&&e.completer.onSeen&&"function"==typeof e.completer.onSeen&&(e.completer.onSeen(this.editor,e),this.hasSeen.add(e))},e.prototype.$onPopupChange=function(e){if(this.inlineRenderer&&this.inlineEnabled){var t=e?null:this.popup.getData(this.popup.getRow());if(this.$updateGhostText(t),this.popup.isMouseOver&&this.setSelectOnHover)return void this.tooltipTimer.call(null,null);this.popupTimer.schedule(),this.tooltipTimer.schedule()}else this.popupTimer.call(null,null),this.tooltipTimer.call(null,null)},e.prototype.$updateGhostText=function(e){var t=this.base.row,n=this.base.column,i=this.editor.getCursorPosition().column,r=this.editor.session.getLine(t).slice(n,i);this.inlineRenderer.show(this.editor,e,r)?this.$seen(e):this.inlineRenderer.hide()},e.prototype.$onPopupRender=function(){var e=this.inlineRenderer&&this.inlineEnabled;if(this.completions&&this.completions.filtered&&this.completions.filtered.length>0)for(var t=this.popup.getFirstVisibleRow();t<=this.popup.getLastVisibleRow();t++){var n=this.popup.getData(t);n&&(!e||n.hideInlinePreview)&&this.$seen(n)}},e.prototype.$onPopupShow=function(e){this.$onPopupChange(e),this.stickySelection=!1,this.stickySelectionDelay>=0&&this.stickySelectionTimer.schedule(this.stickySelectionDelay)},e.prototype.observeLayoutChanges=function(){if(!this.$elements&&this.editor){window.addEventListener("resize",this.onLayoutChange,{passive:!0}),window.addEventListener("wheel",this.mousewheelListener);for(var e=this.editor.container.parentNode,t=[];e;)t.push(e),e.addEventListener("scroll",this.onLayoutChange,{passive:!0}),e=e.parentNode;this.$elements=t}},e.prototype.unObserveLayoutChanges=function(){var e=this;window.removeEventListener("resize",this.onLayoutChange,{passive:!0}),window.removeEventListener("wheel",this.mousewheelListener),this.$elements&&this.$elements.forEach(function(t){t.removeEventListener("scroll",e.onLayoutChange,{passive:!0})}),this.$elements=null},e.prototype.onLayoutChange=function(){if(!this.popup.isOpen)return this.unObserveLayoutChanges();this.$updatePopupPosition(),this.updateDocTooltip()},e.prototype.$updatePopupPosition=function(){var e=this.editor,t=e.renderer,n=t.layerConfig.lineHeight,i=t.$cursorLayer.getPixelPosition(this.base,!0);i.left-=this.popup.getTextLeftOffset();var r=e.container.getBoundingClientRect();i.top+=r.top-t.layerConfig.offset,i.left+=r.left-e.renderer.scrollLeft,i.left+=t.gutterWidth;var o={top:i.top,left:i.left};t.$ghostText&&t.$ghostTextWidget&&this.base.row===t.$ghostText.position.row&&(o.top+=t.$ghostTextWidget.el.offsetHeight);var s=e.container.getBoundingClientRect().bottom-n,a=s<o.top?{top:s,left:o.left}:o;this.popup.tryShow(a,n,"bottom")||this.popup.tryShow(i,n,"top")||this.popup.show(i,n)},e.prototype.openPopup=function(e,t,n){this.$firstOpenTimer.cancel(),this.popup||this.$init(),this.inlineEnabled&&!this.inlineRenderer&&this.$initInline(),this.popup.autoSelect=this.autoSelect,this.popup.setSelectOnHover(this.setSelectOnHover);var i,r=this.popup.getRow(),o=this.popup.data[r];this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:s(this.popup.getRow()),inline:this.inlineEnabled}),e.keyBinding.addKeyboardHandler(this.keyboardHandler),this.stickySelection&&(i=this.popup.data.indexOf(o)),i&&-1!==i||(i=0),this.popup.setRow(this.autoSelect?i:-1),i===r&&o!==this.completions.filtered[i]&&this.$onPopupChange();var a=this.inlineRenderer&&this.inlineEnabled;if(i===r&&a){var c=this.popup.getData(this.popup.getRow());this.$updateGhostText(c)}!n&&(this.popup.setTheme(e.getTheme()),this.popup.setFontSize(e.getFontSize()),this.$updatePopupPosition(),this.tooltipNode&&this.updateDocTooltip()),this.changeTimer.cancel(),this.observeLayoutChanges()},e.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener)),this.$firstOpenTimer.cancel(),this.changeTimer.cancel(),this.hideDocTooltip(),this.completionProvider&&this.completionProvider.detach(),this.popup&&this.popup.isOpen&&this.popup.hide(),this.popup&&this.popup.renderer&&this.popup.renderer.off("afterRender",this.$onPopupRender),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null,this.unObserveLayoutChanges()},e.prototype.changeListener=function(e){var t=this.editor.selection.lead;(t.row!=this.base.row||t.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},e.prototype.blurListener=function(e){var t=document.activeElement,n=this.editor.textInput.getElement(),i=e.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(e.relatedTarget),r=this.popup&&this.popup.container;t==n||t.parentNode==r||i||t==this.tooltipNode||e.relatedTarget==n||this.detach()},e.prototype.mousedownListener=function(e){this.detach()},e.prototype.mousewheelListener=function(e){this.popup&&!this.popup.isMouseOver&&this.detach()},e.prototype.mouseOutListener=function(e){this.popup.isOpen&&this.$updatePopupPosition()},e.prototype.goTo=function(e){this.popup.goTo(e)},e.prototype.insertMatch=function(e,t){if(e||(e=this.popup.getData(this.popup.getRow())),!e)return!1;if(""===e.value)return this.detach();var n=this.completions,i=this.getCompletionProvider().insertMatch(this.editor,e,n.filterText,t);return this.completions==n&&this.detach(),i},e.prototype.showPopup=function(e,t){this.editor&&this.detach(),this.activated=!0,this.editor=e,e.completer!=this&&(e.completer&&e.completer.detach(),e.completer=this),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,t)},e.prototype.getCompletionProvider=function(e){return this.completionProvider||(this.completionProvider=new m(e)),this.completionProvider},e.prototype.gatherCompletions=function(e,t){return this.getCompletionProvider().gatherCompletions(e,t)},e.prototype.updateCompletions=function(t,n){if(t&&this.base&&this.completions){var i=this.editor.getCursorPosition(),r=this.editor.session.getTextRange({start:this.base,end:i});return r==this.completions.filterText?void 0:(this.completions.setFilter(r),this.completions.filtered.length&&(1!=this.completions.filtered.length||this.completions.filtered[0].value!=r||this.completions.filtered[0].snippet))?void this.openPopup(this.editor,r,t):this.detach()}if(n&&n.matches){var i=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(i.row,i.column),this.base.$insertRight=!0,this.completions=new v(n.matches),this.getCompletionProvider().completions=this.completions,this.openPopup(this.editor,"",t)}var o=this.editor.getSession(),i=this.editor.getCursorPosition(),r=a.getCompletionPrefix(this.editor);this.base=o.doc.createAnchor(i.row,i.column-r.length),this.base.$insertRight=!0;var s={exactMatch:this.exactMatch,ignoreCaption:this.ignoreCaption};this.getCompletionProvider({prefix:r,pos:i}).provideCompletions(this.editor,s,(function(n,i,r){var o=i.filtered,s=a.getCompletionPrefix(this.editor);if(this.$firstOpenTimer.cancel(),r){if(!o.length){var c=!this.autoShown&&this.emptyMessage;if("function"==typeof c&&(c=this.emptyMessage(s)),c){var l=[{caption:c,value:""}];this.completions=new v(l),this.openPopup(this.editor,s,t),this.popup.renderer.setStyle("ace_loading",!1),this.popup.renderer.setStyle("ace_empty-message",!0);return}return this.detach()}if(1==o.length&&o[0].value==s&&!o[0].snippet)return this.detach();if(this.autoInsert&&!this.autoShown&&1==o.length)return this.insertMatch(o[0])}this.completions=!r&&this.showLoadingState?new v(e.completionsForLoading.concat(o),i.filterText):i,this.openPopup(this.editor,s,t),this.popup.renderer.setStyle("ace_empty-message",!1),this.popup.renderer.setStyle("ace_loading",!r)}).bind(this)),!this.showLoadingState||this.autoShown||this.popup&&this.popup.isOpen||this.$firstOpenTimer.delay(this.stickySelectionDelay/2)},e.prototype.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},e.prototype.updateDocTooltip=function(){var e=this.popup,t=this.completions&&this.completions.filtered,n=t&&(t[e.getHoveredRow()]||t[e.getRow()]),i=null;if(!n||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();for(var r=this.editor.completers.length,o=0;o<r;o++){var s=this.editor.completers[o];if(s.getDocTooltip&&n.completerId===s.id){i=s.getDocTooltip(n);break}}if(i||"string"==typeof n||(i=n),"string"==typeof i&&(i={docText:i}),!i||!(i.docHTML||i.docText))return this.hideDocTooltip();this.showDocTooltip(i)},e.prototype.showDocTooltip=function(e){this.tooltipNode||(this.tooltipNode=l.createElement("div"),this.tooltipNode.style.margin="0",this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.style.overscrollBehavior="contain",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this),this.tooltipNode.id="doc-tooltip",this.tooltipNode.setAttribute("role","tooltip"),this.tooltipNode.addEventListener("wheel",d));var t=this.editor.renderer.theme;this.tooltipNode.className="ace_tooltip ace_doc-tooltip "+(t.isDark?"ace_dark ":"")+(t.cssClass||"");var n=this.tooltipNode;e.docHTML?n.innerHTML=e.docHTML:e.docText&&(n.textContent=e.docText),n.parentNode||this.popup.container.appendChild(this.tooltipNode);var i=this.popup,r=i.container.getBoundingClientRect(),o=400,s=300,a=i.renderer.scrollBar.width||10,c=r.left,u=[Math.min((window.innerWidth-r.right-a)/o,1),Math.min(c/o,1),Math.min((i.isTopdown?r.top:window.innerHeight-a-r.bottom)/s*.9)],h=Math.max.apply(Math,u),p=n.style;p.display="block",h==u[0]?(p.left=r.right+1+"px",p.right="",p.maxWidth=o*h+"px",p.top=r.top+"px",p.bottom="",p.maxHeight=Math.min(window.innerHeight-a-r.top,s)+"px"):h==u[1]?(p.right=window.innerWidth-r.left+"px",p.left="",p.maxWidth=o*h+"px",p.top=r.top+"px",p.bottom="",p.maxHeight=Math.min(window.innerHeight-a-r.top,s)+"px"):h==u[2]&&(p.left=window.innerWidth-r.left+"px",p.maxWidth=Math.min(o,window.innerWidth)+"px",i.isTopdown?(p.top=r.bottom+"px",p.left=r.left+"px",p.right="",p.bottom="",p.maxHeight=Math.min(window.innerHeight-a-r.bottom,s)+"px"):(p.top=i.container.offsetTop-n.offsetHeight+"px",p.left=r.left+"px",p.right="",p.bottom="",p.maxHeight=Math.min(i.container.offsetTop,s)+"px"))},e.prototype.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),this.tooltipNode){var e=this.tooltipNode;this.editor.isFocused()||document.activeElement!=e||this.editor.focus(),this.tooltipNode=null,e.parentNode&&e.parentNode.removeChild(e)}},e.prototype.onTooltipClick=function(e){for(var t=e.target;t&&t!=this.tooltipNode;){if("A"==t.nodeName&&t.href){t.rel="noreferrer",t.target="_blank";break}t=t.parentNode}},e.prototype.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var e=this.popup.container;e&&e.parentNode&&e.parentNode.removeChild(e)}this.editor&&this.editor.completer==this&&(this.editor.off("destroy",f),this.editor.completer=null),this.inlineRenderer=this.popup=this.editor=null},e.for=function(t){return t.completer instanceof e||(t.completer&&(t.completer.destroy(),t.completer=null),h.get("sharedPopups")?(e.$sharedInstance||(e.$sharedInstance=new e),t.completer=e.$sharedInstance):(t.completer=new e,t.once("destroy",f))),t.completer},e}();g.prototype.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(e){var t=e.completer.insertMatch();if(t||e.tabstopManager)return t;e.completer.goTo("down")},Backspace:function(e){e.execCommand("backspace"),!a.getCompletionPrefix(e)&&e.completer&&e.completer.detach()},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}},g.startCommand={name:"startAutocomplete",exec:function(e,t){var n=g.for(e);n.autoInsert=!1,n.autoSelect=!0,n.autoShown=!1,n.showPopup(e,t),n.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var m=function(){function e(e){this.initialPosition=e,this.active=!0}return e.prototype.insertByIndex=function(e,t,n){return!!this.completions&&!!this.completions.filtered&&this.insertMatch(e,this.completions.filtered[t],n)},e.prototype.insertMatch=function(e,t,n){if(!t)return!1;if(e.startOperation({command:{name:"insertMatch"}}),t.completer&&t.completer.insertMatch)t.completer.insertMatch(e,t);else{if(!this.completions)return!1;var i=this.completions.filterText.length,r=0;if(t.range&&t.range.start.row===t.range.end.row&&(i-=this.initialPosition.prefix.length,i+=this.initialPosition.pos.column-t.range.start.column,r+=t.range.end.column-this.initialPosition.pos.column),i||r){o=e.selection.getAllRanges?e.selection.getAllRanges():[e.getSelectionRange()];for(var o,s,a=0;s=o[a];a++)s.start.column-=i,s.end.column+=r,e.session.remove(s)}t.snippet?u.insertSnippet(e,t.snippet):this.$insertString(e,t),t.completer&&t.completer.onInsert&&"function"==typeof t.completer.onInsert&&t.completer.onInsert(e,t),t.command&&"startAutocomplete"===t.command&&e.execCommand(t.command)}return e.endOperation(),!0},e.prototype.$insertString=function(e,t){var n=t.value||t;e.execCommand("insertstring",n)},e.prototype.gatherCompletions=function(e,t){var n=e.getSession(),i=e.getCursorPosition(),r=a.getCompletionPrefix(e),o=[];this.completers=e.completers;var s=e.completers.length;return e.completers.forEach(function(c,l){c.getCompletions(e,n,i,r,function(n,i){c.hideInlinePreview&&(i=i.map(function(e){return Object.assign(e,{hideInlinePreview:c.hideInlinePreview})})),!n&&i&&(o=o.concat(i)),t(null,{prefix:a.getCompletionPrefix(e),matches:o,finished:0==--s})})}),!0},e.prototype.provideCompletions=function(e,t,n){var i=(function(e){var i=e.prefix,r=e.matches;this.completions=new v(r),t.exactMatch&&(this.completions.exactMatch=!0),t.ignoreCaption&&(this.completions.ignoreCaption=!0),this.completions.setFilter(i),(e.finished||this.completions.filtered.length)&&n(null,this.completions,e.finished)}).bind(this),r=!0,o=null;if(this.gatherCompletions(e,(function(e,t){if(this.active&&(e&&(n(e,[],!0),this.detach()),0===t.prefix.indexOf(t.prefix))){if(r){o=t;return}i(t)}}).bind(this)),r=!1,o){var s=o;o=null,i(s)}},e.prototype.detach=function(){this.active=!1,this.completers&&this.completers.forEach(function(e){"function"==typeof e.cancel&&e.cancel()})},e}(),v=function(){function e(e,t){this.all=e,this.filtered=e,this.filterText=t||"",this.exactMatch=!1,this.ignoreCaption=!1}return e.prototype.setFilter=function(e){if(e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0))var t=this.filtered;else var t=this.all;this.filterText=e;var n=null;t=(t=(t=this.filterCompletions(t,this.filterText)).sort(function(e,t){return t.exactMatch-e.exactMatch||t.$score-e.$score||(e.caption||e.value).localeCompare(t.caption||t.value)})).filter(function(e){var t=e.snippet||e.caption||e.value;return t!==n&&(n=t,!0)}),this.filtered=t},e.prototype.filterCompletions=function(e,t){var n=[],i=t.toUpperCase(),r=t.toLowerCase();e:for(var o,s=0;o=e[s];s++){if(o.skipFilter){o.$score=o.score,n.push(o);continue}var a,c,l=!this.ignoreCaption&&o.caption||o.value||o.snippet;if(l){var u=-1,h=0,p=0;if(this.exactMatch){if(t!==l.substr(0,t.length))continue}else{var d=l.toLowerCase().indexOf(r);if(d>-1)p=d;else for(var f=0;f<t.length;f++){var g=l.indexOf(r[f],u+1),m=l.indexOf(i[f],u+1);if((a=g>=0&&(m<0||g<m)?g:m)<0)continue e;(c=a-u-1)>0&&(-1===u&&(p+=10),p+=c,h|=1<<f),u=a}}o.matchMask=h,o.exactMatch=+!p,o.$score=(o.score||0)-p,n.push(o)}}return n},e}();t.Autocomplete=g,t.CompletionProvider=m,t.FilteredList=v}),ace.define("ace/marker_group",["require","exports","module"],function(e,t,n){"use strict";var i=function(){function e(e,t){t&&(this.markerType=t.markerType),this.markers=[],this.session=e,e.addDynamicMarker(this)}return e.prototype.getMarkerAtPosition=function(e){return this.markers.find(function(t){return t.range.contains(e.row,e.column)})},e.prototype.markersComparator=function(e,t){return e.range.start.row-t.range.start.row},e.prototype.setMarkers=function(e){this.markers=e.sort(this.markersComparator).slice(0,this.MAX_MARKERS),this.session._signal("changeBackMarker")},e.prototype.update=function(e,t,n,i){if(this.markers&&this.markers.length)for(var r,o=i.firstRow,s=i.lastRow,a=0,c=0,l=0;l<this.markers.length;l++){var u=this.markers[l];if(!(u.range.end.row<o)&&!(u.range.start.row>s)){if(u.range.start.row===c?a++:(c=u.range.start.row,a=0),!(a>200)){var h=u.range.clipRows(o,s);if(h.start.row!==h.end.row||h.start.column!==h.end.column){var p=h.toScreenRange(n);if(p.isEmpty()){(r=n.getNextFoldLine(h.end.row,r))&&r.end.row>h.end.row&&(o=r.end.row);continue}"fullLine"===this.markerType?t.drawFullLineMarker(e,p,u.className,i):p.isMultiLine()?"line"===this.markerType?t.drawMultiLineMarker(e,p,u.className,i):t.drawTextMarker(e,p,u.className,i):t.drawSingleLineMarker(e,p,u.className+" ace_br15",i)}}}}},e}();i.prototype.MAX_MARKERS=1e4,t.MarkerGroup=i}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(e,t,n){var i=e("../range").Range,r=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function o(e,t){return e.getTextRange(i.fromPoints({row:0,column:0},t)).split(r).length-1}function s(e,t){var n=o(e,t),i=e.getValue().split(r),s=Object.create(null),a=i[n];return i.forEach(function(e,t){if(e&&e!==a){var r=Math.abs(n-t),o=i.length-r;s[e]?s[e]=Math.max(o,s[e]):s[e]=o}}),s}t.getCompletions=function(e,t,n,i,r){var o=s(t,n);r(null,Object.keys(o).map(function(e){return{caption:e,value:e,score:o[e],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/marker_group","ace/autocomplete/text_completer","ace/editor","ace/config"],function(e,t,n){"use strict";var i,r=e("../snippets").snippetManager,o=e("../autocomplete").Autocomplete,s=e("../config"),a=e("../lib/lang"),c=e("../autocomplete/util"),l=e("../marker_group").MarkerGroup,u=e("../autocomplete/text_completer"),h={getCompletions:function(e,t,n,i,r){if(t.$mode.completer)return t.$mode.completer.getCompletions(e,t,n,i,r);var o=e.session.getState(n.row),s=t.$mode.getCompletions(o,t,n,i);r(null,s=s.map(function(e){return e.completerId=h.id,e}))},id:"keywordCompleter"},p=function(e){var t={};return e.replace(/\${(\d+)(:(.*?))?}/g,function(e,n,i,r){return t[n]=r||""}).replace(/\$(\d+?)/g,function(e,n){return t[n]})},d={getCompletions:function(e,t,n,i,o){var s=[],a=t.getTokenAt(n.row,n.column);a&&a.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?s.push("html-tag"):s=r.getActiveScopes(e);var c=r.snippetMap,l=[];s.forEach(function(e){for(var t=c[e]||[],n=t.length;n--;){var i=t[n],r=i.name||i.tabTrigger;r&&l.push({caption:r,snippet:i.content,meta:i.tabTrigger&&!i.name?i.tabTrigger+"⇥ ":"snippet",completerId:d.id})}},this),o(null,l)},getDocTooltip:function(e){e.snippet&&!e.docHTML&&(e.docHTML="<b>"+a.escapeHTML(e.caption)+"</b><hr></hr>"+a.escapeHTML(p(e.snippet)))},id:"snippetCompleter"},f=[d,u,h];t.setCompleters=function(e){f.length=0,e&&f.push.apply(f,e)},t.addCompleter=function(e){f.push(e)},t.textCompleter=u,t.keyWordCompleter=h,t.snippetCompleter=d;var g={name:"expandSnippet",exec:function(e){return r.expandWithTab(e)},bindKey:"Tab"},m=function(e,t){v(t.session.$mode)},v=function(e){"string"==typeof e&&(e=s.$modes[e]),e&&(r.files||(r.files={}),y(e.$id,e.snippetFileId),e.modes&&e.modes.forEach(v))},y=function(e,t){t&&e&&!r.files[e]&&(r.files[e]={},s.loadModule(t,function(t){t&&(r.files[e]=t,!t.snippets&&t.snippetText&&(t.snippets=r.parseSnippetFile(t.snippetText)),r.register(t.snippets||[],t.scope),t.includeScopes&&(r.snippetMap[t.scope].includeScopes=t.includeScopes,t.includeScopes.forEach(function(e){v("ace/mode/"+e)})))}))},b=function(e){var t=e.editor,n=t.completer&&t.completer.activated;if("backspace"===e.command.name)n&&!c.getCompletionPrefix(t)&&t.completer.detach();else if("insertstring"===e.command.name&&!n){i=e;var r=e.editor.$liveAutocompletionDelay;r?_.delay(r):w(e)}},_=a.delayedCall(function(){w(i)},0),w=function(e){var t=e.editor,n=c.getCompletionPrefix(t),i=e.args,r=c.triggerAutocomplete(t,i);if(n&&n.length>=t.$liveAutocompletionThreshold||r){var s=o.for(t);s.autoShown=!0,s.showPopup(t)}},S=e("../editor").Editor;e("../config").defineOptions(S.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(o.for(this),this.completers||(this.completers=Array.isArray(e)?e:f),this.commands.addCommand(o.startCommand)):this.commands.removeCommand(o.startCommand)},value:!1},enableLiveAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:f),this.commands.on("afterExec",b)):this.commands.off("afterExec",b)},value:!1},liveAutocompletionDelay:{initialValue:0},liveAutocompletionThreshold:{initialValue:0},enableSnippets:{set:function(e){e?(this.commands.addCommand(g),this.on("changeMode",m),m(null,this)):(this.commands.removeCommand(g),this.off("changeMode",m))},value:!1}}),t.MarkerGroup=l}),function(){ace.require(["ace/ext/language_tools"],function(t){e&&(e.exports=t)})}()},55208:function(e,t,n){e=n.nmd(e),ace.define("ace/ext/searchbox-css",["require","exports","module"],function(e,t,n){n.exports='\n\n/* ------------------------------------------------------------------------------------------\n * Editor Search Form\n * --------------------------------------------------------------------------------------- */\n.ace_search {\n    background-color: #ddd;\n    color: #666;\n    border: 1px solid #cbcbcb;\n    border-top: 0 none;\n    overflow: hidden;\n    margin: 0;\n    padding: 4px 6px 0 4px;\n    position: absolute;\n    top: 0;\n    z-index: 99;\n    white-space: normal;\n}\n.ace_search.left {\n    border-left: 0 none;\n    border-radius: 0px 0px 5px 0px;\n    left: 0;\n}\n.ace_search.right {\n    border-radius: 0px 0px 0px 5px;\n    border-right: 0 none;\n    right: 0;\n}\n\n.ace_search_form, .ace_replace_form {\n    margin: 0 20px 4px 0;\n    overflow: hidden;\n    line-height: 1.9;\n}\n.ace_replace_form {\n    margin-right: 0;\n}\n.ace_search_form.ace_nomatch {\n    outline: 1px solid red;\n}\n\n.ace_search_field {\n    border-radius: 3px 0 0 3px;\n    background-color: white;\n    color: black;\n    border: 1px solid #cbcbcb;\n    border-right: 0 none;\n    outline: 0;\n    padding: 0;\n    font-size: inherit;\n    margin: 0;\n    line-height: inherit;\n    padding: 0 6px;\n    min-width: 17em;\n    vertical-align: top;\n    min-height: 1.8em;\n    box-sizing: content-box;\n}\n.ace_searchbtn {\n    border: 1px solid #cbcbcb;\n    line-height: inherit;\n    display: inline-block;\n    padding: 0 6px;\n    background: #fff;\n    border-right: 0 none;\n    border-left: 1px solid #dcdcdc;\n    cursor: pointer;\n    margin: 0;\n    position: relative;\n    color: #666;\n}\n.ace_searchbtn:last-child {\n    border-radius: 0 3px 3px 0;\n    border-right: 1px solid #cbcbcb;\n}\n.ace_searchbtn:disabled {\n    background: none;\n    cursor: default;\n}\n.ace_searchbtn:hover {\n    background-color: #eef1f6;\n}\n.ace_searchbtn.prev, .ace_searchbtn.next {\n     padding: 0px 0.7em\n}\n.ace_searchbtn.prev:after, .ace_searchbtn.next:after {\n     content: "";\n     border: solid 2px #888;\n     width: 0.5em;\n     height: 0.5em;\n     border-width:  2px 0 0 2px;\n     display:inline-block;\n     transform: rotate(-45deg);\n}\n.ace_searchbtn.next:after {\n     border-width: 0 2px 2px 0 ;\n}\n.ace_searchbtn_close {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;\n    border-radius: 50%;\n    border: 0 none;\n    color: #656565;\n    cursor: pointer;\n    font: 16px/16px Arial;\n    padding: 0;\n    height: 14px;\n    width: 14px;\n    top: 9px;\n    right: 7px;\n    position: absolute;\n}\n.ace_searchbtn_close:hover {\n    background-color: #656565;\n    background-position: 50% 100%;\n    color: white;\n}\n\n.ace_button {\n    margin-left: 2px;\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    overflow: hidden;\n    opacity: 0.7;\n    border: 1px solid rgba(100,100,100,0.23);\n    padding: 1px;\n    box-sizing:    border-box!important;\n    color: black;\n}\n\n.ace_button:hover {\n    background-color: #eee;\n    opacity:1;\n}\n.ace_button:active {\n    background-color: #ddd;\n}\n\n.ace_button.checked {\n    border-color: #3399ff;\n    opacity:1;\n}\n\n.ace_search_options{\n    margin-bottom: 3px;\n    text-align: right;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    clear: both;\n}\n\n.ace_search_counter {\n    float: left;\n    font-family: arial;\n    padding: 0 8px;\n}'}),ace.define("ace/ext/searchbox",["require","exports","module","ace/ext/searchbox","ace/ext/searchbox","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/ext/searchbox-css","ace/keyboard/hash_handler","ace/lib/keys","ace/config"],function(e,t,n){"use strict";var i=e("../lib/dom"),r=e("../lib/lang"),o=e("../lib/event"),s=e("./searchbox-css"),a=e("../keyboard/hash_handler").HashHandler,c=e("../lib/keys"),l=e("../config").nls,u=999;i.importCssString(s,"ace_searchbox",!1);var h=function(){function e(e,t,n){this.activeInput,this.element=i.buildDom(["div",{class:"ace_search right"},["span",{action:"hide",class:"ace_searchbtn_close"}],["div",{class:"ace_search_form"},["input",{class:"ace_search_field",placeholder:l("search-box.find.placeholder","Search for"),spellcheck:"false"}],["span",{action:"findPrev",class:"ace_searchbtn prev"},"​"],["span",{action:"findNext",class:"ace_searchbtn next"},"​"],["span",{action:"findAll",class:"ace_searchbtn",title:"Alt-Enter"},l("search-box.find-all.text","All")]],["div",{class:"ace_replace_form"},["input",{class:"ace_search_field",placeholder:l("search-box.replace.placeholder","Replace with"),spellcheck:"false"}],["span",{action:"replaceAndFindNext",class:"ace_searchbtn"},l("search-box.replace-next.text","Replace")],["span",{action:"replaceAll",class:"ace_searchbtn"},l("search-box.replace-all.text","All")]],["div",{class:"ace_search_options"},["span",{action:"toggleReplace",class:"ace_button",title:l("search-box.toggle-replace.title","Toggle Replace mode"),style:"float:left;margin-top:-2px;padding:0 5px;"},"+"],["span",{class:"ace_search_counter"}],["span",{action:"toggleRegexpMode",class:"ace_button",title:l("search-box.toggle-regexp.title","RegExp Search")},".*"],["span",{action:"toggleCaseSensitive",class:"ace_button",title:l("search-box.toggle-case.title","CaseSensitive Search")},"Aa"],["span",{action:"toggleWholeWords",class:"ace_button",title:l("search-box.toggle-whole-word.title","Whole Word Search")},"\\b"],["span",{action:"searchInSelection",class:"ace_button",title:l("search-box.toggle-in-selection.title","Search In Selection")},"S"]]]),this.setSession=this.setSession.bind(this),this.$onEditorInput=this.onEditorInput.bind(this),this.$init(),this.setEditor(e),i.importCssString(s,"ace_searchbox",e.container),o.addListener(this.element,"touchstart",function(e){e.stopPropagation()},e)}return e.prototype.setEditor=function(e){e.searchBox=this,e.renderer.scroller.appendChild(this.element),this.editor=e},e.prototype.setSession=function(e){this.searchRange=null,this.$syncOptions(!0)},e.prototype.onEditorInput=function(){this.find(!1,!1,!0)},e.prototype.$initElements=function(e){this.searchBox=e.querySelector(".ace_search_form"),this.replaceBox=e.querySelector(".ace_replace_form"),this.searchOption=e.querySelector("[action=searchInSelection]"),this.replaceOption=e.querySelector("[action=toggleReplace]"),this.regExpOption=e.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=e.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=e.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=e.querySelector(".ace_search_counter")},e.prototype.$init=function(){var e=this.element;this.$initElements(e);var t=this;o.addListener(e,"mousedown",function(e){setTimeout(function(){t.activeInput.focus()},0),o.stopPropagation(e)}),o.addListener(e,"click",function(e){var n=(e.target||e.srcElement).getAttribute("action");n&&t[n]?t[n]():t.$searchBarKb.commands[n]&&t.$searchBarKb.commands[n].exec(t),o.stopPropagation(e)}),o.addCommandKeyListener(e,function(e,n,i){var r=c.keyCodeToString(i),s=t.$searchBarKb.findKeyCommand(n,r);s&&s.exec&&(s.exec(t),o.stopEvent(e))}),this.$onChange=r.delayedCall(function(){t.find(!1,!1)}),o.addListener(this.searchInput,"input",function(){t.$onChange.schedule(20)}),o.addListener(this.searchInput,"focus",function(){t.activeInput=t.searchInput,t.searchInput.value&&t.highlight()}),o.addListener(this.replaceInput,"focus",function(){t.activeInput=t.replaceInput,t.searchInput.value&&t.highlight()})},e.prototype.setSearchRange=function(e){this.searchRange=e,e?this.searchRangeMarker=this.editor.session.addMarker(e,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},e.prototype.$syncOptions=function(e){i.setCssClass(this.replaceOption,"checked",this.searchRange),i.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"-":"+",i.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),i.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),i.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var t=this.editor.getReadOnly();this.replaceOption.style.display=t?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!t?"":"none",this.find(!1,!1,e)},e.prototype.highlight=function(e){this.editor.session.highlight(e||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},e.prototype.find=function(e,t,n){if(this.editor.session){var r=this.editor.find(this.searchInput.value,{skipCurrent:e,backwards:t,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:n,range:this.searchRange}),o=!r&&this.searchInput.value;i.setCssClass(this.searchBox,"ace_nomatch",o),this.editor._emit("findSearchBox",{match:!o}),this.highlight(),this.updateCounter()}},e.prototype.updateCounter=function(){var e=this.editor,t=e.$search.$options.re,n=t.unicode,i=0,o=0;if(t){var s,a=this.searchRange?e.session.getTextRange(this.searchRange):e.getValue();e.$search.$isMultilineSearch(e.getLastSearchOptions())&&(a=a.replace(/\r\n|\r|\n/g,"\n"),e.session.doc.$autoNewLine="\n");var c=e.session.doc.positionToIndex(e.selection.anchor);this.searchRange&&(c-=e.session.doc.positionToIndex(this.searchRange.start));for(var h=t.lastIndex=0;(s=t.exec(a))&&(i++,(h=s.index)<=c&&o++,!(i>u))&&(s[0]||(t.lastIndex=h+=r.skipEmptyMatch(a,h,n),!(h>=a.length))););}this.searchCounter.textContent=l("search-box.search-counter","$0 of $1",[o,i>u?u+"+":i])},e.prototype.findNext=function(){this.find(!0,!1)},e.prototype.findPrev=function(){this.find(!0,!0)},e.prototype.findAll=function(){var e=!this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked})&&this.searchInput.value;i.setCssClass(this.searchBox,"ace_nomatch",e),this.editor._emit("findSearchBox",{match:!e}),this.highlight(),this.hide()},e.prototype.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},e.prototype.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},e.prototype.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},e.prototype.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.editor.off("input",this.$onEditorInput),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},e.prototype.show=function(e,t){this.active=!0,this.editor.on("changeSession",this.setSession),this.editor.on("input",this.$onEditorInput),this.element.style.display="",this.replaceOption.checked=t,this.editor.$search.$options.regExp&&(e=r.escapeRegExp(e)),void 0!=e&&(this.searchInput.value=e),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},e.prototype.isFocused=function(){var e=document.activeElement;return e==this.searchInput||e==this.replaceInput},e}(),p=new a;p.bindKeys({"Ctrl-f|Command-f":function(e){var t=e.isReplace=!e.isReplace;e.replaceBox.style.display=t?"":"none",e.replaceOption.checked=!1,e.$syncOptions(),e.searchInput.focus()},"Ctrl-H|Command-Option-F":function(e){e.editor.getReadOnly()||(e.replaceOption.checked=!0,e.$syncOptions(),e.replaceInput.focus())},"Ctrl-G|Command-G":function(e){e.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(e){e.findPrev()},esc:function(e){setTimeout(function(){e.hide()})},Return:function(e){e.activeInput==e.replaceInput&&e.replace(),e.findNext()},"Shift-Return":function(e){e.activeInput==e.replaceInput&&e.replace(),e.findPrev()},"Alt-Return":function(e){e.activeInput==e.replaceInput&&e.replaceAll(),e.findAll()},Tab:function(e){(e.activeInput==e.replaceInput?e.searchInput:e.replaceInput).focus()}}),p.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(e){e.regExpOption.checked=!e.regExpOption.checked,e.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(e){e.caseSensitiveOption.checked=!e.caseSensitiveOption.checked,e.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(e){e.wholeWordOption.checked=!e.wholeWordOption.checked,e.$syncOptions()}},{name:"toggleReplace",exec:function(e){e.replaceOption.checked=!e.replaceOption.checked,e.$syncOptions()}},{name:"searchInSelection",exec:function(e){e.searchOption.checked=!e.searchRange,e.setSearchRange(e.searchOption.checked&&e.editor.getSelectionRange()),e.$syncOptions()}}]);var d=new a([{bindKey:"Esc",name:"closeSearchBar",exec:function(e){e.searchBox.hide()}}]);h.prototype.$searchBarKb=p,h.prototype.$closeSearchBarKb=d,t.SearchBox=h,t.Search=function(e,t){var n=e.searchBox||new h(e),i=e.session.selection.getRange(),r=i.isMultiLine()?"":e.session.getTextRange(i);n.show(r,t)}}),function(){ace.require(["ace/ext/searchbox"],function(t){e&&(e.exports=t)})}()},67744:function(e,t,n){e=n.nmd(e),ace.define("ace/ext/menu_tools/settings_menu.css",["require","exports","module"],function(e,t,n){n.exports="#ace_settingsmenu, #kbshortcutmenu {\n    background-color: #F7F7F7;\n    color: black;\n    box-shadow: -5px 4px 5px rgba(126, 126, 126, 0.55);\n    padding: 1em 0.5em 2em 1em;\n    overflow: auto;\n    position: absolute;\n    margin: 0;\n    bottom: 0;\n    right: 0;\n    top: 0;\n    z-index: 9991;\n    cursor: default;\n}\n\n.ace_dark #ace_settingsmenu, .ace_dark #kbshortcutmenu {\n    box-shadow: -20px 10px 25px rgba(126, 126, 126, 0.25);\n    background-color: rgba(255, 255, 255, 0.6);\n    color: black;\n}\n\n.ace_optionsMenuEntry:hover {\n    background-color: rgba(100, 100, 100, 0.1);\n    transition: all 0.3s\n}\n\n.ace_closeButton {\n    background: rgba(245, 146, 146, 0.5);\n    border: 1px solid #F48A8A;\n    border-radius: 50%;\n    padding: 7px;\n    position: absolute;\n    right: -8px;\n    top: -8px;\n    z-index: 100000;\n}\n.ace_closeButton{\n    background: rgba(245, 146, 146, 0.9);\n}\n.ace_optionsMenuKey {\n    color: darkslateblue;\n    font-weight: bold;\n}\n.ace_optionsMenuCommand {\n    color: darkcyan;\n    font-weight: normal;\n}\n.ace_optionsMenuEntry input, .ace_optionsMenuEntry button {\n    vertical-align: middle;\n}\n\n.ace_optionsMenuEntry button[ace_selected_button=true] {\n    background: #e7e7e7;\n    box-shadow: 1px 0px 2px 0px #adadad inset;\n    border-color: #adadad;\n}\n.ace_optionsMenuEntry button {\n    background: white;\n    border: 1px solid lightgray;\n    margin: 0px;\n}\n.ace_optionsMenuEntry button:hover{\n    background: #f0f0f0;\n}"}),ace.define("ace/ext/menu_tools/overlay_page",["require","exports","module","ace/ext/menu_tools/overlay_page","ace/lib/dom","ace/ext/menu_tools/settings_menu.css"],function(e,t,n){"use strict";var i=e("../../lib/dom"),r=e("./settings_menu.css");i.importCssString(r,"settings_menu.css",!1),n.exports.overlayPage=function(e,t,n){var i=document.createElement("div"),r=!1;function o(e){27===e.keyCode&&s()}function s(){i&&(document.removeEventListener("keydown",o),i.parentNode.removeChild(i),e&&e.focus(),i=null,n&&n())}function a(e){r=e,e&&(i.style.pointerEvents="none",t.style.pointerEvents="auto")}return i.style.cssText="margin: 0; padding: 0; position: fixed; top:0; bottom:0; left:0; right:0;z-index: 9990; "+(e?"background-color: rgba(0, 0, 0, 0.3);":""),i.addEventListener("click",function(e){r||s()}),document.addEventListener("keydown",o),t.addEventListener("click",function(e){e.stopPropagation()}),i.appendChild(t),document.body.appendChild(i),e&&e.blur(),{close:s,setIgnoreFocusOut:a}}}),ace.define("ace/ext/modelist",["require","exports","module"],function(e,t,n){"use strict";var i=[];function r(e){for(var t=c.text,n=e.split(/[\/\\]/).pop(),r=0;r<i.length;r++)if(i[r].supportsFile(n)){t=i[r];break}return t}var o=function(){function e(e,t,n){var i;this.name=e,this.caption=t,this.mode="ace/mode/"+e,this.extensions=n,i=/\^/.test(n)?n.replace(/\|(\^)?/g,function(e,t){return"$|"+(t?"^":"^.*\\.")})+"$":"\\.("+n+")$",this.extRe=RegExp(i,"gi")}return e.prototype.supportsFile=function(e){return e.match(this.extRe)},e}(),s={ABAP:["abap"],ABC:["abc"],ActionScript:["as"],ADA:["ada|adb"],Alda:["alda"],Apache_Conf:["^htaccess|^htgroups|^htpasswd|^conf|htaccess|htgroups|htpasswd"],Apex:["apex|cls|trigger|tgr"],AQL:["aql"],AsciiDoc:["asciidoc|adoc"],ASL:["dsl|asl|asl.json"],Assembly_ARM32:["s"],Assembly_x86:["asm|a"],Astro:["astro"],AutoHotKey:["ahk"],Basic:["bas|bak"],BatchFile:["bat|cmd"],BibTeX:["bib"],C_Cpp:["cpp|c|cc|cxx|h|hh|hpp|ino"],C9Search:["c9search_results"],Cirru:["cirru|cr"],Clojure:["clj|cljs"],Clue:["clue"],Cobol:["CBL|COB"],coffee:["coffee|cf|cson|^Cakefile"],ColdFusion:["cfm|cfc"],Crystal:["cr"],CSharp:["cs"],Csound_Document:["csd"],Csound_Orchestra:["orc"],Csound_Score:["sco"],CSS:["css"],CSV:["csv"],Curly:["curly"],Cuttlefish:["conf"],D:["d|di"],Dart:["dart"],Diff:["diff|patch"],Django:["djt|html.djt|dj.html|djhtml"],Dockerfile:["^Dockerfile"],Dot:["dot"],Drools:["drl"],Edifact:["edi"],Eiffel:["e|ge"],EJS:["ejs"],Elixir:["ex|exs"],Elm:["elm"],Erlang:["erl|hrl"],Flix:["flix"],Forth:["frt|fs|ldr|fth|4th"],Fortran:["f|f90"],FSharp:["fsi|fs|ml|mli|fsx|fsscript"],FSL:["fsl"],FTL:["ftl"],Gcode:["gcode"],Gherkin:["feature"],Gitignore:["^.gitignore"],Glsl:["glsl|frag|vert"],Gobstones:["gbs"],golang:["go"],GraphQLSchema:["gql"],Groovy:["groovy"],HAML:["haml"],Handlebars:["hbs|handlebars|tpl|mustache"],Haskell:["hs"],Haskell_Cabal:["cabal"],haXe:["hx"],Hjson:["hjson"],HTML:["html|htm|xhtml|we|wpy"],HTML_Elixir:["eex|html.eex"],HTML_Ruby:["erb|rhtml|html.erb"],INI:["ini|conf|cfg|prefs"],Io:["io"],Ion:["ion"],Jack:["jack"],Jade:["jade|pug"],Java:["java"],JavaScript:["js|jsm|cjs|mjs"],JEXL:["jexl"],JSON:["json"],JSON5:["json5"],JSONiq:["jq"],JSP:["jsp"],JSSM:["jssm|jssm_state"],JSX:["jsx"],Julia:["jl"],Kotlin:["kt|kts"],LaTeX:["tex|latex|ltx|bib"],Latte:["latte"],LESS:["less"],Liquid:["liquid"],Lisp:["lisp"],LiveScript:["ls"],Log:["log"],LogiQL:["logic|lql"],Logtalk:["lgt"],LSL:["lsl"],Lua:["lua"],LuaPage:["lp"],Lucene:["lucene"],Makefile:["^Makefile|^GNUmakefile|^makefile|^OCamlMakefile|make"],Markdown:["md|markdown"],Mask:["mask"],MATLAB:["matlab"],Maze:["mz"],MediaWiki:["wiki|mediawiki"],MEL:["mel"],MIPS:["s|asm"],MIXAL:["mixal"],MUSHCode:["mc|mush"],MySQL:["mysql"],Nasal:["nas"],Nginx:["nginx|conf"],Nim:["nim"],Nix:["nix"],NSIS:["nsi|nsh"],Nunjucks:["nunjucks|nunjs|nj|njk"],ObjectiveC:["m|mm"],OCaml:["ml|mli"],Odin:["odin"],PartiQL:["partiql|pql"],Pascal:["pas|p"],Perl:["pl|pm"],pgSQL:["pgsql"],PHP:["php|inc|phtml|shtml|php3|php4|php5|phps|phpt|aw|ctp|module"],PHP_Laravel_blade:["blade.php"],Pig:["pig"],PLSQL:["plsql"],Powershell:["ps1"],Praat:["praat|praatscript|psc|proc"],Prisma:["prisma"],Prolog:["plg|prolog"],Properties:["properties"],Protobuf:["proto"],PRQL:["prql"],Puppet:["epp|pp"],Python:["py"],QML:["qml"],R:["r"],Raku:["raku|rakumod|rakutest|p6|pl6|pm6"],Razor:["cshtml|asp"],RDoc:["Rd"],Red:["red|reds"],RHTML:["Rhtml"],Robot:["robot|resource"],RST:["rst"],Ruby:["rb|ru|gemspec|rake|^Guardfile|^Rakefile|^Gemfile"],Rust:["rs"],SaC:["sac"],SASS:["sass"],SCAD:["scad"],Scala:["scala|sbt"],Scheme:["scm|sm|rkt|oak|scheme"],Scrypt:["scrypt"],SCSS:["scss"],SH:["sh|bash|^.bashrc"],SJS:["sjs"],Slim:["slim|skim"],Smarty:["smarty|tpl"],Smithy:["smithy"],snippets:["snippets"],Soy_Template:["soy"],Space:["space"],SPARQL:["rq"],SQL:["sql"],SQLServer:["sqlserver"],Stylus:["styl|stylus"],SVG:["svg"],Swift:["swift"],Tcl:["tcl"],Terraform:["tf","tfvars","terragrunt"],Tex:["tex"],Text:["txt"],Textile:["textile"],Toml:["toml"],TSV:["tsv"],TSX:["tsx"],Turtle:["ttl"],Twig:["twig|swig"],Typescript:["ts|mts|cts|typescript|str"],Vala:["vala"],VBScript:["vbs|vb"],Velocity:["vm"],Verilog:["v|vh|sv|svh"],VHDL:["vhd|vhdl"],Visualforce:["vfp|component|page"],Vue:["vue"],Wollok:["wlk|wpgm|wtest"],XML:["xml|rdf|rss|wsdl|xslt|atom|mathml|mml|xul|xbl|xaml"],XQuery:["xq"],YAML:["yaml|yml"],Zeek:["zeek|bro"],Zig:["zig"]},a={ObjectiveC:"Objective-C",CSharp:"C#",golang:"Go",C_Cpp:"C and C++",Csound_Document:"Csound Document",Csound_Orchestra:"Csound",Csound_Score:"Csound Score",coffee:"CoffeeScript",HTML_Ruby:"HTML (Ruby)",HTML_Elixir:"HTML (Elixir)",FTL:"FreeMarker",PHP_Laravel_blade:"PHP (Blade Template)",Perl6:"Perl 6",AutoHotKey:"AutoHotkey / AutoIt"},c={};for(var l in s){var u=s[l],h=(a[l]||l).replace(/_/g," "),p=l.toLowerCase(),d=new o(p,h,u[0]);c[p]=d,i.push(d)}t.getModeForPath=r,t.modes=i,t.modesByName=c}),ace.define("ace/ext/themelist",["require","exports","module"],function(e,t,n){"use strict";var i=[["Chrome"],["Clouds"],["Crimson Editor"],["Dawn"],["Dreamweaver"],["Eclipse"],["GitHub Light Default"],["GitHub (Legacy)","github","light"],["IPlastic"],["Solarized Light"],["TextMate"],["Tomorrow"],["XCode"],["Kuroir"],["KatzenMilch"],["SQL Server","sqlserver","light"],["CloudEditor","cloud_editor","light"],["Ambiance","ambiance","dark"],["Chaos","chaos","dark"],["Clouds Midnight","clouds_midnight","dark"],["Dracula","","dark"],["Cobalt","cobalt","dark"],["Gruvbox","gruvbox","dark"],["Green on Black","gob","dark"],["idle Fingers","idle_fingers","dark"],["krTheme","kr_theme","dark"],["Merbivore","merbivore","dark"],["Merbivore Soft","merbivore_soft","dark"],["Mono Industrial","mono_industrial","dark"],["Monokai","monokai","dark"],["Nord Dark","nord_dark","dark"],["One Dark","one_dark","dark"],["Pastel on dark","pastel_on_dark","dark"],["Solarized Dark","solarized_dark","dark"],["Terminal","terminal","dark"],["Tomorrow Night","tomorrow_night","dark"],["Tomorrow Night Blue","tomorrow_night_blue","dark"],["Tomorrow Night Bright","tomorrow_night_bright","dark"],["Tomorrow Night 80s","tomorrow_night_eighties","dark"],["Twilight","twilight","dark"],["Vibrant Ink","vibrant_ink","dark"],["GitHub Dark","github_dark","dark"],["CloudEditor Dark","cloud_editor_dark","dark"]];t.themesByName={},t.themes=i.map(function(e){var n=e[1]||e[0].replace(/ /g,"_").toLowerCase(),i={caption:e[0],theme:"ace/theme/"+n,isDark:"dark"==e[2],name:n};return t.themesByName[n]=i,i})}),ace.define("ace/ext/options",["require","exports","module","ace/ext/settings_menu","ace/ext/menu_tools/overlay_page","ace/lib/dom","ace/lib/oop","ace/config","ace/lib/event_emitter","ace/ext/modelist","ace/ext/themelist"],function(e,t,n){"use strict";e("./menu_tools/overlay_page");var i=e("../lib/dom"),r=e("../lib/oop"),o=e("../config"),s=e("../lib/event_emitter").EventEmitter,a=i.buildDom,c=e("./modelist"),l=e("./themelist"),u={Bright:[],Dark:[]};l.themes.forEach(function(e){u[e.isDark?"Dark":"Bright"].push({caption:e.caption,value:e.theme})});var h={Main:{Mode:{path:"mode",type:"select",items:c.modes.map(function(e){return{caption:e.caption,value:e.mode}})},Theme:{path:"theme",type:"select",items:u},Keybinding:{type:"buttonBar",path:"keyboardHandler",items:[{caption:"Ace",value:null},{caption:"Vim",value:"ace/keyboard/vim"},{caption:"Emacs",value:"ace/keyboard/emacs"},{caption:"Sublime",value:"ace/keyboard/sublime"},{caption:"VSCode",value:"ace/keyboard/vscode"}]},"Font Size":{path:"fontSize",type:"number",defaultValue:12,defaults:[{caption:"12px",value:12},{caption:"24px",value:24}]},"Soft Wrap":{type:"buttonBar",path:"wrap",items:[{caption:"Off",value:"off"},{caption:"View",value:"free"},{caption:"margin",value:"printMargin"},{caption:"40",value:"40"}]},"Cursor Style":{path:"cursorStyle",items:[{caption:"Ace",value:"ace"},{caption:"Slim",value:"slim"},{caption:"Smooth",value:"smooth"},{caption:"Smooth And Slim",value:"smooth slim"},{caption:"Wide",value:"wide"}]},Folding:{path:"foldStyle",items:[{caption:"Manual",value:"manual"},{caption:"Mark begin",value:"markbegin"},{caption:"Mark begin and end",value:"markbeginend"}]},"Soft Tabs":[{path:"useSoftTabs"},{ariaLabel:"Tab Size",path:"tabSize",type:"number",values:[2,3,4,8,16]}],Overscroll:{type:"buttonBar",path:"scrollPastEnd",items:[{caption:"None",value:0},{caption:"Half",value:.5},{caption:"Full",value:1}]}},More:{"Atomic soft tabs":{path:"navigateWithinSoftTabs"},"Enable Behaviours":{path:"behavioursEnabled"},"Wrap with quotes":{path:"wrapBehavioursEnabled"},"Enable Auto Indent":{path:"enableAutoIndent"},"Full Line Selection":{type:"checkbox",values:"text|line",path:"selectionStyle"},"Highlight Active Line":{path:"highlightActiveLine"},"Show Invisibles":{path:"showInvisibles"},"Show Indent Guides":{path:"displayIndentGuides"},"Highlight Indent Guides":{path:"highlightIndentGuides"},"Persistent HScrollbar":{path:"hScrollBarAlwaysVisible"},"Persistent VScrollbar":{path:"vScrollBarAlwaysVisible"},"Animate scrolling":{path:"animatedScroll"},"Show Gutter":{path:"showGutter"},"Show Line Numbers":{path:"showLineNumbers"},"Relative Line Numbers":{path:"relativeLineNumbers"},"Fixed Gutter Width":{path:"fixedWidthGutter"},"Show Print Margin":[{path:"showPrintMargin"},{ariaLabel:"Print Margin",type:"number",path:"printMarginColumn"}],"Indented Soft Wrap":{path:"indentedSoftWrap"},"Highlight selected word":{path:"highlightSelectedWord"},"Fade Fold Widgets":{path:"fadeFoldWidgets"},"Use textarea for IME":{path:"useTextareaForIME"},"Merge Undo Deltas":{path:"mergeUndoDeltas",items:[{caption:"Always",value:"always"},{caption:"Never",value:"false"},{caption:"Timed",value:"true"}]},"Elastic Tabstops":{path:"useElasticTabstops"},"Incremental Search":{path:"useIncrementalSearch"},"Read-only":{path:"readOnly"},"Copy without selection":{path:"copyWithEmptySelection"},"Live Autocompletion":{path:"enableLiveAutocompletion"},"Custom scrollbar":{path:"customScrollbar"},"Use SVG gutter icons":{path:"useSvgGutterIcons"},"Annotations for folded lines":{path:"showFoldedAnnotations"},"Keyboard Accessibility Mode":{path:"enableKeyboardAccessibility"},"Gutter tooltip follows mouse":{path:"tooltipFollowsMouse",defaultValue:!0}}},p=function(){function e(e,t){this.editor=e,this.container=t||document.createElement("div"),this.groups=[],this.options={}}return e.prototype.add=function(e){e.Main&&r.mixin(h.Main,e.Main),e.More&&r.mixin(h.More,e.More)},e.prototype.render=function(){this.container.innerHTML="",a(["table",{role:"presentation",id:"controls"},this.renderOptionGroup(h.Main),["tr",null,["td",{colspan:2},["table",{role:"presentation",id:"more-controls"},this.renderOptionGroup(h.More)]]],["tr",null,["td",{colspan:2},"version "+o.version]]],this.container)},e.prototype.renderOptionGroup=function(e){return Object.keys(e).map(function(t,n){var i=e[t];return i.position||(i.position=n/1e4),i.label||(i.label=t),i}).sort(function(e,t){return e.position-t.position}).map(function(e){return this.renderOption(e.label,e)},this)},e.prototype.renderOptionControl=function(e,t){var n,i=this;if(Array.isArray(t))return t.map(function(t){return i.renderOptionControl(e,t)});var r=i.getOption(t);if(t.values&&"checkbox"!=t.type&&("string"==typeof t.values&&(t.values=t.values.split("|")),t.items=t.values.map(function(e){return{value:e,name:e}})),"buttonBar"==t.type)n=["div",{role:"group","aria-labelledby":t.path+"-label"},t.items.map(function(e){return["button",{value:e.value,ace_selected_button:r==e.value,"aria-pressed":r==e.value,onclick:function(){i.setOption(t,e.value);for(var n=this.parentNode.querySelectorAll("[ace_selected_button]"),r=0;r<n.length;r++)n[r].removeAttribute("ace_selected_button"),n[r].setAttribute("aria-pressed",!1);this.setAttribute("ace_selected_button",!0),this.setAttribute("aria-pressed",!0)}},e.desc||e.caption||e.name]})];else if("number"==t.type)n=["input",{type:"number",value:r||t.defaultValue,style:"width:3em",oninput:function(){i.setOption(t,parseInt(this.value))}}],t.ariaLabel?n[1]["aria-label"]=t.ariaLabel:n[1].id=e,t.defaults&&(n=[n,t.defaults.map(function(e){return["button",{onclick:function(){var t=this.parentNode.firstChild;t.value=e.value,t.oninput()}},e.caption]})]);else if(t.items){var o=function(e){return e.map(function(e){return["option",{value:e.value||e.name},e.desc||e.caption||e.name]})},s=Array.isArray(t.items)?o(t.items):Object.keys(t.items).map(function(e){return["optgroup",{label:e},o(t.items[e])]});n=["select",{id:e,value:r,onchange:function(){i.setOption(t,this.value)}},s]}else"string"==typeof t.values&&(t.values=t.values.split("|")),t.values&&(r=r==t.values[1]),n=["input",{type:"checkbox",id:e,checked:r||null,onchange:function(){var e=this.checked;t.values&&(e=t.values[+!!e]),i.setOption(t,e)}}],"checkedNumber"==t.type&&(n=[n,[]]);return n},e.prototype.renderOption=function(e,t){if(!t.path||t.onchange||this.editor.$options[t.path]){var n=Array.isArray(t)?t[0].path:t.path;this.options[n]=t;var i="-"+n,r=n+"-label",o=this.renderOptionControl(i,t);return["tr",{class:"ace_optionsMenuEntry"},["td",["label",{for:i,id:r},e]],["td",o]]}},e.prototype.setOption=function(e,t){"string"==typeof e&&(e=this.options[e]),"false"==t&&(t=!1),"true"==t&&(t=!0),"null"==t&&(t=null),"undefined"==t&&(t=void 0),"string"==typeof t&&parseFloat(t).toString()==t&&(t=parseFloat(t)),e.onchange?e.onchange(t):e.path&&this.editor.setOption(e.path,t),this._signal("setOption",{name:e.path,value:t})},e.prototype.getOption=function(e){return e.getValue?e.getValue():this.editor.getOption(e.path)},e}();r.implement(p.prototype,s),t.OptionPanel=p,t.optionGroups=h}),ace.define("ace/ext/settings_menu",["require","exports","module","ace/ext/options","ace/ext/menu_tools/overlay_page","ace/editor"],function(e,t,n){"use strict";var i=e("./options").OptionPanel,r=e("./menu_tools/overlay_page").overlayPage;function o(e){if(!document.getElementById("ace_settingsmenu")){var t=new i(e);t.render(),t.container.id="ace_settingsmenu",r(e,t.container),t.container.querySelector("select,input,button,checkbox").focus()}}n.exports.init=function(){e("../editor").Editor.prototype.showSettingsMenu=function(){o(this)}}}),function(){ace.require(["ace/ext/settings_menu"],function(t){e&&(e.exports=t)})}()},50117:function(e,t,n){e=n.nmd(e),ace.define("ace/occur",["require","exports","module","ace/lib/oop","ace/search","ace/edit_session","ace/search_highlight","ace/lib/dom"],function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=e("./lib/oop"),o=e("./search").Search,s=e("./edit_session").EditSession,a=e("./search_highlight").SearchHighlight,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.enter=function(e,t){if(!t.needle)return!1;var n=e.getCursorPosition();this.displayOccurContent(e,t);var i=this.originalToOccurPosition(e.session,n);return e.moveCursorToPosition(i),!0},t.prototype.exit=function(e,t){var n=t.translatePosition&&e.getCursorPosition(),i=n&&this.occurToOriginalPosition(e.session,n);return this.displayOriginalContent(e),i&&e.moveCursorToPosition(i),!0},t.prototype.highlight=function(e,t){(e.$occurHighlight=e.$occurHighlight||e.addDynamicMarker(new a(null,"ace_occur-highlight","text"))).setRegexp(t),e._emit("changeBackMarker")},t.prototype.displayOccurContent=function(e,t){this.$originalSession=e.session;var n=this.matchingLines(e.session,t),i=new s(n.map(function(e){return e.content}).join("\n"));i.$occur=this,i.$occurMatchingLines=n,e.setSession(i),this.$useEmacsStyleLineStart=this.$originalSession.$useEmacsStyleLineStart,i.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart,this.highlight(i,t.re),i._emit("changeBackMarker")},t.prototype.displayOriginalContent=function(e){e.setSession(this.$originalSession),this.$originalSession.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart},t.prototype.originalToOccurPosition=function(e,t){var n=e.$occurMatchingLines,i={row:0,column:0};if(!n)return i;for(var r=0;r<n.length;r++)if(n[r].row===t.row)return{row:r,column:t.column};return i},t.prototype.occurToOriginalPosition=function(e,t){var n=e.$occurMatchingLines;return n&&n[t.row]?{row:n[t.row].row,column:t.column}:t},t.prototype.matchingLines=function(e,t){if(t=r.mixin({},t),!e||!t.needle)return[];var n=new o;return n.set(t),n.findAll(e).reduce(function(t,n){var i=n.start.row,r=t[t.length-1];return r&&r.row===i?t:t.concat({row:i,content:e.getLine(i)})},[])},t}(o);e("./lib/dom").importCssString(".ace_occur-highlight {\n    border-radius: 4px;\n    background-color: rgba(87, 255, 8, 0.25);\n    position: absolute;\n    z-index: 4;\n    box-sizing: border-box;\n    box-shadow: 0 0 4px rgb(91, 255, 50);\n}\n.ace_dark .ace_occur-highlight {\n    background-color: rgb(80, 140, 85);\n    box-shadow: 0 0 4px rgb(60, 120, 70);\n}\n","incremental-occur-highlighting",!1),t.Occur=c}),ace.define("ace/commands/occur_commands",["require","exports","module","ace/config","ace/occur","ace/keyboard/hash_handler","ace/lib/oop"],function(e,t,n){e("../config");var i=e("../occur").Occur,r={name:"occur",exec:function(e,t){var n=!!e.session.$occur;new i().enter(e,t)&&!n&&a.installIn(e)},readOnly:!0},o=[{name:"occurexit",bindKey:"esc|Ctrl-G",exec:function(e){var t=e.session.$occur;t&&(t.exit(e,{}),e.session.$occur||a.uninstallFrom(e))},readOnly:!0},{name:"occuraccept",bindKey:"enter",exec:function(e){var t=e.session.$occur;t&&(t.exit(e,{translatePosition:!0}),e.session.$occur||a.uninstallFrom(e))},readOnly:!0}],s=e("../keyboard/hash_handler").HashHandler;function a(){}e("../lib/oop").inherits(a,s),(function(){this.isOccurHandler=!0,this.attach=function(e){s.call(this,o,e.commands.platform),this.$editor=e};var e=this.handleKeyboard;this.handleKeyboard=function(t,n,i,r){var o=e.call(this,t,n,i,r);return o&&o.command?o:void 0}}).call(a.prototype),a.installIn=function(e){var t=new this;e.keyBinding.addKeyboardHandler(t),e.commands.addCommands(o)},a.uninstallFrom=function(e){e.commands.removeCommands(o);var t=e.getKeyboardHandler();t.isOccurHandler&&e.keyBinding.removeKeyboardHandler(t)},t.occurStartCommand=r}),ace.define("ace/commands/incremental_search_commands",["require","exports","module","ace/config","ace/lib/oop","ace/keyboard/hash_handler","ace/commands/occur_commands"],function(e,t,n){var i=e("../config"),r=e("../lib/oop"),o=e("../keyboard/hash_handler").HashHandler,s=e("./occur_commands").occurStartCommand;function a(e){this.$iSearch=e}t.iSearchStartCommands=[{name:"iSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(e,t){i.loadModule(["core","ace/incremental_search"],function(n){var i=n.iSearch=n.iSearch||new n.IncrementalSearch;i.activate(e,t.backwards),t.jumpToFirstMatch&&i.next(t)})},readOnly:!0},{name:"iSearchBackwards",exec:function(e,t){e.execCommand("iSearch",{backwards:!0})},readOnly:!0},{name:"iSearchAndGo",bindKey:{win:"Ctrl-K",mac:"Command-G"},exec:function(e,t){e.execCommand("iSearch",{jumpToFirstMatch:!0,useCurrentOrPrevSearch:!0})},readOnly:!0},{name:"iSearchBackwardsAndGo",bindKey:{win:"Ctrl-Shift-K",mac:"Command-Shift-G"},exec:function(e){e.execCommand("iSearch",{jumpToFirstMatch:!0,backwards:!0,useCurrentOrPrevSearch:!0})},readOnly:!0}],t.iSearchCommands=[{name:"restartSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(e){e.cancelSearch(!0)}},{name:"searchForward",bindKey:{win:"Ctrl-S|Ctrl-K",mac:"Ctrl-S|Command-G"},exec:function(e,t){t.useCurrentOrPrevSearch=!0,e.next(t)}},{name:"searchBackward",bindKey:{win:"Ctrl-R|Ctrl-Shift-K",mac:"Ctrl-R|Command-Shift-G"},exec:function(e,t){t.useCurrentOrPrevSearch=!0,t.backwards=!0,e.next(t)}},{name:"extendSearchTerm",exec:function(e,t){e.addString(t)}},{name:"extendSearchTermSpace",bindKey:"space",exec:function(e){e.addString(" ")}},{name:"shrinkSearchTerm",bindKey:"backspace",exec:function(e){e.removeChar()}},{name:"confirmSearch",bindKey:"return",exec:function(e){e.deactivate()}},{name:"cancelSearch",bindKey:"esc|Ctrl-G",exec:function(e){e.deactivate(!0)}},{name:"occurisearch",bindKey:"Ctrl-O",exec:function(e){var t=r.mixin({},e.$options);e.deactivate(),s.exec(e.$editor,t)}},{name:"yankNextWord",bindKey:"Ctrl-w",exec:function(e){var t=e.$editor,n=t.selection.getRangeOfMovements(function(e){e.moveCursorWordRight()}),i=t.session.getTextRange(n);e.addString(i)}},{name:"yankNextChar",bindKey:"Ctrl-Alt-y",exec:function(e){var t=e.$editor,n=t.selection.getRangeOfMovements(function(e){e.moveCursorRight()}),i=t.session.getTextRange(n);e.addString(i)}},{name:"recenterTopBottom",bindKey:"Ctrl-l",exec:function(e){e.$editor.execCommand("recenterTopBottom")}},{name:"selectAllMatches",bindKey:"Ctrl-space",exec:function(e){var t=e.$editor,n=t.session.$isearchHighlight,i=n&&n.cache?n.cache.reduce(function(e,t){return e.concat(t||[])},[]):[];e.deactivate(!1),i.forEach(t.selection.addRange.bind(t.selection))}},{name:"searchAsRegExp",bindKey:"Alt-r",exec:function(e){e.convertNeedleToRegExp()}}].map(function(e){return e.readOnly=!0,e.isIncrementalSearchCommand=!0,e.scrollIntoView="animate-cursor",e}),r.inherits(a,o),(function(){this.attach=function(e){var n=this.$iSearch;o.call(this,t.iSearchCommands,e.commands.platform),this.$commandExecHandler=e.commands.on("exec",function(t){if(!t.command.isIncrementalSearchCommand)return n.deactivate();t.stopPropagation(),t.preventDefault();var i=e.session.getScrollTop(),r=t.command.exec(n,t.args||{});return e.renderer.scrollCursorIntoView(null,.5),e.renderer.animateScrolling(i),r})},this.detach=function(e){this.$commandExecHandler&&(e.commands.off("exec",this.$commandExecHandler),delete this.$commandExecHandler)};var e=this.handleKeyboard;this.handleKeyboard=function(t,n,i,r){if((1===n||8===n)&&"v"===i||1===n&&"y"===i)return null;var o=e.call(this,t,n,i,r);if(o&&o.command)return o;if(-1==n){var s=this.commands.extendSearchTerm;if(s)return{command:s,args:i}}return!1}}).call(a.prototype),t.IncrementalSearchKeyboardHandler=a}),ace.define("ace/incremental_search",["require","exports","module","ace/range","ace/search","ace/search_highlight","ace/commands/incremental_search_commands","ace/lib/dom","ace/commands/command_manager","ace/editor","ace/config"],function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=e("./range").Range,o=e("./search").Search,s=e("./search_highlight").SearchHighlight,a=e("./commands/incremental_search_commands"),c=a.IncrementalSearchKeyboardHandler;function l(e){return e instanceof RegExp}function u(e){var t=String(e),n=t.indexOf("/"),i=t.lastIndexOf("/");return{expression:t.slice(n+1,i),flags:t.slice(i+1)}}function h(e,t){try{return new RegExp(e,t)}catch(t){return e}}function p(e){return h(e.expression,e.flags)}t.IncrementalSearch=function(e){function t(){var t=e.call(this)||this;return t.$options={wrap:!1,skipCurrent:!1},t.$keyboardHandler=new c(t),t}return i(t,e),t.prototype.activate=function(e,t){this.$editor=e,this.$startPos=this.$currentPos=e.getCursorPosition(),this.$options.needle="",this.$options.backwards=t,e.keyBinding.addKeyboardHandler(this.$keyboardHandler),this.$originalEditorOnPaste=e.onPaste,e.onPaste=this.onPaste.bind(this),this.$mousedownHandler=e.on("mousedown",this.onMouseDown.bind(this)),this.selectionFix(e),this.statusMessage(!0)},t.prototype.deactivate=function(e){this.cancelSearch(e);var t=this.$editor;t.keyBinding.removeKeyboardHandler(this.$keyboardHandler),this.$mousedownHandler&&(t.off("mousedown",this.$mousedownHandler),delete this.$mousedownHandler),t.onPaste=this.$originalEditorOnPaste,this.message("")},t.prototype.selectionFix=function(e){e.selection.isEmpty()&&!e.session.$emacsMark&&e.clearSelection()},t.prototype.highlight=function(e){var t=this.$editor.session;(t.$isearchHighlight=t.$isearchHighlight||t.addDynamicMarker(new s(null,"ace_isearch-result","text"))).setRegexp(e),t._emit("changeBackMarker")},t.prototype.cancelSearch=function(e){var t=this.$editor;return this.$prevNeedle=this.$options.needle,this.$options.needle="",e?(t.moveCursorToPosition(this.$startPos),this.$currentPos=this.$startPos):t.pushEmacsMark&&t.pushEmacsMark(this.$startPos,!1),this.highlight(null),r.fromPoints(this.$currentPos,this.$currentPos)},t.prototype.highlightAndFindWithNeedle=function(e,t){if(!this.$editor)return null;var n=this.$options;if(t&&(n.needle=t.call(this,n.needle||"")||""),0===n.needle.length)return this.statusMessage(!0),this.cancelSearch(!0);n.start=this.$currentPos;var i=this.$editor.session,o=this.find(i),s=this.$editor.emacsMark?!!this.$editor.emacsMark():!this.$editor.selection.isEmpty();return o&&(n.backwards&&(o=r.fromPoints(o.end,o.start)),this.$editor.selection.setRange(r.fromPoints(s?this.$startPos:o.end,o.end)),e&&(this.$currentPos=o.end),this.highlight(n.re)),this.statusMessage(o),o},t.prototype.addString=function(e){return this.highlightAndFindWithNeedle(!1,function(t){if(!l(t))return t+e;var n=u(t);return n.expression+=e,p(n)})},t.prototype.removeChar=function(e){return this.highlightAndFindWithNeedle(!1,function(e){if(!l(e))return e.substring(0,e.length-1);var t=u(e);return t.expression=t.expression.substring(0,t.expression.length-1),p(t)})},t.prototype.next=function(e){return e=e||{},this.$options.backwards=!!e.backwards,this.$currentPos=this.$editor.getCursorPosition(),this.highlightAndFindWithNeedle(!0,function(t){return e.useCurrentOrPrevSearch&&0===t.length?this.$prevNeedle||"":t})},t.prototype.onMouseDown=function(e){return this.deactivate(),!0},t.prototype.onPaste=function(e){this.addString(e)},t.prototype.convertNeedleToRegExp=function(){return this.highlightAndFindWithNeedle(!1,function(e){return l(e)?e:h(e,"ig")})},t.prototype.convertNeedleToString=function(){return this.highlightAndFindWithNeedle(!1,function(e){return l(e)?u(e).expression:e})},t.prototype.statusMessage=function(e){var t=this.$options,n="";n+=(t.backwards?"reverse-":"")+"isearch: "+t.needle+(e?"":" (not found)"),this.message(n)},t.prototype.message=function(e){this.$editor.showCommandLine&&(this.$editor.showCommandLine(e),this.$editor.focus())},t}(o),e("./lib/dom").importCssString("\n.ace_marker-layer .ace_isearch-result {\n  position: absolute;\n  z-index: 6;\n  box-sizing: border-box;\n}\ndiv.ace_isearch-result {\n  border-radius: 4px;\n  background-color: rgba(255, 200, 0, 0.5);\n  box-shadow: 0 0 4px rgb(255, 200, 0);\n}\n.ace_dark div.ace_isearch-result {\n  background-color: rgb(100, 110, 160);\n  box-shadow: 0 0 4px rgb(80, 90, 140);\n}","incremental-search-highlighting",!1),(function(){this.setupIncrementalSearch=function(e,t){if(this.usesIncrementalSearch!=t){this.usesIncrementalSearch=t;var n=a.iSearchStartCommands,i=t?"addCommands":"removeCommands";this[i](n)}}}).call(e("./commands/command_manager").CommandManager.prototype);var d=e("./editor").Editor;e("./config").defineOptions(d.prototype,"editor",{useIncrementalSearch:{set:function(e){this.keyBinding.$handlers.forEach(function(t){t.setupIncrementalSearch&&t.setupIncrementalSearch(this,e)}),this._emit("incrementalSearchSettingChanged",{isEnabled:e})}}})}),ace.define("ace/keyboard/emacs",["require","exports","module","ace/lib/dom","ace/incremental_search","ace/commands/incremental_search_commands","ace/keyboard/hash_handler","ace/lib/keys"],function(e,t,n){"use strict";var i,r,o=e("../lib/dom");e("../incremental_search");var s=e("../commands/incremental_search_commands");function a(e,t){var n=e[e.length-1];n&&n.row===t.row&&n.column===t.column||e.push(t)}t.handler=new(e("./hash_handler")).HashHandler,t.handler.isEmacs=!0,t.handler.$id="ace/keyboard/emacs",o.importCssString("\n.emacs-mode .ace_cursor{\n    border: 1px rgba(50,250,50,0.8) solid!important;\n    box-sizing: border-box!important;\n    background-color: rgba(0,250,0,0.9);\n    opacity: 0.5;\n}\n.emacs-mode .ace_hidden-cursors .ace_cursor{\n    opacity: 1;\n    background-color: transparent;\n}\n.emacs-mode .ace_overwrite-cursors .ace_cursor {\n    opacity: 1;\n    background-color: transparent;\n    border-width: 0 0 2px 2px !important;\n}\n.emacs-mode .ace_text-layer {\n    z-index: 4\n}\n.emacs-mode .ace_cursor-layer {\n    z-index: 2\n}","emacsMode"),t.handler.attach=function(e){i=e.session.$selectLongWords,e.session.$selectLongWords=!0,r=e.session.$useEmacsStyleLineStart,e.session.$useEmacsStyleLineStart=!0,e.session.$emacsMark=null,e.session.$emacsMarkRing=e.session.$emacsMarkRing||[],e.emacsMark=function(){return this.session.$emacsMark},e.setEmacsMark=function(e){this.session.$emacsMark=e},e.pushEmacsMark=function(e,t){var n=this.session.$emacsMark;n&&a(this.session.$emacsMarkRing,n),!e||t?this.setEmacsMark(e):a(this.session.$emacsMarkRing,e)},e.popEmacsMark=function(){var e=this.emacsMark();return e?(this.setEmacsMark(null),e):this.session.$emacsMarkRing.pop()},e.getLastEmacsMark=function(e){return this.session.$emacsMark||this.session.$emacsMarkRing.slice(-1)[0]},e.emacsMarkForSelection=function(e){var t=this.selection,n=this.multiSelect?this.multiSelect.getAllRanges().length:1,i=t.index||0,r=this.session.$emacsMarkRing,o=r.length-(n-i),s=r[o]||t.anchor;return e&&r.splice(o,1,"row"in e&&"column"in e?e:void 0),s},e.on("click",l),e.on("changeSession",c),e.renderer.$blockCursor=!0,e.setStyle("emacs-mode"),e.commands.addCommands(p),t.handler.platform=e.commands.platform,e.$emacsModeHandler=this,e.on("copy",this.onCopy),e.on("paste",this.onPaste)},t.handler.detach=function(e){e.renderer.$blockCursor=!1,e.session.$selectLongWords=i,e.session.$useEmacsStyleLineStart=r,e.off("click",l),e.off("changeSession",c),e.unsetStyle("emacs-mode"),e.commands.removeCommands(p),e.off("copy",this.onCopy),e.off("paste",this.onPaste),e.$emacsModeHandler=null};var c=function(e){e.oldSession&&(e.oldSession.$selectLongWords=i,e.oldSession.$useEmacsStyleLineStart=r),i=e.session.$selectLongWords,e.session.$selectLongWords=!0,r=e.session.$useEmacsStyleLineStart,e.session.$useEmacsStyleLineStart=!0,e.session.hasOwnProperty("$emacsMark")||(e.session.$emacsMark=null),e.session.hasOwnProperty("$emacsMarkRing")||(e.session.$emacsMarkRing=[])},l=function(e){e.editor.session.$emacsMark=null},u=e("../lib/keys").KEY_MODS,h={C:"ctrl",S:"shift",M:"alt",CMD:"command"};["C-S-M-CMD","S-M-CMD","C-M-CMD","C-S-CMD","C-S-M","M-CMD","S-CMD","S-M","C-CMD","C-M","C-S","CMD","M","S","C"].forEach(function(e){var t=0;e.split("-").forEach(function(e){t|=u[h[e]]}),h[t]=e.toLowerCase()+"-"}),t.handler.onCopy=function(e,n){n.$handlesEmacsOnCopy||(n.$handlesEmacsOnCopy=!0,t.handler.commands.killRingSave.exec(n),n.$handlesEmacsOnCopy=!1)},t.handler.onPaste=function(e,t){t.pushEmacsMark(t.getCursorPosition())},t.handler.bindKey=function(e,t){if("object"==typeof e&&(e=e[this.platform]),e){var n=this.commandKeyBinding;e.split("|").forEach(function(e){n[e=e.toLowerCase()]=t,e.split(" ").slice(0,-1).reduce(function(e,t,n){var i=e[n-1]?e[n-1]+" ":"";return e.concat([i+t])},[]).forEach(function(e){n[e]||(n[e]="null")})},this)}},t.handler.getStatusText=function(e,t){var n="";return t.count&&(n+=t.count),t.keyChain&&(n+=" "+t.keyChain),n},t.handler.handleKeyboard=function(e,t,n,i){if(-1!==i){var r,o=e.editor;if(o._signal("changeStatus"),-1==t&&(o.pushEmacsMark(),e.count)){var s=Array(e.count+1).join(n);return e.count=null,{command:"insertstring",args:s}}var a=h[t];if("c-"==a||e.count){var c=parseInt(n[n.length-1]);if("number"==typeof c&&!isNaN(c))return e.count=Math.max(e.count,0)||0,e.count=10*e.count+c,{command:"null"}}a&&(n=a+n),e.keyChain&&(n=e.keyChain+=" "+n);var l=this.commandKeyBinding[n];if(e.keyChain="null"==l?n:"",l){if("null"===l)return{command:"null"};if("universalArgument"===l)return e.count=-4,{command:"null"};if("string"!=typeof l&&(r=l.args,l.command&&(l=l.command),"goorselect"===l&&(l=o.emacsMark()?r[1]:r[0],r=null)),"string"==typeof l&&(("insertstring"===l||"splitline"===l||"togglecomment"===l)&&o.pushEmacsMark(),!(l=this.commands[l]||o.commands.commands[l])))return;if(l.readOnly||l.isYank||(e.lastCommand=null),!l.readOnly&&o.emacsMark()&&o.setEmacsMark(null),e.count){var c=e.count;if(e.count=0,!l||!l.handlesCount)return{args:r,command:{exec:function(e,t){for(var n=0;n<c;n++)l.exec(e,t)},multiSelectAction:l.multiSelectAction}};r||(r={}),"object"==typeof r&&(r.count=c)}return{command:l,args:r}}}},t.emacsKeys={"Up|C-p":{command:"goorselect",args:["golineup","selectup"]},"Down|C-n":{command:"goorselect",args:["golinedown","selectdown"]},"Left|C-b":{command:"goorselect",args:["gotoleft","selectleft"]},"Right|C-f":{command:"goorselect",args:["gotoright","selectright"]},"C-Left|M-b":{command:"goorselect",args:["gotowordleft","selectwordleft"]},"C-Right|M-f":{command:"goorselect",args:["gotowordright","selectwordright"]},"Home|C-a":{command:"goorselect",args:["gotolinestart","selecttolinestart"]},"End|C-e":{command:"goorselect",args:["gotolineend","selecttolineend"]},"C-Home|S-M-,":{command:"goorselect",args:["gotostart","selecttostart"]},"C-End|S-M-.":{command:"goorselect",args:["gotoend","selecttoend"]},"S-Up|S-C-p":"selectup","S-Down|S-C-n":"selectdown","S-Left|S-C-b":"selectleft","S-Right|S-C-f":"selectright","S-C-Left|S-M-b":"selectwordleft","S-C-Right|S-M-f":"selectwordright","S-Home|S-C-a":"selecttolinestart","S-End|S-C-e":"selecttolineend","S-C-Home":"selecttostart","S-C-End":"selecttoend","C-l":"recenterTopBottom","M-s":"centerselection","M-g":"gotoline","C-x C-p":"selectall","C-Down":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"C-Up":{command:"goorselect",args:["gotopageup","selectpageup"]},"PageDown|C-v":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"PageUp|M-v":{command:"goorselect",args:["gotopageup","selectpageup"]},"S-C-Down":"selectpagedown","S-C-Up":"selectpageup","C-s":"iSearch","C-r":"iSearchBackwards","M-C-s":"findnext","M-C-r":"findprevious","S-M-5":"replace",Backspace:"backspace","Delete|C-d":"del","Return|C-m":{command:"insertstring",args:"\n"},"C-o":"splitline","M-d|C-Delete":{command:"killWord",args:"right"},"C-Backspace|M-Backspace|M-Delete":{command:"killWord",args:"left"},"C-k":"killLine","C-y|S-Delete":"yank","M-y":"yankRotate","C-g":"keyboardQuit","C-w|C-S-W":"killRegion","M-w":"killRingSave","C-Space":"setMark","C-x C-x":"exchangePointAndMark","C-t":"transposeletters","M-u":"touppercase","M-l":"tolowercase","M-/":"autocomplete","C-u":"universalArgument","M-;":"togglecomment","C-/|C-x u|S-C--|C-z":"undo","S-C-/|S-C-x u|C--|S-C-z":"redo","C-x r":"selectRectangularRegion","M-x":{command:"focusCommandLine",args:"M-x "}},t.handler.bindKeys(t.emacsKeys),t.handler.addCommands({recenterTopBottom:function(e){var t=e.renderer,n=t.$cursorLayer.getPixelPosition(),i=t.$size.scrollerHeight-t.lineHeight,r=t.scrollTop;r=2>Math.abs(n.top-r)?n.top-i:2>Math.abs(n.top-r-.5*i)?n.top:n.top-.5*i,e.session.setScrollTop(r)},selectRectangularRegion:function(e){e.multiSelect.toggleBlockSelection()},setMark:{exec:function(e,t){if(t&&t.count){e.inMultiSelectMode?e.forEachSelection(a):a(),a();return}var n=e.emacsMark(),i=e.selection.getAllRanges(),r=i.map(function(e){return{row:e.start.row,column:e.start.column}}),o=!0,s=i.every(function(e){return e.isEmpty()});if(o&&(n||!s)){e.inMultiSelectMode?e.forEachSelection({exec:e.clearSelection.bind(e)}):e.clearSelection(),n&&e.pushEmacsMark(null);return}if(!n){r.forEach(function(t){e.pushEmacsMark(t)}),e.setEmacsMark(r[r.length-1]);return}function a(){var t=e.popEmacsMark();t&&e.moveCursorToPosition(t)}},readOnly:!0,handlesCount:!0},exchangePointAndMark:{exec:function(e,t){var n=e.selection;if(!t.count&&!n.isEmpty())return void n.setSelectionRange(n.getRange(),!n.isBackwards());if(t.count){var i={row:n.lead.row,column:n.lead.column};n.clearSelection(),n.moveCursorToPosition(e.emacsMarkForSelection(i))}else n.selectToPosition(e.emacsMarkForSelection())},readOnly:!0,handlesCount:!0,multiSelectAction:"forEach"},killWord:{exec:function(e,n){e.clearSelection(),"left"==n?e.selection.selectWordLeft():e.selection.selectWordRight();var i=e.getSelectionRange(),r=e.session.getTextRange(i);t.killRing.add(r),e.session.remove(i),e.clearSelection()},multiSelectAction:"forEach"},killLine:function(e){e.pushEmacsMark(null),e.clearSelection();var n=e.getSelectionRange(),i=e.session.getLine(n.start.row);n.end.column=i.length,i=i.substr(n.start.column);var r=e.session.getFoldLine(n.start.row);r&&n.end.row!=r.end.row&&(n.end.row=r.end.row,i="x"),/^\s*$/.test(i)&&(n.end.row++,i=e.session.getLine(n.end.row),n.end.column=/^\s*$/.test(i)?i.length:0);var o=e.session.getTextRange(n);e.prevOp.command==this?t.killRing.append(o):t.killRing.add(o),e.session.remove(n),e.clearSelection()},yank:function(e){e.onPaste(t.killRing.get()||""),e.keyBinding.$data.lastCommand="yank"},yankRotate:function(e){"yank"==e.keyBinding.$data.lastCommand&&(e.undo(),e.session.$emacsMarkRing.pop(),e.onPaste(t.killRing.rotate()),e.keyBinding.$data.lastCommand="yank")},killRegion:{exec:function(e){t.killRing.add(e.getCopyText()),e.commands.byName.cut.exec(e),e.setEmacsMark(null)},readOnly:!0,multiSelectAction:"forEach"},killRingSave:{exec:function(e){e.$handlesEmacsOnCopy=!0;var n=e.session.$emacsMarkRing.slice(),i=[];t.killRing.add(e.getCopyText()),setTimeout(function(){function t(){var t=e.selection,n=t.getRange(),r=t.isBackwards()?n.end:n.start;i.push({row:r.row,column:r.column}),t.clearSelection()}e.$handlesEmacsOnCopy=!1,e.inMultiSelectMode?e.forEachSelection({exec:t}):t(),e.setEmacsMark(null),e.session.$emacsMarkRing=n.concat(i.reverse())},0)},readOnly:!0},keyboardQuit:function(e){e.selection.clearSelection(),e.setEmacsMark(null),e.keyBinding.$data.count=null},focusCommandLine:function(e,t){e.showCommandLine&&e.showCommandLine(t)}}),t.handler.addCommands(s.iSearchStartCommands);var p=t.handler.commands;p.yank.isYank=!0,p.yankRotate.isYank=!0,t.killRing={$data:[],add:function(e){e&&this.$data.push(e),this.$data.length>30&&this.$data.shift()},append:function(e){var t=this.$data.length-1,n=this.$data[t]||"";e&&(n+=e),n&&(this.$data[t]=n)},get:function(e){return e=e||1,this.$data.slice(this.$data.length-e,this.$data.length).reverse().join("\n")},pop:function(){return this.$data.length>1&&this.$data.pop(),this.get()},rotate:function(){return this.$data.unshift(this.$data.pop()),this.get()}}}),function(){ace.require(["ace/keyboard/emacs"],function(t){e&&(e.exports=t)})}()},61742:function(e,t,n){e=n.nmd(e),ace.define("ace/ext/hardwrap",["require","exports","module","ace/range","ace/editor","ace/config"],function(e,t,n){"use strict";var i=e("../range").Range;function r(e,t){for(var n=t.column||e.getOption("printMarginColumn"),r=!1!=t.allowMerge,o=Math.min(t.startRow,t.endRow),s=Math.max(t.startRow,t.endRow),a=e.session;o<=s;){var c=a.getLine(o);if(c.length>n){var l=m(c,n,5);if(l){var u=/^\s*/.exec(c)[0];a.replace(new i(o,l.start,o,l.end),"\n"+u)}s++}else if(r&&/\S/.test(c)&&o!=s){var h=a.getLine(o+1);if(h&&/\S/.test(h)){var p=c.replace(/\s+$/,""),d=h.replace(/^\s+/,""),f=p+" "+d,l=m(f,n,5);if(l&&l.start>p.length||f.length<n){var g=new i(o,p.length,o+1,h.length-d.length);a.replace(g," "),o--,s--}else p.length<c.length&&a.remove(new i(o,p.length,o,c.length))}}o++}function m(e,t,n){if(!(e.length<t)){var i=e.slice(0,t),r=e.slice(t),o=/^(?:(\s+)|(\S+)(\s+))/.exec(r),s=/(?:(\s+)|(\s+)(\S+))$/.exec(i),a=0,c=0;if(s&&!s[2]&&(a=t-s[1].length,c=t),o&&!o[2]&&(a||(a=t),c=t+o[1].length),a)return{start:a,end:c};if(s&&s[2]&&s.index>n)return{start:s.index,end:s.index+s[2].length};if(o&&o[2])return{start:a=t+o[2].length,end:a+o[3].length}}}}function o(e){if("insertstring"==e.command.name&&/\S/.test(e.args)){var t=e.editor,n=t.selection.cursor;if(!(n.column<=t.renderer.$printMarginColumn)){var i=t.session.$undoManager.$lastDelta;r(t,{startRow:n.row,endRow:n.row,allowMerge:!1}),i!=t.session.$undoManager.$lastDelta&&t.session.markUndoGroup()}}}var s=e("../editor").Editor;e("../config").defineOptions(s.prototype,"editor",{hardWrap:{set:function(e){e?this.commands.on("afterExec",o):this.commands.off("afterExec",o)},value:!1}}),t.hardWrap=r}),ace.define("ace/keyboard/vim",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/dom","ace/lib/oop","ace/lib/keys","ace/lib/event","ace/search","ace/lib/useragent","ace/search_highlight","ace/commands/multi_select_commands","ace/mode/text","ace/ext/hardwrap","ace/multi_select"],function(e,t,n){"use strict";var i,r,o,s,a=e("../range").Range,c=e("../lib/event_emitter").EventEmitter,l=e("../lib/dom"),u=e("../lib/oop"),h=e("../lib/keys"),p=e("../lib/event"),d=e("../search").Search,f=e("../lib/useragent"),g=e("../search_highlight").SearchHighlight,m=e("../commands/multi_select_commands"),v=e("../mode/text").Mode.prototype.tokenRe,y=e("../ext/hardwrap").hardWrap;e("../multi_select");var b=function(e){this.ace=e,this.state={},this.marks={},this.options={},this.$uid=0,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.onBeforeEndOperation=this.onBeforeEndOperation.bind(this),this.ace.on("change",this.onChange),this.ace.on("changeSelection",this.onSelectionChange),this.ace.on("beforeEndOperation",this.onBeforeEndOperation)};function _(e){return{row:e.line,column:e.ch}}function w(e){return new S(e.row,e.column)}b.Pos=function(e,t){if(!(this instanceof S))return new S(e,t);this.line=e,this.ch=t},b.defineOption=function(e,t,n){},b.commands={redo:function(e){e.ace.redo()},undo:function(e){e.ace.undo()},newlineAndIndent:function(e){e.ace.insert("\n")},goLineLeft:function(e){e.ace.selection.moveCursorLineStart()},goLineRight:function(e){e.ace.selection.moveCursorLineEnd()}},b.keyMap={},b.addClass=b.rmClass=function(){},b.e_stop=b.e_preventDefault=p.stopEvent,b.keyName=function(e){var t=h[e.keyCode]||e.key||"";return 1==t.length&&(t=t.toUpperCase()),t=p.getModifierString(e).replace(/(^|-)\w/g,function(e){return e.toUpperCase()})+t},b.keyMap.default=function(e){return function(t){var n=t.ace.commands.commandKeyBinding[e.toLowerCase()];return n&&!1!==t.ace.execCommand(n)}},b.lookupKey=function e(t,n,i){n||(n="default"),"string"==typeof n&&(n=b.keyMap[n]||b.keyMap.default);var r="function"==typeof n?n(t):n[t];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&i(r))return"handled";if(n.fallthrough){if(!Array.isArray(n.fallthrough))return e(t,n.fallthrough,i);for(var o=0;o<n.fallthrough.length;o++){var s=e(t,n.fallthrough[o],i);if(s)return s}}},b.findMatchingTag=function(e,t){return e.findMatchingTag(t)},b.findEnclosingTag=function(e,t){},b.signal=function(e,t,n){return e._signal(t,n)},b.on=p.addListener,b.off=p.removeListener,b.isWordChar=function(e){return e<""?/^\w$/.test(e):(v.lastIndex=0,v.test(e))},(function(){u.implement(b.prototype,c),this.destroy=function(){this.ace.off("change",this.onChange),this.ace.off("changeSelection",this.onSelectionChange),this.ace.off("beforeEndOperation",this.onBeforeEndOperation),this.removeOverlay()},this.virtualSelectionMode=function(){return this.ace.inVirtualSelectionMode&&this.ace.selection.index},this.onChange=function(e){this.$lineHandleChanges&&this.$lineHandleChanges.push(e);var t={text:"i"==e.action[0]?e.lines:[]},n=this.curOp=this.curOp||{};n.changeHandlers||(n.changeHandlers=this._eventRegistry.change&&this._eventRegistry.change.slice()),n.lastChange?n.lastChange.next=n.lastChange=t:n.lastChange=n.change=t,this.$updateMarkers(e)},this.onSelectionChange=function(){var e=this.curOp=this.curOp||{};e.cursorActivityHandlers||(e.cursorActivityHandlers=this._eventRegistry.cursorActivity&&this._eventRegistry.cursorActivity.slice()),this.curOp.cursorActivity=!0,this.ace.inMultiSelectMode&&this.ace.keyBinding.removeKeyboardHandler(m.keyboardHandler)},this.operation=function(e,t){if(!t&&this.curOp||t&&this.curOp&&this.curOp.force)return e();if((t||!this.ace.curOp)&&this.curOp&&this.onBeforeEndOperation(),!this.ace.curOp){var n=this.ace.prevOp;this.ace.startOperation({command:{name:"vim",scrollIntoView:"cursor"}})}var i=this.curOp=this.curOp||{};this.curOp.force=t;var r=e();return this.ace.curOp&&"vim"==this.ace.curOp.command.name&&(this.state.dialog&&(this.ace.curOp.command.scrollIntoView=this.ace.curOp.vimDialogScroll),this.ace.endOperation(),i.cursorActivity||i.lastChange||!n||(this.ace.prevOp=n)),(t||!this.ace.curOp)&&this.curOp&&this.onBeforeEndOperation(),r},this.onBeforeEndOperation=function(){var e=this.curOp;e&&(e.change&&this.signal("change",e.change,e),e&&e.cursorActivity&&this.signal("cursorActivity",null,e),this.curOp=null)},this.signal=function(e,t,n){var i=n?n[e+"Handlers"]:(this._eventRegistry||{})[e];if(i){i=i.slice();for(var r=0;r<i.length;r++)i[r](this,t)}},this.firstLine=function(){return 0},this.lastLine=function(){return this.ace.session.getLength()-1},this.lineCount=function(){return this.ace.session.getLength()},this.setCursor=function(e,t){"object"==typeof e&&(t=e.ch,e=e.line);var n=!this.curOp&&!this.ace.inVirtualSelectionMode;this.ace.inVirtualSelectionMode||this.ace.exitMultiSelectMode(),this.ace.session.unfold({row:e,column:t}),this.ace.selection.moveTo(e,t),n&&(this.ace.renderer.scrollCursorIntoView(),this.ace.endOperation())},this.getCursor=function(e){var t=this.ace.selection;return w("anchor"==e?t.isEmpty()?t.lead:t.anchor:"head"!=e&&e?t.getRange()[e]:t.lead)},this.listSelections=function(e){var t=this.ace.multiSelect.rangeList.ranges;return!t.length||this.ace.inVirtualSelectionMode?[{anchor:this.getCursor("anchor"),head:this.getCursor("head")}]:t.map(function(e){return{anchor:this.clipPos(w(e.cursor==e.end?e.start:e.end)),head:this.clipPos(w(e.cursor))}},this)},this.setSelections=function(e,t){var n=this.ace.multiSelect,i=e.map(function(e){var t=_(e.anchor),n=_(e.head),i=0>a.comparePoints(t,n)?new a.fromPoints(t,n):new a.fromPoints(n,t);return i.cursor=a.comparePoints(i.start,n)?i.end:i.start,i});if(this.ace.inVirtualSelectionMode)return void this.ace.selection.fromOrientedRange(i[0]);t?i[t]&&i.push(i.splice(t,1)[0]):i=i.reverse(),n.toSingleRange(i[0].clone());for(var r=this.ace.session,o=0;o<i.length;o++){var s=r.$clipRangeToDocument(i[o]);n.addRange(s)}},this.setSelection=function(e,t,n){var i=this.ace.selection;i.moveTo(e.line,e.ch),i.selectTo(t.line,t.ch),n&&"*mouse"==n.origin&&this.onBeforeEndOperation()},this.somethingSelected=function(e){return!this.ace.selection.isEmpty()},this.clipPos=function(e){return w(this.ace.session.$clipPositionToDocument(e.line,e.ch))},this.foldCode=function(e){this.ace.session.$toggleFoldWidget(e.line,{})},this.markText=function(e){return{clear:function(){},find:function(){}}},this.$updateMarkers=function(e){var t="insert"==e.action,n=e.start,i=e.end,r=(i.row-n.row)*(t?1:-1),o=(i.column-n.column)*(t?1:-1);for(var s in t&&(i=n),this.marks){var c=this.marks[s],l=a.comparePoints(c,n);if(!(l<0)){if(0===l&&t)if(c.$insertRight)if(1==c.bias)l=1;else{c.bias=-1;continue}else l=1;var u=t?l:a.comparePoints(c,i);if(u>0){c.row+=r,c.column+=c.row==i.row?o:0;continue}!t&&u<=0&&(c.row=n.row,c.column=n.column,0===u&&(c.bias=1))}}};var e=function(e,t,n,i){this.cm=e,this.id=t,this.row=n,this.column=i,e.marks[this.id]=this};e.prototype.clear=function(){delete this.cm.marks[this.id]},e.prototype.find=function(){return w(this)},this.setBookmark=function(t,n){var i=new e(this,this.$uid++,t.line,t.ch);return n&&n.insertLeft||(i.$insertRight=!0),this.marks[i.id]=i,i},this.moveH=function(e,t){if("char"==t){var n=this.ace.selection;n.clearSelection(),n.moveCursorBy(0,e)}},this.findPosV=function(e,t,n,i){if("page"==n){var r=this.ace.renderer.layerConfig;t*=Math.floor(r.height/r.lineHeight),n="line"}if("line"==n){var o=this.ace.session.documentToScreenPosition(e.line,e.ch);return null!=i&&(o.column=i),o.row+=t,o.row=Math.min(Math.max(0,o.row),this.ace.session.getScreenLength()-1),w(this.ace.session.screenToDocumentPosition(o.row,o.column))}},this.charCoords=function(e,t){if("div"==t||!t){var n=this.ace.session.documentToScreenPosition(e.line,e.ch);return{left:n.column,top:n.row}}if("local"==t){var i=this.ace.renderer,n=this.ace.session.documentToScreenPosition(e.line,e.ch),r=i.layerConfig.lineHeight,o=i.layerConfig.characterWidth,s=r*n.row;return{left:n.column*o,top:s,bottom:s+r}}},this.coordsChar=function(e,t){var n=this.ace.renderer;if("local"==t){var i=Math.max(0,Math.floor(e.top/n.lineHeight)),r=Math.max(0,Math.floor(e.left/n.characterWidth));return w(n.session.screenToDocumentPosition(i,r))}if("div"==t)throw"not implemented"},this.getSearchCursor=function(e,t,n){var i=!1,r=!1;e instanceof RegExp&&!e.global&&(i=!e.ignoreCase,e=e.source,r=!0),"\\n"==e&&(e="\n",r=!1);var o=new d;void 0==t.ch&&(t.ch=Number.MAX_VALUE);var s={row:t.line,column:t.ch},a=this,c=null;return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){return o.setOptions({needle:e,caseSensitive:i,wrap:!1,backwards:t,regExp:r,start:c||s}),(c=o.find(a.ace.session))&&[!c.isEmpty()]},from:function(){return c&&w(c.start)},to:function(){return c&&w(c.end)},replace:function(e){c&&(c.end=a.ace.session.doc.replace(c,e))}}},this.scrollTo=function(e,t){var n=this.ace.renderer,i=n.layerConfig,r=i.maxHeight;r-=(n.$size.scrollerHeight-n.lineHeight)*n.$scrollPastEnd,null!=t&&this.ace.session.setScrollTop(Math.max(0,Math.min(t,r))),null!=e&&this.ace.session.setScrollLeft(Math.max(0,Math.min(e,i.width)))},this.scrollInfo=function(){return 0},this.scrollIntoView=function(e,t){if(e){var n=this.ace.renderer,i={top:0,bottom:t};n.scrollCursorIntoView(_(e),2*n.lineHeight/n.$size.scrollerHeight,i)}},this.getLine=function(e){return this.ace.session.getLine(e)},this.getRange=function(e,t){return this.ace.session.getTextRange(new a(e.line,e.ch,t.line,t.ch))},this.replaceRange=function(e,t,n){n||(n=t);var i=new a(t.line,t.ch,n.line,n.ch);return this.ace.session.$clipRangeToDocument(i),this.ace.session.replace(i,e)},this.replaceSelection=this.replaceSelections=function(e){var t=Array.isArray(e)&&e,n=this.ace.selection;if(this.ace.inVirtualSelectionMode)return void this.ace.session.replace(n.getRange(),t?e[0]||"":e);n.inVirtualSelectionMode=!0;var i=n.rangeList.ranges;i.length||(i=[this.ace.multiSelect.getRange()]);for(var r=i.length;r--;)this.ace.session.replace(i[r],t?e[r]||"":e);n.inVirtualSelectionMode=!1},this.getSelection=function(){return this.ace.getSelectedText()},this.getSelections=function(){return this.listSelections().map(function(e){return this.getRange(e.anchor,e.head)},this)},this.getInputField=function(){return this.ace.textInput.getElement()},this.getWrapperElement=function(){return this.ace.container};var t={indentWithTabs:"useSoftTabs",indentUnit:"tabSize",tabSize:"tabSize",firstLineNumber:"firstLineNumber",readOnly:"readOnly"};this.setOption=function(e,n){switch(this.state[e]=n,e){case"indentWithTabs":e=t[e],n=!n;break;case"keyMap":this.state.$keyMap=n;return;default:e=t[e]}e&&this.ace.setOption(e,n)},this.getOption=function(e){var n,i=t[e];switch(i&&(n=this.ace.getOption(i)),e){case"indentWithTabs":return e=t[e],!n;case"keyMap":return this.state.$keyMap||"vim"}return i?n:this.state[e]},this.toggleOverwrite=function(e){return this.state.overwrite=e,this.ace.setOverwrite(e)},this.addOverlay=function(e){if(!this.$searchHighlight||!this.$searchHighlight.session){var t=new g(null,"ace_highlight-marker","text"),n=this.ace.session.addDynamicMarker(t);t.id=n.id,t.session=this.ace.session,t.destroy=function(e){t.session.off("change",t.updateOnChange),t.session.off("changeEditor",t.destroy),t.session.removeMarker(t.id),t.session=null},t.updateOnChange=function(e){var n=e.start.row;n==e.end.row?t.cache[n]=void 0:t.cache.splice(n,t.cache.length)},t.session.on("changeEditor",t.destroy),t.session.on("change",t.updateOnChange)}var i=RegExp(e.query.source,"gmi");this.$searchHighlight=e.highlight=t,this.$searchHighlight.setRegexp(i),this.ace.renderer.updateBackMarkers()},this.removeOverlay=function(e){this.$searchHighlight&&this.$searchHighlight.session&&this.$searchHighlight.destroy()},this.getScrollInfo=function(){var e=this.ace.renderer,t=e.layerConfig;return{left:e.scrollLeft,top:e.scrollTop,height:t.maxHeight,width:t.width,clientHeight:t.height,clientWidth:t.width}},this.getValue=function(){return this.ace.getValue()},this.setValue=function(e){return this.ace.setValue(e,-1)},this.getTokenTypeAt=function(e){var t=this.ace.session.getTokenAt(e.line,e.ch);return t&&/comment|string/.test(t.type)?"string":""},this.findMatchingBracket=function(e){var t=this.ace.session.findMatchingBracket(_(e));return{to:t&&w(t)}},this.findMatchingTag=function(e){var t=this.ace.session.getMatchingTags(_(e));if(t)return{open:{from:w(t.openTag.start),to:w(t.openTag.end)},close:{from:w(t.closeTag.start),to:w(t.closeTag.end)}}},this.indentLine=function(e,t){!0===t?this.ace.session.indentRows(e,e,"	"):!1===t&&this.ace.session.outdentRows(new a(e,0,e,0))},this.indexFromPos=function(e){return this.ace.session.doc.positionToIndex(_(e))},this.posFromIndex=function(e){return w(this.ace.session.doc.indexToPosition(e))},this.focus=function(e){return this.ace.textInput.focus()},this.blur=function(e){return this.ace.blur()},this.defaultTextHeight=function(e){return this.ace.renderer.layerConfig.lineHeight},this.scanForBracket=function(e,t,n,i){var r=i.bracketRegex.source,o=/paren|text|operator|tag/;if(1==t)var s=this.ace.session.$findClosingBracket(r.slice(1,2),_(e),o);else{var s=this.ace.session.$findOpeningBracket(r.slice(-2,-1),{row:e.line,column:e.ch+1},o);!s&&i.bracketRegex&&i.bracketRegex.test(this.getLine(e.line)[e.ch-1])&&(s={row:e.line,column:e.ch-1})}return s&&{pos:w(s)}},this.refresh=function(){return this.ace.resize(!0)},this.getMode=function(){return{name:this.getOption("mode")}},this.execCommand=function(e){return b.commands.hasOwnProperty(e)?b.commands[e](this):"indentAuto"==e?this.ace.execCommand("autoindent"):void console.log(e+" is not implemented")},this.getLineNumber=function(e){var t=this.$lineHandleChanges;if(!t)return null;for(var n=e.row,i=0;i<t.length;i++){var r=t[i];if(r.start.row!=r.end.row){if("i"==r.action[0])r.start.row<n&&(n+=r.end.row-r.start.row);else if(r.start.row<n){if(n<r.end.row||n==r.end.row&&r.start.column>0)return null;n-=r.end.row-r.start.row}}}return n},this.getLineHandle=function(e){return this.$lineHandleChanges||(this.$lineHandleChanges=[]),{text:this.ace.session.getLine(e),row:e}},this.releaseLineHandles=function(){this.$lineHandleChanges=void 0},this.getLastEditEnd=function(){var e=this.ace.session.$undoManager;if(e&&e.$lastDelta)return w(e.$lastDelta.end)}}).call(b.prototype),(b.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0}).prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){throw"not implemented"},indentation:function(){throw"not implemented"},match:function(e,t,n){if("string"==typeof e){var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0}else{var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}},b.defineExtension=function(e,t){b.prototype[e]=t},l.importCssString(".normal-mode .ace_cursor{\n    border: none;\n    background-color: rgba(255,0,0,0.5);\n}\n.normal-mode .ace_hidden-cursors .ace_cursor{\n  background-color: transparent;\n  border: 1px solid red;\n  opacity: 0.7\n}\n.ace_dialog {\n  position: absolute;\n  left: 0; right: 0;\n  background: inherit;\n  z-index: 15;\n  padding: .1em .8em;\n  overflow: hidden;\n  color: inherit;\n}\n.ace_dialog-top {\n  border-bottom: 1px solid #444;\n  top: 0;\n}\n.ace_dialog-bottom {\n  border-top: 1px solid #444;\n  bottom: 0;\n}\n.ace_dialog input {\n  border: none;\n  outline: none;\n  background: transparent;\n  width: 20em;\n  color: inherit;\n  font-family: monospace;\n}","vimMode",!1),function(){function e(e,t,n){var i;return i=e.ace.container.appendChild(document.createElement("div")),n?i.className="ace_dialog ace_dialog-bottom":i.className="ace_dialog ace_dialog-top","string"==typeof t?i.innerHTML=t:i.appendChild(t),i}function t(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}b.defineExtension("openDialog",function(n,i,r){if(!this.virtualSelectionMode()){r||(r={}),t(this,null);var o=e(this,n,r.bottom),s=!1,a=this;this.state.dialog=o;var c,l=o.getElementsByTagName("input")[0];return l?(r.value&&(l.value=r.value,!1!==r.selectValueOnOpen&&l.select()),r.onInput&&b.on(l,"input",function(e){r.onInput(e,l.value,u)}),r.onKeyUp&&b.on(l,"keyup",function(e){r.onKeyUp(e,l.value,u)}),b.on(l,"keydown",function(e){r&&r.onKeyDown&&r.onKeyDown(e,l.value,u)||(13==e.keyCode&&i(l.value),(27==e.keyCode||!1!==r.closeOnEnter&&13==e.keyCode)&&(b.e_stop(e),u()))}),!1!==r.closeOnBlur&&b.on(l,"blur",u),l.focus()):(c=o.getElementsByTagName("button")[0])&&(b.on(c,"click",function(){u(),a.focus()}),!1!==r.closeOnBlur&&b.on(c,"blur",u),c.focus()),u}function u(e){if("string"==typeof e)l.value=e;else{if(s||e&&"blur"==e.type&&document.activeElement===l)return;a.state.dialog==o&&(a.state.dialog=null,a.focus()),s=!0,o.remove(),r.onClose&&r.onClose(o);var t=a;t.state.vim&&(t.state.vim.status=null,t.ace._signal("changeStatus"),t.ace.renderer.$loop.schedule(t.ace.renderer.CHANGE_CURSOR))}}}),b.defineExtension("openNotification",function(n,i){if(!this.virtualSelectionMode()){t(this,c);var r,o=e(this,n,i&&i.bottom),s=!1,a=i&&void 0!==i.duration?i.duration:5e3;return b.on(o,"click",function(e){b.e_preventDefault(e),c()}),a&&(r=setTimeout(c,a)),c}function c(){s||(s=!0,clearTimeout(r),o.remove())}})}();var S=b.Pos;function x(e,t,n){if(t.line===n.line&&t.ch>=n.ch-1){var i=e.getLine(t.line).charCodeAt(t.ch);55296<=i&&i<=55551&&(n.ch+=1)}return{start:t,end:n}}var C=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"g<Up>",type:"keyToKey",toKeys:"gk"},{keys:"g<Down>",type:"keyToKey",toKeys:"gj"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h"},{keys:"<Del>",type:"keyToKey",toKeys:"x"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"keyToKey",toKeys:"i",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"g$",type:"motion",motion:"moveToEndOfDisplayLine"},{keys:"g^",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"g0",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<register>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<register>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"gq",type:"operator",operator:"hardWrap"},{keys:"gw",type:"operator",operator:"hardWrap",operatorArgs:{keepCursor:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<register>",type:"action",action:"replayMacro"},{keys:"q<register>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<register>",type:"action",action:"setMark"},{keys:'"<register>',type:"action",action:"setRegister"},{keys:"<C-r><register>",type:"action",action:"insertRegister",context:"insert",isEdit:!0},{keys:"<C-o>",type:"action",action:"oneNormalCommand",context:"insert"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<register>",type:"motion",motion:"textObjectManipulation"},{keys:"i<register>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],k=C.length,E=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"omap",shortName:"om"},{name:"noremap",shortName:"no"},{name:"nnoremap",shortName:"nn"},{name:"vnoremap",shortName:"vn"},{name:"inoremap",shortName:"ino"},{name:"onoremap",shortName:"ono"},{name:"unmap"},{name:"mapclear",shortName:"mapc"},{name:"nmapclear",shortName:"nmapc"},{name:"vmapclear",shortName:"vmapc"},{name:"imapclear",shortName:"imapc"},{name:"omapclear",shortName:"omapc"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"startinsert",shortName:"start"},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"delete",shortName:"d"},{name:"join",shortName:"j"},{name:"normal",shortName:"norm"},{name:"global",shortName:"g"}],R=eu("");function O(e){e.setOption("disableInput",!0),e.setOption("showCursorWhenSelecting",!1),b.signal(e,"vim-mode-change",{mode:"normal"}),e.on("cursorActivity",tQ),X(e),b.on(e.getInputField(),"paste",T(e))}function M(e){e.setOption("disableInput",!1),e.off("cursorActivity",tQ),b.off(e.getInputField(),"paste",T(e)),e.state.vim=null,tT&&clearTimeout(tT)}function T(e){var t=e.state.vim;return t.onPasteFn||(t.onPasteFn=function(){t.insertMode||(e.setCursor(eO(e.getCursor(),0,1)),eC.enterInsertMode(e,{},t))}),t.onPasteFn}var A=/[\d]/,L=[b.isWordChar,function(e){return e&&!b.isWordChar(e)&&!/\s/.test(e)}],P=[function(e){return/\S/.test(e)}],N=["<",">"],I=["-",'"',".",":","_","/","+"],D=/^\w$/;try{i=RegExp("^[\\p{Lu}]$","u")}catch(e){i=/^[A-Z]$/}function $(e,t){return t>=e.firstLine()&&t<=e.lastLine()}function B(e){return/^[a-z]$/.test(e)}function j(e){return -1!="()[]{}".indexOf(e)}function H(e){return A.test(e)}function F(e){return i.test(e)}function z(e){return/^\s*$/.test(e)}function W(e){return -1!=".?!".indexOf(e)}function V(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}var U={};function K(e,t,n,i,r){if(void 0===t&&!r)throw Error("defaultValue is required unless callback is provided");if(n||(n="string"),U[e]={type:n,defaultValue:t,callback:r},i)for(var o=0;o<i.length;o++)U[i[o]]=U[e];t&&q(e,t)}function q(e,t,n,i){var r=U[e],o=(i=i||{}).scope;if(!r)return Error("Unknown option: "+e);if("boolean"==r.type)if(t&&!0!==t)return Error("Invalid argument: "+e+"="+t);else!1!==t&&(t=!0);r.callback?("local"!==o&&r.callback(t,void 0),"global"!==o&&n&&r.callback(t,n)):("local"!==o&&(r.value="boolean"==r.type?!!t:t),"global"!==o&&n&&(n.state.vim.options[e]={value:t}))}function G(e,t,n){var i=U[e],r=(n=n||{}).scope;if(!i)return Error("Unknown option: "+e);if(i.callback){var o=t&&i.callback(void 0,t);return"global"!==r&&void 0!==o?o:"local"!==r?i.callback():void 0}var o="global"!==r&&t&&t.state.vim.options[e];return(o||"local"!==r&&i||{}).value}K("filetype",void 0,"string",["ft"],function(e,t){if(void 0!==t)if(void 0===e){var n=t.getOption("mode");return"null"==n?"":n}else{var n=""==e?"null":e;t.setOption("mode",n)}}),K("textwidth",80,"number",["tw"],function(e,t){if(void 0!==t)if(void 0===e)return t.getOption("textwidth");else{var n=Math.round(e);n>1&&t.setOption("textwidth",n)}});var J=function(){var e=100,t=-1,n=0,i=0,r=Array(100);function o(o,s){(t+=s)>n?t=n:t<i&&(t=i);var a=r[(e+t)%e];if(a&&!a.find()){var c,l=s>0?1:-1,u=o.getCursor();do if(t+=l,(a=r[(e+t)%e])&&(c=a.find())&&!eN(u,c))break;while(t<n&&t>i)}return a}return{cachedCursor:void 0,add:function(o,s,a){var c=r[t%e];function l(n){var i=++t%e,s=r[i];s&&s.clear(),r[i]=o.setBookmark(n)}if(c){var u=c.find();u&&!eN(u,s)&&l(s)}else l(s);l(a),n=t,(i=t-e+1)<0&&(i=0)},find:function(e,n){var i=t,r=o(e,n);return t=i,r&&r.find()},move:o}},Y=function(e){return e?{changes:e.changes,expectCursorActivityForChange:e.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function Q(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=Y()}function X(e){return e.state.vim||(e.state.vim={inputState:new eh,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeReturn:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{},expectLiteralNext:!1}),e.state.vim}function Z(){for(var e in r={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:J(),macroModeState:new Q,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new em({}),searchHistoryController:new ev,exCommandHistoryController:new ev},U){var t=U[e];t.value=t.defaultValue}}Q.prototype={exitMacroRecordMode:function(){var e=r.macroModeState;e.onRecordingDone&&e.onRecordingDone(),e.onRecordingDone=void 0,e.isRecording=!1},enterMacroRecordMode:function(e,t){var n=r.registerController.getRegister(t);if(n){if(n.clear(),this.latestRegister=t,e.openDialog){var i=tx("span",{class:"cm-vim-message"},"recording @"+t);this.onRecordingDone=e.openDialog(i,null,{bottom:!0})}this.isRecording=!0}}};var ee={enterVimMode:O,leaveVimMode:M,buildKeyMap:function(){},getRegisterController:function(){return r.registerController},resetVimGlobalState_:Z,getVimGlobalState_:function(){return r},maybeInitVimState_:X,suppressErrorLogging:!1,InsertModeKey:tZ,map:function(e,t,n){tF.map(e,t,n)},unmap:function(e,t){return tF.unmap(e,t)},noremap:function(e,t,n){tF.map(e,t,n,!0)},mapclear:function(e){var t=C.length,n=k,i=C.slice(0,t-n);if(C=C.slice(t-n),e)for(var r=i.length-1;r>=0;r--){var o=i[r];if(e!==o.context)if(o.context)this._mapCommand(o);else{var s=["normal","insert","visual"];for(var a in s)if(s[a]!==e){var c={};for(var l in o)c[l]=o[l];c.context=s[a],this._mapCommand(c)}}}},langmap:el,vimKeyFromEvent:ec,setOption:q,getOption:G,defineOption:K,defineEx:function(e,t,n){if(t){if(0!==e.indexOf(t))throw Error('(Vim.defineEx) "'+t+'" is not a prefix of "'+e+'", command not registered')}else t=e;tH[e]=n,tF.commandMap_[t]={name:e,shortName:t,type:"api"}},handleKey:function(e,t,n){var i=this.findKey(e,t,n);if("function"==typeof i)return i()},multiSelectHandleKey:t8,findKey:function(e,t,n){var i,s=X(e);function a(){var i=r.macroModeState;if(i.isRecording){if("q"==t)return i.exitMacroRecordMode(),ep(e),!0;"mapping"!=n&&tq(i,t)}}function c(){if("<Esc>"==t){if(s.visualMode)eX(e);else{if(!s.insertMode)return;tW(e)}return ep(e),!0}}function l(){if(c())return!0;s.inputState.keyBuffer.push(t);var n=s.inputState.keyBuffer.join(""),i=1==t.length,a=ey.matchCommand(n,C,s.inputState,"insert"),l=s.inputState.changeQueue;if("none"==a.type)return ep(e),!1;if("partial"==a.type){if(a.expectLiteralNext&&(s.expectLiteralNext=!0),o&&window.clearTimeout(o),o=i&&window.setTimeout(function(){s.insertMode&&s.inputState.keyBuffer.length&&ep(e)},G("insertModeEscKeysTimeout")),i){var u=e.listSelections();l&&l.removed.length==u.length||(l=s.inputState.changeQueue=new ed),l.inserted+=t;for(var h=0;h<u.length;h++){var p=eD(u[h].anchor,u[h].head),d=e$(u[h].anchor,u[h].head),f=e.getRange(p,e.state.overwrite?eO(d,0,1):d);l.removed[h]=(l.removed[h]||"")+f}}return!i}if(s.expectLiteralNext=!1,o&&window.clearTimeout(o),a.command&&l){for(var u=e.listSelections(),h=0;h<u.length;h++){var g=u[h].head;e.replaceRange(l.removed[h]||"",eO(g,0,-l.inserted.length),g,"+input")}r.macroModeState.lastInsertModeChanges.changes.pop()}return a.command||ep(e),a.command}function u(){if(a()||c())return!0;s.inputState.keyBuffer.push(t);var n=s.inputState.keyBuffer.join("");if(/^[1-9]\d*$/.test(n))return!0;var i=/^(\d*)(.*)$/.exec(n);if(!i)return ep(e),!1;var r=s.visualMode?"visual":"normal",o=i[2]||i[1];s.inputState.operatorShortcut&&s.inputState.operatorShortcut.slice(-1)==o&&(o=s.inputState.operatorShortcut);var l=ey.matchCommand(o,C,s.inputState,r);return"none"==l.type?(ep(e),!1):"partial"==l.type?(l.expectLiteralNext&&(s.expectLiteralNext=!0),!0):"clear"==l.type?(ep(e),!0):(s.expectLiteralNext=!1,s.inputState.keyBuffer.length=0,(i=/^(\d*)(.*)$/.exec(n))[1]&&"0"!=i[1]&&s.inputState.pushRepeatDigit(i[1]),l.command)}return!1===(i=s.insertMode?l():u())?s.insertMode||1!==t.length?void 0:function(){return!0}:!0===i?function(){return!0}:function(){if(!((i.operator||i.isEdit)&&e.getOption("readOnly")))return e.operation(function(){e.curOp.isVimOp=!0;try{"keyToKey"==i.type?er(e,i.toKeys,i):ey.processCommand(e,s,i)}catch(t){throw e.state.vim=void 0,X(e),ee.suppressErrorLogging||console.log(t),t}return!0})}},handleEx:function(e,t){tF.processCommand(e,t)},defineMotion:e_,defineAction:ek,defineOperator:ex,mapCommand:tU,_mapCommand:tV,defineRegister:eg,exitVisualMode:eX,exitInsertMode:tW},et=[],en=!1;function ei(e){if("<"==e[0]){var t=e.toLowerCase().slice(1,-1);if("lt"==(t=t.split("-").pop()||""))e="<";else if("space"==t)e=" ";else if("cr"==t)e="\n";else if(ea[t]){var n=s.value,i={key:ea[t],target:{value:n,selectionEnd:n.length,selectionStart:n.length}};s.onKeyDown&&s.onKeyDown(i,s.value,o),s&&s.onKeyUp&&s.onKeyUp(i,s.value,o);return}}if("\n"==e){var r=s;s=null,r.onClose&&r.onClose(r.value)}else s.value=(s.value||"")+e;function o(e){"string"==typeof e?s.value=e:s=null}}function er(e,t,n){var i=en;if(n){if(-1!=et.indexOf(n))return;et.push(n),en=!1!=n.noremap}try{for(var r,o=X(e),a=/<(?:[CSMA]-)*\w+>|./gi;r=a.exec(t);){var c=r[0],l=o.insertMode;if(s){ei(c);continue}if(!ee.handleKey(e,c,"mapping")&&l&&o.insertMode){if("<"==c[0]){var u=c.toLowerCase().slice(1,-1);if(u=u.split("-").pop()||"","lt"==u)c="<";else if("space"==u)c=" ";else if("cr"==u)c="\n";else if(ea.hasOwnProperty(u)){c=ea[u],t2(e,c);continue}else c=c[0],a.lastIndex=r.index+1}e.replaceSelection(c)}}}finally{if(et.pop(),en=!!et.length&&i,!et.length&&s){var h=s;s=null,tE(e,h)}}}var eo={Return:"CR",Backspace:"BS",Delete:"Del",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"CR"," ":"Space"},es={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1,AltGraph:1,Dead:1,Unidentified:1},ea={};function ec(e,t){var n=e.key;if(!es[n]){n.length>1&&"n"==n[0]&&(n=n.replace("Numpad","")),n=eo[n]||n;var i="";if(e.ctrlKey&&(i+="C-"),e.altKey&&(i+="A-"),e.metaKey&&(i+="M-"),b.isMac&&e.altKey&&!e.metaKey&&!e.ctrlKey&&(i=i.slice(2)),(i||n.length>1)&&e.shiftKey&&(i+="S-"),t&&!t.expectLiteralNext&&1==n.length){if(R.keymap&&n in R.keymap)!1==R.remapCtrl&&i||(n=R.keymap[n]);else if(n.charCodeAt(0)>255){var r=e.code&&e.code.slice(-1)||"";e.shiftKey||(r=r.toLowerCase()),r&&(n=r)}}return i+=n,i.length>1&&(i="<"+i+">"),i}}function el(e,t){R.string!==e&&(R=eu(e)),R.remapCtrl=t}function eu(e){var t={};if(!e)return{keymap:t,string:""};function n(e){return e.split(/\\?(.)/).filter(Boolean)}return e.split(/((?:[^\\,]|\\.)+),/).map(function(e){if(e){var i=e.split(/((?:[^\\;]|\\.)+);/);if(3==i.length){var r=n(i[1]),o=n(i[2]);if(r.length!==o.length)return;for(var s=0;s<r.length;++s)t[r[s]]=o[s]}else if(1==i.length){var a=n(e);if(a.length%2!=0)return;for(var s=0;s<a.length;s+=2)t[a[s]]=a[s+1]}}}),{keymap:t,string:e}}function eh(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null,this.changeQueue=null}function ep(e,t){e.state.vim.inputState=new eh,e.state.vim.expectLiteralNext=!1,b.signal(e,"vim-command-done",t)}function ed(){this.removed=[],this.inserted=""}function ef(e,t,n){this.clear(),this.keyBuffer=[e||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!t,this.blockwise=!!n}function eg(e,t){var n=r.registerController.registers;if(!e||1!=e.length)throw Error("Register name must be 1 character");n[e]=t,I.push(e)}function em(e){this.registers=e,this.unnamedRegister=e['"']=new ef,e["."]=new ef,e[":"]=new ef,e["/"]=new ef,e["+"]=new ef}function ev(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}"Left|Right|Up|Down|End|Home".split("|").concat(Object.keys(eo)).forEach(function(e){ea[(eo[e]||"").toLowerCase()]=ea[e.toLowerCase()]=e}),K("langmap",void 0,"string",["lmap"],function(e,t){if(void 0===e)return R.string;el(e)}),eh.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},eh.prototype.getRepeat=function(){var e=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10))),e},ef.prototype={setText:function(e,t,n){this.keyBuffer=[e||""],this.linewise=!!t,this.blockwise=!!n},pushText:function(e,t){t&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(e)},pushInsertModeChanges:function(e){this.insertModeChanges.push(Y(e))},pushSearchQuery:function(e){this.searchQueries.push(e)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},em.prototype={pushText:function(e,t,n,i,r){if("_"!==e){i&&"\n"!==n.charAt(n.length-1)&&(n+="\n");var o=this.isValidRegister(e)?this.getRegister(e):null;if(!o){switch(t){case"yank":this.registers["0"]=new ef(n,i,r);break;case"delete":case"change":-1==n.indexOf("\n")?this.registers["-"]=new ef(n,i):(this.shiftNumericRegisters_(),this.registers["1"]=new ef(n,i))}this.unnamedRegister.setText(n,i,r);return}var s=F(e);s?o.pushText(n,i):o.setText(n,i,r),"+"===e&&"undefined"!=typeof navigator&&void 0!==navigator.clipboard&&"function"==typeof navigator.clipboard.readText&&navigator.clipboard.writeText(n),this.unnamedRegister.setText(o.toString(),i)}},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new ef),this.registers[e]):this.unnamedRegister},isValidRegister:function(e){return e&&(V(e,I)||D.test(e))},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}},ev.prototype={nextMatch:function(e,t){var n=this.historyBuffer,i=t?-1:1;null===this.initialPrefix&&(this.initialPrefix=e);for(var r=this.iterator+i;t?r>=0:r<n.length;r+=i)for(var o=n[r],s=0;s<=o.length;s++)if(this.initialPrefix==o.substring(0,s))return this.iterator=r,o;return r>=n.length?(this.iterator=n.length,this.initialPrefix):r<0?e:void 0},pushInput:function(e){var t=this.historyBuffer.indexOf(e);t>-1&&this.historyBuffer.splice(t,1),e.length&&this.historyBuffer.push(e)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var ey={matchCommand:function(e,t,n,i){var r,o=eM(e,t,i,n);if(!o.full&&!o.partial)return{type:"none"};if(!o.full&&o.partial)return{type:"partial",expectLiteralNext:1==o.partial.length&&"<character>"==o.partial[0].keys.slice(-11)};for(var s=0;s<o.full.length;s++){var a=o.full[s];r||(r=a)}if("<character>"==r.keys.slice(-11)||"<register>"==r.keys.slice(-10)){var c=eA(e);if(!c||c.length>1)return{type:"clear"};n.selectedCharacter=c}return{type:"full",command:r}},processCommand:function(e,t,n){switch(t.inputState.repeatOverride=n.repeatOverride,n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action":this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n)}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=eR(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var i=t.inputState;if(i.operator)if(i.operator==n.operator){i.motion="expandToLine",i.motionArgs={linewise:!0},this.evalInput(e,t);return}else ep(e);i.operator=n.operator,i.operatorArgs=eR(n.operatorArgs),n.keys.length>1&&(i.operatorShortcut=n.keys),n.exitVisualBlock&&(t.visualBlock=!1,eJ(e)),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var i=t.visualMode,r=eR(n.operatorMotionArgs);r&&i&&r.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),i||this.processMotion(e,t,n)},processAction:function(e,t,n){var i=t.inputState,r=i.getRepeat(),o=!!r,s=eR(n.actionArgs)||{};i.selectedCharacter&&(s.selectedCharacter=i.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),s.repeat=r||1,s.repeatIsExplicit=o,s.registerName=i.registerName,ep(e),t.lastMotion=null,n.isEdit&&this.recordLastEdit(t,i,n),eC[n.action](e,s,t)},processSearch:function(e,t,n){if(e.getSearchCursor){var i=n.searchArgs.forward,o=n.searchArgs.wholeWordOnly;tp(e).setReversed(!i);var s=i?"/":"?",a=tp(e).getQuery(),c=e.getScrollInfo();switch(n.searchArgs.querySrc){case"prompt":var l=r.macroModeState;if(l.isPlaying){var u=l.replaySearchQueries.shift();d(u,!0,!1)}else tE(e,{onClose:f,prefix:s,desc:"(JavaScript regexp)",onKeyUp:g,onKeyDown:m});break;case"wordUnderCursor":var h=e2(e,{noSymbol:!0}),p=!0;if(h||(h=e2(e,{noSymbol:!1}),p=!1),!h){tC(e,"No word under cursor"),ep(e);return}var u=e.getLine(h.start.line).substring(h.start.ch,h.end.ch);u=p&&o?"\\b"+u+"\\b":eF(u),r.jumpList.cachedCursor=e.getCursor(),e.setCursor(h.start),d(u,!0,!1)}}function d(i,o,s){r.searchHistoryController.pushInput(i),r.searchHistoryController.reset();try{tO(e,i,o,s)}catch(t){tC(e,"Invalid regex: "+i),ep(e);return}ey.processMotion(e,t,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:n.searchArgs.toJumplist}})}function f(e){d(e,!0,!0);var t=r.macroModeState;t.isRecording&&tJ(t,e)}function g(t,n,o){var s,a,l,u=ec(t);"<Up>"==u||"<Down>"==u?(a="<Up>"==u,l=t.target?t.target.selectionEnd:0,o(n=r.searchHistoryController.nextMatch(n,a)||""),l&&t.target&&(t.target.selectionEnd=t.target.selectionStart=Math.min(l,t.target.value.length))):u&&"<Left>"!=u&&"<Right>"!=u&&r.searchHistoryController.reset();try{s=tO(e,n,!0,!0)}catch(e){}s?e.scrollIntoView(tL(e,!i,s),30):(tN(e),e.scrollTo(c.left,c.top))}function m(t,n,i){var o=ec(t);"<Esc>"==o||"<C-c>"==o||"<C-[>"==o||"<BS>"==o&&""==n?(r.searchHistoryController.pushInput(n),r.searchHistoryController.reset(),tO(e,a),tN(e),e.scrollTo(c.left,c.top),b.e_stop(t),ep(e),i(),e.focus()):"<Up>"==o||"<Down>"==o?b.e_stop(t):"<C-u>"==o&&(b.e_stop(t),i(""))}},processEx:function(e,t,n){function i(t){r.exCommandHistoryController.pushInput(t),r.exCommandHistoryController.reset(),tF.processCommand(e,t),e.state.vim&&ep(e)}function o(t,n,i){var o,s,a=ec(t);("<Esc>"==a||"<C-c>"==a||"<C-[>"==a||"<BS>"==a&&""==n)&&(r.exCommandHistoryController.pushInput(n),r.exCommandHistoryController.reset(),b.e_stop(t),ep(e),i(),e.focus()),"<Up>"==a||"<Down>"==a?(b.e_stop(t),o="<Up>"==a,s=t.target?t.target.selectionEnd:0,i(n=r.exCommandHistoryController.nextMatch(n,o)||""),s&&t.target&&(t.target.selectionEnd=t.target.selectionStart=Math.min(s,t.target.value.length))):"<C-u>"==a?(b.e_stop(t),i("")):a&&"<Left>"!=a&&"<Right>"!=a&&r.exCommandHistoryController.reset()}"keyToEx"==n.type?tF.processCommand(e,n.exArgs.input):t.visualMode?tE(e,{onClose:i,prefix:":",value:"'<,'>",onKeyDown:o,selectValueOnOpen:!1}):tE(e,{onClose:i,prefix:":",onKeyDown:o})},evalInput:function(e,t){var n=t.inputState,i=n.motion,o=n.motionArgs||{},s=n.operator,a=n.operatorArgs||{},c=n.registerName,l=t.sel,u=eP(t.visualMode?eE(e,l.head):e.getCursor("head")),h=eP(t.visualMode?eE(e,l.anchor):e.getCursor("anchor")),p=eP(u),d=eP(h);if(s&&this.recordLastEdit(t,n),(y=void 0!==n.repeatOverride?n.repeatOverride:n.getRepeat())>0&&o.explicitRepeat?o.repeatIsExplicit=!0:(o.noRepeat||!o.explicitRepeat&&0===y)&&(y=1,o.repeatIsExplicit=!1),n.selectedCharacter&&(o.selectedCharacter=a.selectedCharacter=n.selectedCharacter),o.repeat=y,ep(e),i){var f=eb[i](e,u,o,t,n);if(t.lastMotion=eb[i],!f)return;if(o.toJumplist){s||null==e.ace.curOp||(e.ace.curOp.command.scrollIntoView="center-animate");var g=r.jumpList,m=g.cachedCursor;m?(e6(e,m,f),delete g.cachedCursor):e6(e,u,f)}f instanceof Array?(E=f[0],v=f[1]):v=f,v||(v=eP(u)),t.visualMode?(t.visualBlock&&v.ch===1/0||(v=eE(e,v,p)),E&&(E=eE(e,E)),E=E||d,l.anchor=E,l.head=v,eJ(e),tr(e,t,"<",eI(E,v)?E:v),tr(e,t,">",eI(E,v)?v:E)):s||(e.ace.curOp&&(e.ace.curOp.vimDialogScroll="center-animate"),v=eE(e,v,p),e.setCursor(v.line,v.ch))}if(s){if(a.lastSel){var v,y,b,_,w,C,k,E=d,R=a.lastSel,O=Math.abs(R.head.line-R.anchor.line),M=Math.abs(R.head.ch-R.anchor.ch);v=R.visualLine?new S(d.line+O,d.ch):R.visualBlock?new S(d.line+O,d.ch+M):R.head.line==R.anchor.line?new S(d.line,d.ch+M):new S(d.line+O,d.ch),t.visualMode=!0,t.visualLine=R.visualLine,t.visualBlock=R.visualBlock,l=t.sel={anchor:E,head:v},eJ(e)}else t.visualMode&&(a.lastSel={anchor:eP(l.anchor),head:eP(l.head),visualBlock:t.visualBlock,visualLine:t.visualLine});if(t.visualMode){b=eD(l.head,l.anchor),_=e$(l.head,l.anchor),w=t.visualLine||a.linewise,C=t.visualBlock?"block":w?"line":"char";var T=x(e,b,_);if(k=eY(e,{anchor:T.start,head:T.end},C),w){var A=k.ranges;if("block"==C)for(var L=0;L<A.length;L++)A[L].head.ch=ej(e,A[L].head.line);else"line"==C&&(A[0].head=new S(A[0].head.line+1,0))}}else{if(b=eP(E||d),eI(_=eP(v||p),b)){var P=b;b=_,_=P}(w=o.linewise||a.linewise)?e0(e,b,_):o.forward&&eZ(e,b,_),C="char";var N=!o.inclusive||w,T=x(e,b,_);k=eY(e,{anchor:T.start,head:T.end},C,N)}e.setSelections(k.ranges,k.primary),t.lastMotion=null,a.repeat=y,a.registerName=c,a.linewise=w;var I=eS[s](e,a,k.ranges,d,v);t.visualMode&&eX(e,null!=I),I&&e.setCursor(I)}},recordLastEdit:function(e,t,n){var i=r.macroModeState;i.isPlaying||(e.lastEditInputState=t,e.lastEditActionCommand=n,i.lastInsertModeChanges.changes=[],i.lastInsertModeChanges.expectCursorActivityForChange=!1,i.lastInsertModeChanges.visualBlock=e.visualBlock?e.sel.head.line-e.sel.anchor.line:0)}},eb={moveToTopLine:function(e,t,n){var i=tD(e).top+n.repeat-1;return new S(i,e1(e.getLine(i)))},moveToMiddleLine:function(e){var t=tD(e),n=Math.floor((t.top+t.bottom)*.5);return new S(n,e1(e.getLine(n)))},moveToBottomLine:function(e,t,n){var i=tD(e).bottom-n.repeat+1;return new S(i,e1(e.getLine(i)))},expandToLine:function(e,t,n){return new S(t.line+n.repeat-1,1/0)},findNext:function(e,t,n){var i=tp(e),r=i.getQuery();if(r){var o=!n.forward;return o=i.isReversed()?!o:o,tA(e,r),tL(e,o,r,n.repeat)}},findAndSelectNextInclusive:function(e,t,n,i,r){var o=tp(e),s=o.getQuery();if(s){var a=!n.forward,c=tP(e,a=o.isReversed()?!a:a,s,n.repeat,i);if(c){if(r.operator)return c;var l=c[0],u=new S(c[1].line,c[1].ch-1);if(i.visualMode){(i.visualLine||i.visualBlock)&&(i.visualLine=!1,i.visualBlock=!1,b.signal(e,"vim-mode-change",{mode:"visual",subMode:""}));var h=i.sel.anchor;if(h)if(o.isReversed())return n.forward?[h,l]:[h,u];else return n.forward?[h,u]:[h,l]}else i.visualMode=!0,i.visualLine=!1,i.visualBlock=!1,b.signal(e,"vim-mode-change",{mode:"visual",subMode:""});return a?[u,l]:[l,u]}}},goToMark:function(e,t,n,i){var r=t$(e,i,n.selectedCharacter);return r?n.linewise?{line:r.line,ch:e1(e.getLine(r.line))}:r:null},moveToOtherHighlightedEnd:function(e,t,n,i){if(!i.visualBlock||!n.sameLine)return[i.sel.head,i.sel.anchor];var r=i.sel;return[eE(e,new S(r.anchor.line,r.head.ch)),eE(e,new S(r.head.line,r.anchor.ch))]},jumpToMark:function(e,t,n,i){for(var r=t,o=0;o<n.repeat;o++){var s=r;for(var a in i.marks){if(B(a)){var c=i.marks[a].find();if((n.forward?!eI(c,s):!eI(s,c))&&(!n.linewise||c.line!=s.line)){var l=eN(s,r),u=n.forward?eB(s,c,r):eB(r,c,s);(l||u)&&(r=c)}}}}return n.linewise&&(r=new S(r.line,e1(e.getLine(r.line)))),r},moveByCharacters:function(e,t,n){var i=t,r=n.repeat,o=n.forward?i.ch+r:i.ch-r;return new S(i.line,o)},moveByLines:function(e,t,n,i){var r=t,o=r.ch;switch(i.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:o=i.lastHPos;break;default:i.lastHPos=o}var s=n.repeat+(n.repeatOffset||0),a=n.forward?r.line+s:r.line-s,c=e.firstLine(),l=e.lastLine();if(a<c&&r.line==c)return this.moveToStartOfLine(e,t,n,i);if(a>l&&r.line==l)return tt(e,t,n,i,!0);var u=e.ace.session.getFoldLine(a);return u&&(n.forward?a>u.start.row&&(a=u.end.row+1):a=u.start.row),n.toFirstChar&&(i.lastHPos=o=e1(e.getLine(a))),i.lastHSPos=e.charCoords(new S(a,o),"div").left,new S(a,o)},moveByDisplayLines:function(e,t,n,i){var r=t;switch(i.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:i.lastHSPos=e.charCoords(r,"div").left}var o=n.repeat,s=e.findPosV(r,n.forward?o:-o,"line",i.lastHSPos);if(s.hitSide)if(n.forward)var a={top:e.charCoords(s,"div").top+8,left:i.lastHSPos},s=e.coordsChar(a,"div");else{var c=e.charCoords(new S(e.firstLine(),0),"div");c.left=i.lastHSPos,s=e.coordsChar(c,"div")}return i.lastHPos=s.ch,s},moveByPage:function(e,t,n){var i=t,r=n.repeat;return e.findPosV(i,n.forward?r:-r,"page")},moveByParagraph:function(e,t,n){var i=n.forward?1:-1;return ts(e,t,n.repeat,i)},moveBySentence:function(e,t,n){var i=n.forward?1:-1;return tc(e,t,n.repeat,i)},moveByScroll:function(e,t,n,i){var r=e.getScrollInfo(),o=null,s=n.repeat;s||(s=r.clientHeight/(2*e.defaultTextHeight()));var a=e.charCoords(t,"local");if(n.repeat=s,!(o=eb.moveByDisplayLines(e,t,n,i)))return null;var c=e.charCoords(o,"local");return e.scrollTo(null,r.top+c.top-a.top),o},moveByWords:function(e,t,n){return te(e,t,n.repeat,!!n.forward,!!n.wordEnd,!!n.bigWord)},moveTillCharacter:function(e,t,n){var i=tn(e,n.repeat,n.forward,n.selectedCharacter,t),r=n.forward?-1:1;return(e3(r,n),i)?(i.ch+=r,i):null},moveToCharacter:function(e,t,n){var i=n.repeat;return e3(0,n),tn(e,i,n.forward,n.selectedCharacter,t)||t},moveToSymbol:function(e,t,n){return e8(e,n.repeat,n.forward,n.selectedCharacter)||t},moveToColumn:function(e,t,n,i){var r=n.repeat;return i.lastHPos=r-1,i.lastHSPos=e.charCoords(t,"div").left,ti(e,r)},moveToEol:function(e,t,n,i){return tt(e,t,n,i,!1)},moveToFirstNonWhiteSpaceCharacter:function(e,t){var n=t;return new S(n.line,e1(e.getLine(n.line)))},moveToMatchedSymbol:function(e,t){for(var n,i=t,r=i.line,o=i.ch,s=e.getLine(r);o<s.length;o++)if((n=s.charAt(o))&&j(n)){var a=e.getTokenTypeAt(new S(r,o+1));if("string"!==a&&"comment"!==a)break}if(!(o<s.length))return i;var c=/[<>]/.test(s[o])?/[(){}[\]<>]/:/[(){}[\]]/;return e.findMatchingBracket(new S(r,o+1),{bracketRegex:c}).to},moveToStartOfLine:function(e,t){return new S(t.line,0)},moveToLineOrEdgeOfDocument:function(e,t,n){var i=n.forward?e.lastLine():e.firstLine();return n.repeatIsExplicit&&(i=n.repeat-e.getOption("firstLineNumber")),new S(i,e1(e.getLine(i)))},moveToStartOfDisplayLine:function(e){return e.execCommand("goLineLeft"),e.getCursor()},moveToEndOfDisplayLine:function(e){e.execCommand("goLineRight");var t=e.getCursor();return"before"==t.sticky&&t.ch--,t},textObjectManipulation:function(e,t,n,i){var r,o,s={"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"},a={"'":!0,'"':!0,"`":!0},c=n.selectedCharacter;"b"==c?c="(":"B"==c&&(c="{");var l=!n.textObjectInner;if(s[c]){if(o=!0,!(r=tl(e,t,c,l))){var u=e.getSearchCursor(RegExp("\\"+c,"g"),t);u.find()&&(r=tl(e,u.from(),c,l))}}else if(a[c])o=!0,r=tu(e,t,c,l);else if("W"===c||"w"===c)for(var h=n.repeat||1;h-- >0;){var p=e2(e,{inclusive:l,innerWord:!l,bigWord:"W"===c,noSymbol:"W"===c,multiline:!0},r&&r.end);p&&(r||(r=p),r.end=p.end)}else if("p"===c)if(r=ts(e,t,n.repeat,0,l),n.linewise=!0,i.visualMode)i.visualLine||(i.visualLine=!0);else{var d=i.inputState.operatorArgs;d&&(d.linewise=!0),r.end.line--}else if("t"===c)r=e5(e,t,l);else if("s"===c){var f=e.getLine(t.line);t.ch>0&&W(f[t.ch])&&(t.ch-=1);var g=ta(e,t,n.repeat,1,l),m=ta(e,t,n.repeat,-1,l);z(e.getLine(m.line)[m.ch])&&z(e.getLine(g.line)[g.ch-1])&&(m={line:m.line,ch:m.ch+1}),r={start:m,end:g}}return r?e.state.vim.visualMode?eG(e,r.start,r.end,o):[r.start,r.end]:null},repeatLastCharacterSearch:function(e,t,n){var i=r.lastCharacterSearch,o=n.repeat,s=n.forward===i.forward,a=!!i.increment*(s?-1:1);e.moveH(-a,"char"),n.inclusive=!!s;var c=tn(e,o,s,i.selectedCharacter);return c?(c.ch+=a,c):(e.moveH(a,"char"),t)}};function e_(e,t){eb[e]=t}function ew(e,t){for(var n=[],i=0;i<t;i++)n.push(e);return n}var eS={change:function(e,t,n){var i,o,s=e.state.vim,a=n[0].anchor,c=n[0].head;if(s.visualMode)if(t.fullLine)c.ch=Number.MAX_VALUE,c.line--,e.setSelection(a,c),o=e.getSelection(),e.replaceSelection(""),i=a;else{o=e.getSelection();var l=ew("",n.length);e.replaceSelections(l),i=eD(n[0].head,n[0].anchor)}else{o=e.getRange(a,c);var u=s.lastEditInputState||{};if("moveByWords"==u.motion&&!z(o)){var h=/\s+$/.exec(o);h&&u.motionArgs&&u.motionArgs.forward&&(c=eO(c,0,-h[0].length),o=o.slice(0,-h[0].length))}t.linewise&&(a=new S(a.line,e1(e.getLine(a.line))),c.line>a.line&&(c=new S(c.line-1,Number.MAX_VALUE))),e.replaceRange("",a,c),i=a}r.registerController.pushText(t.registerName,"change",o,t.linewise,n.length>1),eC.enterInsertMode(e,{head:i},e.state.vim)},delete:function(e,t,n){var i,o,s=e.state.vim;if(s.visualBlock){o=e.getSelection();var a=ew("",n.length);e.replaceSelections(a),i=eD(n[0].head,n[0].anchor)}else{var c=n[0].anchor,l=n[0].head;t.linewise&&l.line!=e.firstLine()&&c.line==e.lastLine()&&c.line==l.line-1&&(c.line==e.firstLine()?c.ch=0:c=new S(c.line-1,ej(e,c.line-1))),o=e.getRange(c,l),e.replaceRange("",c,l),i=c,t.linewise&&(i=eb.moveToFirstNonWhiteSpaceCharacter(e,c))}return r.registerController.pushText(t.registerName,"delete",o,t.linewise,s.visualBlock),eE(e,i)},indent:function(e,t,n){var i=e.state.vim,r=i.visualMode?t.repeat:1;if(i.visualBlock){for(var o,s=e.getOption("tabSize"),a=e.getOption("indentWithTabs")?"	":" ".repeat(s),c=n.length-1;c>=0;c--)if(o=eD(n[c].anchor,n[c].head),t.indentRight)e.replaceRange(a.repeat(r),o,o);else{for(var l=e.getLine(o.line),u=0,h=0;h<r;h++){var p=l[o.ch+u];if("	"==p)u++;else if(" "==p){u++;for(var d=1;d<a.length&&" "===(p=l[o.ch+u]);d++)u++}else break}e.replaceRange("",o,eO(o,0,u))}return o}if(e.indentMore)for(var h=0;h<r;h++)t.indentRight?e.indentMore():e.indentLess();else{var f=n[0].anchor.line,g=i.visualBlock?n[n.length-1].anchor.line:n[0].head.line;t.linewise&&g--;for(var c=f;c<=g;c++)for(var h=0;h<r;h++)e.indentLine(c,t.indentRight)}return eb.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},indentAuto:function(e,t,n){return e.execCommand("indentAuto"),eb.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},hardWrap:function(e,t,n,i,r){if(e.hardWrap){var o=n[0].anchor.line,s=n[0].head.line;t.linewise&&s--;var a=e.hardWrap({from:o,to:s});return a>o&&t.linewise&&a--,t.keepCursor?i:new S(a,0)}},changeCase:function(e,t,n,i,r){for(var o=e.getSelections(),s=[],a=t.toLower,c=0;c<o.length;c++){var l=o[c],u="";if(!0===a)u=l.toLowerCase();else if(!1===a)u=l.toUpperCase();else for(var h=0;h<l.length;h++){var p=l.charAt(h);u+=F(p)?p.toLowerCase():p.toUpperCase()}s.push(u)}return(e.replaceSelections(s),t.shouldMoveCursor)?r:!e.state.vim.visualMode&&t.linewise&&n[0].anchor.line+1==n[0].head.line?eb.moveToFirstNonWhiteSpaceCharacter(e,i):t.linewise?i:eD(n[0].anchor,n[0].head)},yank:function(e,t,n,i){var o=e.state.vim,s=e.getSelection(),a=o.visualMode?eD(o.sel.anchor,o.sel.head,n[0].head,n[0].anchor):i;return r.registerController.pushText(t.registerName,"yank",s,t.linewise,o.visualBlock),a}};function ex(e,t){eS[e]=t}var eC={jumpListWalk:function(e,t,n){if(!n.visualMode){var i=t.repeat,o=t.forward,s=r.jumpList,a=s.move(e,o?i:-i),c=a?a.find():void 0;c=c||e.getCursor(),e.setCursor(c),e.ace.curOp.command.scrollIntoView="center-animate"}},scroll:function(e,t,n){if(!n.visualMode){var i=t.repeat||1,r=e.defaultTextHeight(),o=e.getScrollInfo().top,s=r*i,a=t.forward?o+s:o-s,c=eP(e.getCursor()),l=e.charCoords(c,"local");if(t.forward)a>l.top?(c.line+=(a-l.top)/r,c.line=Math.ceil(c.line),e.setCursor(c),l=e.charCoords(c,"local"),e.scrollTo(null,l.top)):e.scrollTo(null,a);else{var u=a+e.getScrollInfo().clientHeight;u<l.bottom?(c.line-=(l.bottom-u)/r,c.line=Math.floor(c.line),e.setCursor(c),l=e.charCoords(c,"local"),e.scrollTo(null,l.bottom-e.getScrollInfo().clientHeight)):e.scrollTo(null,a)}}},scrollToCursor:function(e,t){var n=e.getCursor().line,i=e.charCoords(new S(n,0),"local"),r=e.getScrollInfo().clientHeight,o=i.top;switch(t.position){case"center":o=i.bottom-r/2;break;case"bottom":var s=new S(n,e.getLine(n).length-1),a=e.charCoords(s,"local").bottom-o;o=o-r+a}e.scrollTo(null,o)},replayMacro:function(e,t,n){var i=t.selectedCharacter,o=t.repeat,s=r.macroModeState;for("@"==i?i=s.latestRegister:s.latestRegister=i;o--;)tK(e,n,s,i)},enterMacroRecordMode:function(e,t){var n=r.macroModeState,i=t.selectedCharacter;r.registerController.isValidRegister(i)&&n.enterMacroRecordMode(e,i)},toggleOverwrite:function(e){e.state.overwrite?(e.toggleOverwrite(!1),e.setOption("keyMap","vim-insert"),b.signal(e,"vim-mode-change",{mode:"insert"})):(e.toggleOverwrite(!0),e.setOption("keyMap","vim-replace"),b.signal(e,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(e,t,n){if(!e.getOption("readOnly")){n.insertMode=!0,n.insertModeRepeat=t&&t.repeat||1;var i=t?t.insertAt:null,o=n.sel,s=t.head||e.getCursor("head"),a=e.listSelections().length;if("eol"==i)s=new S(s.line,ej(e,s.line));else if("bol"==i)s=new S(s.line,0);else if("charAfter"==i){var c=x(e,s,eO(s,0,1));s=c.end}else if("firstNonBlank"==i){var c=x(e,s,eb.moveToFirstNonWhiteSpaceCharacter(e,s));s=c.end}else if("startOfSelectedArea"==i){if(!n.visualMode)return;n.visualBlock?(s=new S(Math.min(o.head.line,o.anchor.line),Math.min(o.head.ch,o.anchor.ch)),a=Math.abs(o.head.line-o.anchor.line)+1):s=o.head.line<o.anchor.line?o.head:new S(o.anchor.line,0)}else if("endOfSelectedArea"==i){if(!n.visualMode)return;n.visualBlock?(s=new S(Math.min(o.head.line,o.anchor.line),Math.max(o.head.ch,o.anchor.ch)+1),a=Math.abs(o.head.line-o.anchor.line)+1):s=o.head.line>=o.anchor.line?eO(o.head,0,1):new S(o.anchor.line,0)}else if("inplace"==i){if(n.visualMode)return}else"lastEdit"==i&&(s=tB(e)||s);e.setOption("disableInput",!1),t&&t.replace?(e.toggleOverwrite(!0),e.setOption("keyMap","vim-replace"),b.signal(e,"vim-mode-change",{mode:"replace"})):(e.toggleOverwrite(!1),e.setOption("keyMap","vim-insert"),b.signal(e,"vim-mode-change",{mode:"insert"})),r.macroModeState.isPlaying||(e.on("change",tY),n.insertEnd&&n.insertEnd.clear(),n.insertEnd=e.setBookmark(s,{insertLeft:!0}),b.on(e.getInputField(),"keydown",t0)),n.visualMode&&eX(e),eV(e,s,a)}},toggleVisualMode:function(e,t,n){var i,r=t.repeat,o=e.getCursor();if(n.visualMode)n.visualLine^t.linewise||n.visualBlock^t.blockwise?(n.visualLine=!!t.linewise,n.visualBlock=!!t.blockwise,b.signal(e,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":n.visualBlock?"blockwise":""}),eJ(e)):eX(e);else{n.visualMode=!0,n.visualLine=!!t.linewise,n.visualBlock=!!t.blockwise,i=eE(e,new S(o.line,o.ch+r-1));var s=x(e,o,i);n.sel={anchor:s.start,head:s.end},b.signal(e,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":n.visualBlock?"blockwise":""}),eJ(e),tr(e,n,"<",eD(o,i)),tr(e,n,">",e$(o,i))}},reselectLastSelection:function(e,t,n){var i=n.lastSelection;if(n.visualMode&&eq(e,n),i){var r=i.anchorMark.find(),o=i.headMark.find();if(!r||!o)return;n.sel={anchor:r,head:o},n.visualMode=!0,n.visualLine=i.visualLine,n.visualBlock=i.visualBlock,eJ(e),tr(e,n,"<",eD(r,o)),tr(e,n,">",e$(r,o)),b.signal(e,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":n.visualBlock?"blockwise":""})}},joinLines:function(e,t,n){if(n.visualMode){if(i=e.getCursor("anchor"),eI(r=e.getCursor("head"),i)){var i,r,o=r;r=i,i=o}r.ch=ej(e,r.line)-1}else{var s=Math.max(t.repeat,2);i=e.getCursor(),r=eE(e,new S(i.line+s-1,1/0))}for(var a=0,c=i.line;c<r.line;c++){a=ej(e,i.line);var l="",u=0;if(!t.keepSpaces){var h=e.getLine(i.line+1);-1==(u=h.search(/\S/))?u=h.length:l=" "}e.replaceRange(l,new S(i.line,a),new S(i.line+1,u))}var p=eE(e,new S(i.line,a));n.visualMode&&eX(e,!1),e.setCursor(p)},newLineAndEnterInsertMode:function(e,t,n){n.insertMode=!0;var i=eP(e.getCursor());i.line!==e.firstLine()||t.after?(i.line=t.after?i.line:i.line-1,i.ch=ej(e,i.line),e.setCursor(i),(b.commands.newlineAndIndentContinueComment||b.commands.newlineAndIndent)(e)):(e.replaceRange("\n",new S(e.firstLine(),0)),e.setCursor(e.firstLine(),0)),this.enterInsertMode(e,{repeat:t.repeat},n)},paste:function(e,t,n){var i=this,o=r.registerController.getRegister(t.registerName),s=function(){var r=o.toString();i.continuePaste(e,t,n,r,o)};"+"===t.registerName&&"undefined"!=typeof navigator&&void 0!==navigator.clipboard&&"function"==typeof navigator.clipboard.readText?navigator.clipboard.readText().then(function(r){i.continuePaste(e,t,n,r,o)},function(){s()}):s()},continuePaste:function(e,t,n,i,o){var s=eP(e.getCursor());if(i){if(t.matchIndent){var a=e.getOption("tabSize"),c=function(e){return(e.split("	").length-1)*a+ +(e.split(" ").length-1)},l=c(e.getLine(e.getCursor().line).match(/^\s*/)[0]),u=i.replace(/\n$/,""),h=i!==u,p=c(i.match(/^\s*/)[0]),i=u.replace(/^\s*/gm,function(t){var n=l+(c(t)-p);return n<0?"":e.getOption("indentWithTabs")?Array(Math.floor(n/a)+1).join("	"):Array(n+1).join(" ")});i+=h?"\n":""}if(t.repeat>1)var i=Array(t.repeat+1).join(i);var d=o.linewise,f=o.blockwise;if(f){i=i.split("\n"),d&&i.pop();for(var g=0;g<i.length;g++)i[g]=""==i[g]?" ":i[g];s.ch+=+!!t.after,s.ch=Math.min(ej(e,s.line),s.ch)}else d?n.visualMode?i=n.visualLine?i.slice(0,-1):"\n"+i.slice(0,i.length-1)+"\n":t.after?(i="\n"+i.slice(0,i.length-1),s.ch=ej(e,s.line)):s.ch=0:s.ch+=+!!t.after;if(n.visualMode){n.lastPastedText=i;var m,v,y=eK(e,n),b=y[0],_=y[1],w=e.getSelection(),x=Array(e.listSelections().length).join("1").split("1");n.lastSelection&&(v=n.lastSelection.headMark.find()),r.registerController.unnamedRegister.setText(w),f?(e.replaceSelections(x),_=new S(b.line+i.length-1,b.ch),e.setCursor(b),eW(e,_),e.replaceSelections(i),m=b):n.visualBlock?(e.replaceSelections(x),e.setCursor(b),e.replaceRange(i,b,b),m=b):(e.replaceRange(i,b,_),m=e.posFromIndex(e.indexFromPos(b)+i.length-1)),v&&(n.lastSelection.headMark=e.setBookmark(v)),d&&(m.ch=0)}else if(f){e.setCursor(s);for(var g=0;g<i.length;g++){var C=s.line+g;C>e.lastLine()&&e.replaceRange("\n",new S(C,0)),ej(e,C)<s.ch&&ez(e,C,s.ch)}e.setCursor(s),eW(e,new S(s.line+i.length-1,s.ch)),e.replaceSelections(i),m=s}else if(e.replaceRange(i,s),d){var C=t.after?s.line+1:s.line;m=new S(C,e1(e.getLine(C)))}else m=eP(s),/\n/.test(i)||(m.ch+=i.length-!!t.after);n.visualMode&&eX(e,!1),e.setCursor(m)}},undo:function(e,t){e.operation(function(){eL(e,b.commands.undo,t.repeat)(),e.setCursor(eE(e,e.getCursor("start")))})},redo:function(e,t){eL(e,b.commands.redo,t.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},insertRegister:function(e,t,n){var i=t.selectedCharacter,o=r.registerController.getRegister(i),s=o&&o.toString();s&&e.replaceSelection(s)},oneNormalCommand:function(e,t,n){tW(e,!0),n.insertModeReturn=!0,b.on(e,"vim-command-done",function t(){n.visualMode||(n.insertModeReturn&&(n.insertModeReturn=!1,n.insertMode||eC.enterInsertMode(e,{},n)),b.off(e,"vim-command-done",t))})},setMark:function(e,t,n){tr(e,n,t.selectedCharacter,e.getCursor())},replace:function(e,t,n){var i,r,o=t.selectedCharacter,s=e.getCursor(),a=e.listSelections();if(n.visualMode)s=e.getCursor("start"),r=e.getCursor("end");else{var c=e.getLine(s.line);(i=s.ch+t.repeat)>c.length&&(i=c.length),r=new S(s.line,i)}var l=x(e,s,r);if(s=l.start,r=l.end,"\n"==o)n.visualMode||e.replaceRange("",s,r),(b.commands.newlineAndIndentContinueComment||b.commands.newlineAndIndent)(e);else{var u=e.getRange(s,r);if(u=(u=u.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o)).replace(/[^\n]/g,o),n.visualBlock){var h=Array(e.getOption("tabSize")+1).join(" ");u=(u=(u=e.getSelection()).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o)).replace(/\t/g,h).replace(/[^\n]/g,o).split("\n"),e.replaceSelections(u)}else e.replaceRange(u,s,r);n.visualMode?(s=eI(a[0].anchor,a[0].head)?a[0].anchor:a[0].head,e.setCursor(s),eX(e,!1)):e.setCursor(eO(r,0,-1))}},incrementNumberToken:function(e,t){for(var n,i,r,o,s=e.getCursor(),a=e.getLine(s.line),c=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi;null!==(n=c.exec(a))&&(r=(i=n.index)+n[0].length,!(s.ch<r)););if(t.backtrack||!(r<=s.ch)){if(!n)return;var l=n[2]||n[4],u=n[3]||n[5],h=t.increase?1:-1,p={"0b":2,0:8,"":10,"0x":16}[l.toLowerCase()];o=(parseInt(n[1]+u,p)+h*t.repeat).toString(p);var d=l?Array(u.length-o.length+1+n[1].length).join("0"):"";o="-"===o.charAt(0)?"-"+l+d+o.substr(1):l+d+o;var f=new S(s.line,i),g=new S(s.line,r);e.replaceRange(o,f,g),e.setCursor(new S(s.line,i+o.length-1))}},repeatLastEdit:function(e,t,n){if(n.lastEditInputState){var i=t.repeat;i&&t.repeatIsExplicit?n.lastEditInputState.repeatOverride=i:i=n.lastEditInputState.repeatOverride||i,t1(e,n,i,!1)}},indent:function(e,t){e.indentLine(e.getCursor().line,t.indentRight)},exitInsertMode:tW};function ek(e,t){eC[e]=t}function eE(e,t,n){var i=e.state.vim,r=i.insertMode||i.visualMode,o=Math.min(Math.max(e.firstLine(),t.line),e.lastLine()),s=e.getLine(o),a=s.length-1+Number(!!r),c=Math.min(Math.max(0,t.ch),a),l=s.charCodeAt(c);if(56320<=l&&l<=57343){var u=1;n&&n.line==o&&n.ch>c&&(u=-1),(c+=u)>a&&(c-=2)}return new S(o,c)}function eR(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function eO(e,t,n){return"object"==typeof t&&(n=t.ch,t=t.line),new S(e.line+t,e.ch+n)}function eM(e,t,n,i){i.operator&&(n="operatorPending");for(var r,o=[],s=[],a=en?t.length-k:0,c=a;c<t.length;c++){var l=t[c];("insert"!=n||"insert"==l.context)&&(!l.context||l.context==n)&&(!i.operator||"action"!=l.type)&&(r=eT(e,l.keys))&&("partial"==r&&o.push(l),"full"==r&&s.push(l))}return{partial:o.length&&o,full:s.length&&s}}function eT(e,t){var n="<character>"==t.slice(-11),i="<register>"==t.slice(-10);if(!n&&!i)return e==t?"full":0==t.indexOf(e)&&"partial";var r=t.length-(n?11:10),o=e.slice(0,r),s=t.slice(0,r);return o==s&&e.length>r?"full":0==s.indexOf(o)&&"partial"}function eA(e){var t=/^.*(<[^>]+>)$/.exec(e),n=t?t[1]:e.slice(-1);if(n.length>1)switch(n){case"<CR>":n="\n";break;case"<Space>":n=" ";break;default:n=""}return n}function eL(e,t,n){return function(){for(var i=0;i<n;i++)t(e)}}function eP(e){return new S(e.line,e.ch)}function eN(e,t){return e.ch==t.ch&&e.line==t.line}function eI(e,t){return!!(e.line<t.line)||e.line==t.line&&!!(e.ch<t.ch)}function eD(e,t){return arguments.length>2&&(t=eD.apply(void 0,Array.prototype.slice.call(arguments,1))),eI(e,t)?e:t}function e$(e,t){return arguments.length>2&&(t=e$.apply(void 0,Array.prototype.slice.call(arguments,1))),eI(e,t)?t:e}function eB(e,t,n){var i=eI(e,t),r=eI(t,n);return i&&r}function ej(e,t){return e.getLine(t).length}function eH(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function eF(e){return e.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function ez(e,t,n){var i=ej(e,t),r=Array(n-i+1).join(" ");e.setCursor(new S(t,i)),e.replaceRange(r,e.getCursor())}function eW(e,t){var n=[],i=e.listSelections(),r=eP(e.clipPos(t)),o=!eN(t,r),s=eU(i,e.getCursor("head")),a=eN(i[s].head,i[s].anchor),c=i.length-1,l=c-s>s?c:0,u=i[l].anchor,h=Math.min(u.line,r.line),p=Math.max(u.line,r.line),d=u.ch,f=r.ch,g=i[l].head.ch-d,m=f-d;g>0&&m<=0?(d++,!o&&f--):g<0&&m>=0?(d--,!a&&f++):g<0&&-1==m&&(d--,f++);for(var v=h;v<=p;v++){var y={anchor:new S(v,d),head:new S(v,f)};n.push(y)}return e.setSelections(n),t.ch=f,u.ch=d,u}function eV(e,t,n){for(var i=[],r=0;r<n;r++){var o=eO(t,r,0);i.push({anchor:o,head:o})}e.setSelections(i,0)}function eU(e,t,n){for(var i=0;i<e.length;i++){var r="head"!=n&&eN(e[i].anchor,t),o="anchor"!=n&&eN(e[i].head,t);if(r||o)return i}return -1}function eK(e,t){var n=t.lastSelection,i=function(){var t=e.listSelections(),n=t[0],i=t[t.length-1];return[eI(n.anchor,n.head)?n.anchor:n.head,eI(i.anchor,i.head)?i.head:i.anchor]},r=function(){var t=e.getCursor(),i=e.getCursor(),r=n.visualBlock;if(r){var o=r.width,s=r.height;i=new S(t.line+s,t.ch+o);for(var a=[],c=t.line;c<i.line;c++){var l={anchor:new S(c,t.ch),head:new S(c,i.ch)};a.push(l)}e.setSelections(a)}else{var u=n.anchorMark.find(),h=n.headMark.find(),p=h.line-u.line,d=h.ch-u.ch;i={line:i.line+p,ch:p?i.ch:d+i.ch},n.visualLine&&(t=new S(t.line,0),i=new S(i.line,ej(e,i.line))),e.setSelection(t,i)}return[t,i]};return t.visualMode?i():r()}function eq(e,t){var n=t.sel.anchor,i=t.sel.head;t.lastPastedText&&(i=e.posFromIndex(e.indexFromPos(n)+t.lastPastedText.length),t.lastPastedText=null),t.lastSelection={anchorMark:e.setBookmark(n),headMark:e.setBookmark(i),anchor:eP(n),head:eP(i),visualMode:t.visualMode,visualLine:t.visualLine,visualBlock:t.visualBlock}}function eG(e,t,n,i){var r,o=e.state.vim.sel,s=i?t:o.head,a=i?t:o.anchor;return eI(n,t)&&(r=n,n=t,t=r),eI(s,a)?(s=eD(t,s),a=e$(a,n)):(a=eD(t,a),-1==(s=eO(s=e$(s,n),0,-1)).ch&&s.line!=e.firstLine()&&(s=new S(s.line-1,ej(e,s.line-1)))),[a,s]}function eJ(e,t,n){var i=e.state.vim;t=t||i.sel;var n=n||i.visualLine?"line":i.visualBlock?"block":"char",r=eY(e,t,n);e.setSelections(r.ranges,r.primary)}function eY(e,t,n,i){var r=eP(t.head),o=eP(t.anchor);if("char"==n){var s=+!(i||eI(t.head,t.anchor)),a=+!!eI(t.head,t.anchor);return r=eO(t.head,0,s),{ranges:[{anchor:o=eO(t.anchor,0,a),head:r}],primary:0}}if("line"==n){if(eI(t.head,t.anchor))r.ch=0,o.ch=ej(e,o.line);else{o.ch=0;var c=e.lastLine();r.line>c&&(r.line=c),r.ch=ej(e,r.line)}return{ranges:[{anchor:o,head:r}],primary:0}}if("block"==n){var l=Math.min(o.line,r.line),u=o.ch,h=Math.max(o.line,r.line),p=r.ch;u<p?p+=1:u+=1;for(var d=h-l+1,f=r.line==l?0:d-1,g=[],m=0;m<d;m++)g.push({anchor:new S(l+m,u),head:new S(l+m,p)});return{ranges:g,primary:f}}}function eQ(e){var t=e.getCursor("head");return 1==e.getSelection().length&&(t=eD(t,e.getCursor("anchor"))),t}function eX(e,t){var n=e.state.vim;!1!==t&&e.setCursor(eE(e,n.sel.head)),eq(e,n),n.visualMode=!1,n.visualLine=!1,n.visualBlock=!1,n.insertMode||b.signal(e,"vim-mode-change",{mode:"normal"})}function eZ(e,t,n){var i=e.getRange(t,n);if(/\n\s*$/.test(i)){var r,o=i.split("\n");o.pop();for(var r=o.pop();o.length>0&&r&&z(r);r=o.pop())n.line--,n.ch=0;r?(n.line--,n.ch=ej(e,n.line)):n.ch=0}}function e0(e,t,n){t.ch=0,n.ch=0,n.line++}function e1(e){if(!e)return 0;var t=e.search(/\S/);return -1==t?e.length:t}function e2(e,t,n){var i,r=t.inclusive,o=t.innerWord,s=t.bigWord,a=t.noSymbol,c=t.multiline,l=n||eQ(e),u=e.getLine(l.line),h=u,p=l.line,d=p,f=l.ch,g=a?L[0]:P[0];if(o&&/\s/.test(u.charAt(f)))g=function(e){return/\s/.test(e)};else{for(;!g(u.charAt(f));)if(++f>=u.length){if(!c)return null;f--,i=e7(e,l,!0,s,!0);break}s?g=P[0]:(g=L[0])(u.charAt(f))||(g=L[1])}for(var m=f,v=f;g(u.charAt(v))&&v>=0;)v--;if(v++,i)m=i.to,d=i.line,!(h=e.getLine(d))&&0==m&&m++;else for(;g(u.charAt(m))&&m<u.length;)m++;if(r){var y=m,b=l.ch<=v&&/\s/.test(u.charAt(l.ch));if(!b)for(;/\s/.test(h.charAt(m))&&m<h.length;)m++;if(y==m||b){for(var _=v;/\s/.test(u.charAt(v-1))&&v>0;)v--;v||b||(v=_)}}return{start:new S(p,v),end:new S(d,m)}}function e5(e,t,n){var i=t;if(!b.findMatchingTag||!b.findEnclosingTag)return{start:i,end:i};var r=b.findMatchingTag(e,t)||b.findEnclosingTag(e,t);return r&&r.open&&r.close?n?{start:r.open.from,end:r.close.to}:{start:r.open.to,end:r.close.from}:{start:i,end:i}}function e6(e,t,n){eN(t,n)||r.jumpList.add(e,t,n)}function e3(e,t){r.lastCharacterSearch.increment=e,r.lastCharacterSearch.forward=t.forward,r.lastCharacterSearch.selectedCharacter=t.selectedCharacter}var e4={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},e9={bracket:{isComplete:function(e){if(e.nextCh===e.symb){if(e.depth++,e.depth>=1)return!0}else e.nextCh===e.reverseSymb&&e.depth--;return!1}},section:{init:function(e){e.curMoveThrough=!0,e.symb=(e.forward?"]":"[")===e.symb?"{":"}"},isComplete:function(e){return 0===e.index&&e.nextCh===e.symb}},comment:{isComplete:function(e){var t="*"===e.lastCh&&"/"===e.nextCh;return e.lastCh=e.nextCh,t}},method:{init:function(e){e.symb="m"===e.symb?"{":"}",e.reverseSymb="{"===e.symb?"}":"{"},isComplete:function(e){return e.nextCh===e.symb}},preprocess:{init:function(e){e.index=0},isComplete:function(e){if("#"===e.nextCh){var t=e.lineText.match(/^#(\w+)/)[1];if("endif"===t){if(e.forward&&0===e.depth)return!0;e.depth++}else if("if"===t){if(!e.forward&&0===e.depth)return!0;e.depth--}if("else"===t&&0===e.depth)return!0}return!1}}};function e8(e,t,n,i){var r=eP(e.getCursor()),o=n?1:-1,s=n?e.lineCount():-1,a=r.ch,c=r.line,l=e.getLine(c),u={lineText:l,nextCh:l.charAt(a),lastCh:null,index:a,symb:i,reverseSymb:(n?{")":"(","}":"{"}:{"(":")","{":"}"})[i],forward:n,depth:0,curMoveThrough:!1},h=e4[i];if(!h)return r;var p=e9[h].init,d=e9[h].isComplete;for(p&&p(u);c!==s&&t;){if(u.index+=o,u.nextCh=u.lineText.charAt(u.index),!u.nextCh){if(c+=o,u.lineText=e.getLine(c)||"",o>0)u.index=0;else{var f=u.lineText.length;u.index=f>0?f-1:0}u.nextCh=u.lineText.charAt(u.index)}d(u)&&(r.line=c,r.ch=u.index,t--)}return u.nextCh||u.curMoveThrough?new S(c,u.index):r}function e7(e,t,n,i,r){var o=t.line,s=t.ch,a=e.getLine(o),c=n?1:-1,l=i?P:L;if(r&&""==a){if(o+=c,a=e.getLine(o),!$(e,o))return null;s=n?0:a.length}for(;;){if(r&&""==a)return{from:0,to:0,line:o};for(var u=c>0?a.length:-1,h=u,p=u;s!=u;){for(var d=!1,f=0;f<l.length&&!d;++f)if(l[f](a.charAt(s))){for(h=s;s!=u&&l[f](a.charAt(s));)s+=c;if(d=h!=(p=s),h==t.ch&&o==t.line&&p==h+c)continue;return{from:Math.min(h,p+1),to:Math.max(h,p),line:o}}d||(s+=c)}if(!$(e,o+=c))return null;a=e.getLine(o),s=c>0?0:a.length}}function te(e,t,n,i,r,o){var s=eP(t),a=[];(i&&!r||!i&&r)&&n++;for(var c=!(i&&r),l=0;l<n;l++){var u=e7(e,t,i,o,c);if(!u){var h=ej(e,e.lastLine());a.push(i?{line:e.lastLine(),from:h,to:h}:{line:0,from:0,to:0});break}a.push(u),t=new S(u.line,i?u.to-1:u.from)}var p=a.length!=n,d=a[0],f=a.pop();return i&&!r?(p||d.from==s.ch&&d.line==s.line||(f=a.pop()),new S(f.line,f.from)):i&&r?new S(f.line,f.to-1):!i&&r?(p||d.to==s.ch&&d.line==s.line||(f=a.pop()),new S(f.line,f.to)):new S(f.line,f.from)}function tt(e,t,n,i,r){var o=new S(t.line+n.repeat-1,1/0),s=e.clipPos(o);return s.ch--,r||(i.lastHPos=1/0,i.lastHSPos=e.charCoords(s,"div").left),o}function tn(e,t,n,i,r){for(var o,s=r||e.getCursor(),a=s.ch,c=0;c<t;c++){if(-1==(o=to(a,e.getLine(s.line),i,n,!0)))return null;a=o}return new S(e.getCursor().line,o)}function ti(e,t){var n=e.getCursor().line;return eE(e,new S(n,t-1))}function tr(e,t,n,i){(V(n,N)||D.test(n))&&(t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(i))}function to(e,t,n,i,r){var o;return i?-1==(o=t.indexOf(n,e+1))||r||(o-=1):-1==(o=t.lastIndexOf(n,e-1))||r||(o+=1),o}function ts(e,t,n,i,r){var o,s=t.line,a=e.firstLine(),c=e.lastLine(),l=s;function u(t){return!/\S/.test(e.getLine(t))}function h(e,t,n){return n?u(e)!=u(e+t):!u(e)&&u(e+t)}function p(t){i=i>0?1:-1;var n=e.ace.session.getFoldLine(t);n&&t+i>n.start.row&&t+i<n.end.row&&(i=(i>0?n.end.row:n.start.row)-t)}if(i){for(;a<=l&&l<=c&&n>0;)p(l),h(l,i)&&n--,l+=i;return new S(l,0)}var d=e.state.vim;if(d.visualLine&&h(s,1,!0)){var f=d.sel.anchor;h(f.line,-1,!0)&&(!r||f.line!=s)&&(s+=1)}var g=u(s);for(l=s;l<=c&&n;l++)h(l,1,!0)&&(!r||u(l)!=g)&&n--;for(o=new S(l,0),l>c&&!g?g=!0:r=!1,l=s;l>a&&!((!r||u(l)==g||l==s)&&h(l,-1,!0));l--);return{start:new S(l,0),end:o}}function ta(e,t,n,i,r){function o(e){e.pos+e.dir<0||e.pos+e.dir>=e.line.length?e.line=null:e.pos+=e.dir}function s(e,t,n,i){var s={line:e.getLine(t),ln:t,pos:n,dir:i};if(""===s.line)return{ln:s.ln,pos:s.pos};var a=s.pos;for(o(s);null!==s.line;){if(a=s.pos,W(s.line[s.pos]))if(!r)return{ln:s.ln,pos:s.pos+1};else{for(o(s);null!==s.line;)if(z(s.line[s.pos]))a=s.pos,o(s);else break;break}o(s)}return{ln:s.ln,pos:a+1}}function a(e,t,n,i){var s=e.getLine(t),a={line:s,ln:t,pos:n,dir:i};if(""===a.line)return{ln:a.ln,pos:a.pos};var c=a.pos;for(o(a);null!==a.line;){if(z(a.line[a.pos])||W(a.line[a.pos])){if(W(a.line[a.pos]))if(!r)return{ln:a.ln,pos:c};else if(z(a.line[a.pos+1]))return{ln:a.ln,pos:a.pos+1};else return{ln:a.ln,pos:c}}else c=a.pos;o(a)}return(a.line=s,r&&z(a.line[a.pos]))?{ln:a.ln,pos:a.pos}:{ln:a.ln,pos:c}}for(var c={ln:t.line,pos:t.ch};n>0;)c=i<0?a(e,c.ln,c.pos,i):s(e,c.ln,c.pos,i),n--;return new S(c.ln,c.pos)}function tc(e,t,n,i){function r(e,t){if(t.pos+t.dir<0||t.pos+t.dir>=t.line.length){if(t.ln+=t.dir,!$(e,t.ln)){t.line=null,t.ln=null,t.pos=null;return}t.line=e.getLine(t.ln),t.pos=t.dir>0?0:t.line.length-1}else t.pos+=t.dir}function o(e,t,n,i){var o=e.getLine(t),s=""===o,a={line:o,ln:t,pos:n,dir:i},c={ln:a.ln,pos:a.pos},l=""===a.line;for(r(e,a);null!==a.line;){if(c.ln=a.ln,c.pos=a.pos,""===a.line&&!l||s&&""!==a.line&&!z(a.line[a.pos]))return{ln:a.ln,pos:a.pos};W(a.line[a.pos])&&!s&&(a.pos===a.line.length-1||z(a.line[a.pos+1]))&&(s=!0),r(e,a)}var o=e.getLine(c.ln);c.pos=0;for(var u=o.length-1;u>=0;--u)if(!z(o[u])){c.pos=u;break}return c}function s(e,t,n,i){var o=e.getLine(t),s={line:o,ln:t,pos:n,dir:i},a={ln:s.ln,pos:null},c=""===s.line;for(r(e,s);null!==s.line;){if(""!==s.line||c)if(W(s.line[s.pos])&&null!==a.pos&&(s.ln!==a.ln||s.pos+1!==a.pos))return a;else""===s.line||z(s.line[s.pos])||(c=!1,a={ln:s.ln,pos:s.pos});else if(null!==a.pos)return a;else return{ln:s.ln,pos:s.pos};r(e,s)}var o=e.getLine(a.ln);a.pos=0;for(var l=0;l<o.length;++l)if(!z(o[l])){a.pos=l;break}return a}for(var a={ln:t.line,pos:t.ch};n>0;)a=i<0?s(e,a.ln,a.pos,i):o(e,a.ln,a.pos,i),n--;return new S(a.ln,a.pos)}function tl(e,t,n,i){var r,o,s=t,a={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[n],c={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[n],l=+(e.getLine(s.line).charAt(s.ch)===c);if(r=e.scanForBracket(new S(s.line,s.ch+l),-1,void 0,{bracketRegex:a}),o=e.scanForBracket(new S(s.line,s.ch+l),1,void 0,{bracketRegex:a}),!r||!o)return null;if(r=r.pos,o=o.pos,r.line==o.line&&r.ch>o.ch||r.line>o.line){var u=r;r=o,o=u}return i?o.ch+=1:r.ch+=1,{start:r,end:o}}function tu(e,t,n,i){var r,o,s,a,c=eP(t),l=e.getLine(c.line).split(""),u=l.indexOf(n);if(c.ch<u)c.ch=u;else if(u<c.ch&&l[c.ch]==n){var h=/string/.test(e.getTokenTypeAt(eO(t,0,1))),p=/string/.test(e.getTokenTypeAt(t));!(h&&!p)&&(o=c.ch,--c.ch)}if(l[c.ch]!=n||o)for(s=c.ch;s>-1&&!r;s--)l[s]==n&&(r=s+1);else r=c.ch+1;if(r&&!o)for(s=r,a=l.length;s<a&&!o;s++)l[s]==n&&(o=s);return r&&o?(i&&(--r,++o),{start:new S(c.line,r),end:new S(c.line,o)}):{start:c,end:c}}function th(){}function tp(e){var t=e.state.vim;return t.searchState_||(t.searchState_=new th)}function td(e){return tg(e,"/")}function tf(e){return tm(e,"/")}function tg(e,t){var n=tm(e,t)||[];if(!n.length)return[];var i=[];if(0===n[0]){for(var r=0;r<n.length;r++)"number"==typeof n[r]&&i.push(e.substring(n[r]+1,n[r+1]));return i}}function tm(e,t){t||(t="/");for(var n=!1,i=[],r=0;r<e.length;r++){var o=e.charAt(r);n||o!=t||i.push(r),n=!n&&"\\"==o}return i}function tv(e){for(var t="|(){",n="}",i=!1,r=[],o=-1;o<e.length;o++){var s=e.charAt(o)||"",a=e.charAt(o+1)||"",c=a&&-1!=t.indexOf(a);i?("\\"===s&&c||r.push(s),i=!1):"\\"===s?(i=!0,a&&-1!=n.indexOf(a)&&(c=!0),c&&"\\"!==a||r.push(s)):(r.push(s),c&&"\\"!==a&&r.push("\\"))}return r.join("")}K("pcre",!0,"boolean"),th.prototype={getQuery:function(){return r.query},setQuery:function(e){r.query=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return r.isReversed},setReversed:function(e){r.isReversed=e},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(e){this.annotate=e}};var ty={"\\n":"\n","\\r":"\r","\\t":"	"};function tb(e){for(var t=!1,n=[],i=-1;i<e.length;i++){var r=e.charAt(i)||"",o=e.charAt(i+1)||"";ty[r+o]?(n.push(ty[r+o]),i++):t?(n.push(r),t=!1):"\\"===r?(t=!0,H(o)||"$"===o?n.push("$"):"/"!==o&&"\\"!==o&&n.push("\\")):("$"===r&&n.push("$"),n.push(r),"/"===o&&n.push("\\"))}return n.join("")}var t_={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"	","\\&":"&"};function tw(e){for(var t=new b.StringStream(e),n=[];!t.eol();){for(;t.peek()&&"\\"!=t.peek();)n.push(t.next());var i=!1;for(var r in t_)if(t.match(r,!0)){i=!0,n.push(t_[r]);break}i||n.push(t.next())}return n.join("")}function tS(e,t,n){if(r.registerController.getRegister("/").setText(e),e instanceof RegExp)return e;var i,o,s=tf(e);return(s.length?(i=e.substring(0,s[0]),o=-1!=e.substring(s[0]).indexOf("i")):i=e,i)?(G("pcre")||(i=tv(i)),n&&(t=/^[^A-Z]*$/.test(i)),new RegExp(i,t||o?"im":"m")):null}function tx(e){"string"==typeof e&&(e=document.createElement(e));for(var t,n=1;n<arguments.length;n++)if(t=arguments[n])if("object"!=typeof t&&(t=document.createTextNode(t)),t.nodeType)e.appendChild(t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&("$"===i[0]?e.style[i.slice(1)]=t[i]:e.setAttribute(i,t[i]));return e}function tC(e,t){var n=tx("div",{$color:"red",$whiteSpace:"pre",class:"cm-vim-message"},t);e.openNotification?e.openNotification(n,{bottom:!0,duration:5e3}):alert(n.innerText)}function tk(e,t){return tx("div",{$display:"flex"},tx("span",{$fontFamily:"monospace",$whiteSpace:"pre",$flex:1},e,tx("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false",$width:"100%"})),t&&tx("span",{$color:"#888"},t))}function tE(e,t){if(et.length){t.value||(t.value=""),s=t;return}var n=tk(t.prefix,t.desc);if(e.openDialog)e.openDialog(n,t.onClose,{onKeyDown:t.onKeyDown,onKeyUp:t.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:t.value});else{var i="";"string"!=typeof t.prefix&&t.prefix&&(i+=t.prefix.textContent),t.desc&&(i+=" "+t.desc),t.onClose(prompt(i,""))}}function tR(e,t){if(e instanceof RegExp&&t instanceof RegExp){for(var n=["global","multiline","ignoreCase","source"],i=0;i<n.length;i++){var r=n[i];if(e[r]!==t[r])return!1}return!0}return!1}function tO(e,t,n,i){if(t){var r=tp(e),o=tS(t,!!n,!!i);if(o)return tA(e,o),tR(o,r.getQuery())||r.setQuery(o),o}}function tM(e){if("^"==e.source.charAt(0))var t=!0;return{token:function(n){if(t&&!n.sol())return void n.skipToEnd();var i=n.match(e,!1);if(i)return 0==i[0].length?(n.next(),"searching"):n.sol()||(n.backUp(1),e.exec(n.next()+i[0]))?(n.match(e),"searching"):(n.next(),null);for(;!n.eol()&&(n.next(),!n.match(e,!1)););},query:e}}var tT=0;function tA(e,t){clearTimeout(tT),tp(e).highlightTimeout=tT,tT=setTimeout(function(){if(e.state.vim){var n=tp(e);n.highlightTimeout=null;var i=n.getOverlay();i&&t==i.query||(i&&e.removeOverlay(i),i=tM(t),e.addOverlay(i),e.showMatchesOnScrollbar&&(n.getScrollbarAnnotate()&&n.getScrollbarAnnotate().clear(),n.setScrollbarAnnotate(e.showMatchesOnScrollbar(t))),n.setOverlay(i))}},50)}function tL(e,t,n,i){return void 0===i&&(i=1),e.operation(function(){for(var r=e.getCursor(),o=e.getSearchCursor(n,r),s=0;s<i;s++){var a=o.find(t);if(0==s&&a&&eN(o.from(),r)){var c=t?o.from():o.to();(a=o.find(t))&&!a[0]&&eN(o.from(),c)&&e.getLine(c.line).length==c.ch&&(a=o.find(t))}if(!a&&!(o=e.getSearchCursor(n,t?new S(e.lastLine()):new S(e.firstLine(),0))).find(t))return}return o.from()})}function tP(e,t,n,i,r){return void 0===i&&(i=1),e.operation(function(){var o=e.getCursor(),s=e.getSearchCursor(n,o),a=s.find(!t);!r.visualMode&&a&&eN(s.from(),o)&&s.find(!t);for(var c=0;c<i;c++)if(!(a=s.find(t))&&!(s=e.getSearchCursor(n,t?new S(e.lastLine()):new S(e.firstLine(),0))).find(t))return;return[s.from(),s.to()]})}function tN(e){var t=tp(e);t.highlightTimeout&&(clearTimeout(t.highlightTimeout),t.highlightTimeout=null),e.removeOverlay(tp(e).getOverlay()),t.setOverlay(null),t.getScrollbarAnnotate()&&(t.getScrollbarAnnotate().clear(),t.setScrollbarAnnotate(null))}function tI(e,t,n){return("number"!=typeof e&&(e=e.line),t instanceof Array)?V(e,t):"number"==typeof n?e>=t&&e<=n:e==t}function tD(e){var t=e.ace.renderer;return{top:t.getFirstFullyVisibleRow(),bottom:t.getLastFullyVisibleRow()}}function t$(e,t,n){if("'"==n||"`"==n)return r.jumpList.find(e,-1)||new S(0,0);if("."==n)return tB(e);var i=t.marks[n];return i&&i.find()}function tB(e){if(e.getLastEditEnd)return e.getLastEditEnd();for(var t=e.doc.history.done,n=t.length;n--;)if(t[n].changes)return eP(t[n].changes[0].to)}var tj=function(){this.buildCommandMap_()};tj.prototype={processCommand:function(e,t,n){var i=this;e.operation(function(){e.curOp.isVimOp=!0,i._processCommand(e,t,n)})},_processCommand:function(e,t,n){var i,o,s=e.state.vim,a=r.registerController.getRegister(":"),c=a.toString(),l=new b.StringStream(t);a.setText(t);var u=n||{};u.input=t;try{this.parseInput_(e,l,u)}catch(t){throw tC(e,t.toString()),t}if(s.visualMode&&eX(e),u.commandName){if(i=this.matchCommand_(u.commandName)){if(o=i.name,i.excludeFromCommandHistory&&a.setText(c),this.parseCommandArgs_(l,u,i),"exToKey"==i.type)return void er(e,i.toKeys,i);if("exToEx"==i.type)return void this.processCommand(e,i.toInput)}}else void 0!==u.line&&(o="move");if(!o)return void tC(e,'Not an editor command ":'+t+'"');try{tH[o](e,u),i&&i.possiblyAsync||!u.callback||u.callback()}catch(t){throw tC(e,t.toString()),t}},parseInput_:function(e,t,n){if(t.eatWhile(":"),t.eat("%")?(n.line=e.firstLine(),n.lineEnd=e.lastLine()):(n.line=this.parseLineSpec_(e,t),void 0!==n.line&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t))),void 0==n.line)if(e.state.vim.visualMode){var i=t$(e,e.state.vim,"<");n.selectionLine=i&&i.line,n.selectionLineEnd=(i=t$(e,e.state.vim,">"))&&i.line}else n.selectionLine=e.getCursor().line;else n.selectionLine=n.line,n.selectionLineEnd=n.lineEnd;var r=t.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return r?n.commandName=r[1]:n.commandName=t.match(/.*/)[0],n},parseLineSpec_:function(e,t){var n=t.match(/^(\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return this.parseLineSpecOffset_(t,e.getCursor().line);case"$":return this.parseLineSpecOffset_(t,e.lastLine());case"'":var i=t.next(),r=t$(e,e.state.vim,i);if(!r)throw Error("Mark not set");return this.parseLineSpecOffset_(t,r.line);case"-":case"+":return t.backUp(1),this.parseLineSpecOffset_(t,e.getCursor().line);default:t.backUp(1);return}},parseLineSpecOffset_:function(e,t){var n=e.match(/^([+-])?(\d+)/);if(n){var i=parseInt(n[2],10);"-"==n[1]?t-=i:t+=i}return t},parseCommandArgs_:function(e,t,n){if(!e.eol()){t.argString=e.match(/.*/)[0];var i=n.argDelimiter||/\s+/,r=eH(t.argString).split(i);r.length&&r[0]&&(t.args=r)}},matchCommand_:function(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var i=this.commandMap_[n];if(0===i.name.indexOf(e))return i}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<E.length;e++){var t=E[e],n=t.shortName||t.name;this.commandMap_[n]=t}},map:function(e,t,n,i){if(":"!=e&&":"==e.charAt(0)){if(n)throw Error("Mode not supported for ex mappings");var r=e.substring(1);":"!=t&&":"==t.charAt(0)?this.commandMap_[r]={name:r,type:"exToEx",toInput:t.substring(1),user:!0}:this.commandMap_[r]={name:r,type:"exToKey",toKeys:t,user:!0}}else{var o={keys:e,type:"keyToKey",toKeys:t,noremap:!!i};n&&(o.context=n),C.unshift(o)}},unmap:function(e,t){if(":"!=e&&":"==e.charAt(0)){if(t)throw Error("Mode not supported for ex mappings");var n=e.substring(1);if(this.commandMap_[n]&&this.commandMap_[n].user)return delete this.commandMap_[n],!0}else for(var i=e,r=0;r<C.length;r++)if(i==C[r].keys&&C[r].context===t)return C.splice(r,1),!0}};var tH={colorscheme:function(e,t){!t.args||t.args.length<1?tC(e,e.getOption("theme")):e.setOption("theme",t.args[0])},map:function(e,t,n,i){var r=t.args;if(!r||r.length<2){e&&tC(e,"Invalid mapping: "+t.input);return}tF.map(r[0],r[1],n,i)},imap:function(e,t){this.map(e,t,"insert")},nmap:function(e,t){this.map(e,t,"normal")},vmap:function(e,t){this.map(e,t,"visual")},omap:function(e,t){this.map(e,t,"operatorPending")},noremap:function(e,t){this.map(e,t,void 0,!0)},inoremap:function(e,t){this.map(e,t,"insert",!0)},nnoremap:function(e,t){this.map(e,t,"normal",!0)},vnoremap:function(e,t){this.map(e,t,"visual",!0)},onoremap:function(e,t){this.map(e,t,"operatorPending",!0)},unmap:function(e,t,n){var i=t.args;(!i||i.length<1||!tF.unmap(i[0],n))&&e&&tC(e,"No such mapping: "+t.input)},mapclear:function(e,t){ee.mapclear()},imapclear:function(e,t){ee.mapclear("insert")},nmapclear:function(e,t){ee.mapclear("normal")},vmapclear:function(e,t){ee.mapclear("visual")},omapclear:function(e,t){ee.mapclear("operatorPending")},move:function(e,t){ey.processCommand(e,e.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:t.line+1})},set:function(e,t){var n=t.args,i=t.setCfg||{};if(!n||n.length<1){e&&tC(e,"Invalid mapping: "+t.input);return}var r=n[0].split("="),o=r[0],s=r[1],a=!1,c=!1;if("?"==o.charAt(o.length-1)){if(s)throw Error("Trailing characters: "+t.argString);o=o.substring(0,o.length-1),a=!0}else"!"==o.charAt(o.length-1)&&(o=o.substring(0,o.length-1),c=!0);void 0===s&&"no"==o.substring(0,2)&&(o=o.substring(2),s=!1);var l=U[o]&&"boolean"==U[o].type;if(l&&(c?s=!G(o,e,i):void 0==s&&(s=!0)),!l&&void 0===s||a){var u=G(o,e,i);u instanceof Error?tC(e,u.message):!0===u||!1===u?tC(e," "+(u?"":"no")+o):tC(e,"  "+o+"="+u)}else{var h=q(o,s,e,i);h instanceof Error&&tC(e,h.message)}},setlocal:function(e,t){t.setCfg={scope:"local"},this.set(e,t)},setglobal:function(e,t){t.setCfg={scope:"global"},this.set(e,t)},registers:function(e,t){var n,i=t.args,o=r.registerController.registers,s="----------Registers----------\n\n";if(i){i=i.join("");for(var a=0;a<i.length;a++)if(n=i.charAt(a),r.registerController.isValidRegister(n)){var c=o[n]||new ef;s+='"'+n+"    "+c.toString()+"\n"}}else for(var n in o){var l=o[n].toString();l.length&&(s+='"'+n+"    "+l+"\n")}tC(e,s)},sort:function(e,t){var n=function(){if(t.argString){var e=new b.StringStream(t.argString);if(e.eat("!")&&(f=!0),!e.eol()){if(!e.eatSpace())return"Invalid arguments";var n=e.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!n&&!e.eol())return"Invalid arguments";if(n[1]){g=-1!=n[1].indexOf("i"),m=-1!=n[1].indexOf("u");var i=-1!=n[1].indexOf("d")||-1!=n[1].indexOf("n")&&1,r=-1!=n[1].indexOf("x")&&1,o=-1!=n[1].indexOf("o")&&1;if(i+r+o>1)return"Invalid arguments";v=i&&"decimal"||r&&"hex"||o&&"octal"}n[2]&&(y=new RegExp(n[2].substr(1,n[2].length-2),g?"i":""))}}}();if(n)return void tC(e,n+": "+t.argString);var i=t.line||e.firstLine(),r=t.lineEnd||t.line||e.lastLine();if(i!=r){var o=new S(i,0),s=new S(r,ej(e,r)),a=e.getRange(o,s).split("\n"),c=y||("decimal"==v?/(-?)([\d]+)/:"hex"==v?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==v?/([0-7]+)/:null),l="decimal"==v?10:"hex"==v?16:"octal"==v?8:null,u=[],h=[];if(v||y)for(var p=0;p<a.length;p++){var d=y?a[p].match(y):null;d&&""!=d[0]?u.push(d):!y&&c.exec(a[p])?u.push(a[p]):h.push(a[p])}else h=a;if(u.sort(y?C:x),y)for(var p=0;p<u.length;p++)u[p]=u[p].input;else v||h.sort(x);if(a=f?u.concat(h):h.concat(u),m){var f,g,m,v,y,_,w=a;a=[];for(var p=0;p<w.length;p++)w[p]!=_&&a.push(w[p]),_=w[p]}e.replaceRange(a.join("\n"),o,s)}function x(e,t){if(f){var n;n=e,e=t,t=n}g&&(e=e.toLowerCase(),t=t.toLowerCase());var i=v&&c.exec(e),r=v&&c.exec(t);return i?(i=parseInt((i[1]+i[2]).toLowerCase(),l))-(r=parseInt((r[1]+r[2]).toLowerCase(),l)):e<t?-1:1}function C(e,t){if(f){var n;n=e,e=t,t=n}return g&&(e[0]=e[0].toLowerCase(),t[0]=t[0].toLowerCase()),e[0]<t[0]?-1:1}},vglobal:function(e,t){this.global(e,t)},normal:function(e,t){var n=t.argString;if(n&&"!"==n[0]&&(n=n.slice(1),en=!0),!(n=n.trimStart()))return void tC(e,"Argument is required.");var i=t.line;if("number"==typeof i)for(var r=isNaN(t.lineEnd)?i:t.lineEnd,o=i;o<=r;o++)e.setCursor(o,0),er(e,t.argString.trimStart()),e.state.vim.insertMode&&tW(e,!0);else er(e,t.argString.trimStart()),e.state.vim.insertMode&&tW(e,!0)},global:function(e,t){var n=t.argString;if(!n)return void tC(e,"Regular Expression missing from global");var i="v"===t.commandName[0];"!"===n[0]&&"g"===t.commandName[0]&&(i=!0,n=n.slice(1));var r,o=void 0!==t.line?t.line:e.firstLine(),s=t.lineEnd||t.line||e.lastLine(),a=td(n),c=n;if(a.length&&(c=a[0],r=a.slice(1,a.length).join("/")),c)try{tO(e,c,!0,!0)}catch(t){tC(e,"Invalid regex: "+c);return}for(var l=tp(e).getQuery(),u=[],h=o;h<=s;h++){var p=e.getLine(h);l.test(p)!==i&&u.push(r?e.getLineHandle(h):p)}if(!r)return void tC(e,u.join("\n"));var d=0,f=function(){if(d<u.length){var t=u[d++],n=e.getLineNumber(t);if(null==n)return void f();var i=n+1+r;tF.processCommand(e,i,{callback:f})}else e.releaseLineHandles&&e.releaseLineHandles()};f()},substitute:function(e,t){if(!e.getSearchCursor)throw Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var n,i,o,s,a=t.argString,c=a?tg(a,a[0]):[],l="",u=!1,h=!1;if(c.length)n=c[0],G("pcre")&&""!==n&&(n=new RegExp(n).source),void 0!==(l=c[1])&&(l=G("pcre")?tw(l.replace(/([^\\])&/g,"$1$$&")):tb(l),r.lastSubstituteReplacePart=l),i=c[2]?c[2].split(" "):[];else if(a&&a.length)return void tC(e,"Substitutions should be of the form :s/pattern/replace/");if(i&&(o=i[0],s=parseInt(i[1]),o&&(-1!=o.indexOf("c")&&(u=!0),-1!=o.indexOf("g")&&(h=!0),n=G("pcre")?n+"/"+o:n.replace(/\//g,"\\/")+"/"+o)),n)try{tO(e,n,!0,!0)}catch(t){tC(e,"Invalid regex: "+n);return}if(void 0===(l=l||r.lastSubstituteReplacePart))return void tC(e,"No previous substitute regular expression");var p=tp(e).getQuery(),d=void 0!==t.line?t.line:e.getCursor().line,f=t.lineEnd||d;d==e.firstLine()&&f==e.lastLine()&&(f=1/0),s&&(f=(d=f)+s-1);var g=eE(e,new S(d,0)),m=e.getSearchCursor(p,g);tz(e,u,h,d,f,m,p,l,t.callback)},startinsert:function(e,t){er(e,"!"==t.argString?"A":"i",{})},redo:b.commands.redo,undo:b.commands.undo,write:function(e){b.commands.save?b.commands.save(e):e.save&&e.save()},nohlsearch:function(e){tN(e)},yank:function(e){var t=eP(e.getCursor()).line,n=e.getLine(t);r.registerController.pushText("0","yank",n,!0,!0)},delete:function(e,t){var n=t.selectionLine,i=isNaN(t.selectionLineEnd)?n:t.selectionLineEnd;eS.delete(e,{linewise:!0},[{anchor:new S(n,0),head:new S(i+1,0)}])},join:function(e,t){var n=t.selectionLine,i=isNaN(t.selectionLineEnd)?n:t.selectionLineEnd;e.setCursor(new S(n,0)),eC.joinLines(e,{repeat:i-n},e.state.vim)},delmarks:function(e,t){if(!t.argString||!eH(t.argString))return void tC(e,"Argument required");for(var n=e.state.vim,i=new b.StringStream(eH(t.argString));!i.eol();){i.eatSpace();var r=i.pos;if(!i.match(/[a-zA-Z]/,!1))return void tC(e,"Invalid argument: "+t.argString.substring(r));var o=i.next();if(i.match("-",!0)){if(!i.match(/[a-zA-Z]/,!1))return void tC(e,"Invalid argument: "+t.argString.substring(r));var s=o,a=i.next();if(!(B(s)&&B(a)||F(s)&&F(a)))return void tC(e,"Invalid argument: "+s+"-");var c=s.charCodeAt(0),l=a.charCodeAt(0);if(c>=l)return void tC(e,"Invalid argument: "+t.argString.substring(r));for(var u=0;u<=l-c;u++){var h=String.fromCharCode(c+u);delete n.marks[h]}}else delete n.marks[o]}}},tF=new tj;function tz(e,t,n,i,r,o,s,a,c){e.state.vim.exMode=!0;var l,u,h,p=!1;function d(){e.operation(function(){for(;!p;)f(),m();v()})}function f(){var t=e.getRange(o.from(),o.to()).replace(s,a),n=o.to().line;o.replace(t),u=o.to().line,r+=u-n,h=u<n}function g(){var e=l&&eP(o.to()),t=o.findNext();return t&&!t[0]&&e&&eN(o.from(),e)&&(t=o.findNext()),t}function m(){for(;g()&&tI(o.from(),i,r);)if(n||o.from().line!=u||h){e.scrollIntoView(o.from(),30),e.setSelection(o.from(),o.to()),l=o.from(),p=!1;return}p=!0}function v(t){if(t&&t(),e.focus(),l){e.setCursor(l);var n=e.state.vim;n.exMode=!1,n.lastHPos=n.lastHSPos=l.ch}c&&c()}function y(t,n,i){switch(b.e_stop(t),ec(t)){case"y":f(),m();break;case"n":m();break;case"a":var r=c;c=void 0,e.operation(d),c=r;break;case"l":f();case"q":case"<Esc>":case"<C-c>":case"<C-[>":v(i)}return p&&v(i),!0}if(m(),p)return void tC(e,"No matches for "+s.source);if(!t){d(),c&&c();return}tE(e,{prefix:tx("span","replace with ",tx("strong",a)," (y/n/a/q/l)"),onKeyDown:y})}function tW(e,t){var n=e.state.vim,i=r.macroModeState,o=r.registerController.getRegister("."),s=i.isPlaying,a=i.lastInsertModeChanges;s||(e.off("change",tY),n.insertEnd&&n.insertEnd.clear(),n.insertEnd=null,b.off(e.getInputField(),"keydown",t0)),!s&&n.insertModeRepeat>1&&(t1(e,n,n.insertModeRepeat-1,!0),n.lastEditInputState.repeatOverride=n.insertModeRepeat),delete n.insertModeRepeat,n.insertMode=!1,t||e.setCursor(e.getCursor().line,e.getCursor().ch-1),e.setOption("keyMap","vim"),e.setOption("disableInput",!0),e.toggleOverwrite(!1),o.setText(a.changes.join("")),b.signal(e,"vim-mode-change",{mode:"normal"}),i.isRecording&&tG(i)}function tV(e){C.unshift(e)}function tU(e,t,n,i,r){var o={keys:e,type:t};for(var s in o[t]=n,o[t+"Args"]=i,r)o[s]=r[s];tV(o)}function tK(e,t,n,i){var o=r.registerController.getRegister(i);if(":"==i){o.keyBuffer[0]&&tF.processCommand(e,o.keyBuffer[0]),n.isPlaying=!1;return}var s=o.keyBuffer,a=0;n.isPlaying=!0,n.replaySearchQueries=o.searchQueries.slice(0);for(var c=0;c<s.length;c++)for(var l,u,h=s[c];h;)if(u=(l=/<\w+-.+?>|<\w+>|./.exec(h))[0],h=h.substring(l.index+u.length),ee.handleKey(e,u,"macro"),t.insertMode){var p=o.insertModeChanges[a++].changes;r.macroModeState.lastInsertModeChanges.changes=p,t5(e,p,1),tW(e)}n.isPlaying=!1}function tq(e,t){if(!e.isPlaying){var n=e.latestRegister,i=r.registerController.getRegister(n);i&&i.pushText(t)}}function tG(e){if(!e.isPlaying){var t=e.latestRegister,n=r.registerController.getRegister(t);n&&n.pushInsertModeChanges&&n.pushInsertModeChanges(e.lastInsertModeChanges)}}function tJ(e,t){if(!e.isPlaying){var n=e.latestRegister,i=r.registerController.getRegister(n);i&&i.pushSearchQuery&&i.pushSearchQuery(t)}}function tY(e,t){var n=r.macroModeState,i=n.lastInsertModeChanges;if(!n.isPlaying)for(var o=e.state.vim;t;){if(i.expectCursorActivityForChange=!0,i.ignoreCount>1)i.ignoreCount--;else if("+input"==t.origin||"paste"==t.origin||void 0===t.origin){var s=e.listSelections().length;s>1&&(i.ignoreCount=s);var a=t.text.join("\n");if(i.maybeReset&&(i.changes=[],i.maybeReset=!1),a)if(e.state.overwrite&&!/\n/.test(a))i.changes.push([a]);else{if(a.length>1){var c=o&&o.insertEnd&&o.insertEnd.find(),l=e.getCursor();if(c&&c.line==l.line){var u=c.ch-l.ch;u>0&&u<a.length&&(i.changes.push([a,u]),a="")}}a&&i.changes.push(a)}}t=t.next}}function tQ(e){var t=e.state.vim;if(t.insertMode){var n=r.macroModeState;if(n.isPlaying)return;var i=n.lastInsertModeChanges;i.expectCursorActivityForChange?i.expectCursorActivityForChange=!1:(i.maybeReset=!0,t.insertEnd&&t.insertEnd.clear(),t.insertEnd=e.setBookmark(e.getCursor(),{insertLeft:!0}))}else e.curOp.isVimOp||tX(e,t)}function tX(e,t,n){var i=e.getCursor("anchor"),r=e.getCursor("head");if(t.visualMode&&!e.somethingSelected()?eX(e,!1):!t.visualMode&&!t.insertMode&&e.somethingSelected()&&(t.visualMode=!0,t.visualLine=!1,b.signal(e,"vim-mode-change",{mode:"visual"})),t.visualMode){var o=eI(r,i)?0:-1,s=eI(r,i)?-1:0;r=eO(r,0,o),t.sel={anchor:i=eO(i,0,s),head:r},tr(e,t,"<",eD(r,i)),tr(e,t,">",e$(r,i))}else t.insertMode||n||(t.lastHPos=e.getCursor().ch)}function tZ(e,t){this.keyName=e,this.key=t.key,this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.shiftKey=t.shiftKey}function t0(e){var t=r.macroModeState.lastInsertModeChanges,n=b.keyName?b.keyName(e):e.key;n&&(-1!=n.indexOf("Delete")||-1!=n.indexOf("Backspace"))&&(t.maybeReset&&(t.changes=[],t.maybeReset=!1),t.changes.push(new tZ(n,e)))}function t1(e,t,n,i){var o=r.macroModeState;o.isPlaying=!0;var s=!!t.lastEditActionCommand,a=t.inputState;function c(){s?ey.processAction(e,t,t.lastEditActionCommand):ey.evalInput(e,t)}function l(n){o.lastInsertModeChanges.changes.length>0&&(n=t.lastEditActionCommand?n:1,t5(e,o.lastInsertModeChanges.changes,n))}if(t.inputState=t.lastEditInputState,s&&t.lastEditActionCommand.interlaceInsertRepeat)for(var u=0;u<n;u++)c(),l(1);else i||c(),l(n);t.inputState=a,t.insertMode&&!i&&tW(e),o.isPlaying=!1}function t2(e,t){b.lookupKey(t,"vim-insert",function(t){return"string"==typeof t?b.commands[t](e):t(e),!0})}function t5(e,t,n){var i=e.getCursor("head"),o=r.macroModeState.lastInsertModeChanges.visualBlock;o&&(eV(e,i,o+1),n=e.listSelections().length,e.setCursor(i));for(var s=0;s<n;s++){o&&e.setCursor(eO(i,s,0));for(var a=0;a<t.length;a++){var c=t[a];if(c instanceof tZ)t2(e,c.keyName,c);else if("string"==typeof c)e.replaceSelection(c);else{var l=e.getCursor(),u=eO(l,0,c[0].length-(c[1]||0));e.replaceRange(c[0],l,c[1]?l:u),e.setCursor(u)}}}o&&e.setCursor(eO(i,0,1))}K("insertModeEscKeysTimeout",200,"number"),b.Vim=ee;var t6={return:"CR",backspace:"BS",delete:"Del",esc:"Esc",left:"Left",right:"Right",up:"Up",down:"Down",space:"Space",insert:"Ins",home:"Home",end:"End",pageup:"PageUp",pagedown:"PageDown",enter:"CR"};function t3(e,t,n,i){t.length>1&&"n"==t[0]&&(t=t.replace("numpad","")),t=t6[t]||t;var r="";if(n.ctrlKey&&(r+="C-"),n.altKey&&(r+="A-"),(r||t.length>1)&&n.shiftKey&&(r+="S-"),i&&!i.expectLiteralNext&&1==t.length){if(R.keymap&&t in R.keymap)!1===R.remapCtrl&&r||(t=R.keymap[t]);else if(t.charCodeAt(0)>255){var o=n.code&&n.code.slice(-1)||"";n.shiftKey||(o=o.toLowerCase()),o&&(t=o)}}return(r+=t).length>1&&(r="<"+r+">"),r}var t4=ee.handleKey.bind(ee);function t9(e){var t=new e.constructor;return Object.keys(e).forEach(function(n){if("insertEnd"!=n){var i=e[n];Array.isArray(i)?i=i.slice():i&&"object"==typeof i&&i.constructor!=Object&&(i=t9(i)),t[n]=i}}),e.sel&&(t.sel={head:e.sel.head&&eP(e.sel.head),anchor:e.sel.anchor&&eP(e.sel.anchor)}),t}function t8(e,t,n){var i=!1,r=ee.maybeInitVimState_(e),o=r.visualBlock||r.wasInVisualBlock,s=e.ace.inMultiSelectMode;if(r.wasInVisualBlock&&!s?r.wasInVisualBlock=!1:s&&r.visualBlock&&(r.wasInVisualBlock=!0),"<Esc>"!=t||r.insertMode||r.visualMode||!s)if(o||!s||e.ace.inVirtualSelectionMode)i=ee.handleKey(e,t,n);else{var a=t9(r),c=r.inputState.changeQueueList||[];e.operation(function(){e.curOp.isVimOp=!0;var o=0;e.ace.forEachSelection(function(){var r=e.ace.selection;e.state.vim.lastHPos=null==r.$desiredColumn?r.lead.column:r.$desiredColumn,e.state.vim.inputState.changeQueue=c[o];var s=e.getCursor("head"),l=e.getCursor("anchor"),u=eI(s,l)?0:-1,h=eI(s,l)?-1:0;s=eO(s,0,u),l=eO(l,0,h),e.state.vim.sel.head=s,e.state.vim.sel.anchor=l,i=t4(e,t,n),r.$desiredColumn=-1==e.state.vim.lastHPos?null:e.state.vim.lastHPos,e.ace.inVirtualSelectionMode&&(c[o]=e.state.vim.inputState.changeQueue),e.virtualSelectionMode()&&(e.state.vim=t9(a)),o++}),e.curOp.cursorActivity&&!i&&(e.curOp.cursorActivity=!1),r.status=e.state.vim.status,e.state.vim=r,r.inputState.changeQueueList=c,r.inputState.changeQueue=null},!0)}else e.ace.exitMultiSelectMode();return!i||r.visualMode||r.insert||r.visualMode==e.somethingSelected()||tX(e,r,!0),i}ee.handleKey=function(e,t,n){return e.operation(function(){return t4(e,t,n)},!0)},Z(),t.CodeMirror=b;var t7=ee.maybeInitVimState_;function ne(e,t){t.off("beforeEndOperation",ne);var n=t.state.cm.vimCmd;n&&t.execCommand(n.exec?n:n.name,n.args),t.curOp=t.prevOp}t.handler={$id:"ace/keyboard/vim",drawCursor:function(e,t,n,i,r){var o=this.state.vim||{},s=n.characterWidth,c=n.lineHeight,u=t.top,h=t.left;!o.insertMode&&((i.cursor?0>=a.comparePoints(i.cursor,i.start):r.selection.isBackwards()||r.selection.isEmpty())||!(h>s)||(h-=s)),!o.insertMode&&o.status&&(c/=2,u+=c),l.translate(e,h,u),l.setStyle(e.style,"width",s+"px"),l.setStyle(e.style,"height",c+"px")},$getDirectionForHighlight:function(e){if(!t7(e.state.cm).insertMode)return e.session.selection.isBackwards()||e.session.selection.isEmpty()},handleKeyboard:function(e,t,n,i,r){var o=e.editor,s=o.state.cm,a=t7(s);if(-1!=i){if(a.insertMode||(-1==t?(n.charCodeAt(0)>255&&e.inputKey&&(n=e.inputKey)&&4==e.inputHash&&(n=n.toUpperCase()),e.inputChar=n):4==t||0==t?e.inputKey==n&&e.inputHash==t&&e.inputChar?(n=e.inputChar,t=-1):(e.inputChar=null,e.inputKey=n,e.inputHash=t):e.inputChar=e.inputKey=null),s.state.overwrite&&a.insertMode&&"backspace"==n&&0==t)return{command:"gotoleft"};if("c"==n&&1==t&&!f.isMac&&o.getCopyText())return o.once("copy",function(){a.insertMode?o.selection.clearSelection():s.operation(function(){eX(s)})}),{command:"null",passEvent:!0};if("esc"==n&&!a.insertMode&&!a.visualMode&&!s.ace.inMultiSelectMode){var c=tp(s).getOverlay();c&&s.removeOverlay(c)}if(-1==t||1&t||0===t&&n.length>1){var l=a.insertMode,u=t3(t,n,r||{},a);null==a.status&&(a.status="");var h=t8(s,u,"user");if(a=t7(s),h&&null!=a.status?a.status+=u:null==a.status&&(a.status=""),s._signal("changeStatus"),!h&&(-1!=t||l))return;return{command:"null",passEvent:!h}}}},attach:function(e){e.state||(e.state={});var t=new b(e);function n(){var n=t7(t).insertMode;t.ace.renderer.setStyle("normal-mode",!n),e.textInput.setCommandMode(!n),e.renderer.$keepTextAreaAtCursor=n,e.renderer.$blockCursor=!n}e.state.cm=t,e.$vimModeHandler=this,O(t),t7(t).status=null,t.on("vim-command-done",function(){t.virtualSelectionMode()||(t7(t).status=null,t.ace._signal("changeStatus"),t.ace.session.markUndoGroup())}),t.on("changeStatus",function(){t.ace.renderer.updateCursor(),t.ace._signal("changeStatus")}),t.on("vim-mode-change",function(){t.virtualSelectionMode()||(n(),t._signal("changeStatus"))}),n(),e.renderer.$cursorLayer.drawCursor=this.drawCursor.bind(t)},detach:function(e){var t=e.state.cm;M(t),t.destroy(),e.state.cm=null,e.$vimModeHandler=null,e.renderer.$cursorLayer.drawCursor=null,e.renderer.setStyle("normal-mode",!1),e.textInput.setCommandMode(!1),e.renderer.$keepTextAreaAtCursor=!0},getStatusText:function(e){var t=t7(e.state.cm);if(t.insertMode)return"INSERT";var n="";return t.visualMode&&(n+="VISUAL",t.visualLine&&(n+=" LINE"),t.visualBlock&&(n+=" BLOCK")),t.status&&(n+=(n?" ":"")+t.status),n}},ee.defineOption({name:"wrap",set:function(e,t){t&&t.ace.setOption("wrap",e)},type:"boolean"},!1),ee.defineEx("write","w",function(){console.log(":write is not implemented")}),C.push({keys:"zc",type:"action",action:"fold",actionArgs:{open:!1}},{keys:"zC",type:"action",action:"fold",actionArgs:{open:!1,all:!0}},{keys:"zo",type:"action",action:"fold",actionArgs:{open:!0}},{keys:"zO",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"za",type:"action",action:"fold",actionArgs:{toggle:!0}},{keys:"zA",type:"action",action:"fold",actionArgs:{toggle:!0,all:!0}},{keys:"zf",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"zd",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"<C-A-k>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorAbove"}},{keys:"<C-A-j>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorBelow"}},{keys:"<C-A-S-k>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorAboveSkipCurrent"}},{keys:"<C-A-S-j>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorBelowSkipCurrent"}},{keys:"<C-A-h>",type:"action",action:"aceCommand",actionArgs:{name:"selectMoreBefore"}},{keys:"<C-A-l>",type:"action",action:"aceCommand",actionArgs:{name:"selectMoreAfter"}},{keys:"<C-A-S-h>",type:"action",action:"aceCommand",actionArgs:{name:"selectNextBefore"}},{keys:"<C-A-S-l>",type:"action",action:"aceCommand",actionArgs:{name:"selectNextAfter"}}),C.push({keys:"gq",type:"operator",operator:"hardWrap"}),ee.defineOperator("hardWrap",function(e,t,n,i,r){var o=n[0].anchor.line,s=n[0].head.line;return t.linewise&&s--,y(e.ace,{startRow:o,endRow:s}),S(s,0)}),K("textwidth",void 0,"number",["tw"],function(e,t){if(void 0!==t)if(void 0===e)return t.ace.getOption("printMarginColumn");else{var n=Math.round(e);n>1&&t.ace.setOption("printMarginColumn",n)}}),eC.aceCommand=function(e,t,n){e.vimCmd=t,e.ace.inVirtualSelectionMode?e.ace.on("beforeEndOperation",ne):ne(null,e.ace)},eC.fold=function(e,t,n){e.ace.execCommand(["toggleFoldWidget","toggleFoldWidget","foldOther","unfoldall"][2*!!t.all+ +!!t.open])},k=C.length,t.handler.defaultKeymap=C,t.handler.actions=eC,t.Vim=ee}),function(){ace.require(["ace/keyboard/vim"],function(t){e&&(e.exports=t)})}()},12205:function(e,t,n){"use strict";var i=n(66743),r=n(11002),o=n(13144);e.exports=function(){return o(i,r,arguments)}},10487:function(e,t,n){"use strict";var i=n(96897),r=n(30655),o=n(73126),s=n(12205);e.exports=function(e){var t=o(arguments),n=e.length-(arguments.length-1);return i(t,1+(n>0?n:0),!0)},r?r(e.exports,"apply",{value:s}):e.exports.apply=s},30041:function(e,t,n){"use strict";var i=n(30655),r=n(58068),o=n(69675),s=n(75795);e.exports=function(e,t,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new o("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],h=!!s&&s(e,t);if(i)i(e,t,{configurable:null===l&&h?h.configurable:!l,enumerable:null===a&&h?h.enumerable:!a,value:n,writable:null===c&&h?h.writable:!c});else if(!u&&(a||c||l))throw new r("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");else e[t]=n}},32017:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!=r--;){var i,r,o,s=o[r];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},82682:function(e,t,n){"use strict";var i=n(69600),r=Object.prototype.toString,o=Object.prototype.hasOwnProperty,s=function(e,t,n){for(var i=0,r=e.length;i<r;i++)o.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))},a=function(e,t,n){for(var i=0,r=e.length;i<r;i++)null==n?t(e.charAt(i),i,e):t.call(n,e.charAt(i),i,e)},c=function(e,t,n){for(var i in e)o.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))};function l(e){return"[object Array]"===r.call(e)}e.exports=function(e,t,n){var r;if(!i(t))throw TypeError("iterator must be a function");arguments.length>=3&&(r=n),l(e)?s(e,t,r):"string"==typeof e?a(e,t,r):c(e,t,r)}},30592:function(e,t,n){"use strict";var i=n(30655),r=function(){return!!i};r.hasArrayLengthDefineBug=function(){if(!i)return null;try{return 1!==i([],"length",{value:1}).length}catch(e){return!0}},e.exports=r},49092:function(e,t,n){"use strict";var i=n(41333);e.exports=function(){return i()&&!!Symbol.toStringTag}},39590:function(e){var t=e.exports=function(e,n){if(n||(n=16),void 0===e&&(e=128),e<=0)return"0";for(var i=Math.log(Math.pow(2,e))/Math.log(n),r=2;i===1/0;r*=2)i=Math.log(Math.pow(2,e/r))/Math.log(n)*r;for(var o=i-Math.floor(i),s="",r=0;r<Math.floor(i);r++){var a=Math.floor(Math.random()*n).toString(n);s=a+s}if(o){var a=Math.floor(Math.random()*Math.pow(n,o)).toString(n);s=a+s}var c=parseInt(s,n);return c!==1/0&&c>=Math.pow(2,e)?t(e,n):s};t.rack=function(e,n,i){var r=function(r){var s=0;do{if(s++>10)if(i)e+=i;else throw Error("too many ID collisions, use more bits");var a=t(e,n)}while(Object.hasOwnProperty.call(o,a));return o[a]=r,a},o=r.hats={};return r.get=function(e){return r.hats[e]},r.set=function(e,t){return r.hats[e]=t,r},r.bits=e||128,r.base=n||16,r}},47244:function(e,t,n){"use strict";var i=n(49092)(),r=n(36556)("Object.prototype.toString"),o=function(e){return(!i||!e||"object"!=typeof e||!(Symbol.toStringTag in e))&&"[object Arguments]"===r(e)},s=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"length"in e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==r(e)&&"callee"in e&&"[object Function]"===r(e.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,e.exports=a?o:s},69600:function(e){"use strict";var t,n,i=Function.prototype.toString,r="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof r&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},r(function(){throw 42},null,t)}catch(e){e!==n&&(r=null)}else r=null;var o=/^\s*class\b/,s=function(e){try{var t=i.call(e);return o.test(t)}catch(e){return!1}},a=function(e){try{if(s(e))return!1;return i.call(e),!0}catch(e){return!1}},c=Object.prototype.toString,l="[object Object]",u="[object Function]",h="[object GeneratorFunction]",p="[object HTMLAllCollection]",d="[object HTML document.all class]",f="[object HTMLCollection]",g="function"==typeof Symbol&&!!Symbol.toStringTag,m=!(0 in[,]),v=function(){return!1};if("object"==typeof document){var y=document.all;c.call(y)===c.call(document.all)&&(v=function(e){if((m||!e)&&(void 0===e||"object"==typeof e))try{var t=c.call(e);return(t===p||t===d||t===f||t===l)&&null==e("")}catch(e){}return!1})}e.exports=r?function(e){if(v(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;try{r(e,null,t)}catch(e){if(e!==n)return!1}return!s(e)&&a(e)}:function(e){if(v(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;if(g)return a(e);if(s(e))return!1;var t=c.call(e);return(t===u||t===h||!!/^\[object HTML/.test(t))&&a(e)}},48184:function(e,t,n){"use strict";var i,r=n(36556),o=n(99721)(/^\s*(?:function)?\*/),s=n(49092)(),a=n(93628),c=r("Object.prototype.toString"),l=r("Function.prototype.toString"),u=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}};e.exports=function(e){if("function"!=typeof e)return!1;if(o(l(e)))return!0;if(!s)return"[object GeneratorFunction]"===c(e);if(!a)return!1;if(void 0===i){var t=u();i=!!t&&a(t)}return a(e)===i}},14035:function(e,t,n){"use strict";var i,r=n(36556),o=n(49092)(),s=n(9957),a=n(75795);if(o){var c=r("RegExp.prototype.exec"),l={},u=function(){throw l},h={toString:u,valueOf:u};"symbol"==typeof Symbol.toPrimitive&&(h[Symbol.toPrimitive]=u),i=function(e){if(!e||"object"!=typeof e)return!1;var t=a(e,"lastIndex");if(!(t&&s(t,"value")))return!1;try{c(e,h)}catch(e){return e===l}}}else{var p=r("Object.prototype.toString"),d="[object RegExp]";i=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&p(e)===d}}e.exports=i},35680:function(e,t,n){"use strict";var i=n(25767);e.exports=function(e){return!!i(e)}},22454:function(module){!function(e,t){module.exports=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var i,r=n(1)(),o=n(3),s=n(5),a=n(8)();r.prefixColors=["#F2777A","#F99157","#FFCC66","#99CC99","#66CCCC","#6699CC","#CC99CC"],r._setPrefixRegExps=function(){try{a.localStorage&&"string"==typeof a.localStorage.getItem("debug")&&(r._prefixRegExps=[],a.localStorage.getItem("debug").split(",").forEach(function(e){var t="enable";"-"===(e=e.trim())[0]&&(e=e.substr(1),t="disable");var n=r._prepareRegExpForPrefixSearch(e);r._prefixRegExps.push({type:t,regExp:n})}))}catch(e){}},i=0,r._getNextPrefixColor=function(){return i+=1,r.prefixColors[i%r.prefixColors.length]},r.prototype._getDecoratedPrefix=function(){var e=[];return s()?(e.push("%c"+this.opts.prefix+"%c "),e.push("color:"+this.opts.prefixColor+"; font-weight:bold;","")):e.push("["+this.opts.prefix+"] "),e},r.prototype._prepareOutput=function(e){var t,n=this._getDecoratedPrefix();return"string"==typeof e[0]?this.opts.markdown&&s()?(t=o.parse(e[0]),n[0]=n[0]+t.text,n=n.concat(t.styles)):n[0]=n[0]+e[0]:n.push(e[0]),1<e.length&&(n=n.concat(e.slice(1))),n},r._setPrefixRegExps(),e.exports=r},function(e,t,n){var i=n(2);e.exports=function(){function e(t,n){return this instanceof e?e._isPrefixAlreadyInUse(t)?e._getInstanceByPrefix(t):(this.opts=e._normalizeOpts(t,n),this.state=e._getInitialState(this.opts),e._decorateLoggerMethods(this),e._instances.push(this),this):new e(t,n)}return e.transports=[],e._instances=[],e._prefixRegExps=[],e._prepareRegExpForPrefixSearch=function(e){return RegExp("^"+e.replace(/\*/g,".*?")+"$")},e._isPrefixAlreadyInUse=function(t){return e._instances.some(function(e){return e.opts.prefix===t})},e._getInstanceByPrefix=function(t){return e._instances.filter(function(e){return e.opts.prefix===t})[0]},e._normalizeOpts=function(t,n){if("string"!=typeof t)throw TypeError("prefix must be a string");var i=void 0===(n=n||{}).markdown||!!n.markdown,r=n.prefixColor||e._getNextPrefixColor();return{logger:n.logger||console,markdown:i,plaintext:!!n.plaintext,prefix:t,prefixColor:r}},e._getInitialState=function(t){return{isEnabled:e._getEnableState(t)}},e._getEnableState=function(t){var n=!1;return e._prefixRegExps.forEach(function(e){"enable"===e.type&&e.regExp.test(t.prefix)?n=!0:"disable"===e.type&&e.regExp.test(t.prefix)&&(n=!1)}),n},e._decorateLoggerMethods=function(t){var n=t.opts.logger,r=Object.keys(n).filter(function(e){return"function"==typeof n[e]});0===r.length&&(r=["debug","log","warn","error","info"]),r.forEach(function(r){t[r]=function(){var t=i(arguments),o=this.opts.prefix;if(e.transports.length){var s="["+o+"] "+t.filter(function(e){return"object"!=typeof e}).join(" ");e.transports.forEach((function(e){e({state:this.state,instance:o,level:r,args:t,msg:s})}).bind(this))}if(this.state.isEnabled){var a=this._prepareOutput(t,r);n[r].apply(n,a)}}})},e}},function(e,t){e.exports=function(e){return Array.prototype.slice.call(e,0)}},function(e,t,n){var i=[];function r(e){return function(t){return i.push(e),i.push(""),"%c"+t+"%c"}}var o=new(n(4))({renderer:{"*":r("font-weight:bold;"),_:r("font-style:italic;"),"`":r("background-color:rgba(255,204,102, 0.1);color:#FFCC66;padding:2px 5px;border-radius:2px;")}});e.exports={parse:function(e){var t={text:o.parse(e),styles:[].concat(i)};return i.length=0,t}}},function(e,t){var n=/([_*`\\]|[^_*`\\]+)/g,i=/[_*`]/;function r(e){this.renderer=e.renderer}function o(e){return i.test(e)}r.prototype.parse=function(e){if(""===e)return"";var t,i,r,s=e.match(n),a=this.renderer,c="",l=[],u={},h=0;function p(e){for(var n="";t&&t.tag!==e;)n=t.tag+t.text+n,u[t.tag]=!1,t=l.pop();return n}for(;r=s[h];){if(i="",h++,o(r))if(u[r])i=p(r),i=a[t.tag](t.text+i),u[r]=!1,t=l.pop();else{var d="";if("`"===r){var f=s.indexOf(r,h);-1!==f&&(c+=p(),d=s.slice(h,f).join(""),h=f)}t&&l.push(t),u[r]=!0,t={tag:r,text:d}}else if("\\"===(i=r)){var g=s[h];(o(g)||"\\"===g)&&(i=g,h++)}i&&(t?t.text+=i:c+=i,i="")}return c+p()},e.exports=r},function(e,t,n){var i=n(6),r=n(7);e.exports=function(){return i()||r()}},function(e,t){e.exports=function(){try{return"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent)}catch(e){return!1}}},function(e,t){e.exports=function(){try{return/firefox\/(\d+)/i.test(navigator.userAgent)}catch(e){return!1}}},function(e,t,n){(function(t){function n(e,t){return"object"==typeof e&&e.self===e&&e||"object"==typeof t&&t.global===t&&t||this}e.exports=n.bind(this,self,t),e.exports.getGlobal=n}).call(this,n(9))},function(ob,pb){var qb;qb=function(){return this}();try{qb=qb||Function("return this")()||eval("this")}catch(ob){"object"==typeof window&&(qb=window)}ob.exports=qb}])})},54695:function(e){e.exports=t;function t(e,t,n,i){var r=function(e,n,i,r){t(i,e,n,"left"),t(r,n,e,"right")},o=e.transformX=function(e,t){n(e),n(t);for(var s=[],a=0;a<t.length;a++){for(var c=t[a],l=[],u=0;u<e.length;){var h=[];if(r(e[u],c,l,h),u++,1===h.length)c=h[0];else if(0===h.length){for(var p=u;p<e.length;p++)i(l,e[p]);c=null;break}else{for(var d=o(e.slice(u),h),f=0;f<d[0].length;f++)i(l,d[0][f]);for(var g=0;g<d[1].length;g++)i(s,d[1][g]);c=null;break}}null!=c&&i(s,c),e=l}return[e,s]};e.transform=function(e,n,i){if("left"!==i&&"right"!==i)throw Error("type must be 'left' or 'right'");return 0===n.length?e:1===e.length&&1===n.length?t([],e[0],n[0],i):"left"===i?o(e,n)[0]:o(n,e)[1]}}},41725:function(e,t,n){e.exports={type:n(13031)}},13031:function(e,t,n){var i=function(e){return"[object Array]"==Object.prototype.toString.call(e)},r=function(e){return!!e&&e.constructor===Object},o=function(e){return JSON.parse(JSON.stringify(e))},s={name:"json0",uri:"http://sharejs.org/types/JSONv0"},a={};function c(e){e.t="text0";var t={p:e.p.pop()};null!=e.si&&(t.i=e.si),null!=e.sd&&(t.d=e.sd),e.o=[t]}function l(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}s.registerSubtype=function(e){a[e.name]=e},s.create=function(e){return void 0===e?null:o(e)},s.invertComponent=function(e){var t={p:e.p};return e.t&&a[e.t]&&(t.t=e.t,t.o=a[e.t].invert(e.o)),void 0!==e.si&&(t.sd=e.si),void 0!==e.sd&&(t.si=e.sd),void 0!==e.oi&&(t.od=e.oi),void 0!==e.od&&(t.oi=e.od),void 0!==e.li&&(t.ld=e.li),void 0!==e.ld&&(t.li=e.ld),void 0!==e.na&&(t.na=-e.na),void 0!==e.lm&&(t.lm=e.p[e.p.length-1],t.p=e.p.slice(0,e.p.length-1).concat([e.lm])),t},s.invert=function(e){for(var t=e.slice().reverse(),n=[],i=0;i<t.length;i++)n.push(s.invertComponent(t[i]));return n},s.checkValidOp=function(e){for(var t=0;t<e.length;t++)if(!i(e[t].p))throw Error("Missing path")},s.checkList=function(e){if(!i(e))throw Error("Referenced element not a list")},s.checkObj=function(e){if(!r(e))throw Error("Referenced element not an object (it was "+JSON.stringify(e)+")")},s.apply=function(e,t){s.checkValidOp(t),t=o(t);for(var n={data:e},i=0;i<t.length;i++){var r=t[i];(null!=r.si||null!=r.sd)&&c(r);for(var l=null,u=null,h=n,p="data",d=0;d<r.p.length;d++){var f=r.p[d];if(l=h,u=p,h=h[p],p=f,null==l)throw Error("Path invalid")}if(r.t&&void 0!==r.o&&a[r.t])h[p]=a[r.t].apply(h[p],r.o);else if(void 0!==r.na){if("number"!=typeof h[p])throw Error("Referenced element not a number");h[p]+=r.na}else if(void 0!==r.li&&void 0!==r.ld)s.checkList(h),h[p]=r.li;else if(void 0!==r.li)s.checkList(h),h.splice(p,0,r.li);else if(void 0!==r.ld)s.checkList(h),h.splice(p,1);else if(void 0!==r.lm){if(s.checkList(h),r.lm!=p){var g=h[p];h.splice(p,1),h.splice(r.lm,0,g)}}else if(void 0!==r.oi)s.checkObj(h),h[p]=r.oi;else if(void 0!==r.od)s.checkObj(h),delete h[p];else throw Error("invalid / missing instruction in op")}return n.data},s.shatter=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n]]);return t},s.incrementalApply=function(e,t,n){for(var i=0;i<t.length;i++){var r=[t[i]];e=s.apply(e,r),n(r,e)}return e};var u=s.pathMatches=function(e,t,n){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i]&&(!n||i!==e.length-1))return!1;return!0};s.append=function(e,t){if(t=o(t),0===e.length)return void e.push(t);var n=e[e.length-1];if((null!=t.si||null!=t.sd)&&(null!=n.si||null!=n.sd)&&(c(t),c(n)),u(t.p,n.p))if(t.t&&n.t&&t.t===n.t&&a[t.t]){if(n.o=a[t.t].compose(n.o,t.o),null!=t.si||null!=t.sd){for(var i=t.p,r=0;r<n.o.length-1;r++)t.o=[n.o.pop()],t.p=i.slice(),l(t),e.push(t);l(n)}}else null!=n.na&&null!=t.na?e[e.length-1]={p:n.p,na:n.na+t.na}:void 0!==n.li&&void 0===t.li&&t.ld===n.li?void 0!==n.ld?delete n.li:e.pop():void 0!==n.od&&void 0===n.oi&&void 0!==t.oi&&void 0===t.od?n.oi=t.oi:void 0!==n.oi&&void 0!==t.od?void 0!==t.oi?n.oi=t.oi:void 0!==n.od?delete n.oi:e.pop():void 0!==t.lm&&t.p[t.p.length-1]===t.lm||e.push(t);else(null!=t.si||null!=t.sd)&&(null!=n.si||null!=n.sd)&&(l(t),l(n)),e.push(t)},s.compose=function(e,t){s.checkValidOp(e),s.checkValidOp(t);for(var n=o(e),i=0;i<t.length;i++)s.append(n,t[i]);return n},s.normalize=function(e){var t=[];e=i(e)?e:[e];for(var n=0;n<e.length;n++){var r=e[n];null==r.p&&(r.p=[]),s.append(t,r)}return t},s.commonLengthForOps=function(e,t){var n=e.p.length,i=t.p.length;if((null!=e.na||e.t)&&n++,(null!=t.na||t.t)&&i++,0===n)return -1;if(0===i)return null;n--,i--;for(var r=0;r<n;r++){var o=e.p[r];if(r>=i||o!==t.p[r])return null}return n},s.canOpAffectPath=function(e,t){return null!=s.commonLengthForOps({p:t},e)},s.transformComponent=function(e,t,n,r){t=o(t);var u=s.commonLengthForOps(n,t),h=s.commonLengthForOps(t,n),p=t.p.length,d=n.p.length;if((null!=t.na||t.t)&&p++,(null!=n.na||n.t)&&d++,null!=h&&d>p&&t.p[h]==n.p[h]){if(void 0!==t.ld){var f=o(n);f.p=f.p.slice(p),t.ld=s.apply(o(t.ld),[f])}else if(void 0!==t.od){var f=o(n);f.p=f.p.slice(p),t.od=s.apply(o(t.od),[f])}}if(null!=u){var g=p==d,f=n;if((null!=t.si||null!=t.sd)&&(null!=n.si||null!=n.sd)&&(c(t),c(f=o(n))),f.t&&a[f.t]){if(t.t&&t.t===f.t){var m=a[t.t].transform(t.o,f.o,r);if(null!=t.si||null!=t.sd)for(var v=t.p,y=0;y<m.length;y++)t.o=[m[y]],t.p=v.slice(),l(t),s.append(e,t);else(!i(m)||m.length>0)&&(t.o=m,s.append(e,t));return e}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[u]===t.p[u]){if(!g)return e;else if(void 0!==t.ld)if(void 0===t.li||"left"!==r)return e;else t.ld=o(n.li)}}else if(void 0!==n.li)void 0!==t.li&&void 0===t.ld&&g&&t.p[u]===n.p[u]?"right"===r&&t.p[u]++:n.p[u]<=t.p[u]&&t.p[u]++,void 0!==t.lm&&g&&n.p[u]<=t.lm&&t.lm++;else if(void 0!==n.ld){if(void 0!==t.lm&&g){if(n.p[u]===t.p[u])return e;var v=n.p[u],b=t.p[u],_=t.lm;(v<_||v===_&&b<_)&&t.lm--}if(n.p[u]<t.p[u])t.p[u]--;else if(n.p[u]===t.p[u]){if(d<p)return e;else if(void 0!==t.ld)if(void 0===t.li)return e;else delete t.ld}}else if(void 0!==n.lm)if(void 0!==t.lm&&p===d){var b=t.p[u],_=t.lm,w=n.p[u],S=n.lm;if(w!==S)if(b===w)if("left"!==r)return e;else t.p[u]=S,b===_&&(t.lm=S);else b>w&&t.p[u]--,b>S?t.p[u]++:b===S&&w>S&&(t.p[u]++,b===_&&t.lm++),_>w?t.lm--:_===w&&_>b&&t.lm--,_>S?t.lm++:_===S&&(S>w&&_>b||S<w&&_<b?"right"===r&&t.lm++:_>b?t.lm++:_===w&&t.lm--)}else if(void 0!==t.li&&void 0===t.ld&&g){var b=n.p[u],_=n.lm;(v=t.p[u])>b&&t.p[u]--,v>_&&t.p[u]++}else{var b=n.p[u],_=n.lm;(v=t.p[u])===b?t.p[u]=_:(v>b&&t.p[u]--,v>_?t.p[u]++:v===_&&b>_&&t.p[u]++)}else if(void 0!==n.oi&&void 0!==n.od){if(t.p[u]===n.p[u])if(void 0===t.oi||!g)return e;else{if("right"===r)return e;t.od=n.oi}}else if(void 0!==n.oi){if(void 0!==t.oi&&t.p[u]===n.p[u])if("left"!==r)return e;else s.append(e,{p:t.p,od:n.oi})}else if(void 0!==n.od&&t.p[u]==n.p[u]){if(!g||void 0===t.oi)return e;delete t.od}}return s.append(e,t),e},n(54695)(s,s.transformComponent,s.checkValidOp,s.append);var h=n(4908);s.registerSubtype(h),e.exports=s},4908:function(e,t,n){var i=e.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!=typeof e)throw Error("Initial data must be a string");return e||""}},r=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},o=function(e){if("number"!=typeof e.p)throw Error("component missing position field");if("string"==typeof e.i==("string"==typeof e.d))throw Error("component needs an i or d field");if(e.p<0)throw Error("position cannot be negative")},s=function(e){for(var t=0;t<e.length;t++)o(e[t])};i.apply=function(e,t){var n;s(t);for(var i=0;i<t.length;i++){var o=t[i];if(null!=o.i)e=r(e,o.p,o.i);else{if(n=e.slice(o.p,o.p+o.d.length),o.d!==n)throw Error("Delete component '"+o.d+"' does not match deleted text '"+n+"'");e=e.slice(0,o.p)+e.slice(o.p+o.d.length)}}return e};var a=i._append=function(e,t){if(""!==t.i&&""!==t.d)if(0===e.length)e.push(t);else{var n=e[e.length-1];null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length?e[e.length-1]={i:r(n.i,t.p-n.p,t.i),p:n.p}:null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length?e[e.length-1]={d:r(t.d,n.p-t.p,n.d),p:t.p}:e.push(t)}};i.compose=function(e,t){s(e),s(t);for(var n=e.slice(),i=0;i<t.length;i++)a(n,t[i]);return n},i.normalize=function(e){var t=[];(null!=e.i||null!=e.p)&&(e=[e]);for(var n=0;n<e.length;n++){var i=e[n];null==i.p&&(i.p=0),a(t,i)}return t};var c=function(e,t,n){if(null!=t.i)if(t.p<e||t.p===e&&n)return e+t.i.length;else return e;return e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length};i.transformCursor=function(e,t,n){for(var i="right"===n,r=0;r<t.length;r++)e=c(e,t[r],i);return e};var l=i._tc=function(e,t,n,i){if(o(t),o(n),null!=t.i)a(e,{i:t.i,p:c(t.p,n,"right"===i)});else if(null!=n.i){var r=t.d;t.p<n.p&&(a(e,{d:r.slice(0,n.p-t.p),p:t.p}),r=r.slice(n.p-t.p)),""!==r&&a(e,{d:r,p:t.p+n.i.length})}else if(t.p>=n.p+n.d.length)a(e,{d:t.d,p:t.p-n.d.length});else if(t.p+t.d.length<=n.p)a(e,t);else{var s={d:"",p:t.p};t.p<n.p&&(s.d=t.d.slice(0,n.p-t.p)),t.p+t.d.length>n.p+n.d.length&&(s.d+=t.d.slice(n.p+n.d.length-t.p));var l=Math.max(t.p,n.p),u=Math.min(t.p+t.d.length,n.p+n.d.length);if(t.d.slice(l-t.p,u-t.p)!==n.d.slice(l-n.p,u-n.p))throw Error("Delete ops delete different text in the same region of the document");""!==s.d&&(s.p=c(s.p,n),a(e,s))}return e},u=function(e){return null!=e.i?{d:e.i,p:e.p}:{i:e.d,p:e.p}};i.invert=function(e){e=e.slice().reverse();for(var t=0;t<e.length;t++)e[t]=u(e[t]);return e},n(54695)(i,l,s,a)},7245:function(e,t,n){"use strict";var i,r,o,s=n(65606);Object.defineProperty(t,"__esModule",{value:!0}),globalThis.EventTarget&&globalThis.Event||console.error(`
  PartySocket requires a global 'EventTarget' class to be available!
  You can polyfill this global by adding this to your code before any partysocket imports: 
  
  \`\`\`
  import 'partysocket/event-target-polyfill';
  \`\`\`
  Please file an issue at https://github.com/partykit/partykit if you're still having trouble.
`);var a=class extends Event{constructor(e,t){super("error",t),this.message=e.message,this.error=e}},c=i=class extends Event{__init(){this.wasClean=!0}constructor(e=1e3,t="",n){super("close",n),i.prototype.__init.call(this),this.code=e,this.reason=t}},l=a,u=c;function h(e,t){if(!e)throw Error(t)}function p(e){return new e.constructor(e.type,e)}function d(e){return"data"in e?new MessageEvent(e.type,e):"code"in e||"reason"in e?new c(e.code||1999,e.reason||"unknown reason",e):"error"in e?new a(e.error,e):new Event(e.type,e)}var f=void 0!==s&&void 0!==(null==(o=s.versions)?void 0:o.node)&&"undefined"==typeof document?d:p,g={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0},m=!1,v=r=class e extends EventTarget{__init2(){this._retryCount=-1}__init3(){this._shouldReconnect=!0}__init4(){this._connectLock=!1}__init5(){this._binaryType="blob"}__init6(){this._closeCalled=!1}__init7(){this._messageQueue=[]}__init8(){this._debugLogger=console.log.bind(console)}constructor(e,t,n={}){super(),r.prototype.__init2.call(this),r.prototype.__init3.call(this),r.prototype.__init4.call(this),r.prototype.__init5.call(this),r.prototype.__init6.call(this),r.prototype.__init7.call(this),r.prototype.__init8.call(this),r.prototype.__init9.call(this),r.prototype.__init10.call(this),r.prototype.__init11.call(this),r.prototype.__init12.call(this),r.prototype.__init13.call(this),r.prototype.__init14.call(this),r.prototype.__init15.call(this),r.prototype.__init16.call(this),this._url=e,this._protocols=t,this._options=n,this._options.startClosed&&(this._shouldReconnect=!1),this._options.debugLogger&&(this._debugLogger=this._options.debugLogger),this._connect()}static get CONNECTING(){return 0}static get OPEN(){return 1}static get CLOSING(){return 2}static get CLOSED(){return 3}get CONNECTING(){return e.CONNECTING}get OPEN(){return e.OPEN}get CLOSING(){return e.CLOSING}get CLOSED(){return e.CLOSED}get binaryType(){return this._ws?this._ws.binaryType:this._binaryType}set binaryType(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)}get retryCount(){return Math.max(this._retryCount,0)}get bufferedAmount(){return this._messageQueue.reduce((e,t)=>("string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e),0)+(this._ws?this._ws.bufferedAmount:0)}get extensions(){return this._ws?this._ws.extensions:""}get protocol(){return this._ws?this._ws.protocol:""}get readyState(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING}get url(){return this._ws?this._ws.url:""}get shouldReconnect(){return this._shouldReconnect}__init9(){this.onclose=null}__init10(){this.onerror=null}__init11(){this.onmessage=null}__init12(){this.onopen=null}close(e=1e3,t){(this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws)?this._ws.readyState===this.CLOSED?this._debug("close: already closed"):this._ws.close(e,t):this._debug("close enqueued: no ws instance")}reconnect(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED&&this._disconnect(e,t),this._connect()}send(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{let{maxEnqueuedMessages:t=g.maxEnqueuedMessages}=this._options;this._messageQueue.length<t&&(this._debug("enqueue",e),this._messageQueue.push(e))}}_debug(...e){this._options.debug&&this._debugLogger("RWS>",...e)}_getNextDelay(){let{reconnectionDelayGrowFactor:e=g.reconnectionDelayGrowFactor,minReconnectionDelay:t=g.minReconnectionDelay,maxReconnectionDelay:n=g.maxReconnectionDelay}=this._options,i=0;return this._retryCount>0&&(i=t*e**(this._retryCount-1))>n&&(i=n),this._debug("next delay",i),i}_wait(){return new Promise(e=>{setTimeout(e,this._getNextDelay())})}_getNextProtocols(e){if(!e)return Promise.resolve(null);if("string"==typeof e||Array.isArray(e))return Promise.resolve(e);if("function"==typeof e){let t=e();if(!t)return Promise.resolve(null);if("string"==typeof t||Array.isArray(t))return Promise.resolve(t);if(t.then)return t}throw Error("Invalid protocols")}_getNextUrl(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){let t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")}_connect(){if(this._connectLock||!this._shouldReconnect)return;this._connectLock=!0;let{maxRetries:e=g.maxRetries,connectionTimeout:t=g.connectionTimeout}=this._options;this._retryCount>=e?this._debug("max retries reached",this._retryCount,">=",e):(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),this._wait().then(()=>Promise.all([this._getNextUrl(this._url),this._getNextProtocols(this._protocols||null)])).then(([e,n])=>{if(this._closeCalled){this._connectLock=!1;return}this._options.WebSocket||"undefined"!=typeof WebSocket||m||(console.error(`\u203C\uFE0F No WebSocket implementation available. You should define options.WebSocket. 

For example, if you're using node.js, run \`npm install ws\`, and then in your code:

import PartySocket from 'partysocket';
import WS from 'ws';

const partysocket = new PartySocket({
  host: "127.0.0.1:1999",
  room: "test-room",
  WebSocket: WS
});

`),m=!0);let i=this._options.WebSocket||WebSocket;this._debug("connect",{url:e,protocols:n}),this._ws=n?new i(e,n):new i(e),this._ws.binaryType=this._binaryType,this._connectLock=!1,this._addListeners(),this._connectTimeout=setTimeout(()=>this._handleTimeout(),t)}).catch(e=>{this._connectLock=!1,this._handleError(new l(Error(e.message),this))}))}_handleTimeout(){this._debug("timeout event"),this._handleError(new l(Error("TIMEOUT"),this))}_disconnect(e=1e3,t){if(this._clearTimeouts(),this._ws){this._removeListeners();try{(this._ws.readyState===this.OPEN||this._ws.readyState===this.CONNECTING)&&this._ws.close(e,t),this._handleClose(new u(e,t,this))}catch(e){}}}_acceptOpen(){this._debug("accept open"),this._retryCount=0}__init13(){this._handleOpen=e=>{this._debug("open event");let{minUptime:t=g.minUptime}=this._options;clearTimeout(this._connectTimeout),this._uptimeTimeout=setTimeout(()=>this._acceptOpen(),t),h(this._ws,"WebSocket is not defined"),this._ws.binaryType=this._binaryType,this._messageQueue.forEach(e=>{var t;return null==(t=this._ws)?void 0:t.send(e)}),this._messageQueue=[],this.onopen&&this.onopen(e),this.dispatchEvent(f(e))}}__init14(){this._handleMessage=e=>{this._debug("message event"),this.onmessage&&this.onmessage(e),this.dispatchEvent(f(e))}}__init15(){this._handleError=e=>{this._debug("error event",e.message),this._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),this.onerror&&this.onerror(e),this._debug("exec error listeners"),this.dispatchEvent(f(e)),this._connect()}}__init16(){this._handleClose=e=>{this._debug("close event"),this._clearTimeouts(),this._shouldReconnect&&this._connect(),this.onclose&&this.onclose(e),this.dispatchEvent(f(e))}}_removeListeners(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))}_addListeners(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))}_clearTimeouts(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)}};t.ErrorEvent=a,t.CloseEvent=c,t.ReconnectingWebSocket=v},36802:function(e,t,n){"use strict";function i(e,t){return null!=e?e:t()}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7245),o=e=>null!==e[1]&&void 0!==e[1];function s(){if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();let e=new Date().getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let i=16*Math.random();return e>0?(i=(e+i)%16|0,e=Math.floor(e/16)):(i=(t+i)%16|0,t=Math.floor(t/16)),("x"===n?i:3&i|8).toString(16)})}function a(e,t,n={}){let{host:r,path:s,protocol:c,room:l,party:u,basePath:h,prefix:p,query:d}=e,f=r.replace(/^(http|https|ws|wss):\/\//,"");if(f.endsWith("/")&&(f=f.slice(0,-1)),null==s?void 0:s.startsWith("/"))throw Error("path must not start with a slash");let g=i(u,()=>"main"),m=s?`/${s}`:"",v=c||(f.startsWith("localhost:")||f.startsWith("127.0.0.1:")||f.startsWith("192.168.")||f.startsWith("10.")||f.startsWith("172.")&&f.split(".")[1]>="16"&&f.split(".")[1]<="31"||f.startsWith("[::ffff:7f00:1]:")?t:`${t}s`),y=`${v}://${f}/${h||`${p||"parties"}/${g}/${l}`}${m}`,b=(e={})=>`${y}?${new URLSearchParams([...Object.entries(n),...Object.entries(e).filter(o)])}`;return{host:f,path:m,room:l,name:g,protocol:v,partyUrl:y,urlProvider:"function"==typeof d?async()=>b(await d()):b(d)}}function c(e){let{id:t,host:n,path:i,party:r,room:o,protocol:c,query:l,protocols:u,...h}=e,p=t||s(),d=a(e,"ws",{_pk:p});return{_pk:p,_pkurl:d.partyUrl,name:d.name,room:d.room,host:d.host,path:d.path,protocols:u,socketOptions:h,urlProvider:d.urlProvider}}t.PartySocket=class extends r.ReconnectingWebSocket{constructor(e){const t=c(e);super(t.urlProvider,t.protocols,t.socketOptions),this.partySocketOptions=e,this.setWSProperties(t)}updateProperties(e){let t=c({...this.partySocketOptions,...e,host:i(e.host,()=>this.host),room:i(e.room,()=>this.room),path:i(e.path,()=>this.path)});this._url=t.urlProvider,this._protocols=t.protocols,this._options=t.socketOptions,this.setWSProperties(t)}setWSProperties(e){let{_pk:t,_pkurl:n,name:i,room:r,host:o,path:s}=e;this._pk=t,this._pkurl=n,this.name=i,this.room=r,this.host=o,this.path=s}reconnect(e,t){if(!this.room||!this.host)throw Error("The room and host must be set before connecting, use `updateProperties` method to set them or pass them to the constructor.");super.reconnect(e,t)}get id(){return this._pk}get roomUrl(){return this._pkurl}static async fetch(e,t){let n=a(e,"http"),r="string"==typeof n.urlProvider?n.urlProvider:await n.urlProvider();return i(e.fetch,()=>fetch)(r,t)}}},76655:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(36802),r=n(7245);t.PartySocket=i.PartySocket,t.WebSocket=r.ReconnectingWebSocket,t.default=i.PartySocket},76578:function(e){"use strict";e.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},2576:function(e,t,n){"use strict";n.d(t,{c:()=>R});var i=n(74848),r=n(96540),o=n(40961),s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},c={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},l={width:"20px",height:"20px",position:"absolute",zIndex:1},u={top:s(s({},a),{top:"-5px"}),right:s(s({},c),{left:void 0,right:"-5px"}),bottom:s(s({},a),{top:void 0,bottom:"-5px"}),left:s(s({},c),{left:"-5px"}),topRight:s(s({},l),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:s(s({},l),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:s(s({},l),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:s(s({},l),{left:"-10px",top:"-10px",cursor:"nw-resize"})},h=(0,r.memo)(function(e){var t=e.onResizeStart,n=e.direction,o=e.children,a=e.replaceStyles,c=e.className,l=(0,r.useCallback)(function(e){t(e,n)},[t,n]),h=(0,r.useCallback)(function(e){t(e,n)},[t,n]),p=(0,r.useMemo)(function(){return s(s({position:"absolute",userSelect:"none"},u[n]),null!=a?a:{})},[a,n]);return(0,i.jsx)("div",{className:c||void 0,style:p,onMouseDown:l,onTouchStart:h,children:o})}),p=function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),d=function(){return(d=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},f={width:"auto",height:"auto"},g=function(e,t,n){return Math.max(Math.min(e,n),t)},m=function(e,t,n){var i=Math.round(e/t);return i*t+n*(i-1)},v=function(e,t){return RegExp(e,"i").test(t)},y=function(e){return!!(e.touches&&e.touches.length)},b=function(e){return!!((e.clientX||0===e.clientX)&&(e.clientY||0===e.clientY))},_=function(e,t,n){void 0===n&&(n=0);var i=t.reduce(function(n,i,r){return Math.abs(i-e)<Math.abs(t[n]-e)?r:n},0),r=Math.abs(t[i]-e);return 0===n||r<n?t[i]:e},w=function(e){return"auto"===(e=e.toString())||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:"".concat(e,"px")},S=function(e,t,n,i){if(e&&"string"==typeof e){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var r=Number(e.replace("%",""))/100;return t*r}if(e.endsWith("vw")){var r=Number(e.replace("vw",""))/100;return n*r}if(e.endsWith("vh")){var r=Number(e.replace("vh",""))/100;return i*r}}return e},x=function(e,t,n,i,r,o,s){return i=S(i,e.width,t,n),r=S(r,e.height,t,n),o=S(o,e.width,t,n),s=S(s,e.height,t,n),{maxWidth:void 0===i?void 0:Number(i),maxHeight:void 0===r?void 0:Number(r),minWidth:void 0===o?void 0:Number(o),minHeight:void 0===s?void 0:Number(s)}},C=function(e){return Array.isArray(e)?e:[e,e]},k=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],E="__resizable_base__",R=function(e){function t(t){var n,i,r,o,s=e.call(this,t)||this;return s.ratio=1,s.resizable=null,s.parentLeft=0,s.parentTop=0,s.resizableLeft=0,s.resizableRight=0,s.resizableTop=0,s.resizableBottom=0,s.targetLeft=0,s.targetTop=0,s.delta={width:0,height:0},s.appendBase=function(){if(!s.resizable||!s.window)return null;var e=s.parentNode;if(!e)return null;var t=s.window.document.createElement("div");return t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0 0 100%",t.classList?t.classList.add(E):t.className+=E,e.appendChild(t),t},s.removeBase=function(e){var t=s.parentNode;t&&t.removeChild(e)},s.state={isResizing:!1,width:null!=(i=null==(n=s.propsSize)?void 0:n.width)?i:"auto",height:null!=(o=null==(r=s.propsSize)?void 0:r.height)?o:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},s.onResizeStart=s.onResizeStart.bind(s),s.onMouseMove=s.onMouseMove.bind(s),s.onMouseUp=s.onMouseUp.bind(s),s}return p(t,e),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||f},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,i=this.resizable.offsetHeight,r=this.resizable.style.position;"relative"!==r&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:n,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:i,this.resizable.style.position=r}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,n=function(t){var n;if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&(null==(n=e.propsSize[t])?void 0:n.toString().endsWith("%"))){if(e.state[t].toString().endsWith("%"))return e.state[t].toString();var i=e.getParentSize(),r=Number(e.state[t].toString().replace("px",""))/i[t]*100;return"".concat(r,"%")}return w(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?w(t.width):n("width"),height:t&&void 0!==t.height&&!this.state.isResizing?w(t.height):n("height")}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,n=this.parentNode.style.flexWrap;"wrap"!==n&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var i={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=n),this.removeBase(e),i},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(this.resizable&&this.window){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==e.flexBasis?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,t){var n=this.propsSize&&this.propsSize[t];return"auto"===this.state[t]&&this.state.original[t]===e&&(void 0===n||"auto"===n)?"auto":e},t.prototype.calculateNewMaxFromBoundary=function(e,t){var n,i,r=this.props.boundsByDirection,o=this.state.direction,s=r&&v("left",o),a=r&&v("top",o);if("parent"===this.props.bounds){var c=this.parentNode;c&&(n=s?this.resizableRight-this.parentLeft:c.offsetWidth+(this.parentLeft-this.resizableLeft),i=a?this.resizableBottom-this.parentTop:c.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(n=s?this.resizableRight:this.window.innerWidth-this.resizableLeft,i=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(n=s?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),i=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return n&&Number.isFinite(n)&&(e=e&&e<n?e:n),i&&Number.isFinite(i)&&(t=t&&t<i?t:i),{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var n=this.props.scale||1,i=C(this.props.resizeRatio||1),r=i[0],o=i[1],s=this.state,a=s.direction,c=s.original,l=this.props,u=l.lockAspectRatio,h=l.lockAspectRatioExtraHeight,p=l.lockAspectRatioExtraWidth,d=c.width,f=c.height,g=h||0,m=p||0;return v("right",a)&&(d=c.width+(e-c.x)*r/n,u&&(f=(d-m)/this.ratio+g)),v("left",a)&&(d=c.width-(e-c.x)*r/n,u&&(f=(d-m)/this.ratio+g)),v("bottom",a)&&(f=c.height+(t-c.y)*o/n,u&&(d=(f-g)*this.ratio+m)),v("top",a)&&(f=c.height-(t-c.y)*o/n,u&&(d=(f-g)*this.ratio+m)),{newWidth:d,newHeight:f}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,n,i){var r=this.props,o=r.lockAspectRatio,s=r.lockAspectRatioExtraHeight,a=r.lockAspectRatioExtraWidth,c=void 0===i.width?10:i.width,l=void 0===n.width||n.width<0?e:n.width,u=void 0===i.height?10:i.height,h=void 0===n.height||n.height<0?t:n.height,p=s||0,d=a||0;if(o){var f=(u-p)*this.ratio+d,m=(h-p)*this.ratio+d,v=(c-d)/this.ratio+p,y=(l-d)/this.ratio+p,b=Math.max(u,v),_=Math.min(h,y);e=g(e,Math.max(c,f),Math.min(l,m)),t=g(t,b,_)}else e=g(e,c,l),t=g(t,u,h);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){var e=1/(this.props.scale||1);if("parent"===this.props.bounds){var t=this.parentNode;if(t){var n=t.getBoundingClientRect();this.parentLeft=n.left*e,this.parentTop=n.top*e}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var i=this.props.bounds.getBoundingClientRect();this.targetLeft=i.left*e,this.targetTop=i.top*e}if(this.resizable){var r=this.resizable.getBoundingClientRect(),o=r.left,s=r.top,a=r.right,c=r.bottom;this.resizableLeft=o*e,this.resizableRight=a*e,this.resizableTop=s*e,this.resizableBottom=c*e}},t.prototype.onResizeStart=function(e,t){if(this.resizable&&this.window){var n,i=0,r=0;if(e.nativeEvent&&b(e.nativeEvent)?(i=e.nativeEvent.clientX,r=e.nativeEvent.clientY):e.nativeEvent&&y(e.nativeEvent)&&(i=e.nativeEvent.touches[0].clientX,r=e.nativeEvent.touches[0].clientY),!this.props.onResizeStart||!this.resizable||!1!==this.props.onResizeStart(e,t,this.resizable)){this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var o=this.window.getComputedStyle(this.resizable);if("auto"!==o.flexBasis){var s=this.parentNode;if(s){var a=this.window.getComputedStyle(s).flexDirection;this.flexDir=a.startsWith("row")?"row":"column",n=o.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var c={original:{x:i,y:r,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:d(d({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:n};this.setState(c)}}},t.prototype.onMouseMove=function(e){var t=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&y(e))try{e.preventDefault(),e.stopPropagation()}catch(e){}var n=this.props,i=n.maxWidth,r=n.maxHeight,s=n.minWidth,a=n.minHeight,c=y(e)?e.touches[0].clientX:e.clientX,l=y(e)?e.touches[0].clientY:e.clientY,u=this.state,h=u.direction,p=u.original,d=u.width,f=u.height,g=this.getParentSize(),v=x(g,this.window.innerWidth,this.window.innerHeight,i,r,s,a);i=v.maxWidth,r=v.maxHeight,s=v.minWidth,a=v.minHeight;var b=this.calculateNewSizeFromDirection(c,l),w=b.newHeight,S=b.newWidth,C=this.calculateNewMaxFromBoundary(i,r);this.props.snap&&this.props.snap.x&&(S=_(S,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(w=_(w,this.props.snap.y,this.props.snapGap));var k=this.calculateNewSizeFromAspectRatio(S,w,{width:C.maxWidth,height:C.maxHeight},{width:s,height:a});if(S=k.newWidth,w=k.newHeight,this.props.grid){var E=m(S,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),R=m(w,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),O=this.props.snapGap||0,M=0===O||Math.abs(E-S)<=O?E:S,T=0===O||Math.abs(R-w)<=O?R:w;S=M,w=T}var A={width:S-p.width,height:w-p.height};if(this.delta=A,d&&"string"==typeof d){if(d.endsWith("%")){var L=S/g.width*100;S="".concat(L,"%")}else if(d.endsWith("vw")){var P=S/this.window.innerWidth*100;S="".concat(P,"vw")}else if(d.endsWith("vh")){var N=S/this.window.innerHeight*100;S="".concat(N,"vh")}}if(f&&"string"==typeof f){if(f.endsWith("%")){var L=w/g.height*100;w="".concat(L,"%")}else if(f.endsWith("vw")){var P=w/this.window.innerWidth*100;w="".concat(P,"vw")}else if(f.endsWith("vh")){var N=w/this.window.innerHeight*100;w="".concat(N,"vh")}}var I={width:this.createSizeForCssProperty(S,"width"),height:this.createSizeForCssProperty(w,"height")};"row"===this.flexDir?I.flexBasis=I.width:"column"===this.flexDir&&(I.flexBasis=I.height);var D=this.state.width!==I.width,$=this.state.height!==I.height,B=this.state.flexBasis!==I.flexBasis,j=D||$||B;j&&(0,o.flushSync)(function(){t.setState(I)}),this.props.onResize&&j&&this.props.onResize(e,h,this.resizable,A)}},t.prototype.onMouseUp=function(e){var t,n,i=this.state,r=i.isResizing,o=i.direction;i.original,r&&this.resizable&&(this.props.onResizeStop&&this.props.onResizeStop(e,o,this.resizable,this.delta),this.props.size&&this.setState({width:null!=(t=this.props.size.width)?t:"auto",height:null!=(n=this.props.size.height)?n:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:d(d({},this.state.backgroundStyle),{cursor:"auto"})}))},t.prototype.updateSize=function(e){var t,n;this.setState({width:null!=(t=e.width)?t:"auto",height:null!=(n=e.height)?n:"auto"})},t.prototype.renderResizer=function(){var e=this,t=this.props,n=t.enable,r=t.handleStyles,o=t.handleClasses,s=t.handleWrapperStyle,a=t.handleWrapperClass,c=t.handleComponent;if(!n)return null;var l=Object.keys(n).map(function(t){return!1!==n[t]?(0,i.jsx)(h,{direction:t,onResizeStart:e.onResizeStart,replaceStyles:r&&r[t],className:o&&o[t],children:c&&c[t]?c[t]:null},t):null});return(0,i.jsx)("div",{className:a,style:s,children:l})},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce(function(t,n){return -1!==k.indexOf(n)||(t[n]=e.props[n]),t},{}),n=d(d(d({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return(0,i.jsxs)(r,d({style:n,className:this.props.className},t,{ref:function(t){t&&(e.resizable=t)},children:[this.state.isResizing&&(0,i.jsx)("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(r.PureComponent)},99721:function(e,t,n){"use strict";var i=n(36556),r=n(14035),o=i("RegExp.prototype.exec"),s=n(69675);e.exports=function(e){if(!r(e))throw new s("`regex` must be a RegExp");return function(t){return null!==o(e,t)}}},96897:function(e,t,n){"use strict";var i=n(70453),r=n(30041),o=n(30592)(),s=n(75795),a=n(69675),c=i("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");if("number"!=typeof t||t<0||t>0xffffffff||c(t)!==t)throw new a("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,l=!0;if("length"in e&&s){var u=s(e,"length");u&&!u.configurable&&(i=!1),u&&!u.writable&&(l=!1)}return(i||l||!n)&&(o?r(e,"length",t,!0,!0):r(e,"length",t)),e}},86118:function(e,t,n){var i=n(20970),r=n(22988),o=n(80563),s=n(47286),a=n(58656),c=n(81383),l=n(24008),u=n(82104),h=n(1475).ACTIONS,p=n(21839),d=n(26460),f=n(50351),g=n(14273),m=n(11548),v=u.CODES;function y(e){return 0===e.readyState||1===e.readyState?"connecting":"disconnected"}function b(e){l.EventEmitter.call(this),this.collections=Object.create(null),this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries=Object.create(null),this._presences=Object.create(null),this._docPresenceEmitter=new g,this._snapshotRequests=Object.create(null),this.seq=1,this._presenceSeq=1,this.id=null,this.agent=null,this.debug=!1,this.state=y(e),this.bindToSocket(e)}function _(e,t){var n=Error(e.message);return n.code=e.code,t&&(n.data=t),n}function w(e){return e.hasPending()}function S(e){return e.hasWritePending()}e.exports=b,l.mixin(b),b.prototype.bindToSocket=function(e){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=e;var t=y(e);this._setState(t),this.canSend=!1;var n=this;e.onmessage=function(e){try{var t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(t){f.warn("Failed to parse message",e);return}n.debug&&f.info("RECV",JSON.stringify(t));var i={data:t};if(n.emit("receive",i),i.data)try{n.handleMessage(i.data)}catch(e){d.nextTick(function(){n.emit("error",e)})}},1===e.readyState&&n._initializeHandshake(),e.onopen=function(){n._setState("connecting"),n._initializeHandshake()},e.onerror=function(e){n.emit("connection error",e)},e.onclose=function(e){"closed"===e||"Closed"===e?n._setState("closed",e):"stopped"===e||"Stopped by server"===e?n._setState("stopped",e):n._setState("disconnected",e)}},b.prototype.handleMessage=function(e){var t=null;switch(e.error&&(t=_(e.error,e),delete e.error),e.a){case h.initLegacy:return this._handleLegacyInit(e);case h.handshake:return this._handleHandshake(t,e);case h.queryFetch:var n=this.queries[e.id];n&&n._handleFetch(t,e.data,e.extra);return;case h.querySubscribe:var n=this.queries[e.id];n&&n._handleSubscribe(t,e.data,e.extra);return;case h.queryUnsubscribe:return;case h.queryUpdate:var n=this.queries[e.id];if(!n)return;if(t)return n._handleError(t);e.diff&&n._handleDiff(e.diff),d.hasOwn(e,"extra")&&n._handleExtra(e.extra);return;case h.bulkFetch:return this._handleBulkMessage(t,e,"_handleFetch");case h.bulkSubscribe:case h.bulkUnsubscribe:return this._handleBulkMessage(t,e,"_handleSubscribe");case h.snapshotFetch:case h.snapshotFetchByTimestamp:return this._handleSnapshotFetch(t,e);case h.fetch:var i=this.getExisting(e.c,e.d);i&&i._handleFetch(t,e.data);return;case h.subscribe:case h.unsubscribe:var i=this.getExisting(e.c,e.d);i&&i._handleSubscribe(t,e.data);return;case h.op:var i=this.getExisting(e.c,e.d);i&&i._handleOp(t,e);return;case h.presence:return this._handlePresence(t,e);case h.presenceSubscribe:return this._handlePresenceSubscribe(t,e);case h.presenceUnsubscribe:return this._handlePresenceUnsubscribe(t,e);case h.presenceRequest:return this._handlePresenceRequest(t,e);case h.pingPong:return this._handlePingPong(t);default:f.warn("Ignoring unrecognized message",e)}},b.prototype._handleBulkMessage=function(e,t,n){if(t.data)for(var i in t.data){var r=t.data[i],o=this.getExisting(t.c,i);o&&(e?o[n](e):r.error?o[n](_(r.error)):o[n](null,r))}else if(Array.isArray(t.b))for(var s=0;s<t.b.length;s++){var i=t.b[s],o=this.getExisting(t.c,i);o&&o[n](e)}else if(t.b)for(var i in t.b){var o=this.getExisting(t.c,i);o&&o[n](e)}else f.error("Invalid bulk message",t)},b.prototype._reset=function(){this.agent=null},b.prototype._setState=function(e,t){if(this.state!==e){if("connecting"===e&&"disconnected"!==this.state&&"stopped"!==this.state&&"closed"!==this.state||"connected"===e&&"connecting"!==this.state){var n=new u(v.ERR_CONNECTION_STATE_TRANSITION_INVALID,"Cannot transition directly from "+this.state+" to "+e);return this.emit("error",n)}for(var i in this.state=e,this.canSend="connected"===e,("disconnected"===e||"stopped"===e||"closed"===e)&&this._reset(),this.startBulk(),this.queries)this.queries[i]._onConnectionStateChanged();for(var r in this.collections){var o=this.collections[r];for(var i in o)o[i]._onConnectionStateChanged()}for(var s in this._presences)this._presences[s]._onConnectionStateChanged();for(var i in this._snapshotRequests)this._snapshotRequests[i]._onConnectionStateChanged();this.endBulk(),this.emit(e,t),this.emit("state",e,t)}},b.prototype.startBulk=function(){this.bulk||(this.bulk=Object.create(null))},b.prototype.endBulk=function(){if(this.bulk)for(var e in this.bulk){var t=this.bulk[e];this._sendBulk("f",e,t.f),this._sendBulk("s",e,t.s),this._sendBulk("u",e,t.u)}this.bulk=null},b.prototype._sendBulk=function(e,t,n){if(n){var i,r=[],o=Object.create(null),s=0;for(var a in n){var c=n[a];null==c?r.push(a):(o[a]=c,i=a,s++)}if(1===r.length){var a=r[0];this.send({a:e,c:t,d:a})}else r.length&&this.send({a:"b"+e,c:t,b:r});if(1===s){var l=o[i];this.send({a:e,c:t,d:i,v:l})}else s&&this.send({a:"b"+e,c:t,b:o})}},b.prototype._sendActions=function(e,t,n){if(this._addDoc(t),this.bulk){var i=this.bulk[t.collection]||(this.bulk[t.collection]=Object.create(null)),r=i[e]||(i[e]=Object.create(null)),o=d.hasOwn(r,t.id);return r[t.id]=n,o}var s={a:e,c:t.collection,d:t.id,v:n};this.send(s)},b.prototype.sendFetch=function(e){return this._sendActions(h.fetch,e,e.version)},b.prototype.sendSubscribe=function(e){return this._sendActions(h.subscribe,e,e.version)},b.prototype.sendUnsubscribe=function(e){return this._sendActions(h.unsubscribe,e)},b.prototype.sendOp=function(e,t){this._addDoc(e);var n={a:h.op,c:e.collection,d:e.id,v:e.version,src:t.src,seq:t.seq,x:{}};"op"in t&&(n.op=t.op),t.create&&(n.create=t.create),t.del&&(n.del=t.del),e.submitSource&&(n.x.source=t.source),this.send(n)},b.prototype.send=function(e){this.debug&&f.info("SEND",JSON.stringify(e)),this.emit("send",e),this.socket.send(JSON.stringify(e))},b.prototype.ping=function(){if(!this.canSend)throw new u(v.ERR_CANNOT_PING_OFFLINE,"Socket must be CONNECTED to ping");var e={a:h.pingPong};this.send(e)},b.prototype.close=function(){this.socket.close()},b.prototype.getExisting=function(e,t){if(this.collections[e])return this.collections[e][t]},b.prototype.get=function(e,t){var n=this.collections[e]||(this.collections[e]=Object.create(null)),r=n[t];return r||(r=n[t]=new i(this,e,t),this.emit("doc",r)),r._wantsDestroy=!1,r},b.prototype._destroyDoc=function(e){e._wantsDestroy&&(d.digAndRemove(this.collections,e.collection,e.id),e.emit("destroy"))},b.prototype._addDoc=function(e){var t=this.collections[e.collection];t||(t=this.collections[e.collection]=Object.create(null)),t[e.id]!==e&&(t[e.id]=e)},b.prototype._createQuery=function(e,t,n,i,o){var s=this.nextQueryId++,a=new r(e,this,s,t,n,i,o);return this.queries[s]=a,a.send(),a},b.prototype._destroyQuery=function(e){delete this.queries[e.id]},b.prototype.createFetchQuery=function(e,t,n,i){return this._createQuery(h.queryFetch,e,t,n,i)},b.prototype.createSubscribeQuery=function(e,t,n,i){return this._createQuery(h.querySubscribe,e,t,n,i)},b.prototype.hasPending=function(){return!!(this._firstDoc(w)||this._firstQuery(w)||this._firstSnapshotRequest())},b.prototype.hasWritePending=function(){return!!this._firstDoc(S)},b.prototype.whenNothingPending=function(e){var t=this._firstDoc(w);if(t)return void t.once("nothing pending",this._nothingPendingRetry(e));var n=this._firstQuery(w);if(n)return void n.once("ready",this._nothingPendingRetry(e));var i=this._firstSnapshotRequest();i?i.once("ready",this._nothingPendingRetry(e)):d.nextTick(e)},b.prototype._nothingPendingRetry=function(e){var t=this;return function(){d.nextTick(function(){t.whenNothingPending(e)})}},b.prototype._firstDoc=function(e){for(var t in this.collections){var n=this.collections[t];for(var i in n){var r=n[i];if(e(r))return r}}},b.prototype._firstQuery=function(e){for(var t in this.queries){var n=this.queries[t];if(e(n))return n}},b.prototype._firstSnapshotRequest=function(){for(var e in this._snapshotRequests)return this._snapshotRequests[e]},b.prototype.fetchSnapshot=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);var r=new a(this,this.nextSnapshotRequestId++,e,t,n,i);this._snapshotRequests[r.requestId]=r,r.send()},b.prototype.fetchSnapshotByTimestamp=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);var r=new c(this,this.nextSnapshotRequestId++,e,t,n,i);this._snapshotRequests[r.requestId]=r,r.send()},b.prototype._handleSnapshotFetch=function(e,t){var n=this._snapshotRequests[t.id];n&&(delete this._snapshotRequests[t.id],n._handleResponse(e,t))},b.prototype._handleLegacyInit=function(e){if(m.checkAtLeast(e,"1.1"))return this._initializeHandshake();this._initialize(e)},b.prototype._initializeHandshake=function(){this.send({a:h.handshake,id:this.id,protocol:m.major,protocolMinor:m.minor})},b.prototype._handleHandshake=function(e,t){if(e)return this.emit("error",e);this._initialize(t)},b.prototype._handlePingPong=function(e){if(e)return this.emit("error",e);this.emit("pong")},b.prototype._initialize=function(e){if("connecting"===this.state){if(e.protocol!==m.major)return this.emit("error",new u(v.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,"Unsupported protocol version: "+e.protocol));if(p.map[e.type]!==p.defaultType)return this.emit("error",new u(v.ERR_DEFAULT_TYPE_MISMATCH,e.type+" does not match the server default type"));if("string"!=typeof e.id)return this.emit("error",new u(v.ERR_CLIENT_ID_BADLY_FORMED,"Client id must be a string"));this.id=e.id,this._setState("connected")}},b.prototype.getPresence=function(e){var t=this,n=d.digOrCreate(this._presences,e,function(){return new o(t,e)});return n._wantsDestroy=!1,n},b.prototype.getDocPresence=function(e,t){var n=s.channel(e,t),i=this,r=d.digOrCreate(this._presences,n,function(){return new s(i,e,t)});return r._wantsDestroy=!1,r},b.prototype._sendPresenceAction=function(e,t,n){this._addPresence(n);var i={a:e,ch:n.channel,seq:t};return this.send(i),i.seq},b.prototype._addPresence=function(e){d.digOrCreate(this._presences,e.channel,function(){return e})},b.prototype._requestRemotePresence=function(e){this.send({a:h.presenceRequest,ch:e})},b.prototype._handlePresenceSubscribe=function(e,t){var n=d.dig(this._presences,t.ch);n&&n._handleSubscribe(e,t.seq)},b.prototype._handlePresenceUnsubscribe=function(e,t){var n=d.dig(this._presences,t.ch);n&&n._handleUnsubscribe(e,t.seq)},b.prototype._handlePresence=function(e,t){var n=d.dig(this._presences,t.ch);n&&n._receiveUpdate(e,t)},b.prototype._handlePresenceRequest=function(e,t){var n=d.dig(this._presences,t.ch);n&&n._broadcastAllLocalPresence(e,t)}},20970:function(e,t,n){var i=n(24008),r=n(50351),o=n(82104),s=n(21839),a=n(26460),c=a.clone,l=n(32017),u=n(1475).ACTIONS,h=o.CODES;function p(e,t,n){i.EventEmitter.call(this),this.connection=e,this.collection=t,this.id=n,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=null,this.pendingFetch=[],this.pendingSubscribe=[],this._isInHardRollback=!1,this.subscribed=!1,this.wantSubscribe=!1,this._wantsDestroy=!1,this.inflightOp=null,this.pendingOps=[],this.applyStack=null,this.preventCompose=!1,this.submitSource=!1,this.paused=!1,this._dataStateVersion=0}function d(e){return(e=e.filter(a.truthy)).length?function(t){a.callEach(e,t)}:null}function f(e){delete e.op,delete e.create,delete e.del}function g(e,t){if(e.del)return f(t);if(t.del)return new o(h.ERR_DOC_WAS_DELETED,"Document was deleted");if(t.create)return new o(h.ERR_DOC_ALREADY_CREATED,"Document already created");if("op"in t){if(e.create)return new o(h.ERR_DOC_ALREADY_CREATED,"Document already created");if(e.type.transformX){var n=e.type.transformX(e.op,t.op);e.op=n[0],t.op=n[1]}else{var i=e.type.transform(e.op,t.op,"left"),r=e.type.transform(t.op,e.op,"right");e.op=i,t.op=r}}}e.exports=p,i.mixin(p),p.prototype.destroy=function(e){this._wantsDestroy=!0;var t=this;t.whenNothingPending(function(){t.wantSubscribe?t.unsubscribe(function(n){if(n)return e?e(n):t.emit("error",n);t.connection._destroyDoc(t),e&&e()}):(t.connection._destroyDoc(t),e&&e())})},p.prototype._setType=function(e){if("string"==typeof e&&(e=s.map[e]),e)this.type=e;else if(null===e)this.type=e,this._setData(void 0);else{var t=new o(h.ERR_DOC_TYPE_NOT_RECOGNIZED,"Missing type "+e);return this.emit("error",t)}},p.prototype._setData=function(e){this.data=e,this._dataStateVersion++},p.prototype.ingestSnapshot=function(e,t){if(!e)return t&&t();if("number"!=typeof e.v){var n=new o(h.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}if(this.type||this.hasWritePending()){if(null==this.version){if(this.hasWritePending())return t&&this.once("no write pending",t);var n=new o(h.ERR_DOC_MISSING_VERSION,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}return e.v>this.version?this.fetch(t):t&&t()}if(this.version>e.v)return t&&t();this.version=e.v;var i=void 0===e.type?s.defaultType:e.type;this._setType(i),this._setData(this.type&&this.type.deserialize?this.type.deserialize(e.data):e.data),this.emit("load"),t&&t()},p.prototype.whenNothingPending=function(e){var t=this;a.nextTick(function(){t.hasPending()?t.once("nothing pending",e):e()})},p.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe||this.pendingFetch.length||this.pendingSubscribe.length)},p.prototype.hasWritePending=function(){return!!(this.inflightOp||this.pendingOps.length)},p.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),this.hasPending()||this.emit("nothing pending"))},p.prototype._emitResponseError=function(e,t){if(e&&e.code===h.ERR_SNAPSHOT_READ_SILENT_REJECTION){this.wantSubscribe=!1,t&&t(),this._emitNothingPending();return}if(t){t(e),this._emitNothingPending();return}this._emitNothingPending(),this.emit("error",e)},p.prototype._handleFetch=function(e,t){var n=this.pendingFetch;this.pendingFetch=[];var i=this.inflightFetch.shift();if(i&&n.unshift(i),n.length&&(i=function(e){a.callEach(n,e)}),e)return this._emitResponseError(e,i);this.ingestSnapshot(t,i),this._emitNothingPending()},p.prototype._handleSubscribe=function(e,t){var n,i=this.inflightSubscribe;this.inflightSubscribe=null;var r=this.pendingFetch;if(this.pendingFetch=[],i.callback&&r.push(i.callback),r.length&&(n=function(e){a.callEach(r,e)}),e)return this._emitResponseError(e,n);this.subscribed=i.wantSubscribe,this.subscribed?this.ingestSnapshot(t,n):n&&n(),this._emitNothingPending(),this._flushSubscribe()},p.prototype._handleOp=function(e,t){if(e)return e.code===h.ERR_NO_OP&&t.seq===this.inflightOp.seq?this.fetch(this._clearInflightOp.bind(this)):this.inflightOp?this._rollback(e):this.emit("error",e);if(this.inflightOp&&t.src===this.inflightOp.src&&t.seq===this.inflightOp.seq)return void this._opAcknowledged(t);if(null==this.version||t.v>this.version)return void this.fetch();if(!(t.v<this.version)){if(this.inflightOp){var n=g(this.inflightOp,t);if(n)return this._hardRollback(n)}for(var i=0;i<this.pendingOps.length;i++){var n=g(this.pendingOps[i],t);if(n)return this._hardRollback(n)}this.version++;try{this._otApply(t,!1)}catch(e){return this._hardRollback(e)}}},p.prototype._onConnectionStateChanged=function(){this.connection.canSend?(this.flush(),this._resubscribe()):(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,this.inflightSubscribe&&(this.inflightSubscribe.wantSubscribe?(this.pendingSubscribe.unshift(this.inflightSubscribe),this.inflightSubscribe=null):this._handleSubscribe()),this.inflightFetch.length&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch),this.inflightFetch.length=0))},p.prototype._resubscribe=function(){if(!this.pendingSubscribe.length&&this.wantSubscribe)return this.subscribe();!this.pendingSubscribe.some(function(e){return e.wantSubscribe})&&this.pendingFetch.length&&this.fetch(),this._flushSubscribe()},p.prototype.fetch=function(e){this._fetch({},e)},p.prototype._fetch=function(e,t){this.pendingFetch.push(t),this.connection.canSend&&(e.force||!this.inflightFetch.length)&&(this.inflightFetch.push(this.pendingFetch.shift()),this.connection.sendFetch(this))},p.prototype.subscribe=function(e){var t=!0;this._queueSubscribe(t,e)},p.prototype.unsubscribe=function(e){var t=!1;this._queueSubscribe(t,e)},p.prototype._queueSubscribe=function(e,t){var n=this.pendingSubscribe[this.pendingSubscribe.length-1]||this.inflightSubscribe;if(n&&n.wantSubscribe===e){n.callback=d([n.callback,t]);return}this.pendingSubscribe.push({wantSubscribe:!!e,callback:t}),this._flushSubscribe()},p.prototype._flushSubscribe=function(){if(!this.inflightSubscribe&&this.pendingSubscribe.length){if(this.connection.canSend){this.inflightSubscribe=this.pendingSubscribe.shift(),this.wantSubscribe=this.inflightSubscribe.wantSubscribe,this.wantSubscribe?this.connection.sendSubscribe(this):(this.subscribed=!1,this.connection.sendUnsubscribe(this));return}if(!this.pendingSubscribe[0].wantSubscribe){this.inflightSubscribe=this.pendingSubscribe.shift();var e=this;a.nextTick(function(){e._handleSubscribe()})}}},p.prototype.flush=function(){this.connection.canSend&&!this.inflightOp&&!this.paused&&this.pendingOps.length&&this._sendOp()},p.prototype._otApply=function(e,t){if("op"in e){if(!this.type)throw new o(h.ERR_DOC_DOES_NOT_EXIST,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);if(this.emit("before op batch",e.op,t),!t&&this.type===s.defaultType&&e.op.length>1){this.applyStack||(this.applyStack=[]);for(var n=this.applyStack.length,i=0;i<e.op.length;i++){var r={op:[e.op[i]]};this.emit("before op",r.op,t,e.src);for(var a=n;a<this.applyStack.length;a++){var c=g(this.applyStack[a],r);if(c)return this._hardRollback(c)}this._setData(this.type.apply(this.data,r.op)),this.emit("op",r.op,t,e.src)}this.emit("op batch",e.op,t),this._popApplyStack(n);return}this.emit("before op",e.op,t,e.src),this._setData(this.type.apply(this.data,e.op)),this.emit("op",e.op,t,e.src),this.emit("op batch",e.op,t);return}if(e.create){this._setType(e.create.type),this.type.deserialize?this.type.createDeserialized?this._setData(this.type.createDeserialized(e.create.data)):this._setData(this.type.deserialize(this.type.create(e.create.data))):this._setData(this.type.create(e.create.data)),this.emit("create",t);return}if(e.del){var l=this.data;this._setType(null),this.emit("del",l,t);return}},p.prototype._sendOp=function(){if(this.connection.canSend){var e=this.connection.id;this.inflightOp||(this.inflightOp=this.pendingOps.shift());var t=this.inflightOp;if(!t){var n=new o(h.ERR_INFLIGHT_OP_MISSING,"No op to send on call to _sendOp");return this.emit("error",n)}if(t.sentAt=Date.now(),t.retries=null==t.retries?0:t.retries+1,null==t.seq){if(this.connection.seq>=a.MAX_SAFE_INTEGER)return this.emit("error",new o(h.ERR_CONNECTION_SEQ_INTEGER_OVERFLOW,"Connection seq has exceeded the max safe integer, maybe from being open for too long"));t.seq=this.connection.seq++}this.connection.sendOp(this,t),null==t.src&&(t.src=e)}},p.prototype._submit=function(e,t,n){if(t||(t=!0),"op"in e){if(!this.type){if(this._isInHardRollback)var i=new o(h.ERR_DOC_IN_HARD_ROLLBACK,"Cannot submit op. Document is performing hard rollback. "+this.collection+"."+this.id);else var i=new o(h.ERR_DOC_DOES_NOT_EXIST,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return n?n(i):this.emit("error",i)}this.type.normalize&&(e.op=this.type.normalize(e.op))}try{this._pushOp(e,t,n),this._otApply(e,t)}catch(e){return this._hardRollback(e)}var r=this;a.nextTick(function(){r.flush()})},p.prototype._pushOp=function(e,t,n){if(e.source=t,this.applyStack)this.applyStack.push(e);else{var i=this._tryCompose(e);if(i)return void i.callbacks.push(n)}e.type=this.type,e.callbacks=[n],this.pendingOps.push(e)},p.prototype._popApplyStack=function(e){if(e>0){this.applyStack.length=e;return}var t=this.applyStack[0];if(this.applyStack=null,t){var n=this.pendingOps.indexOf(t);if(-1!==n)for(var i=this.pendingOps.splice(n),n=0;n<i.length;n++){var t=i[n],r=this._tryCompose(t);r?r.callbacks=r.callbacks.concat(t.callbacks):this.pendingOps.push(t)}}},p.prototype._tryCompose=function(e){if(!this.preventCompose){var t=this.pendingOps[this.pendingOps.length-1];if(t&&!t.sentAt&&(!this.submitSource||l(e.source,t.source))){if(t.create&&"op"in e)return t.create.data=this.type.apply(t.create.data,e.op),t;if("op"in t&&"op"in e&&this.type.compose)return t.op=this.type.compose(t.op,e.op),t}}},p.prototype.submitOp=function(e,t,n){"function"==typeof t&&(n=t,t=null);var i={op:e},r=t&&t.source;this._submit(i,r,n)},p.prototype.create=function(e,t,n,i){if("function"==typeof t?(i=t,n=null,t=null):"function"==typeof n&&(i=n,n=null),t||(t=s.defaultType.uri),this.type){var r=new o(h.ERR_DOC_ALREADY_CREATED,"Document already exists");return i?i(r):this.emit("error",r)}var a={create:{type:t,data:e}},c=n&&n.source;this._submit(a,c,i)},p.prototype.del=function(e,t){if("function"==typeof e&&(t=e,e=null),!this.type){var n=new o(h.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");return t?t(n):this.emit("error",n)}var i={del:!0},r=e&&e.source;this._submit(i,r,t)},p.prototype.pause=function(){this.paused=!0},p.prototype.resume=function(){this.paused=!1,this.flush()},p.prototype.toSnapshot=function(){return{v:this.version,data:c(this.data),type:this.type.uri}},p.prototype._opAcknowledged=function(e){if(this.inflightOp.create)this.version=e.v;else if(e.v!==this.version)return r.warn("Invalid version from server. Expected: "+this.version+" Received: "+e.v,e),this.fetch();if(e[u.fixup])for(var t=0;t<e[u.fixup].length;t++){for(var n=e[u.fixup][t],i=0;i<this.pendingOps.length;i++){var o=g(this.pendingOps[t],n);if(o)return this._hardRollback(o)}try{this._otApply(n,!1)}catch(e){return this._hardRollback(e)}}this.version++,this._clearInflightOp()},p.prototype._rollback=function(e){var t=this.inflightOp;if(!("op"in t&&t.type.invert))return this._hardRollback(e);try{t.op=t.type.invert(t.op)}catch(t){return this._hardRollback(e)}for(var n=0;n<this.pendingOps.length;n++){var i=g(this.pendingOps[n],t);if(i)return this._hardRollback(i)}try{this._otApply(t,!1)}catch(e){return this._hardRollback(e)}if(e.code===h.ERR_OP_SUBMIT_REJECTED)return this._clearInflightOp(null);this._clearInflightOp(e)},p.prototype._hardRollback=function(e){this._isInHardRollback=!0;var t=this.pendingOps,n=this.inflightOp;this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var i=this;this._fetch({force:!0},function(s){if(i._isInHardRollback=!1,s&&(r.error("Hard rollback doc fetch failed.",s,n),i.emit("error",new o(h.ERR_HARD_ROLLBACK_FETCH_FAILED,"Hard rollback fetch failed: "+s.message))),e.code===h.ERR_OP_SUBMIT_REJECTED){if(n&&(a.callEach(n.callbacks),n=null),!t.length)return;e=new o(h.ERR_PENDING_OP_REMOVED_BY_OP_SUBMIT_REJECTED,"Discarding pending op because of hard rollback during ERR_OP_SUBMIT_REJECTED")}n&&t.unshift(n);for(var c=!!t.length,l=0;l<t.length;l++)c=a.callEach(t[l].callbacks,e)&&c;e&&!c&&i.emit("error",e)})},p.prototype._clearInflightOp=function(e){var t=this.inflightOp;this.inflightOp=null;var n=a.callEach(t.callbacks,e);if(this.flush(),this._emitNothingPending(),e&&!n)return this.emit("error",e)}},99092:function(e,t,n){t.Connection=n(86118),t.Doc=n(20970),t.Error=n(82104),t.Query=n(22988),t.types=n(21839),t.logger=n(50351)},14273:function(e,t,n){var i=n(26460),r=n(37007).EventEmitter,o=["create","del","destroy","load","op"];function s(){this._docs=Object.create(null),this._forwarders=Object.create(null),this._emitters=Object.create(null)}e.exports=s,s.prototype.addEventListener=function(e,t,n){this._registerDoc(e),i.dig(this._emitters,e.collection,e.id).on(t,n)},s.prototype.removeEventListener=function(e,t,n){var r=i.dig(this._emitters,e.collection,e.id);r&&(r.off(t,n),1===r._eventsCount&&this._unregisterDoc(e))},s.prototype._registerDoc=function(e){var t=!0;if(i.digOrCreate(this._docs,e.collection,e.id,function(){return t=!1,e}),!t){var n=i.digOrCreate(this._emitters,e.collection,e.id,function(){var e=new r;return e.setMaxListeners(1e3),e}),s=this;o.forEach(function(t){var r=i.digOrCreate(s._forwarders,e.collection,e.id,t,function(){return n.emit.bind(n,t)});e.on(t,r)}),this.addEventListener(e,"destroy",this._unregisterDoc.bind(this,e))}},s.prototype._unregisterDoc=function(e){var t=i.dig(this._forwarders,e.collection,e.id);for(var n in t)e.off(n,t[n]);i.dig(this._emitters,e.collection,e.id).removeAllListeners(),i.digAndRemove(this._forwarders,e.collection,e.id),i.digAndRemove(this._emitters,e.collection,e.id),i.digAndRemove(this._docs,e.collection,e.id)}},47286:function(e,t,n){var i=n(80563),r=n(58180),o=n(49381);function s(e,t,n){var r=s.channel(t,n);i.call(this,e,r),this.collection=t,this.id=n}e.exports=s,s.prototype=Object.create(i.prototype),s.channel=function(e,t){return e+"."+t},s.prototype._createLocalPresence=function(e){return new r(this,e)},s.prototype._createRemotePresence=function(e){return new o(this,e)}},58180:function(e,t,n){var i=n(55185),r=n(82104),o=n(26460),s=r.CODES;function a(e,t){i.call(this,e,t),this.collection=this.presence.collection,this.id=this.presence.id,this._doc=this.connection.get(this.collection,this.id),this._emitter=this.connection._docPresenceEmitter,this._isSending=!1,this._docDataVersionByPresenceVersion=Object.create(null),this._opHandler=this._transformAgainstOp.bind(this),this._createOrDelHandler=this._handleCreateOrDel.bind(this),this._loadHandler=this._handleLoad.bind(this),this._destroyHandler=this.destroy.bind(this),this._registerWithDoc()}e.exports=a,a.prototype=Object.create(i.prototype),a.prototype.submit=function(e,t){if(!this._doc.type){if(null===e)return this._callbackOrEmit(null,t);var n=null;return n=this._doc._isInHardRollback?{code:s.ERR_DOC_IN_HARD_ROLLBACK,message:"Cannot submit presence. Document is processing hard rollback"}:{code:s.ERR_DOC_DOES_NOT_EXIST,message:"Cannot submit presence. Document has not been created"},this._callbackOrEmit(n,t)}this._docDataVersionByPresenceVersion[this.presenceVersion]=this._doc._dataStateVersion,i.prototype.submit.call(this,e,t)},a.prototype.destroy=function(e){this._emitter.removeEventListener(this._doc,"op",this._opHandler),this._emitter.removeEventListener(this._doc,"create",this._createOrDelHandler),this._emitter.removeEventListener(this._doc,"del",this._createOrDelHandler),this._emitter.removeEventListener(this._doc,"load",this._loadHandler),this._emitter.removeEventListener(this._doc,"destroy",this._destroyHandler),i.prototype.destroy.call(this,e)},a.prototype._sendPending=function(){if(!this._isSending){this._isSending=!0;var e=this;this._doc.whenNothingPending(function(){e._isSending=!1,e.connection.canSend&&(e._pendingMessages.forEach(function(t){t.t=e._doc.type.uri,t.v=e._doc.version,e.connection.send(t)}),e._pendingMessages=[],e._docDataVersionByPresenceVersion=Object.create(null))})}},a.prototype._registerWithDoc=function(){this._emitter.addEventListener(this._doc,"op",this._opHandler),this._emitter.addEventListener(this._doc,"create",this._createOrDelHandler),this._emitter.addEventListener(this._doc,"del",this._createOrDelHandler),this._emitter.addEventListener(this._doc,"load",this._loadHandler),this._emitter.addEventListener(this._doc,"destroy",this._destroyHandler)},a.prototype._transformAgainstOp=function(e,t){var n=this,i=this._doc._dataStateVersion;this._pendingMessages.forEach(function(r){if(!(n._docDataVersionByPresenceVersion[r.pv]>=i))try{r.p=n._transformPresence(r.p,e,t),n._docDataVersionByPresenceVersion[r.pv]=i}catch(e){var o=n._getCallback(r.pv);n._callbackOrEmit(e,o)}});try{this.value=this._transformPresence(this.value,e,t)}catch(e){this.emit("error",e)}},a.prototype._handleCreateOrDel=function(){this._pendingMessages.forEach(function(e){e.p=null}),this.value=null},a.prototype._handleLoad=function(){this.value=null,this._pendingMessages=[],this._docDataVersionByPresenceVersion=Object.create(null)},a.prototype._message=function(){var e=i.prototype._message.call(this);return e.c=this.collection,e.d=this.id,e.v=null,e.t=null,e},a.prototype._transformPresence=function(e,t,n){var i=this._doc.type;if(!o.supportsPresence(i))throw new r(s.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE,"Type does not support presence: "+i.name);return i.transformPresence(e,t,n)}},55185:function(e,t,n){var i=n(24008),r=n(1475).ACTIONS,o=n(26460);function s(e,t){if(i.EventEmitter.call(this),!t||"string"!=typeof t)throw Error("LocalPresence presenceId must be a string");this.presence=e,this.presenceId=t,this.connection=e.connection,this.presenceVersion=0,this.value=null,this._pendingMessages=[],this._callbacksByPresenceVersion=Object.create(null)}e.exports=s,i.mixin(s),s.prototype.submit=function(e,t){this.value=e,this.send(t)},s.prototype.send=function(e){var t=this._message();this._pendingMessages.push(t),this._callbacksByPresenceVersion[t.pv]=e,this._sendPending()},s.prototype.destroy=function(e){var t=this;this.submit(null,function(n){if(n)return t._callbackOrEmit(n,e);delete t.presence.localPresences[t.presenceId],e&&e()})},s.prototype._sendPending=function(){if(this.connection.canSend){var e=this;this._pendingMessages.forEach(function(t){e.connection.send(t)}),this._pendingMessages=[]}},s.prototype._ack=function(e,t){var n=this._getCallback(t);this._callbackOrEmit(e,n)},s.prototype._message=function(){return{a:r.presence,ch:this.presence.channel,id:this.presenceId,p:this.value,pv:this.presenceVersion++}},s.prototype._getCallback=function(e){var t=this._callbacksByPresenceVersion[e];return delete this._callbacksByPresenceVersion[e],t},s.prototype._callbackOrEmit=function(e,t){if(t)return o.nextTick(t,e);e&&this.emit("error",e)}},80563:function(e,t,n){var i=n(24008),r=n(55185),o=n(67436),s=n(26460),a=n(89380),c=n(39590),l=n(1475).ACTIONS;function u(e,t){if(i.EventEmitter.call(this),!t||"string"!=typeof t)throw Error("Presence channel must be provided");this.connection=e,this.channel=t,this.wantSubscribe=!1,this.subscribed=!1,this.remotePresences=Object.create(null),this.localPresences=Object.create(null),this._remotePresenceInstances=Object.create(null),this._subscriptionCallbacksBySeq=Object.create(null),this._wantsDestroy=!1}e.exports=u,i.mixin(u),u.prototype.subscribe=function(e){this._sendSubscriptionAction(!0,e)},u.prototype.unsubscribe=function(e){this._sendSubscriptionAction(!1,e)},u.prototype.create=function(e){if(this._wantsDestroy)throw Error("Presence is being destroyed");e=e||c();var t=this._createLocalPresence(e);return this.localPresences[e]=t,t},u.prototype.destroy=function(e){this._wantsDestroy=!0;var t=this,n=Object.keys(t.localPresences);this.unsubscribe(function(i){if(i)return t._callbackOrEmit(i,e);var r=Object.keys(t._remotePresenceInstances);a.parallel([function(e){a.each(n,function(e,n){var i=t.localPresences[e];if(!i)return n();i.destroy(n)},e)},function(e){if(!t._wantsDestroy)return e();a.each(r,function(e,n){t._remotePresenceInstances[e].destroy(n)},e)}],function(n){t._wantsDestroy&&delete t.connection._presences[t.channel],t._callbackOrEmit(n,e)})})},u.prototype._sendSubscriptionAction=function(e,t){if((e=!!e)===this.wantSubscribe){if(!t)return;if(e===this.subscribed)return s.nextTick(t);if(Object.keys(this._subscriptionCallbacksBySeq).length)return this._combineSubscribeCallbackWithLastAdded(t)}this.wantSubscribe=e;var n=this.wantSubscribe?l.presenceSubscribe:l.presenceUnsubscribe,i=this.connection._presenceSeq++;this._subscriptionCallbacksBySeq[i]=t,this.connection.canSend&&this.connection._sendPresenceAction(n,i,this)},u.prototype._requestRemotePresence=function(){this.connection._requestRemotePresence(this.channel)},u.prototype._handleSubscribe=function(e,t){this.wantSubscribe&&(this.subscribed=!0);var n=this._subscriptionCallback(t);this._callbackOrEmit(e,n)},u.prototype._handleUnsubscribe=function(e,t){this.subscribed=!1;var n=this._subscriptionCallback(t);this._callbackOrEmit(e,n)},u.prototype._receiveUpdate=function(e,t){var n=s.dig(this.localPresences,t.id);if(n)return n._ack(e,t.pv);if(e)return this.emit("error",e);var i=this;s.digOrCreate(this._remotePresenceInstances,t.id,function(){return i._createRemotePresence(t.id)}).receiveUpdate(t)},u.prototype._updateRemotePresence=function(e){this.remotePresences[e.presenceId]=e.value,null===e.value&&this._removeRemotePresence(e.presenceId),this.emit("receive",e.presenceId,e.value)},u.prototype._broadcastAllLocalPresence=function(e){if(e)return this.emit("error",e);for(var t in this.localPresences){var n=this.localPresences[t];null!==n.value&&n.send()}},u.prototype._removeRemotePresence=function(e){this._remotePresenceInstances[e].destroy(),delete this._remotePresenceInstances[e],delete this.remotePresences[e]},u.prototype._onConnectionStateChanged=function(){if(!this.connection.canSend){this.subscribed=!1;return}for(var e in this._resubscribe(),this.localPresences)this.localPresences[e]._sendPending()},u.prototype._resubscribe=function(){var e=[];for(var t in this._subscriptionCallbacksBySeq){var n=this._subscriptionCallback(t);e.push(n)}if(!this.wantSubscribe)return this._callEachOrEmit(e);var i=this;this.subscribe(function(t){i._callEachOrEmit(e,t)})},u.prototype._subscriptionCallback=function(e){var t=this._subscriptionCallbacksBySeq[e];return delete this._subscriptionCallbacksBySeq[e],t},u.prototype._callbackOrEmit=function(e,t){if(t)return s.nextTick(t,e);e&&this.emit("error",e)},u.prototype._createLocalPresence=function(e){return new r(this,e)},u.prototype._createRemotePresence=function(e){return new o(this,e)},u.prototype._callEachOrEmit=function(e,t){!s.callEach(e,t)&&t&&this.emit("error",t)},u.prototype._combineSubscribeCallbackWithLastAdded=function(e){var t=Object.keys(this._subscriptionCallbacksBySeq),n=t[t.length-1],i=this._subscriptionCallbacksBySeq[n];if(!i)return this._subscriptionCallbacksBySeq[n]=e;this._subscriptionCallbacksBySeq[n]=function(t){i(t),e(t)}}},49381:function(e,t,n){var i=n(67436),r=n(92319);function o(e,t){i.call(this,e,t),this.collection=this.presence.collection,this.id=this.presence.id,this.src=null,this.presenceVersion=null,this._doc=this.connection.get(this.collection,this.id),this._emitter=this.connection._docPresenceEmitter,this._pending=null,this._opCache=null,this._pendingSetPending=!1,this._opHandler=this._handleOp.bind(this),this._createDelHandler=this._handleCreateDel.bind(this),this._loadHandler=this._handleLoad.bind(this),this._registerWithDoc()}e.exports=o,o.prototype=Object.create(i.prototype),o.prototype.receiveUpdate=function(e){this._pending&&e.pv<this._pending.pv||(this.src=e.src,this._pending=e,this._setPendingPresence())},o.prototype.destroy=function(e){this._emitter.removeEventListener(this._doc,"op",this._opHandler),this._emitter.removeEventListener(this._doc,"create",this._createDelHandler),this._emitter.removeEventListener(this._doc,"del",this._createDelHandler),this._emitter.removeEventListener(this._doc,"load",this._loadHandler),i.prototype.destroy.call(this,e)},o.prototype._registerWithDoc=function(){this._emitter.addEventListener(this._doc,"op",this._opHandler),this._emitter.addEventListener(this._doc,"create",this._createDelHandler),this._emitter.addEventListener(this._doc,"del",this._createDelHandler),this._emitter.addEventListener(this._doc,"load",this._loadHandler)},o.prototype._setPendingPresence=function(){if(!this._pendingSetPending){this._pendingSetPending=!0;var e=this;this._doc.whenNothingPending(function(){return(e._pendingSetPending=!1,e._pending)?e._pending.pv<e.presenceVersion?e._pending=null:e._pending.v>e._doc.version?e._doc.fetch():void(e._catchUpStalePresence()&&(e.value=e._pending.p,e.presenceVersion=e._pending.pv,e._pending=null,e.presence._updateRemotePresence(e))):void 0})}},o.prototype._handleOp=function(e,t,n){var i=n===this.src;this._transformAgainstOp(e,i),this._cacheOp(e,i),this._setPendingPresence()},i.prototype._handleCreateDel=function(){this._cacheOp(null),this._setPendingPresence()},i.prototype._handleLoad=function(){this.value=null,this._pending=null,this._opCache=null,this.presence._updateRemotePresence(this)},o.prototype._transformAgainstOp=function(e,t){if(this.value){try{this.value=this._doc.type.transformPresence(this.value,e,t)}catch(e){return this.presence.emit("error",e)}this.presence._updateRemotePresence(this)}},o.prototype._catchUpStalePresence=function(){if(this._pending.v>=this._doc.version)return!0;if(!this._opCache)return this._startCachingOps(),this._doc.fetch(),this.presence._requestRemotePresence(),!1;for(;this._opCache[this._pending.v];){var e=this._opCache[this._pending.v],t=e.op,n=e.isOwnOp;null===t?(this._pending.p=null,this._pending.v++):r.transformPresence(this._pending,t,n)}var i=this._pending.v>=this._doc.version;return i&&this._stopCachingOps(),i},o.prototype._startCachingOps=function(){this._opCache=[]},o.prototype._stopCachingOps=function(){this._opCache=null},o.prototype._cacheOp=function(e,t){this._opCache&&(e=e?{op:e}:null,this._opCache[this._doc.version-1]={op:e,isOwnOp:t})}},67436:function(e,t,n){var i=n(26460);function r(e,t){this.presence=e,this.presenceId=t,this.connection=this.presence.connection,this.value=null,this.presenceVersion=0}e.exports=r,r.prototype.receiveUpdate=function(e){e.pv<this.presenceVersion||(this.value=e.p,this.presenceVersion=e.pv,this.presence._updateRemotePresence(this))},r.prototype.destroy=function(e){delete this.presence._remotePresenceInstances[this.presenceId],delete this.presence.remotePresences[this.presenceId],e&&i.nextTick(e)}},22988:function(e,t,n){var i=n(24008),r=n(1475).ACTIONS,o=n(26460);function s(e,t,n,r,o,s,a){i.EventEmitter.call(this),this.action=e,this.connection=t,this.id=n,this.collection=r,this.query=o,this.results=null,s&&s.results&&(this.results=s.results,delete s.results),this.extra=void 0,this.options=s,this.callback=a,this.ready=!1,this.sent=!1}e.exports=s,i.mixin(s),s.prototype.hasPending=function(){return!this.ready},s.prototype.send=function(){if(this.connection.canSend){var e={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(e.o=this.options),this.results){for(var t=[],n=0;n<this.results.length;n++){var i=this.results[n];t.push([i.id,i.version])}e.r=t}this.connection.send(e),this.sent=!0}},s.prototype.destroy=function(e){this.connection.canSend&&this.action===r.querySubscribe&&this.connection.send({a:r.queryUnsubscribe,id:this.id}),this.connection._destroyQuery(this),e&&o.nextTick(e)},s.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},s.prototype._handleFetch=function(e,t,n){this.connection._destroyQuery(this),this._handleResponse(e,t,n)},s.prototype._handleSubscribe=function(e,t,n){this._handleResponse(e,t,n)},s.prototype._handleResponse=function(e,t,n){var i=this.callback;if(this.callback=null,e)return this._finishResponse(e,i);if(!t)return this._finishResponse(null,i);var r=this,o=1,s=function(e){if(e)return r._finishResponse(e,i);--o||r._finishResponse(null,i)};if(Array.isArray(t))o+=t.length,this.results=this._ingestSnapshots(t,s),this.extra=n;else for(var a in t){o++;var c=t[a];this.connection.get(c.c||this.collection,a).ingestSnapshot(c,s)}s()},s.prototype._ingestSnapshots=function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i],o=this.connection.get(r.c||this.collection,r.d);o.ingestSnapshot(r,t),n.push(o)}return n},s.prototype._finishResponse=function(e,t){if(this.emit("ready"),this.ready=!0,e)return(this.connection._destroyQuery(this),t)?t(e):this.emit("error",e);t&&t(null,this.results,this.extra)},s.prototype._handleError=function(e){this.emit("error",e)},s.prototype._handleDiff=function(e){for(var t=0;t<e.length;t++){var n=e[t];"insert"===n.type&&(n.values=this._ingestSnapshots(n.values))}for(var t=0;t<e.length;t++){var n=e[t];switch(n.type){case"insert":var i=n.values;Array.prototype.splice.apply(this.results,[n.index,0].concat(i)),this.emit("insert",i,n.index);break;case"remove":var r=n.howMany||1,o=this.results.splice(n.index,r);this.emit("remove",o,n.index);break;case"move":var r=n.howMany||1,s=this.results.splice(n.from,r);Array.prototype.splice.apply(this.results,[n.to,0].concat(s)),this.emit("move",s,n.from,n.to)}}this.emit("changed",this.results)},s.prototype._handleExtra=function(e){this.extra=e,this.emit("extra",e)}},29029:function(e,t,n){var i=n(86576),r=n(24008);function o(e,t,n,i,o){if(r.EventEmitter.call(this),"function"!=typeof o)throw Error("Callback is required for SnapshotRequest");this.requestId=t,this.connection=e,this.id=i,this.collection=n,this.callback=o,this.sent=!1}e.exports=o,r.mixin(o),o.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)},o.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1},o.prototype._handleResponse=function(e,t){if(this.emit("ready"),e)return this.callback(e);var n=t.meta?t.meta:null,r=new i(this.id,t.v,t.type,t.data,n);this.callback(null,r)}},81383:function(e,t,n){var i=n(29029),r=n(26460),o=n(1475).ACTIONS;function s(e,t,n,o,s,a){if(i.call(this,e,t,n,o,a),!r.isValidTimestamp(s))throw Error("Snapshot timestamp must be a positive integer or null");this.timestamp=s}e.exports=s,s.prototype=Object.create(i.prototype),s.prototype._message=function(){return{a:o.snapshotFetchByTimestamp,id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}}},58656:function(e,t,n){var i=n(29029),r=n(26460),o=n(1475).ACTIONS;function s(e,t,n,o,s,a){if(i.call(this,e,t,n,o,a),!r.isValidVersion(s))throw Error("Snapshot version must be a positive integer or null");this.version=s}e.exports=s,s.prototype=Object.create(i.prototype),s.prototype._message=function(){return{a:o.snapshotFetch,id:this.requestId,c:this.collection,d:this.id,v:this.version}}},24008:function(e,t,n){var i=n(37007).EventEmitter;function r(e){for(var t in i.prototype)e.prototype[t]=i.prototype[t]}t.EventEmitter=i,t.mixin=r},82104:function(e){function t(e,n){this.code=e,this.message=n||"",Error.captureStackTrace?Error.captureStackTrace(this,t):this.stack=Error().stack}t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.prototype.name="ShareDBError",t.CODES={ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT:"ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT",ERR_APPLY_SNAPSHOT_NOT_PROVIDED:"ERR_APPLY_SNAPSHOT_NOT_PROVIDED",ERR_FIXUP_IS_ONLY_VALID_ON_APPLY:"ERR_FIXUP_IS_ONLY_VALID_ON_APPLY",ERR_CANNOT_FIXUP_DELETION:"ERR_CANNOT_FIXUP_DELETION",ERR_CLIENT_ID_BADLY_FORMED:"ERR_CLIENT_ID_BADLY_FORMED",ERR_CANNOT_PING_OFFLINE:"ERR_CANNOT_PING_OFFLINE",ERR_CONNECTION_SEQ_INTEGER_OVERFLOW:"ERR_CONNECTION_SEQ_INTEGER_OVERFLOW",ERR_CONNECTION_STATE_TRANSITION_INVALID:"ERR_CONNECTION_STATE_TRANSITION_INVALID",ERR_DATABASE_ADAPTER_NOT_FOUND:"ERR_DATABASE_ADAPTER_NOT_FOUND",ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE:"ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE",ERR_DATABASE_METHOD_NOT_IMPLEMENTED:"ERR_DATABASE_METHOD_NOT_IMPLEMENTED",ERR_DEFAULT_TYPE_MISMATCH:"ERR_DEFAULT_TYPE_MISMATCH",ERR_DOC_MISSING_VERSION:"ERR_DOC_MISSING_VERSION",ERR_DOC_ALREADY_CREATED:"ERR_DOC_ALREADY_CREATED",ERR_DOC_DOES_NOT_EXIST:"ERR_DOC_DOES_NOT_EXIST",ERR_DOC_TYPE_NOT_RECOGNIZED:"ERR_DOC_TYPE_NOT_RECOGNIZED",ERR_DOC_WAS_DELETED:"ERR_DOC_WAS_DELETED",ERR_DOC_IN_HARD_ROLLBACK:"ERR_DOC_IN_HARD_ROLLBACK",ERR_INFLIGHT_OP_MISSING:"ERR_INFLIGHT_OP_MISSING",ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION:"ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION",ERR_MAX_SUBMIT_RETRIES_EXCEEDED:"ERR_MAX_SUBMIT_RETRIES_EXCEEDED",ERR_MESSAGE_BADLY_FORMED:"ERR_MESSAGE_BADLY_FORMED",ERR_MILESTONE_ARGUMENT_INVALID:"ERR_MILESTONE_ARGUMENT_INVALID",ERR_NO_OP:"ERR_NO_OP",ERR_OP_ALREADY_SUBMITTED:"ERR_OP_ALREADY_SUBMITTED",ERR_OP_NOT_ALLOWED_IN_PROJECTION:"ERR_OP_NOT_ALLOWED_IN_PROJECTION",ERR_OP_SUBMIT_REJECTED:"ERR_OP_SUBMIT_REJECTED",ERR_PENDING_OP_REMOVED_BY_OP_SUBMIT_REJECTED:"ERR_PENDING_OP_REMOVED_BY_OP_SUBMIT_REJECTED",ERR_HARD_ROLLBACK_FETCH_FAILED:"ERR_HARD_ROLLBACK_FETCH_FAILED",ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM:"ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM",ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM:"ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM",ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT:"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT",ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED:"ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED",ERR_OT_OP_BADLY_FORMED:"ERR_OT_OP_BADLY_FORMED",ERR_OT_OP_NOT_APPLIED:"ERR_OT_OP_NOT_APPLIED",ERR_OT_OP_NOT_PROVIDED:"ERR_OT_OP_NOT_PROVIDED",ERR_PRESENCE_TRANSFORM_FAILED:"ERR_PRESENCE_TRANSFORM_FAILED",ERR_PROTOCOL_VERSION_NOT_SUPPORTED:"ERR_PROTOCOL_VERSION_NOT_SUPPORTED",ERR_QUERY_CHANNEL_MISSING:"ERR_QUERY_CHANNEL_MISSING",ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED:"ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED",ERR_SNAPSHOT_READ_SILENT_REJECTION:"ERR_SNAPSHOT_READ_SILENT_REJECTION",ERR_SNAPSHOT_READS_REJECTED:"ERR_SNAPSHOT_READS_REJECTED",ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND:"ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND",ERR_TYPE_CANNOT_BE_PROJECTED:"ERR_TYPE_CANNOT_BE_PROJECTED",ERR_TYPE_DOES_NOT_SUPPORT_COMPOSE:"ERR_TYPE_DOES_NOT_SUPPORT_COMPOSE",ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE:"ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE",ERR_UNKNOWN_ERROR:"ERR_UNKNOWN_ERROR"},e.exports=t},50351:function(e,t,n){e.exports=new(n(75207))},75207:function(e){var t=["info","warn","error"];function n(){var e=Object.create(null);t.forEach(function(t){e[t]=console[t].bind(console)}),this.setMethods(e)}e.exports=n,n.prototype.setMethods=function(e){e=e||{};var n=this;t.forEach(function(t){"function"==typeof e[t]&&(n[t]=e[t])})}},1475:function(e,t){t.ACTIONS={initLegacy:"init",handshake:"hs",queryFetch:"qf",querySubscribe:"qs",queryUnsubscribe:"qu",queryUpdate:"q",bulkFetch:"bf",bulkSubscribe:"bs",bulkUnsubscribe:"bu",fetch:"f",fixup:"fixup",subscribe:"s",unsubscribe:"u",op:"op",snapshotFetch:"nf",snapshotFetchByTimestamp:"nt",pingPong:"pp",presence:"p",presenceSubscribe:"ps",presenceUnsubscribe:"pu",presenceRequest:"pr"}},37467:function(e,t){function n(e){for(var t=e[0],n=[],i=1;i<e.length;i++)n[i-1]=e[i];return function(){t.apply(null,n)}}t.messageChannel=function(){var e=n(arguments),t=new MessageChannel;t.port1.onmessage=function(){e(),t.port1.close()},t.port2.postMessage("")},t.setTimeout=function(){var e=n(arguments);setTimeout(e)}},92319:function(e,t,n){var i=n(21839),r=n(82104),o=n(26460),s=r.CODES;function a(e,t){if(!e.type)return new r(s.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");if(void 0===t)return new r(s.ERR_OT_OP_NOT_PROVIDED,"Missing op");var n=i.map[e.type];if(!n)return new r(s.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");if("json0"===n.name&&Array.isArray(t))for(var a=0;a<t.length;a++){var c=t[a];if(Array.isArray(c.p))for(var l=0;l<c.p.length;l++){var u=c.p[l];if(o.isDangerousProperty(u))return new r(s.ERR_OT_OP_NOT_APPLIED,"Invalid path segment")}}try{e.data=n.apply(e.data,t)}catch(e){return new r(s.ERR_OT_OP_NOT_APPLIED,e.message)}}function c(e,t){if(e.type===i.defaultType.uri){var n=t.op;if(n){var r=e.data;n.length>1&&(r=o.clone(r));for(var s=0;s<n.length;s++){var a=n[s];"string"==typeof a.lm&&(a.lm=+a.lm);for(var c=a.p,l=r,u=0;u<c.length;u++){var h=c[u];"[object Array]"==Object.prototype.toString.call(l)?c[u]=+h:l.constructor===Object&&(c[u]=h.toString()),l=l[h]}s<n.length-1&&(r=i.defaultType.apply(r,[a]))}}}}t.checkOp=function(e){if(null==e||"object"!=typeof e)return new r(s.ERR_OT_OP_BADLY_FORMED,"Op must be an object");if(null!=e.create){if("object"!=typeof e.create)return new r(s.ERR_OT_OP_BADLY_FORMED,"Create data must be an object");var t=e.create.type;if("string"!=typeof t)return new r(s.ERR_OT_OP_BADLY_FORMED,"Missing create type");var n=i.map[t];if(null==n||"object"!=typeof n)return new r(s.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type")}else if(null!=e.del){if(!0!==e.del)return new r(s.ERR_OT_OP_BADLY_FORMED,"del value must be true")}else if(!("op"in e))return new r(s.ERR_OT_OP_BADLY_FORMED,"Missing op, create, or del");return null!=e.src&&"string"!=typeof e.src?new r(s.ERR_OT_OP_BADLY_FORMED,"src must be a string"):null!=e.seq&&"number"!=typeof e.seq?new r(s.ERR_OT_OP_BADLY_FORMED,"seq must be a number"):null==e.src&&null!=e.seq||null!=e.src&&null==e.seq?new r(s.ERR_OT_OP_BADLY_FORMED,"Both src and seq must be set together"):null!=e.m&&"object"!=typeof e.m?new r(s.ERR_OT_OP_BADLY_FORMED,"op.m must be an object or null"):void 0},t.normalizeType=function(e){return i.map[e]&&i.map[e].uri},t.apply=function(e,t){if("object"!=typeof e)return new r(s.ERR_APPLY_SNAPSHOT_NOT_PROVIDED,"Missing snapshot");if(null!=e.v&&null!=t.v&&e.v!==t.v)return new r(s.ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT,"Version mismatch");if(t.create){if(e.type)return new r(s.ERR_DOC_ALREADY_CREATED,"Document already exists");var n=t.create,o=i.map[n.type];if(!o)return new r(s.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{e.data=o.create(n.data),e.type=o.uri,e.v++}catch(e){return e}}else if(t.del)e.data=void 0,e.type=null,e.v++;else if("op"in t){var c=a(e,t.op);if(c)return c;e.v++}else e.v++},t.transform=function(e,t,n){if(null!=t.v&&t.v!==n.v)return new r(s.ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM,"Version mismatch");if(n.del){if(t.create||"op"in t)return new r(s.ERR_DOC_WAS_DELETED,"Document was deleted")}else if(n.create&&("op"in t||t.create||t.del)||"op"in n&&t.create)return new r(s.ERR_DOC_ALREADY_CREATED,"Document was created remotely");else if("op"in n&&"op"in t){if(!e)return new r(s.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");if("string"==typeof e&&!(e=i.map[e]))return new r(s.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{t.op=e.transform(t.op,n.op,"left")}catch(e){return e}}null!=t.v&&t.v++},t.applyOps=function(e,n,i){i=i||{};for(var o=0;o<n.length;o++){var a=n[o];if(i._normalizeLegacyJson0Ops)try{c(e,a)}catch(e){return new r(s.ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED,"Cannot normalize legacy json0 op")}e.v=a.v;var l=t.apply(e,a);if(l)return l}},t.transformPresence=function(e,t,n){var r=this.checkOp(t);if(r)return r;var a=e.t;if("string"==typeof a&&(a=i.map[a]),!a)return{code:s.ERR_DOC_TYPE_NOT_RECOGNIZED,message:"Unknown type"};if(!o.supportsPresence(a))return{code:s.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE,message:"Type does not support presence"};if(t.create||t.del){e.p=null,e.v++;return}try{e.p=null===e.p?null:a.transformPresence(e.p,t.op,n)}catch(e){return{code:s.ERR_PRESENCE_TRANSFORM_FAILED,message:e.message||e}}e.v++}},11548:function(e){function t(e){if("string"==typeof e){var t=e.split(".");e={major:t[0],minor:t[1]}}return{major:+(e.protocol||e.major||0),minor:+(e.protocolMinor||e.minor||0)}}e.exports={major:1,minor:2,checkAtLeast:function e(e,n){return e=t(e),n=t(n),e.major>n.major||e.major===n.major&&e.minor>=n.minor}}},86576:function(e){e.exports=t;function t(e,t,n,i,r){this.id=e,this.v=t,this.type=n,this.data=i,this.m=r}},21839:function(e,t,n){t.defaultType=n(41725).type,t.map=Object.create(null),t.register=function(e){e.name&&(t.map[e.name]=e),e.uri&&(t.map[e.uri]=e)},t.register(t.defaultType)},26460:function(e,t,n){var i,r=n(65606),o=n(37467);t.doNothing=function e(){},t.hasKeys=function(e){for(var t in e)return!0;return!1},t.hasOwn=i=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isValidVersion=function(e){return null===e||t.isInteger(e)&&e>=0},t.isValidTimestamp=function(e){return t.isValidVersion(e)},t.MAX_SAFE_INTEGER=0x1fffffffffffff,t.dig=function(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n=arguments[t];e=i(e,n)?e[n]:t===arguments.length-1?void 0:Object.create(null)}return e},t.digOrCreate=function(){for(var e=arguments[0],t=arguments[arguments.length-1],n=1;n<arguments.length-1;n++){var r=arguments[n];e=i(e,r)?e[r]:e[r]=n===arguments.length-2?t():Object.create(null)}return e},t.digAndRemove=function(){for(var e=arguments[0],n=[e],r=1;r<arguments.length-1;r++){var o=arguments[r];if(!i(e,o))break;e=e[o],n.push(e)}for(var r=n.length-1;r>=0;r--){var s=n[r],o=arguments[r+1],a=s[o];r!==n.length-1&&t.hasKeys(a)||delete s[o]}},t.supportsPresence=function(e){return e&&"function"==typeof e.transformPresence},t.callEach=function(e,t){var n=!1;return e.forEach(function(e){e&&(e(t),n=!0)}),n},t.truthy=function(e){return!!e},void 0!==r&&"function"==typeof r.nextTick?t.nextTick=r.nextTick:"undefined"!=typeof MessageChannel?t.nextTick=o.messageChannel:t.nextTick=o.setTimeout,t.clone=function(e){return void 0===e?void 0:JSON.parse(JSON.stringify(e))};var s=Object.create(null);Object.getOwnPropertyNames(Object.prototype).forEach(function(e){"__proto__"!==e&&(s[e]=!0)}),t.isDangerousProperty=function(e){return"__proto__"===e||s[e]};try{var a=n(40537);if("function"!=typeof a.inherits)throw Error("Could not find util.inherits()");t.inherits=a.inherits}catch(e){try{t.inherits=n(56698)}catch(e){throw Error('If running sharedb in a browser, please install the "inherits" or "util" package')}}},81135:function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},49032:function(e,t,n){"use strict";var i=n(47244),r=n(48184),o=n(25767),s=n(35680);function a(e){return e.call.bind(e)}var c="undefined"!=typeof BigInt,l="undefined"!=typeof Symbol,u=a(Object.prototype.toString),h=a(Number.prototype.valueOf),p=a(String.prototype.valueOf),d=a(Boolean.prototype.valueOf);if(c)var f=a(BigInt.prototype.valueOf);if(l)var g=a(Symbol.prototype.valueOf);function m(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function v(e){return"[object Map]"===u(e)}function y(e){return"[object Set]"===u(e)}function b(e){return"[object WeakMap]"===u(e)}function _(e){return"[object WeakSet]"===u(e)}function w(e){return"[object ArrayBuffer]"===u(e)}function S(e){return"undefined"!=typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function x(e){return"[object DataView]"===u(e)}function C(e){return"undefined"!=typeof DataView&&(x.working?x(e):e instanceof DataView)}t.isArgumentsObject=i,t.isGeneratorFunction=r,t.isTypedArray=s,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):s(e)||C(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},v.working="undefined"!=typeof Map&&v(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(v.working?v(e):e instanceof Map)},y.working="undefined"!=typeof Set&&y(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(y.working?y(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},_.working="undefined"!=typeof WeakSet&&_(new WeakSet),t.isWeakSet=function(e){return _(e)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),t.isArrayBuffer=S,x.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&x(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=C;var k="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===u(e)}function R(e){return void 0!==k&&(void 0===E.working&&(E.working=E(new k)),E.working?E(e):e instanceof k)}function O(e){return m(e,h)}function M(e){return m(e,p)}function T(e){return m(e,d)}function A(e){return c&&m(e,f)}function L(e){return l&&m(e,g)}t.isSharedArrayBuffer=R,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===u(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===u(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===u(e)},t.isGeneratorObject=function(e){return"[object Generator]"===u(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===u(e)},t.isNumberObject=O,t.isStringObject=M,t.isBooleanObject=T,t.isBigIntObject=A,t.isSymbolObject=L,t.isBoxedPrimitive=function(e){return O(e)||M(e)||T(e)||A(e)||L(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(S(e)||R(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw Error(e+" is not supported in userland")}})})},40537:function(e,t,n){var i=n(65606),r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},o=/%[sdj%]/g;t.format=function(e){if(!S(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(c(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,r=i.length,s=String(e).replace(o,function(e){if("%%"===e)return"%";if(n>=r)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),a=i[n];n<r;a=i[++n])_(a)||!k(a)?s+=" "+a:s+=" "+c(a);return s},t.deprecate=function(e,n){if(void 0!==i&&!0===i.noDeprecation)return e;if(void 0===i)return function(){return t.deprecate(e,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(i.throwDeprecation)throw Error(n);i.traceDeprecation?console.trace(n):console.error(n),r=!0}return e.apply(this,arguments)}};var s={},a=/^$/;function c(e,n){var i={seen:[],stylize:u};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),b(n)?i.showHidden=n:n&&t._extend(i,n),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=l),p(i,e,i.depth)}function l(e,t){var n=c.styles[t];return n?"\x1b["+c.colors[n][0]+"m"+e+"\x1b["+c.colors[n][1]+"m":e}function u(e,t){return e}function h(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function p(e,n,i){if(e.customInspect&&n&&O(n.inspect)&&n.inspect!==t.inspect&&!(n.constructor&&n.constructor.prototype===n)){var r,o=n.inspect(i,e);return S(o)||(o=p(e,o,i)),o}var s=d(e,n);if(s)return s;var a=Object.keys(n),c=h(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),R(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(O(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(C(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return e.stylize(Date.prototype.toString.call(n),"date");if(R(n))return f(n)}var u="",b=!1,_=["{","}"];if(y(n)&&(b=!0,_=["[","]"]),O(n)&&(u=" [Function"+(n.name?": "+n.name:"")+"]"),C(n)&&(u=" "+RegExp.prototype.toString.call(n)),E(n)&&(u=" "+Date.prototype.toUTCString.call(n)),R(n)&&(u=" "+f(n)),0===a.length&&(!b||0==n.length))return _[0]+u+_[1];if(i<0)if(C(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");else return e.stylize("[Object]","special");return e.seen.push(n),r=b?g(e,n,i,c,a):a.map(function(t){return m(e,n,i,c,t,b)}),e.seen.pop(),v(r,u,_)}function d(e,t){if(x(t))return e.stylize("undefined","undefined");if(S(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return w(t)?e.stylize(""+t,"number"):b(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function g(e,t,n,i,r){for(var o=[],s=0,a=t.length;s<a;++s)P(t,String(s))?o.push(m(e,t,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(m(e,t,n,i,r,!0))}),o}function m(e,t,n,i,r,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),P(i,r)||(s="["+r+"]"),!a&&(0>e.seen.indexOf(c.value)?(a=_(n)?p(e,c.value,null):p(e,c.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").slice(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function v(e,t,n){var i=0;return e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function y(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function _(e){return null===e}function w(e){return"number"==typeof e}function S(e){return"string"==typeof e}function x(e){return void 0===e}function C(e){return k(e)&&"[object RegExp]"===M(e)}function k(e){return"object"==typeof e&&null!==e}function E(e){return k(e)&&"[object Date]"===M(e)}function R(e){return k(e)&&("[object Error]"===M(e)||e instanceof Error)}function O(e){return"function"==typeof e}function M(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(!s[e=e.toUpperCase()])if(a.test(e)){var n=i.pid;s[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,i)}}else s[e]=function(){};return s[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(49032),t.isArray=y,t.isBoolean=b,t.isNull=_,t.isNullOrUndefined=function(e){return null==e},t.isNumber=w,t.isString=S,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=x,t.isRegExp=C,t.types.isRegExp=C,t.isObject=k,t.isDate=E,t.types.isDate=E,t.isError=R,t.types.isNativeError=R,t.isFunction=O,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(81135);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",L(),t.format.apply(t,arguments))},t.inherits=n(56698),t._extend=function(e,t){if(!t||!k(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e};var N="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function I(e,t){if(!e){var n=Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');if(N&&e[N]){var t=e[N];if("function"!=typeof t)throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,i=new Promise(function(e,i){t=e,n=i}),r=[],o=0;o<arguments.length;o++)r.push(arguments[o]);r.push(function(e,i){e?n(e):t(i)});try{e.apply(this,r)}catch(e){n(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),N&&Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=N,t.callbackify=function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!=typeof r)throw TypeError("The last argument must be of type Function");var o=this,s=function(){return r.apply(o,arguments)};e.apply(this,t).then(function(e){i.nextTick(s.bind(null,null,e))},function(e){i.nextTick(I.bind(null,e,s))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}},25767:function(e,t,n){"use strict";var i=n(82682),r=n(99901),o=n(10487),s=n(36556),a=n(75795),c=n(93628),l=s("Object.prototype.toString"),u=n(49092)(),h="undefined"==typeof globalThis?n.g:globalThis,p=r(),d=s("String.prototype.slice"),f=s("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return -1},g={__proto__:null};u&&a&&c?i(p,function(e){var t=new h[e];if(Symbol.toStringTag in t&&c){var n=c(t),i=a(n,Symbol.toStringTag);!i&&n&&(i=a(c(n),Symbol.toStringTag)),g["$"+e]=o(i.get)}}):i(p,function(e){var t=new h[e],n=t.slice||t.set;n&&(g["$"+e]=o(n))});var m=function(e){var t=!1;return i(g,function(n,i){if(!t)try{"$"+n(e)===i&&(t=d(i,1))}catch(e){}}),t},v=function(e){var t=!1;return i(g,function(n,i){if(!t)try{n(e),t=d(i,1)}catch(e){}}),t};e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!u){var t=d(l(e),8,-1);return f(p,t)>-1?t:"Object"===t&&v(e)}return a?m(e):null}},99901:function(e,t,n){"use strict";var i=n(76578),r="undefined"==typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<i.length;t++)"function"==typeof r[i[t]]&&(e[e.length]=i[t]);return e}},92857:function(e,t,n){"use strict";n.d(t,{H:()=>l});var i=n(96540);function r(){let e=window.document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement}function o(){let e=window.document;return"function"==typeof e.exitFullscreen?e.exitFullscreen():"function"==typeof e.msExitFullscreen?e.msExitFullscreen():"function"==typeof e.webkitExitFullscreen?e.webkitExitFullscreen():"function"==typeof e.mozCancelFullScreen?e.mozCancelFullScreen():null}function s(e){let t=e;return t.requestFullscreen?.()||t.msRequestFullscreen?.()||t.webkitEnterFullscreen?.()||t.webkitRequestFullscreen?.()||t.mozRequestFullscreen?.()}let a=["","webkit","moz","ms"];function c(e,{onFullScreen:t,onError:n}){return a.forEach(i=>{e.addEventListener(`${i}fullscreenchange`,t),e.addEventListener(`${i}fullscreenerror`,n)}),()=>{a.forEach(i=>{e.removeEventListener(`${i}fullscreenchange`,t),e.removeEventListener(`${i}fullscreenerror`,n)})}}function l(){let[e,t]=(0,i.useState)(!1),n=(0,i.useRef)(null),a=(0,i.useCallback)(e=>{t(e.target===r())},[t]),l=(0,i.useCallback)(e=>{t(!1),console.error(`[@mantine/hooks] use-fullscreen: Error attempting full-screen mode method: ${e} (${e.target})`)},[t]),u=(0,i.useCallback)(async()=>{r()?await o():await s(n.current)},[]),h=(0,i.useCallback)(e=>{null===e?n.current=window.document.documentElement:n.current=e},[]);return(0,i.useEffect)(()=>!n.current&&window.document?(n.current=window.document.documentElement,c(n.current,{onFullScreen:a,onError:l})):n.current?c(n.current,{onFullScreen:a,onError:l}):void 0,[n.current]),{ref:h,toggle:u,fullscreen:e}}},89380:function(e,t,n){"use strict";n.r(t),n.d(t,{all:()=>eE,allLimit:()=>eR,allSeries:()=>eO,any:()=>to,anyLimit:()=>ts,anySeries:()=>ta,apply:()=>s,applyEach:()=>H,applyEachSeries:()=>W,asyncify:()=>f,auto:()=>K,autoInject:()=>Z,cargo:()=>ei,cargoQueue:()=>er,compose:()=>ea,concat:()=>eu,concatLimit:()=>el,concatSeries:()=>eh,constant:()=>ep,default:()=>t_,detect:()=>ef,detectLimit:()=>eg,detectSeries:()=>em,dir:()=>ey,doDuring:()=>eb,doUntil:()=>e_,doWhilst:()=>eb,during:()=>tv,each:()=>eS,eachLimit:()=>ex,eachOf:()=>B,eachOfLimit:()=>I,eachOfSeries:()=>F,eachSeries:()=>eC,ensureAsync:()=>ek,every:()=>eE,everyLimit:()=>eR,everySeries:()=>eO,filter:()=>eL,filterLimit:()=>eP,filterSeries:()=>eN,find:()=>ef,findLimit:()=>eg,findSeries:()=>em,flatMap:()=>eu,flatMapLimit:()=>el,flatMapSeries:()=>eh,foldl:()=>eo,foldr:()=>e1,forEach:()=>eS,forEachLimit:()=>ex,forEachOf:()=>B,forEachOfLimit:()=>I,forEachOfSeries:()=>F,forEachSeries:()=>eC,forever:()=>eI,groupBy:()=>e$,groupByLimit:()=>eD,groupBySeries:()=>eB,inject:()=>eo,log:()=>ej,map:()=>j,mapLimit:()=>ec,mapSeries:()=>z,mapValues:()=>eF,mapValuesLimit:()=>eH,mapValuesSeries:()=>ez,memoize:()=>eW,nextTick:()=>eV,parallel:()=>eK,parallelLimit:()=>eq,priorityQueue:()=>eZ,queue:()=>eG,race:()=>e0,reduce:()=>eo,reduceRight:()=>e1,reflect:()=>e2,reflectAll:()=>e5,reject:()=>e3,rejectLimit:()=>e4,rejectSeries:()=>e9,retry:()=>tt,retryable:()=>ti,select:()=>eL,selectLimit:()=>eP,selectSeries:()=>eN,seq:()=>es,series:()=>tr,setImmediate:()=>d,some:()=>to,someLimit:()=>ts,someSeries:()=>ta,sortBy:()=>tc,timeout:()=>tl,times:()=>tp,timesLimit:()=>th,timesSeries:()=>td,transform:()=>tf,tryEach:()=>tg,unmemoize:()=>tm,until:()=>ty,waterfall:()=>tb,whilst:()=>tv,wrapSync:()=>f});var i,r,o=n(65606);function s(e,...t){return(...n)=>e(...t,...n)}function a(e){return function(...t){var n=t.pop();return e.call(this,t,n)}}var c="function"==typeof queueMicrotask&&queueMicrotask,l="function"==typeof setImmediate&&setImmediate,u="object"==typeof o&&"function"==typeof o.nextTick;function h(e){setTimeout(e,0)}function p(e){return(t,...n)=>e(()=>t(...n))}var d=p(i=c?queueMicrotask:l?setImmediate:u?o.nextTick:h);function f(e){return v(e)?function(...t){let n=t.pop();return g(e.apply(this,t),n)}:a(function(t,n){var i;try{i=e.apply(this,t)}catch(e){return n(e)}if(i&&"function"==typeof i.then)return g(i,n);n(null,i)})}function g(e,t){return e.then(e=>{m(t,null,e)},e=>{m(t,e&&(e instanceof Error||e.message)?e:Error(e))})}function m(e,t,n){try{e(t,n)}catch(e){d(e=>{throw e},e)}}function v(e){return"AsyncFunction"===e[Symbol.toStringTag]}function y(e){return"AsyncGenerator"===e[Symbol.toStringTag]}function b(e){return"function"==typeof e[Symbol.asyncIterator]}function _(e){if("function"!=typeof e)throw Error("expected a function");return v(e)?f(e):e}function w(e,t){if(t||(t=e.length),!t)throw Error("arity is undefined");return function(...n){return"function"==typeof n[t-1]?e.apply(this,n):new Promise((i,r)=>{n[t-1]=(e,...t)=>{if(e)return r(e);i(t.length>1?t:t[0])},e.apply(this,n)})}}function S(e){return function(t,...n){return w(function(i){var r=this;return e(t,(e,t)=>{_(e).apply(r,n.concat(t))},i)})}}function x(e,t,n,i){t=t||[];var r=[],o=0,s=_(n);return e(t,(e,t,n)=>{var i=o++;s(e,(e,t)=>{r[i]=t,n(e)})},e=>{i(e,r)})}function C(e){return e&&"number"==typeof e.length&&e.length>=0&&e.length%1==0}let k={};function E(e){function t(...n){if(null!==e){var i=e;e=null,i.apply(this,n)}}return Object.assign(t,e),t}function R(e){return e[Symbol.iterator]&&e[Symbol.iterator]()}function O(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}function M(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}function T(e){var t=e?Object.keys(e):[],n=-1,i=t.length;return function r(){var o=t[++n];return"__proto__"===o?r():n<i?{value:e[o],key:o}:null}}function A(e){if(C(e))return O(e);var t=R(e);return t?M(t):T(e)}function L(e){return function(...t){if(null===e)throw Error("Callback was already called.");var n=e;e=null,n.apply(this,t)}}function P(e,t,n,i){let r=!1,o=!1,s=!1,a=0,c=0;function l(){a>=t||s||r||(s=!0,e.next().then(({value:e,done:t})=>{if(!o&&!r){if(s=!1,t){r=!0,a<=0&&i(null);return}a++,n(e,c,u),c++,l()}}).catch(h))}function u(e,t){if(a-=1,!o){if(e)return h(e);if(!1===e){r=!0,o=!0;return}if(t===k||r&&a<=0)return r=!0,i(null);l()}}function h(e){o||(s=!1,r=!0,i(e))}l()}var N=e=>(t,n,i)=>{if(i=E(i),e<=0)throw RangeError("concurrency limit cannot be less than 1");if(!t)return i(null);if(y(t))return P(t,e,n,i);if(b(t))return P(t[Symbol.asyncIterator](),e,n,i);var r=A(t),o=!1,s=!1,a=0,c=!1;function l(e,t){if(!s)if(a-=1,e)o=!0,i(e);else if(!1===e)o=!0,s=!0;else{if(t===k||o&&a<=0)return o=!0,i(null);c||u()}}function u(){for(c=!0;a<e&&!o;){var t=r();if(null===t){o=!0,a<=0&&i(null);return}a+=1,n(t.value,t.key,L(l))}c=!1}u()},I=w(function(e,t,n,i){return N(t)(e,_(n),i)},4);function D(e,t,n){n=E(n);var i=0,r=0,{length:o}=e,s=!1;function a(e,t){!1===e&&(s=!0),!0!==s&&(e?n(e):(++r===o||t===k)&&n(null))}for(0===o&&n(null);i<o;i++)t(e[i],i,L(a))}function $(e,t,n){return I(e,1/0,t,n)}var B=w(function(e,t,n){return(C(e)?D:$)(e,_(t),n)},3),j=w(function(e,t,n){return x(B,e,t,n)},3),H=S(j),F=w(function(e,t,n){return I(e,1,t,n)},3),z=w(function(e,t,n){return x(F,e,t,n)},3),W=S(z);let V=Symbol("promiseCallback");function U(){let e,t;function n(i,...r){if(i)return t(i);e(r.length>1?r:r[0])}return n[V]=new Promise((n,i)=>{e=n,t=i}),n}function K(e,t,n){"number"!=typeof t&&(n=t,t=null),n=E(n||U());var i=Object.keys(e).length;if(!i)return n(null);t||(t=i);var r={},o=0,s=!1,a=!1,c=Object.create(null),l=[],u=[],h={};function p(e,t){l.push(()=>m(e,t))}function d(){if(!s){if(0===l.length&&0===o)return n(null,r);for(;l.length&&o<t;)l.shift()()}}function f(e,t){var n=c[e];n||(n=c[e]=[]),n.push(t)}function g(e){(c[e]||[]).forEach(e=>e()),d()}function m(e,t){if(!a){var i=L((t,...i)=>{if(o--,!1===t){s=!0;return}if(i.length<2&&([i]=i),t){var l={};if(Object.keys(r).forEach(e=>{l[e]=r[e]}),l[e]=i,a=!0,c=Object.create(null),s)return;n(t,l)}else r[e]=i,g(e)});o++;var l=_(t[t.length-1]);t.length>1?l(r,i):l(i)}}function v(){for(var e,t=0;u.length;)e=u.pop(),t++,y(e).forEach(e=>{0==--h[e]&&u.push(e)});if(t!==i)throw Error("async.auto cannot execute tasks due to a recursive dependency")}function y(t){var n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)&&r.indexOf(t)>=0&&n.push(i)}),n}return Object.keys(e).forEach(t=>{var n=e[t];if(!Array.isArray(n)){p(t,[n]),u.push(t);return}var i=n.slice(0,n.length-1),r=i.length;if(0===r){p(t,n),u.push(t);return}h[t]=r,i.forEach(o=>{if(!e[o])throw Error("async.auto task `"+t+"` has a non-existent dependency `"+o+"` in "+i.join(", "));f(o,()=>{0==--r&&p(t,n)})})}),v(),d(),n[V]}var q=/^(?:async\s)?(?:function)?\s*(?:\w+\s*)?\(([^)]+)\)(?:\s*{)/,G=/^(?:async\s)?\s*(?:\(\s*)?((?:[^)=\s]\s*)*)(?:\)\s*)?=>/,J=/,/,Y=/(=.+)?(\s*)$/;function Q(e){let t="",n=0,i=e.indexOf("*/");for(;n<e.length;)if("/"===e[n]&&"/"===e[n+1]){let t=e.indexOf("\n",n);n=-1===t?e.length:t}else if(-1!==i&&"/"===e[n]&&"*"===e[n+1]){let r=e.indexOf("*/",n);-1!==r?(n=r+2,i=e.indexOf("*/",n)):(t+=e[n],n++)}else t+=e[n],n++;return t}function X(e){let t=Q(e.toString()),n=t.match(q);if(n||(n=t.match(G)),!n)throw Error("could not parse args in autoInject\nSource:\n"+t);let[,i]=n;return i.replace(/\s/g,"").split(J).map(e=>e.replace(Y,"").trim())}function Z(e,t){var n={};return Object.keys(e).forEach(t=>{var i,r=e[t],o=v(r),s=!o&&1===r.length||o&&0===r.length;if(Array.isArray(r))r=(i=[...r]).pop(),n[t]=i.concat(i.length>0?a:r);else if(s)n[t]=r;else{if(i=X(r),0===r.length&&!o&&0===i.length)throw Error("autoInject task functions require explicit parameters.");o||i.pop(),n[t]=i.concat(a)}function a(e,t){var n=i.map(t=>e[t]);n.push(t),_(r)(...n)}}),K(n,t)}class ee{constructor(){this.head=this.tail=null,this.length=0}removeLink(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e}empty(){for(;this.head;)this.shift();return this}insertAfter(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1}insertBefore(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1}unshift(e){this.head?this.insertBefore(this.head,e):et(this,e)}push(e){this.tail?this.insertAfter(this.tail,e):et(this,e)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var e=this.head;e;)yield e.data,e=e.next}remove(e){for(var t=this.head;t;){var{next:n}=t;e(t)&&this.removeLink(t),t=n}return this}}function et(e,t){e.length=1,e.head=e.tail=t}function en(e,t,n){if(null==t)t=1;else if(0===t)throw RangeError("Concurrency must not be zero");var i=_(e),r=0,o=[];let s={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function a(e,t){s[e].push(t)}function c(e,t){let n=(...i)=>{l(e,n),t(...i)};s[e].push(n)}function l(e,t){return e?t?void(s[e]=s[e].filter(e=>e!==t)):s[e]=[]:Object.keys(s).forEach(e=>s[e]=[])}function u(e,...t){s[e].forEach(e=>e(...t))}var h=!1;function p(e,t,n,i){if(null!=i&&"function"!=typeof i)throw Error("task callback must be a function");function r(e,...t){return e?n?s(e):o():t.length<=1?o(t[0]):void o(t)}y.started=!0;var o,s,a=y._createTaskItem(e,n?r:i||r);if(t?y._tasks.unshift(a):y._tasks.push(a),h||(h=!0,d(()=>{h=!1,y.process()})),n||!i)return new Promise((e,t)=>{o=e,s=t})}function f(e){return function(t,...n){r-=1;for(var i=0,s=e.length;i<s;i++){var a=e[i],c=o.indexOf(a);0===c?o.shift():c>0&&o.splice(c,1),a.callback(t,...n),null!=t&&u("error",t,a.data)}r<=y.concurrency-y.buffer&&u("unsaturated"),y.idle()&&u("drain"),y.process()}}function g(e){return!!(0===e.length&&y.idle())&&(d(()=>u("drain")),!0)}let m=e=>t=>{if(!t)return new Promise((t,n)=>{c(e,(e,i)=>{if(e)return n(e);t(i)})});l(e),a(e,t)};var v=!1,y={_tasks:new ee,_createTaskItem:(e,t)=>({data:e,callback:t}),*[Symbol.iterator](){yield*y._tasks[Symbol.iterator]()},concurrency:t,payload:n,buffer:t/4,started:!1,paused:!1,push(e,t){if(Array.isArray(e)){if(g(e))return;return e.map(e=>p(e,!1,!1,t))}return p(e,!1,!1,t)},pushAsync(e,t){if(Array.isArray(e)){if(g(e))return;return e.map(e=>p(e,!1,!0,t))}return p(e,!1,!0,t)},kill(){l(),y._tasks.empty()},unshift(e,t){if(Array.isArray(e)){if(g(e))return;return e.map(e=>p(e,!0,!1,t))}return p(e,!0,!1,t)},unshiftAsync(e,t){if(Array.isArray(e)){if(g(e))return;return e.map(e=>p(e,!0,!0,t))}return p(e,!0,!0,t)},remove(e){y._tasks.remove(e)},process(){if(!v){for(v=!0;!y.paused&&r<y.concurrency&&y._tasks.length;){var e=[],t=[],n=y._tasks.length;y.payload&&(n=Math.min(n,y.payload));for(var s=0;s<n;s++){var a=y._tasks.shift();e.push(a),o.push(a),t.push(a.data)}r+=1,0===y._tasks.length&&u("empty"),r===y.concurrency&&u("saturated"),i(t,L(f(e)))}v=!1}},length:()=>y._tasks.length,running:()=>r,workersList:()=>o,idle:()=>y._tasks.length+r===0,pause(){y.paused=!0},resume(){!1!==y.paused&&(y.paused=!1,d(y.process))}};return Object.defineProperties(y,{saturated:{writable:!1,value:m("saturated")},unsaturated:{writable:!1,value:m("unsaturated")},empty:{writable:!1,value:m("empty")},drain:{writable:!1,value:m("drain")},error:{writable:!1,value:m("error")}}),y}function ei(e,t){return en(e,1,t)}function er(e,t,n){return en(e,t,n)}var eo=w(function(e,t,n,i){i=E(i);var r=_(n);return F(e,(e,n,i)=>{r(t,e,(e,n)=>{t=n,i(e)})},e=>i(e,t))},4);function es(...e){var t=e.map(_);return function(...e){var n=this,i=e[e.length-1];return"function"==typeof i?e.pop():i=U(),eo(t,e,(e,t,i)=>{t.apply(n,e.concat((e,...t)=>{i(e,t)}))},(e,t)=>i(e,...t)),i[V]}}function ea(...e){return es(...e.reverse())}var ec=w(function(e,t,n,i){return x(N(t),e,n,i)},4),el=w(function(e,t,n,i){var r=_(n);return ec(e,t,(e,t)=>{r(e,(e,...n)=>e?t(e):t(e,n))},(e,t)=>{for(var n=[],r=0;r<t.length;r++)t[r]&&(n=n.concat(...t[r]));return i(e,n)})},4),eu=w(function(e,t,n){return el(e,1/0,t,n)},3),eh=w(function(e,t,n){return el(e,1,t,n)},3);function ep(...e){return function(...t){return t.pop()(null,...e)}}function ed(e,t){return(n,i,r,o)=>{var s,a=!1;let c=_(r);n(i,(n,i,r)=>{c(n,(i,o)=>i||!1===i?r(i):e(o)&&!s?(a=!0,s=t(!0,n),r(null,k)):void r())},e=>{if(e)return o(e);o(null,a?s:t(!1))})}}var ef=w(function(e,t,n){return ed(e=>e,(e,t)=>t)(B,e,t,n)},3),eg=w(function(e,t,n,i){return ed(e=>e,(e,t)=>t)(N(t),e,n,i)},4),em=w(function(e,t,n){return ed(e=>e,(e,t)=>t)(N(1),e,t,n)},3);function ev(e){return(t,...n)=>_(t)(...n,(t,...n)=>{"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&n.forEach(t=>console[e](t)))})}var ey=ev("dir"),eb=w(function(e,t,n){n=L(n);var i,r=_(e),o=_(t);function s(e,...t){if(e)return n(e);!1!==e&&(i=t,o(...t,a))}function a(e,t){if(e)return n(e);if(!1!==e){if(!t)return n(null,...i);r(s)}}return a(null,!0)},3);function e_(e,t,n){let i=_(t);return eb(e,(...e)=>{let t=e.pop();i(...e,(e,n)=>t(e,!n))},n)}function ew(e){return(t,n,i)=>e(t,i)}var eS=w(function(e,t,n){return B(e,ew(_(t)),n)},3),ex=w(function(e,t,n,i){return N(t)(e,ew(_(n)),i)},4),eC=w(function(e,t,n){return ex(e,1,t,n)},3);function ek(e){return v(e)?e:function(...t){var n=t.pop(),i=!0;t.push((...e)=>{i?d(()=>n(...e)):n(...e)}),e.apply(this,t),i=!1}}var eE=w(function(e,t,n){return ed(e=>!e,e=>!e)(B,e,t,n)},3),eR=w(function(e,t,n,i){return ed(e=>!e,e=>!e)(N(t),e,n,i)},4),eO=w(function(e,t,n){return ed(e=>!e,e=>!e)(F,e,t,n)},3);function eM(e,t,n,i){var r=Array(t.length);e(t,(e,t,i)=>{n(e,(e,n)=>{r[t]=!!n,i(e)})},e=>{if(e)return i(e);for(var n=[],o=0;o<t.length;o++)r[o]&&n.push(t[o]);i(null,n)})}function eT(e,t,n,i){var r=[];e(t,(e,t,i)=>{n(e,(n,o)=>{if(n)return i(n);o&&r.push({index:t,value:e}),i(n)})},e=>{if(e)return i(e);i(null,r.sort((e,t)=>e.index-t.index).map(e=>e.value))})}function eA(e,t,n,i){return(C(t)?eM:eT)(e,t,_(n),i)}var eL=w(function(e,t,n){return eA(B,e,t,n)},3),eP=w(function(e,t,n,i){return eA(N(t),e,n,i)},4),eN=w(function(e,t,n){return eA(F,e,t,n)},3),eI=w(function(e,t){var n=L(t),i=_(ek(e));function r(e){if(e)return n(e);!1!==e&&i(r)}return r()},2),eD=w(function(e,t,n,i){var r=_(n);return ec(e,t,(e,t)=>{r(e,(n,i)=>n?t(n):t(n,{key:i,val:e}))},(e,t)=>{for(var n={},{hasOwnProperty:r}=Object.prototype,o=0;o<t.length;o++)if(t[o]){var{key:s}=t[o],{val:a}=t[o];r.call(n,s)?n[s].push(a):n[s]=[a]}return i(e,n)})},4);function e$(e,t,n){return eD(e,1/0,t,n)}function eB(e,t,n){return eD(e,1,t,n)}var ej=ev("log"),eH=w(function(e,t,n,i){i=E(i);var r={},o=_(n);return N(t)(e,(e,t,n)=>{o(e,t,(e,i)=>{if(e)return n(e);r[t]=i,n(e)})},e=>i(e,r))},4);function eF(e,t,n){return eH(e,1/0,t,n)}function ez(e,t,n){return eH(e,1,t,n)}function eW(e,t=e=>e){var n=Object.create(null),i=Object.create(null),r=_(e),o=a((e,o)=>{var s=t(...e);s in n?d(()=>o(null,...n[s])):s in i?i[s].push(o):(i[s]=[o],r(...e,(e,...t)=>{e||(n[s]=t);var r=i[s];delete i[s];for(var o=0,a=r.length;o<a;o++)r[o](e,...t)}))});return o.memo=n,o.unmemoized=e,o}var eV=p(r=u?o.nextTick:l?setImmediate:h),eU=w((e,t,n)=>{var i=C(t)?[]:{};e(t,(e,t,n)=>{_(e)((e,...r)=>{r.length<2&&([r]=r),i[t]=r,n(e)})},e=>n(e,i))},3);function eK(e,t){return eU(B,e,t)}function eq(e,t,n){return eU(N(t),e,n)}function eG(e,t){var n=_(e);return en((e,t)=>{n(e[0],t)},t,1)}class eJ{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(e){let t;for(;e>0&&eX(this.heap[e],this.heap[t=eQ(e)]);){let n=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=n,e=t}}percDown(e){let t;for(;(t=eY(e))<this.heap.length&&(t+1<this.heap.length&&eX(this.heap[t+1],this.heap[t])&&(t+=1),!eX(this.heap[e],this.heap[t]));){let n=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=n,e=t}}push(e){e.pushCount=++this.pushCount,this.heap.push(e),this.percUp(this.heap.length-1)}unshift(e){return this.heap.push(e)}shift(){let[e]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),e}toArray(){return[...this]}*[Symbol.iterator](){for(let e=0;e<this.heap.length;e++)yield this.heap[e].data}remove(e){let t=0;for(let n=0;n<this.heap.length;n++)!e(this.heap[n])&&(this.heap[t]=this.heap[n],t++);this.heap.splice(t);for(let e=eQ(this.heap.length-1);e>=0;e--)this.percDown(e);return this}}function eY(e){return(e<<1)+1}function eQ(e){return(e+1>>1)-1}function eX(e,t){return e.priority!==t.priority?e.priority<t.priority:e.pushCount<t.pushCount}function eZ(e,t){var n=eG(e,t),{push:i,pushAsync:r}=n;function o(e,t){return Array.isArray(e)?e.map(e=>({data:e,priority:t})):{data:e,priority:t}}return n._tasks=new eJ,n._createTaskItem=({data:e,priority:t},n)=>({data:e,priority:t,callback:n}),n.push=function(e,t=0,n){return i(o(e,t),n)},n.pushAsync=function(e,t=0,n){return r(o(e,t),n)},delete n.unshift,delete n.unshiftAsync,n}var e0=w(function(e,t){if(t=E(t),!Array.isArray(e))return t(TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,i=e.length;n<i;n++)_(e[n])(t)},2);function e1(e,t,n,i){return eo([...e].reverse(),t,n,i)}function e2(e){var t=_(e);return a(function(e,n){return e.push((e,...t)=>{let i={};if(e&&(i.error=e),t.length>0){var r=t;t.length<=1&&([r]=t),i.value=r}n(null,i)}),t.apply(this,e)})}function e5(e){var t;return Array.isArray(e)?t=e.map(e2):(t={},Object.keys(e).forEach(n=>{t[n]=e2.call(this,e[n])})),t}function e6(e,t,n,i){let r=_(n);return eA(e,t,(e,t)=>{r(e,(e,n)=>{t(e,!n)})},i)}var e3=w(function(e,t,n){return e6(B,e,t,n)},3),e4=w(function(e,t,n,i){return e6(N(t),e,n,i)},4),e9=w(function(e,t,n){return e6(F,e,t,n)},3);function e8(e){return function(){return e}}let e7=5,te=0;function tt(e,t,n){var i={times:e7,intervalFunc:e8(te)};if(arguments.length<3&&"function"==typeof e?(n=t||U(),t=e):(tn(i,e),n=n||U()),"function"!=typeof t)throw Error("Invalid arguments for async.retry");var r=_(t),o=1;function s(){r((e,...t)=>{!1!==e&&(e&&o++<i.times&&("function"!=typeof i.errorFilter||i.errorFilter(e))?setTimeout(s,i.intervalFunc(o-1)):n(e,...t))})}return s(),n[V]}function tn(e,t){if("object"==typeof t)e.times=+t.times||e7,e.intervalFunc="function"==typeof t.interval?t.interval:e8(+t.interval||te),e.errorFilter=t.errorFilter;else if("number"==typeof t||"string"==typeof t)e.times=+t||e7;else throw Error("Invalid arguments for async.retry")}function ti(e,t){t||(t=e,e=null);let n=e&&e.arity||t.length;v(t)&&(n+=1);var i=_(t);return a((t,r)=>{function o(e){i(...t,e)}return(t.length<n-1||null==r)&&(t.push(r),r=U()),e?tt(e,o,r):tt(o,r),r[V]})}function tr(e,t){return eU(F,e,t)}var to=w(function(e,t,n){return ed(Boolean,e=>e)(B,e,t,n)},3),ts=w(function(e,t,n,i){return ed(Boolean,e=>e)(N(t),e,n,i)},4),ta=w(function(e,t,n){return ed(Boolean,e=>e)(F,e,t,n)},3),tc=w(function(e,t,n){var i=_(t);return j(e,(e,t)=>{i(e,(n,i)=>{if(n)return t(n);t(n,{value:e,criteria:i})})},(e,t)=>{if(e)return n(e);n(null,t.sort(r).map(e=>e.value))});function r(e,t){var n=e.criteria,i=t.criteria;return n<i?-1:+(n>i)}},3);function tl(e,t,n){var i=_(e);return a((r,o)=>{var s,a=!1;function c(){var t=Error('Callback function "'+(e.name||"anonymous")+'" timed out.');t.code="ETIMEDOUT",n&&(t.info=n),a=!0,o(t)}r.push((...e)=>{a||(o(...e),clearTimeout(s))}),s=setTimeout(c,t),i(...r)})}function tu(e){for(var t=Array(e);e--;)t[e]=e;return t}function th(e,t,n,i){var r=_(n);return ec(tu(e),t,r,i)}function tp(e,t,n){return th(e,1/0,t,n)}function td(e,t,n){return th(e,1,t,n)}function tf(e,t,n,i){arguments.length<=3&&"function"==typeof t&&(i=n,n=t,t=Array.isArray(e)?[]:{}),i=E(i||U());var r=_(n);return B(e,(e,n,i)=>{r(t,e,n,i)},e=>i(e,t)),i[V]}var tg=w(function(e,t){var n,i=null;return eC(e,(e,t)=>{_(e)((e,...r)=>{if(!1===e)return t(e);r.length<2?[n]=r:n=r,i=e,t(e?null:{})})},()=>t(i,n))});function tm(e){return(...t)=>(e.unmemoized||e)(...t)}var tv=w(function(e,t,n){n=L(n);var i=_(t),r=_(e),o=[];function s(e,...t){if(e)return n(e);o=t,!1!==e&&r(a)}function a(e,t){if(e)return n(e);if(!1!==e){if(!t)return n(null,...o);i(s)}}return r(a)},3);function ty(e,t,n){let i=_(e);return tv(e=>i((t,n)=>e(t,!n)),t,n)}var tb=w(function(e,t){if(t=E(t),!Array.isArray(e))return t(Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;function i(t){_(e[n++])(...t,L(r))}function r(o,...s){if(!1!==o){if(o||n===e.length)return t(o,...s);i(s)}}i([])}),t_={apply:s,applyEach:H,applyEachSeries:W,asyncify:f,auto:K,autoInject:Z,cargo:ei,cargoQueue:er,compose:ea,concat:eu,concatLimit:el,concatSeries:eh,constant:ep,detect:ef,detectLimit:eg,detectSeries:em,dir:ey,doUntil:e_,doWhilst:eb,each:eS,eachLimit:ex,eachOf:B,eachOfLimit:I,eachOfSeries:F,eachSeries:eC,ensureAsync:ek,every:eE,everyLimit:eR,everySeries:eO,filter:eL,filterLimit:eP,filterSeries:eN,forever:eI,groupBy:e$,groupByLimit:eD,groupBySeries:eB,log:ej,map:j,mapLimit:ec,mapSeries:z,mapValues:eF,mapValuesLimit:eH,mapValuesSeries:ez,memoize:eW,nextTick:eV,parallel:eK,parallelLimit:eq,priorityQueue:eZ,queue:eG,race:e0,reduce:eo,reduceRight:e1,reflect:e2,reflectAll:e5,reject:e3,rejectLimit:e4,rejectSeries:e9,retry:tt,retryable:ti,seq:es,series:tr,setImmediate:d,some:to,someLimit:ts,someSeries:ta,sortBy:tc,timeout:tl,times:tp,timesLimit:th,timesSeries:td,transform:tf,tryEach:tg,unmemoize:tm,until:ty,waterfall:tb,whilst:tv,all:eE,allLimit:eR,allSeries:eO,any:to,anyLimit:ts,anySeries:ta,find:ef,findLimit:eg,findSeries:em,flatMap:eu,flatMapLimit:el,flatMapSeries:eh,forEach:eS,forEachSeries:eC,forEachLimit:ex,forEachOf:B,forEachOfSeries:F,forEachOfLimit:I,inject:eo,foldl:eo,foldr:e1,select:eL,selectLimit:eP,selectSeries:eN,wrapSync:f,during:tv,doDuring:eb}}}]);
//# sourceMappingURL=28270.368a10d3.js.map