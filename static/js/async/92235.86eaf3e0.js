"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([["92235"],{13853(){},47351(e,a,r){e.exports=r.p+"static/image/default-avatar.0f35ddf2.jpg"},6016(e,a,r){e.exports=r.p+"static/image/leaderboard_background.e75c6c87.jpg"},18918(e,a,r){r.d(a,{A:()=>n});var t=r(74848);r(13853);var l=r(96540),s=r(41344),o=r(12149);let n=()=>{let e=(0,o.N4)(e=>e.session.enableOverallLeaderboard),a=(0,o.N4)(e=>e.session.enableContestLeaderboard),r=(0,o.N4)(e=>e.session.courseId),n=`/courses/${r}/leaderboard`,c=(0,s.Zp)(),d=(0,s.zy)().pathname,i=(0,o.N4)(e=>e.leaderboard.contests),u=a?i.filter(e=>e.published):[];return(0,t.jsxs)("select",{className:"dropdown",onChange:e=>{c(e.target.value)},value:d,children:[e&&(0,t.jsx)("option",{value:`${n}/overall`,children:"Overall XP"}),a&&u.map(({title:e,contest_id:a})=>(0,t.jsxs)(l.Fragment,{children:[(0,t.jsxs)("option",{value:`${n}/contests/${a}/score`,children:[e," (Score)"]}),(0,t.jsxs)("option",{value:`${n}/contests/${a}/popularvote`,children:[e," (Popular Vote)"]})]},a))]})}},18311(e,a,r){r.d(a,{A:()=>n});var t=r(74848);r(13853),r(96540);var l=r(61499),s=r(31230),o=r(12149);let n=({type:e,contest:a,contestID:r})=>{let{role:n,accessToken:c,refreshToken:d}=(0,o.wV)(),i=async()=>{let a={accessToken:c,refreshToken:d};if("overall"===e){let e=await (0,s.BR)(a);e&&u(e)}else if("score"===e){let e=await (0,s.Qh)(r,Number.MAX_SAFE_INTEGER,a);e&&u(e)}else if("popularvote"===e){let e=await (0,s.HL)(r,Number.MAX_SAFE_INTEGER,a);e&&u(e)}},u=r=>{let t=r.map(a=>{var r;let t;return[a.rank,a.name,a.username,"overall"===e?a.xp:a.score,"overall"===e?a.achievements:(r=a.code,t=(r?.toString()??"").replace(/"/g,'""'),`"${t}"`)]}),l=new Blob([[["Rank","Name","Username","overall"===e?"XP":"Score","overall"===e?"Achievements":"Code"].join(","),...t.map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(l),s.download="overall"===e?"Overall Leaderboard.csv":"popularvote"===e?`${a} Popular Vote Leaderboard.csv`:`${a} Score Leaderboard.csv`,s.click()};return n===l.Xh.Admin||n===l.Xh.Staff?(0,t.jsx)("button",{onClick:i,className:"export-button",children:"Export as CSV"}):""}},35961(e,a,r){r.d(a,{A:()=>l});var t=r(74848);r(13853),r(96540);let l=({type:e,data:a,outputType:r})=>(0,t.jsx)("div",{className:"top-three-podium",children:a.filter(e=>e.rank<=3).slice(0,3).map((a,r)=>(0,t.jsxs)("div",{className:`top-player ${1===a.rank?"first":2===a.rank?"second":"third"}`,children:[(0,t.jsx)("p",{className:"player-name",children:a.name}),(0,t.jsxs)("div",{className:"player-bar",children:[(0,t.jsx)("p",{className:"player-rank",children:a.rank}),(0,t.jsxs)("p",{className:"player-xp",children:["overall"===e?a.xp:a.score.toFixed(2),"overall"===e?" XP":""]})]})]},a.username))})},39961(e,a,r){r.r(a),r.d(a,{Component:()=>x,convertToRandomNumber:()=>h,default:()=>g});var t=r(74848);r(13853);var l=r(80346),s=r(66875),o=r(96540),n=r(94201),c=r(47351),d=r(12149),i=r(49540),u=r(6016),p=r(18918),m=r(18311),v=r(35961);function h(e){let a=e.slice(1),r=0;for(let e=0;e<a.length;e++)r=(r<<5)-r+a.charCodeAt(e);return Math.abs(r)%7+1}let b=[{field:"rank",headerName:"Rank",flex:84,sortable:!0,cellRenderer:e=>{let a=e.value;return`${a} ${1===a?"\uD83E\uDD47":2===a?"\uD83E\uDD48":3===a?"\uD83E\uDD49":""}`}},{field:"avatar",headerName:"Avatar",flex:180,sortable:!1,cellRenderer:e=>(0,t.jsx)("img",{src:e.value,alt:"avatar",className:"avatar",onError:e=>e.currentTarget.src=c,style:{flex:"40px",height:"40px",borderRadius:"50%"}})},{field:"name",headerName:"Name",flex:520,sortable:!0},{field:"xp",headerName:"XP",flex:414,sortable:!0}],f=()=>{let e=(0,n.wA)();(0,o.useEffect)(()=>{e(i.A.getContests())},[e]),(0,o.useEffect)(()=>{let e=document.body.style.background;return document.body.style.background=`url(${u}) center/cover no-repeat fixed`,()=>{document.body.style.background=e}},[]);let a=(0,d.N4)(e=>e.leaderboard.paginatedUserXp),r=(0,d.N4)(e=>e.session?.topLeaderboardDisplay??Number.MAX_SAFE_INTEGER),[c,f]=(0,o.useState)([]);(0,o.useEffect)(()=>{e(i.A.getOverallLeaderboardXP(1,25))},[e]);let x=(0,o.useRef)(null),g=(0,o.useRef)({getRows:async a=>{let r=a.startRow,t=a.endRow-r;e(i.A.getOverallLeaderboardXP(r/t+1,t)),x.current=a}});return(0,o.useEffect)(()=>{if(x.current&&a.rows.length>0){let{successCallback:e}=x.current;0===x.current.startRow&&f(a.rows.slice(0,3)),e(a.rows,Math.min(a.userCount,r)),x.current=null}},[a]),a.rows.map(e=>{e.avatar=`/assets/Sample_Profile_${h(e.username)}.jpg`}),(0,t.jsxs)("div",{className:"leaderboard-container",children:[(0,t.jsx)(v.A,{type:"overall",data:c,outputType:void 0}),(0,t.jsxs)("div",{className:"buttons-container",children:[(0,t.jsx)(p.A,{}),(0,t.jsx)(m.A,{type:"overall"})]}),(0,t.jsx)("div",{className:"leaderboard-table-container",children:(0,t.jsx)(s.W6,{theme:l.r$M,pagination:!0,suppressCellFocus:!0,suppressMovableColumns:!0,paginationPageSizeSelector:!1,columnDefs:b,rowModelType:"infinite",paginationPageSize:25,domLayout:"autoHeight",rowHeight:60,cacheBlockSize:25,maxBlocksInCache:5,datasource:g.current})})]})},x=f;x.displayName="OverallLeaderboard";let g=f}}]);
//# sourceMappingURL=92235.86eaf3e0.js.map