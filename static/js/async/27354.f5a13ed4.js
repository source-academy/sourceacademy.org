"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([["27354"],{41657(e,t,n){n.d(t,{g:()=>u});var s=n(74848),i=n(11678),o=n(9584);n(96540);var r=n(19874),a=n(29458),l=n(87574),d=n(12149),c=n(471);let u=e=>{let t=!e.isDebugging&&(0,s.jsx)(c.w,{handleEditorEval:e.handleEditorEval,isEntrypointFileDefined:e.isEntrypointFileDefined,color:e.isRunning?"#39FF14":void 0,className:e.isRunning?"WaitingCursor":void 0},"run"),n=e.isEditorAutorun&&(0,s.jsx)(a.A,{label:"Auto",icon:o.W.AUTOMATIC_UPDATES}),u=(0,l.i)(r.V),h=u&&e.isRunning&&(0,s.jsx)(a.A,{label:"Stop",icon:o.W.STOP,onClick:e.handleInterruptEval}),p=!e.pauseDisabled&&e.isRunning&&!e.isDebugging&&(0,s.jsx)(a.A,{label:"Pause",icon:o.W.STOP,onClick:e.handleDebuggerPause}),g=!e.isRunning&&e.isDebugging&&(0,s.jsx)(a.A,{label:"Resume",icon:o.W.CHEVRON_RIGHT,onClick:e.handleDebuggerResume}),m=t=>e.isDebugging&&(0,s.jsx)(a.A,{label:t,icon:o.W.STOP,onClick:e.handleDebuggerReset}),{isMobileBreakpoint:b}=(0,d.Qs)();return b?(0,s.jsxs)(s.Fragment,{children:[h,p,g,m("Stop")]}):(0,s.jsxs)(s.Fragment,{children:[!e.autorunDisabled&&(0,s.jsx)("div",{className:"Switch",children:(0,s.jsx)(i.dO,{label:"",checked:e.isEditorAutorun,onChange:e.handleToggleEditorAutorun})}),u?(0,s.jsxs)(s.Fragment,{children:[n||t,h]}):n||h||t,p,g,m("Stop Debugger")]})}},69533(e,t,n){n.d(t,{m:()=>i});var s=n(95113);function i(e){let t=s.A.parse(e);for(let[e,n]of Object.entries(t))Array.isArray(n)?t[e]=n.join(","):null===n&&delete t[e];return t}},9548(e,t,n){let s;n.d(t,{Bk:()=>d,Rm:()=>l});var i,o=n(66266);let r={},a;function l(e,t){var n;a&&(n={...t,questionId:r[e],sessionId:e},new Promise((e,t)=>{u().then(s=>{let i=s.transaction([c],"readwrite");i.oncomplete=e,i.onerror=t,i.objectStore(c).add(n)})}))}function d(e,t){let n=(0,o.A)();return r[n]=e,l(n,{...t,type:"init",time:Date.now()}),n}let c="logs",u=(i=()=>new Promise((e,t)=>{let n=indexedDB.open("evtlogs",1);n.onsuccess=t=>{e(n.result)},n.onerror=e=>{console.error("Failed to get db",e),t(n.error)},n.onupgradeneeded=e=>{(e?.target).result.createObjectStore(c,{keyPath:"id",autoIncrement:!0})}}),s=null,()=>s||(s=i()))},16545(e,t,n){n.r(t),n.d(t,{Component:()=>eW,default:()=>eH,handleHash:()=>eV});var s=n(74848),i=n(53991),o=n(9584),r=n(5353),a=n(80952),l=n(46942),d=n.n(l),c=n(38786),u=n(2543),h=n(32992),p=n(96540),g=n(94201),m=n(41344),b=n(20857),x=n(46807),y=n(14873),v=n(92473),S=n(54348),C=n(77555);let j=e=>(0,s.jsx)(v.m,{content:"Execution Time",placement:S.yX.TOP,children:(0,s.jsx)(C.O,{leftIcon:o.W.TIME,style:{width:80},min:1e3,value:e.execTime,onValueChange:e.handleChangeExecTime})});var A=n(95120),f=n(20314),E=n(40391);n(72635),n(40503);var D=n(6261),I=n(75780),w=n(12149),k=n(52519),L=n(35905),O=n(53351),R=n(77080),T=n(27588),N=n(6428),F=n(46119),P=n(61499),M=n(75580),U=n(41657),_=n(6014),V=n(90559),B=n(62120),W=n(31365),H=n(96402),G=n(7496),J=n(29458);let K={INACTIVE:W.J.NONE,SAVED:W.J.PRIMARY,DIRTY:W.J.WARNING},$=e=>{let{isMobileBreakpoint:t}=(0,w.Qs)(),n=e.currentFile?e.isDirty?"DIRTY":"SAVED":"INACTIVE",r=(0,s.jsx)(J.A,{label:e.currentFile&&e.currentFile.name||"Google Drive",icon:o.W.CLOUD,options:{intent:K[n]},isDisabled:e.isFolderModeEnabled}),a=(0,s.jsx)(J.A,{label:"Open",icon:o.W.DOCUMENT_OPEN,onClick:e.onClickOpen}),l=(0,s.jsx)(J.A,{label:"Save",icon:o.W.FLOPPY_DISK,onClick:e.onClickSave,isDisabled:"INACTIVE"===n}),d=(0,s.jsx)(J.A,{label:"Save as",icon:o.W.SEND_TO,onClick:e.onClickSaveAs}),c=e.loggedInAs&&(0,s.jsx)(v.m,{content:`Logged in as ${e.loggedInAs}`,children:(0,s.jsx)(J.A,{label:"Log out",icon:o.W.LOG_OUT,onClick:e.onClickLogOut})}),u=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,s.jsx)(v.m,{content:u,disabled:void 0===u,children:(0,s.jsx)(H.A,{autoFocus:!1,content:(0,s.jsx)("div",{children:(0,s.jsxs)(G.e,{large:!t,children:[a,l,d,c]})}),onOpening:e.onPopoverOpening,popoverClassName:i.POPOVER_DISMISS,disabled:e.isFolderModeEnabled,children:r})})};var z=n(61517),Y=n(5193),X=n(19551),q=n(62055),Q=n(58049),Z=n(61488),ee=n(37852);function et(e){(0,ee.JB)(`Could not connect: ${e&&e.message||e||"Unknown error"}`)}function en(e){let t=(0,p.useRef)(""),[n,r]=(0,p.useState)(""),[a,l]=(0,p.useState)(!0),[d,c]=(0,p.useState)(!1),u=(0,p.useCallback)(n=>{n.preventDefault();let s=t.current;(0,Z.mU)(s).then(t=>{null!==t?(e.handleSetEditorSessionId(s),e.handleSetSessionDetails({docId:t.docId,readOnly:t.defaultReadOnly,owner:!1}),r(s),l(t.defaultReadOnly),c(!1)):(e.handleSetEditorSessionId(""),e.handleSetSessionDetails(null),(0,ee.JB)("Could not find a session with that ID."),window.location.href.includes("/playground")&&!window.location.href.endsWith("/playground")&&window.history.pushState({},document.title,"/playground"))},t=>{e.handleSetEditorSessionId(""),et(t)})},[e.handleSetEditorSessionId,e.handleSetSessionDetails]),h=(0,s.jsx)(J.A,{label:"Leave",icon:o.W.LOG_OUT,onClick:()=>{e.handleSetEditorSessionId(""),t.current="",r("")}}),g=(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:e.editorSessionId?(0,s.jsxs)("div",{style:{padding:"10px",display:"flex",flexDirection:"column"},children:[(0,s.jsxs)(z.E,{children:["You have joined the session as"," ",d?"the owner":a?"a viewer":"an editor","."]}),(0,s.jsx)(Y.c,{}),n&&(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[(0,s.jsx)(X.g,{subLabel:"Invite other users to this session",children:(0,s.jsx)("input",{value:n,readOnly:!0})}),(0,s.jsx)(Q.A,{text:n,onCopy:()=>(0,ee.uT)("Copied to clipboard: "+n),children:(0,s.jsx)(J.A,{icon:o.W.DUPLICATE})})]}),h]}):(0,s.jsxs)("div",{style:{padding:"10px",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,s.jsx)(z.E,{children:"You are not currently in any session."}),(0,s.jsx)(Y.c,{}),(0,s.jsx)(J.A,{label:"Create a new session",icon:o.W.ADD,onClick:()=>{""===e.editorSessionId&&(0,Z.lX)(e.getEditorValue()).then(t=>{r(t.sessionId),e.handleSetEditorSessionId(t.sessionId),e.handleSetSessionDetails({docId:t.docId,readOnly:!1,owner:!0}),c(!0)},et)}}),(0,s.jsx)("br",{}),(0,s.jsx)("span",{children:"... or join an existing one"}),(0,s.jsx)("br",{}),(0,s.jsxs)("form",{onSubmit:u,style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly"},children:[(0,s.jsx)("input",{type:"text",onChange:e=>{t.current=e.target.value},placeholder:"Type your code here..."}),(0,s.jsx)("span",{className:i.POPOVER_DISMISS,children:(0,s.jsx)(J.A,{icon:o.W.LOG_IN,options:{type:"submit"}})})]})]})}),b=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0,{playgroundCode:x}=(0,m.g)();return(0,p.useEffect)(()=>{x&&(t.current=x,u({preventDefault:()=>{}}))},[x,u]),(0,s.jsx)(v.m,{content:b,disabled:void 0===b,children:(0,s.jsx)(H.A,{content:g,disabled:e.isFolderModeEnabled,children:(0,s.jsx)(J.A,{label:"Session",icon:o.W.SOCIAL_MEDIA,options:{iconColor:""===e.editorSessionId?void 0:e.sharedbConnected?q.J.GREEN3:q.J.RED3},isDisabled:e.isFolderModeEnabled})})})}var es=n(64907),ei=n(35505),eo=n(91948);class er extends p.PureComponent{shareInputElem;constructor(e){super(e),this.selectShareInputText=this.selectShareInputText.bind(this),this.handleChange=this.handleChange.bind(this),this.toggleButton=this.toggleButton.bind(this),this.shareInputElem=p.createRef(),this.state={keyword:"",isLoading:!1}}render(){let e=void 0===this.props.queryString?(0,s.jsx)(z.E,{children:"Share your programs! Type something into the editor (left), then click on this button again."}):this.props.isSicp?(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{defaultValue:this.props.queryString,readOnly:!0,ref:this.shareInputElem}),(0,s.jsx)(v.m,{content:"Copy link to clipboard",children:(0,s.jsx)(Q.A,{text:this.props.queryString,children:(0,s.jsx)(J.A,{icon:o.W.DUPLICATE,onClick:this.selectShareInputText})})})]}):(0,s.jsx)(s.Fragment,{children:this.props.shortURL&&"ERROR"!==this.props.shortURL?(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{defaultValue:this.props.shortURL,readOnly:!0,ref:this.shareInputElem}),(0,s.jsx)(v.m,{content:"Copy link to clipboard",children:(0,s.jsx)(Q.A,{text:this.props.shortURL,children:(0,s.jsx)(J.A,{icon:o.W.DUPLICATE,onClick:this.selectShareInputText})})})]},this.props.shortURL):this.state.isLoading&&"ERROR"!==this.props.shortURL?(0,s.jsx)("div",{children:(0,s.jsx)(es.I,{description:"Generating Shareable Link...",icon:(0,s.jsx)(ei.y,{size:ei.H.SMALL})})}):(0,s.jsxs)("div",{children:[eo.A.urlShortenerBase,"\xa0",(0,s.jsx)("input",{placeholder:"custom string (optional)",onChange:this.handleChange,style:{width:175}}),(0,s.jsx)(J.A,{label:"Get Link",icon:o.W.SHARE,onClick:()=>{this.props.handleShortenURL(this.state.keyword),this.setState({isLoading:!0})}})]})});return(0,s.jsx)(H.A,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:(0,s.jsx)(v.m,{content:"Get shareable link",placement:S.yX.TOP,children:(0,s.jsx)(J.A,{label:"Share",icon:o.W.SHARE,onClick:()=>this.toggleButton()})})})}componentDidUpdate(e){this.props.shortURL!==e.shortURL&&this.setState({keyword:"",isLoading:!1})}toggleButton(){this.props.handleGenerateLz&&this.props.handleGenerateLz(),this.props.handleUpdateShortURL(""),this.setState({keyword:"",isLoading:!1})}handleChange(e){this.setState({keyword:e.currentTarget.value})}selectShareInputText(){null!==this.shareInputElem.current&&(this.shareInputElem.current.focus(),this.shareInputElem.current.select())}}let ea=e=>(0,s.jsx)(v.m,{content:"Step Limit",placement:S.yX.TOP,children:(0,s.jsx)(C.O,{leftIcon:o.W.VERTICAL_BAR_CHART_ASC,style:{width:80},min:500,max:5e3,value:e.stepLimit,stepSize:e.stepSize,onBlur:()=>{e.handleOnBlurAutoScale?.(Number(e.stepLimit))},onValueChange:e.handleChangeStepLimit})}),el=({isFolderModeEnabled:e,isSessionActive:t,isPersistenceActive:n,toggleFolderMode:i})=>{let r=t?"Currently unsupported while a collaborative session is active":n?"Currently unsupported while a persistence method is active":`${e?"Disable":"Enable"} Folder mode`;return(0,s.jsx)(v.m,{content:r,children:(0,s.jsx)(J.A,{label:"Folder",icon:o.W.FOLDER_CLOSE,options:{iconColor:e?q.J.BLUE4:void 0},onClick:i,isDisabled:t||n})})},ed=e=>{let{isMobileBreakpoint:t}=(0,w.Qs)(),n=e.githubSaveInfo.filePath||"",r=(n.split("\\").pop()||"").split("/").pop()||"",a=void 0!==e.loggedInAs,l=!a,d=""!==n,c=a&&d,u=W.J.NONE;c&&(u=e.isDirty?W.J.WARNING:W.J.PRIMARY);let h=(0,s.jsx)(J.A,{label:c?r:"GitHub",icon:o.W.GIT_BRANCH,options:{intent:u},isDisabled:e.isFolderModeEnabled}),p=(0,s.jsx)(J.A,{label:"Open",icon:o.W.DOCUMENT_OPEN,onClick:e.onClickOpen,isDisabled:l}),g=(0,s.jsx)(J.A,{label:"Save",icon:o.W.FLOPPY_DISK,onClick:e.onClickSave,isDisabled:l||!c}),m=(0,s.jsx)(J.A,{label:"Save As",icon:o.W.SEND_TO,onClick:e.onClickSaveAs,isDisabled:l}),b=a?(0,s.jsx)(J.A,{label:"Log Out",icon:o.W.LOG_OUT,onClick:e.onClickLogOut}):(0,s.jsx)(J.A,{label:"Log In",icon:o.W.LOG_IN,onClick:e.onClickLogIn}),x=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,s.jsx)(v.m,{content:x,disabled:void 0===x,children:(0,s.jsx)(H.A,{autoFocus:!1,content:(0,s.jsx)("div",{children:(0,s.jsxs)(G.e,{large:!t,children:[p,g,m,b]})}),popoverClassName:i.POPOVER_DISMISS,disabled:e.isFolderModeEnabled,children:h})})};var ec=n(40276),eu=n(72442),eh=n(28761),ep=n(43627),eg=n.n(ep);let em="file-system-view-node-container-m36XjR",eb="file-system-view-input-B9ersw";var ex=n(63283),ey=n(53093),ev=n(41952),eS=n(30771);let eC="context-menu-item-YTI2uf",ej=({children:e,className:t,createNewFile:n,createNewDirectory:o,open:r,rename:a,remove:l})=>{let[c,u]=(0,ey.E)(),[h,g]=p.useState({x:0,y:0});return(0,s.jsxs)("div",{className:t,onContextMenu:e=>{e.preventDefault(),g({x:e.clientX,y:e.clientY}),u(!0)},children:[e,(0,s.jsxs)(ev.k,{menuClassName:d()(i.CARD,i.DARK,"context-menu-xKCaDZ"),...c,anchorPoint:h,onClose:()=>u(!1),children:[n&&(0,s.jsx)(eS.D,{className:eC,onClick:n,children:"New File"}),o&&(0,s.jsx)(eS.D,{className:eC,onClick:o,children:"New Directory"}),r&&(0,s.jsx)(eS.D,{className:eC,onClick:r,children:"Open"}),a&&(0,s.jsx)(eS.D,{className:eC,onClick:a,children:"Rename"}),l&&(0,s.jsx)(eS.D,{className:eC,onClick:l,children:"Delete"})]})]})},eA=({indentationLevel:e})=>{let t={paddingLeft:`${19*e}px`};return(0,s.jsx)("div",{style:t})},ef=({children:e,waitInMsBeforeRender:t})=>{let[n,i]=p.useState(!1);return p.useEffect(()=>{let e=setTimeout(()=>i(!0),t);return()=>clearTimeout(e)},[t]),n?e:(0,s.jsx)(s.Fragment,{})},eE=({workspaceLocation:e,fileSystem:t,basePath:n,fileName:i,isDirectory:o,isEditing:r,setIsEditing:a,refreshDirectory:l})=>{let[d,c]=p.useState(i),u=(0,g.wA)(),h=()=>{a(!1),c(i)};return(0,s.jsxs)(s.Fragment,{children:[r&&(0,s.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:eb,value:d,onChange:e=>c(e.target.value),onKeyDown:r=>{if("Enter"===r.key){a(!1);let r=eg().join(n,i),h=eg().join(n,d);r!==h&&t.exists(h,n=>{n?(0,ex.ug)({title:`Unable to rename ${o?"directory":"file"}`,contents:(0,s.jsxs)("p",{children:["A file or folder ",(0,s.jsx)("b",{children:d})," already exists in this location. Please choose a different name."]}),label:"OK"}).then(()=>c(i)):t.rename(r,h,t=>{t&&console.error(t),o?u(L.A.renameEditorTabsForDirectory(e,r,h)):u(L.A.renameEditorTabForFile(e,r,h)),l()})})}else"Escape"===r.key&&h()},onFocus:e=>{let t=e.target.value.lastIndexOf(".");-1!==t?e.target.setSelectionRange(0,t):e.target.select()},onBlur:h}),!r&&(0,s.jsx)("div",{className:"file-system-view-file-name-nB5vjT",children:i})]})},eD=({processFileName:e,removePlaceholder:t})=>{let[n,i]=p.useState(""),o=()=>t();return(0,s.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:eb,value:n,onChange:e=>i(e.target.value),onKeyDown:s=>{"Enter"===s.key?(e(n),t()):"Escape"===s.key&&o()},onBlur:o})},eI=({workspaceLocation:e,fileSystem:t,basePath:n,directoryName:i,indentationLevel:r,refreshParentDirectory:a})=>{let l=eg().join(n,i),[d,c]=p.useState(!1),[u,h]=p.useState(!1),[m,b]=p.useState(!1),[x,y]=p.useState(!1),[v,S]=p.useState(0),C=(0,g.wA)(),j=()=>S((v+1)%2);return(0,s.jsxs)("div",{className:"file-system-view-directory-node-container-tD0F0Q",children:[(0,s.jsx)(ej,{createNewFile:()=>{c(!0),b(!0)},createNewDirectory:()=>{c(!0),y(!0)},rename:()=>h(!0),remove:()=>{(0,ex.cu)({icon:"warning-sign",title:`Are you sure you want to delete '${i}' and its contents?`,contents:(0,s.jsxs)("p",{children:["This will result in all of its contained files & subdirectories being deleted. Once a directory is deleted, its contents cannot be recovered!",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then(n=>{n&&(C(L.A.removeEditorTabsForDirectory(e,l)),(0,eu._B)(t,l).then(a))})},children:(0,s.jsxs)("div",{className:em,onClick:()=>{u||c(!d)},children:[(0,s.jsx)(eA,{indentationLevel:r}),d&&(0,s.jsx)(eh.I,{icon:o.W.CHEVRON_DOWN}),!d&&(0,s.jsx)(eh.I,{icon:o.W.CHEVRON_RIGHT}),(0,s.jsx)(eE,{workspaceLocation:e,fileSystem:t,basePath:n,fileName:i,isDirectory:!0,isEditing:u,setIsEditing:h,refreshDirectory:a})]})}),m&&(0,s.jsxs)("div",{className:em,children:[(0,s.jsx)(eA,{indentationLevel:r+1}),(0,s.jsx)(eh.I,{icon:o.W.DOCUMENT}),(0,s.jsx)(eD,{processFileName:e=>{let o=eg().join(n,i,e);t.exists(o,n=>{n?(0,ex.ug)({title:"Unable to create file",contents:(0,s.jsxs)("p",{children:["A file or folder ",(0,s.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then(()=>{}):t.writeFile(o,"",e=>{e&&console.error(e),j()})})},removePlaceholder:()=>b(!1)})]}),x&&(0,s.jsxs)("div",{className:em,children:[(0,s.jsx)(eA,{indentationLevel:r+1}),(0,s.jsx)(eh.I,{icon:o.W.CHEVRON_RIGHT}),(0,s.jsx)(eD,{processFileName:e=>{let o=eg().join(n,i,e);t.exists(o,n=>{n?(0,ex.ug)({title:"Unable to create directory",contents:(0,s.jsxs)("p",{children:["A file or folder ",(0,s.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then(()=>{}):t.mkdir(o,777,e=>{e&&console.error(e),j()})})},removePlaceholder:()=>y(!1)})]}),d&&(0,s.jsx)(ek,{workspaceLocation:e,fileSystem:t,basePath:l,indentationLevel:r+1},v)]})},ew=({workspaceLocation:e,fileSystem:t,basePath:n,fileName:i,indentationLevel:r,refreshDirectory:a})=>{let[l,d]=p.useState(!1),c=(0,g.wA)(),u=eg().join(n,i),h=()=>{t.readFile(u,"utf-8",(t,n)=>{if(t&&console.error(t),void 0===n)throw Error("File contents are undefined.");c(L.A.addEditorTab(e,u,n))})};return(0,s.jsx)(ej,{open:h,rename:()=>d(!0),remove:()=>{(0,ex.cu)({icon:"warning-sign",title:`Are you sure you want to delete '${i}'?`,contents:(0,s.jsxs)("p",{children:["Once a file is deleted, it cannot be recovered!",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then(n=>{n&&t.unlink(u,t=>{t&&console.error(t),c(L.A.removeEditorTabForFile(e,u)),a()})})},children:(0,s.jsxs)("div",{className:em,onClick:e=>{2===e.detail&&h()},children:[(0,s.jsx)(eA,{indentationLevel:r}),(0,s.jsx)(eh.I,{icon:o.W.DOCUMENT}),(0,s.jsx)(eE,{workspaceLocation:e,fileSystem:t,basePath:n,fileName:i,isDirectory:!1,isEditing:l,setIsEditing:d,refreshDirectory:a})]})})},ek=({workspaceLocation:e,fileSystem:t,basePath:n,indentationLevel:i})=>{let[o,r]=p.useState(void 0),[a,l]=p.useState(void 0),d=()=>{t.readdir(n,async(e,s)=>{if(e&&console.error(e),void 0===s)return;let i=[],o=[];await Promise.all(s.map(e=>{let s=eg().join(n,e);return new Promise((n,r)=>{t.lstat(s,(t,s)=>{if(t)return r(t);void 0!==s&&(s.isFile()?i.push(e):s.isDirectory()&&o.push(e),n(s))})})})),l(i.sort()),r(o.sort())})};return(p.useEffect(d,[t,n]),a&&o)?(0,s.jsxs)("div",{className:"file-system-view-list-container-SJIfy5",children:[o.map(o=>(0,s.jsx)(eI,{workspaceLocation:e,fileSystem:t,basePath:n,directoryName:o,indentationLevel:i,refreshParentDirectory:d},o)),a.map(o=>(0,s.jsx)(ew,{workspaceLocation:e,fileSystem:t,basePath:n,fileName:o,indentationLevel:i,refreshDirectory:d},o))]}):(0,s.jsx)(ef,{waitInMsBeforeRender:200,children:(0,s.jsx)(ei.y,{className:"file-system-view-spinner-gXV0Mu",size:ei.H.SMALL})})},eL=({workspaceLocation:e,basePath:t})=>{let n=(0,w.N4)(e=>e.fileSystem.inBrowserFileSystem),[i,r]=p.useState(!1),[a,l]=p.useState(!1),[d,c]=p.useState(0),u=()=>c((d+1)%2);return null===n?(0,s.jsx)("div",{className:"file-system-view-error-qF7CJE",children:"Unable to load file system."}):(0,s.jsxs)("div",{className:"file-system-view-container-BFKete",children:[(0,s.jsx)(ek,{workspaceLocation:e,fileSystem:n,basePath:t,indentationLevel:0},d),i&&(0,s.jsxs)("div",{className:em,children:[(0,s.jsx)(eA,{indentationLevel:0}),(0,s.jsx)(eh.I,{icon:o.W.DOCUMENT}),(0,s.jsx)(eD,{processFileName:e=>{let i=eg().join(t,e);n.exists(i,t=>{t?(0,ex.ug)({title:"Unable to create file",contents:(0,s.jsxs)("p",{children:["A file or folder ",(0,s.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then(()=>{}):n.writeFile(i,"",e=>{e&&console.error(e),u()})})},removePlaceholder:()=>r(!1)})]}),a&&(0,s.jsxs)("div",{className:em,children:[(0,s.jsx)(eA,{indentationLevel:0}),(0,s.jsx)(eh.I,{icon:o.W.CHEVRON_RIGHT}),(0,s.jsx)(eD,{processFileName:e=>{let i=eg().join(t,e);n.exists(i,t=>{t?(0,ex.ug)({title:"Unable to create directory",contents:(0,s.jsxs)("p",{children:["A file or folder ",(0,s.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then(()=>{}):n.mkdir(i,777,e=>{e&&console.error(e),u()})})},removePlaceholder:()=>l(!1)})]}),(0,s.jsx)(ej,{className:"file-system-view-empty-space-Csqvti",createNewFile:()=>r(!0),createNewDirectory:()=>l(!0)})]})};var eO=n(83594);let eR=`
Welcome to the Source Academy playground!

The book [_Structure and Interpretation of Computer Programs, JavaScript Edition_](https://sourceacademy.org/sicpjs/)
uses JavaScript sublanguages that we call [_Source_](https://docs.sourceacademy.org/). `,eT=`

In the editor on the left, you can use the [_Ace keyboard shortcuts_](https://github.com/ajaxorg/ace/wiki/Default-Keyboard-Shortcuts) 
and also the [_Source Academy keyboard shortcuts_](https://github.com/source-academy/frontend/wiki/Source-Academy-Keyboard-Shortcuts).

`;var eN=n(42921),eF=n(69533),eP=n(16773),eM=n(9548),eU=n(99475),e_=n(75594);async function eV(e,t,n,s,i){let o=(0,eF.m)(e),r=(0,eN.hM)(o.chap)??void 0;if(r===c.Chapter.FULL_JS)(0,k.OW)();else if(r===c.Chapter.FULL_TS)(0,k.AX)();else{if(r===c.Chapter.HTML&&!await (0,k.g6)())return;let e=void 0===o.prgrm?"":(0,h.decompressFromEncodedURIComponent)(o.prgrm),a=(0,P.Zg)(n),l=void 0===o.files?{[a]:e}:(0,eF.m)((0,h.decompressFromEncodedURIComponent)(o.files));null!==i&&await (0,eu.j2)(n,i,l),s(L.A.setFolderMode(n,!1));let d=(0,eN.MH)(o.isFolder)??!1;s(L.A.setFolderMode(n,d));let u=o.tabs?.split(",").map(h.decompressFromEncodedURIComponent)??[a];s(L.A.removeEditorTabsForDirectory(n,eU.V[n])),u.forEach(e=>s(L.A.addEditorTab(n,e,l[e]??"")));let p=(0,eN.hM)(o.tabIdx)??0;if(s(L.A.updateActiveEditorTabIndex(n,p)),r){let e=(0,P.lr)(r,o.variant);t.handleChapterSelect(r,e.variant),s((0,N.yO)(e))}let g=Math.max((0,eN.hM)(o.exec||"1000")||1e3,1e3);g&&t.handleChangeExecTime(g)}}let eB=e=>{let{isSicpEditor:t}=e,n=t?"sicp":"playground",{isMobileBreakpoint:l}=(0,w.Qs)(),h=(0,w.N4)(e=>e.vscode.isVscode),[v,S]=(0,p.useState)(),C=(0,m.zy)(),k=(0,m.Zp)(),W=(0,g.Pj)(),H=new URLSearchParams(C.search).get("add_device"),{editorTabs:G,editorSessionId:J,sessionDetails:K,stepLimit:z,execTime:Y,isEditorAutorun:X,isRunning:q,isDebugging:Q,output:Z,replValue:ee,sharedbConnected:et,usingSubst:es,usingCse:ei,updateCse:eu,isFolderModeEnabled:eh,activeEditorTabIndex:ep,context:{chapter:eg,variant:em}}=(0,w.N4)(e=>e.workspaces[n]),eb=(0,w.N4)(e=>e.fileSystem.inBrowserFileSystem),{queryString:ex,shortURL:ey,persistenceFile:ev,githubSaveInfo:eS}=(0,w.N4)(e=>e.playground),{sourceChapter:eC,sourceVariant:ej,googleUser:eA,githubOctokitObject:ef}=(0,w.N4)(e=>e.session),eE=(0,g.wA)(),{handleChangeExecTime:eD,handleChapterSelect:eI,handleEditorValueChange:ew,handleSetEditorBreakpoints:ek,handleReplEval:eN,handleReplOutputClear:eF,handleUsingSubst:eB}=(0,p.useMemo)(()=>({handleChangeExecTime:e=>eE(L.A.changeExecTime(e,n)),handleChapterSelect:(e,t)=>eE(L.A.chapterSelect(e,t,n)),handleEditorValueChange:(e,t)=>eE(L.A.updateEditorValue(n,e,t)),handleSetEditorBreakpoints:(e,t)=>eE(L.A.setEditorBreakpoint(n,e,t)),handleReplEval:()=>eE(L.A.evalRepl(n)),handleReplOutputClear:()=>eE(L.A.clearReplOutput(n)),handleUsingSubst:e=>eE(L.A.toggleUsingSubst(e,n))}),[eE,n]);H&&!v&&(S(H),k(C.pathname,{replace:!0}));let[eW,eH]=(0,p.useState)(new Date),{selectedTab:eG,setSelectedTab:eJ}=(0,I.k9)(n,H?"remote_execution":"introduction"),[eK,e$]=(0,p.useState)(!1),[ez,eY]=(0,p.useState)(()=>(0,eM.Bk)("playground",{editorValue:G[0]?.value??"",chapter:eg})),[eX,eq]=(0,p.useState)({}),[eQ,eZ]=(0,p.useState)(!1),e0=(0,p.useMemo)(()=>[["alt+shift+h",()=>eZ(e=>!e)]],[eZ]);(0,r.v)(e0);let e1=(0,p.useMemo)(()=>(0,e_.ik)(v,S),[v]),e4=(0,p.useMemo)(()=>(0,e_.Lf)(eX,J,K?.readOnly||!1),[eX,J,K?.readOnly]),e5=(0,w.N4)(e=>!!e.session.remoteExecutionSession)&&!t,e2=(0,w.N4)(e=>e.workspaces.playground.externalLibrary);(0,p.useEffect)(()=>{eY((0,eM.Bk)("playground",{editorValue:G[0]?.value??"",chapter:eg}))},[J]);let e9=t?e.initialEditorValueHash:C.hash;(0,p.useEffect)(()=>{if(!e9){if(eC&&ej){eI(eC,ej);let e=(0,P.lr)(eC,ej);eE((0,N.yO)(e)),eE(L.A.setFolderMode(n,!1))}return}eV(e9,{handleChangeExecTime:eD,handleChapterSelect:eI},n,eE,eb)},[eE,eb,e9,eC,ej,n,eI,eD]),(0,p.useEffect)(()=>{eG&&(!h&&l&&e_.mv.includes(eG)?eJ("mobile_editor"):!l&&e_.sA.includes(eG)&&eJ("introduction"))},[l,h,eG,eJ]);let e7=p.useCallback((e,t)=>{eH(new Date),ew(e,t)},[ew]);(0,p.useEffect)(()=>{if("sicp"===n)return;let e=G[0]?.value??"",t=G[0]?.breakpoints??[];(0,F.h0)(F.Ay.NewEditor(n,"playground",1,eg,"",e,t))},[]);let e3=(0,p.useCallback)(e=>{(0,eM.Rm)(ez,e)},[ez]),e6=(0,p.useMemo)(()=>({handleEditorEval:()=>{eu&&(O.A.masterLayout=null),eE(L.A.evalEditor(n))},handleInterruptEval:()=>eE(b.A.beginInterruptExecution(n)),handleToggleEditorAutorun:()=>eE(L.A.toggleEditorAutorun(n)),handleDebuggerPause:()=>eE(b.A.beginDebuggerPause(n)),handleDebuggerReset:()=>eE(b.A.debuggerReset(n)),handleDebuggerResume:()=>eE(b.A.debuggerResume(n))}),[eE,n,eu]),e8=(0,w.N4)(e=>e.playground.languageConfig),te=(0,p.useMemo)(()=>(0,s.jsx)(U.g,{isEntrypointFileDefined:null!==ep,isDebugging:Q,isEditorAutorun:X,isRunning:q,autorunDisabled:e5,sourceChapter:e8.chapter,pauseDisabled:e5||!(0,P.Kd)(e8.chapter),...e6},"autorun"),[ep,Q,X,q,e8.chapter,e6,e5]),tt=(0,p.useCallback)((e,t)=>{let{chapter:n,variant:s}=e;(n<=2&&eK||"subst_visualiser"===eG)&&eB(!0),n>2&&(eF(),eB(!1)),e3({time:Date.now(),type:"chapterSelect",data:n}),(0,F.h0)(F.Ay.ChangeChapter("playground",1,n,s)),eI(n,s),eE((0,N.yO)(e))},[eE,eK,eG,e3,eF,eB,eI]),tn=(0,p.useMemo)(()=>(0,s.jsx)(_.e,{handleChapterSelect:tt,isFolderModeEnabled:eh,sourceChapter:e8.chapter,sourceVariant:e8.variant,disabled:e5},"chapter"),[tt,eh,e8.chapter,e8.variant,e5]),ts=(0,p.useMemo)(()=>"subst_visualiser"===eG?null:(0,s.jsx)(V.g,{handleReplOutputClear:eF},"clear_repl"),[eF,eG]),ti=(0,p.useMemo)(()=>"subst_visualiser"===eG?null:(0,s.jsx)(B.T,{handleReplEval:eN,isRunning:q},"eval_repl"),[eN,q,eG]),to=ev&&(!ev.lastSaved||ev.lastSaved<eW),tr=(0,p.useMemo)(()=>(0,s.jsx)($,{isFolderModeEnabled:eh,currentFile:ev,loggedInAs:eA,isDirty:to,onClickSaveAs:()=>eE(T.A.persistenceSaveFileAs()),onClickOpen:()=>eE(T.A.persistenceOpenPicker()),onClickSave:ev?()=>eE(T.A.persistenceSaveFile(ev)):void 0,onClickLogOut:()=>eE(x.A.logoutGoogle()),onPopoverOpening:()=>eE(T.A.persistenceInitialise())},"googledrive"),[eh,ev,eA,to,eE]),ta=eS&&(!eS.lastSaved||eS.lastSaved<eW),tl=(0,p.useMemo)(()=>(0,s.jsx)(ed,{isFolderModeEnabled:eh,loggedInAs:ef.octokit,githubSaveInfo:eS,isDirty:ta,onClickOpen:()=>eE(R.A.githubOpenFile()),onClickSaveAs:()=>eE(R.A.githubSaveFileAs()),onClickSave:()=>eE(R.A.githubSaveFile()),onClickLogIn:()=>eE(x.A.loginGitHub()),onClickLogOut:()=>eE(x.A.logoutGitHub())},"github"),[eE,ef.octokit,ta,eS,eh]),td=(0,p.useMemo)(()=>(0,s.jsx)(j,{execTime:Y,handleChangeExecTime:eD},"execution_time"),[Y,eD]),tc=(0,p.useMemo)(()=>(0,s.jsx)(ea,{stepLimit:z,stepSize:es?2:1,handleChangeStepLimit:e=>{eE(L.A.changeStepLimit(e,n)),ei&&eE(L.A.toggleUpdateCse(!0,n))},handleOnBlurAutoScale:e=>{e%2!=0&&es?eE(L.A.changeStepLimit(e+1,n)):eE(L.A.changeStepLimit(e,n)),ei&&eE(L.A.toggleUpdateCse(!0,n))}},"step_limit"),[eE,z,es,ei,n]),tu=(0,p.useCallback)(()=>W.getState().workspaces[n].editorTabs[0].value,[W,n]),th=(0,p.useCallback)(e=>eE((0,y.LG)(n,e)),[eE,n]),tp=(0,p.useCallback)(e=>eE((0,y.$Z)(n,e)),[eE,n]),tg=(0,p.useMemo)(()=>(0,s.jsx)(en,{isFolderModeEnabled:eh,editorSessionId:J,getEditorValue:tu,handleSetEditorSessionId:th,handleSetSessionDetails:tp,sharedbConnected:et},"session"),[eh,J,tu,th,tp,et]),tm=(0,p.useMemo)(()=>{let n=t?"https://sourceacademy.org/playground#"+e.initialEditorValueHash:ex;return(0,s.jsx)(er,{handleGenerateLz:()=>eE((0,N.fX)()),handleShortenURL:e=>eE((0,N.r0)(e)),handleUpdateShortURL:e=>eE((0,N.$8)(e)),queryString:n,shortURL:ey,isSicp:t},"share")},[eE,t,e.initialEditorValueHash,ex,ey]),tb=(0,p.useMemo)(()=>(0,s.jsx)(el,{isFolderModeEnabled:eh,isSessionActive:""!==J,isPersistenceActive:void 0!==ev||""!==eS.repoName,toggleFolderMode:()=>eE(L.A.toggleFolderMode(n))},"folder"),[eE,eS.repoName,eh,ev,J,n]);(0,p.useEffect)(()=>{let e=(0,P.lr)(eg,em);eE((0,N.yO)(e))},[eE,eg,em]);let tx=e8.supports.dataVisualizer,ty=e8.supports.cseMachine,tv=e8.supports.substVisualizer,tS=(0,p.useMemo)(()=>{var e;return(0,e_.wY)((e=e8.chapter,eR+((e,t)=>{if(e===c.Chapter.FULL_JS)return"However, you have chosen full JavaScript; your program will be run directly using JavaScript strict mode [_(ECMAScript 2021)_](https://262.ecma-international.org/12.0/).\n\n<b>Warning:</b> If your program freezes during execution, you can try refreshing the tab. Note that you need to open the browser console (typically by pressing `F12`) before using breakpoints.";if(e===c.Chapter.HTML)return"However, you have chosen HTML, the standard markup language for webpages. Your code will be rendered directly as a HTML document.\n\nJavaScript code can be added to a HTML document using the `<script>` tag; any script errors will be displayed in the output below.\n\n<b>Note:</b> Error messages may differ between browsers, e.g. when using Safari, errors can only be viewed on the browser console itself. Please check the browser console (typically by pressing `F12`) for more detailed errors and warnings.";let n=`https://docs.sourceacademy.org/source_${e}${t!==c.Variant.DEFAULT&&t!==c.Variant.NATIVE?`_${t}`:""}/`;return`You have chosen the sublanguage [_${(0,P.Kl)(e,t)}_](${n}).`})(e,e8.variant)+eT))},[e8]),tC=(0,p.useMemo)(()=>{let e=[tS];return e8.chapter===c.Chapter.HTML?Z.length>0&&"result"===Z[0].type&&e.push((0,E.A)(Z[0],e=>eE(L.A.addHtmlConsoleError(e,n)),n)):(c.Chapter.FULL_JAVA,!e5&&(tx&&e.push((0,f.A)(n)),ty&&e.push((0,A.Ay)(n)),tv&&e.push((0,e_.fM)(n,Z))),t||eo.A.playgroundOnly||(e.push(e1),""!==J&&e.push(e4))),e},[tS,e8.chapter,e5,t,Z,n,eE,tx,ty,tv,e1,J,e4]),tj=[...tC].filter(({id:e})=>!(e&&e_.mv.includes(e))),tA=(0,p.useCallback)(t=>{let n=()=>{t.getSession().addFold("    ",new a.Range(1,0,e.prependLength,0)),t.renderer.off("afterRender",n)};t.renderer.on("afterRender",n)},[e.prependLength]),tf=(0,p.useCallback)((e,t)=>{e3({time:Date.now(),type:"codeDelta",data:t}),eE(L.A.toggleUpdateCse(!0,n)),eE(L.A.setEditorHighlightedLines(n,0,[]))},[e3,eE,n]),tE=(0,p.useCallback)(e=>{e3({time:Date.now(),type:"cursorPositionChange",data:e.getCursor()})},[e3]),tD=(0,p.useCallback)(e=>{let t=e.getRange(),n=e.isBackwards();(0,u.isEqual)(t.start,t.end)||e3({time:Date.now(),type:"selectionRangeData",data:{range:t,isBackwards:n}})},[e3]),tI=(0,p.useCallback)((e,t)=>{let s=t.filter(e=>!!e).length;s>0&&(e$(!0),eg<=2&&eB(!0)),0===s&&(e$(!1),"subst_visualiser"!==eG&&(eF(),eB(!1))),ek(e,t),eE(L.A.toggleUpdateCse(!0,n))},[eG,eE,n,ek,eF,eB,eg]),tw=!e8.supports.repl||e5,tk=(0,p.useMemo)(()=>({handleDeclarationNavigate:e=>eE(L.A.navigateToDeclaration(n,e)),handlePromptAutocomplete:(e,t,s)=>eE(L.A.promptAutocomplete(n,e,t,s)),handleSendReplInputToOutput:e=>eE(L.A.sendReplInputToOutput(e,n)),handleSetSharedbConnected:e=>eE((0,y.PU)(n,e)),setActiveEditorTabIndex:e=>eE(L.A.updateActiveEditorTabIndex(n,e)),removeEditorTabByIndex:e=>eE(L.A.removeEditorTab(n,e))}),[eE,n]),tL={editorSessionId:J,sessionDetails:K,isEditorAutorun:X,editorVariant:"normal",baseFilePath:eU.V[n],isFolderModeEnabled:eh,activeEditorTabIndex:ep,setActiveEditorTabIndex:tk.setActiveEditorTabIndex,removeEditorTabByIndex:tk.removeEditorTabByIndex,editorTabs:G.map(ec.U),handleDeclarationNavigate:tk.handleDeclarationNavigate,handleEditorEval:e6.handleEditorEval,handlePromptAutocomplete:tk.handlePromptAutocomplete,handleSendReplInputToOutput:tk.handleSendReplInputToOutput,handleSetSharedbConnected:tk.handleSetSharedbConnected,onChange:tf,onCursorChange:tE,onSelectionChange:tD,onLoad:t&&e.prependLength?tA:void 0,sourceChapter:e8.chapter,externalLibraryName:e2,sourceVariant:e8.variant,handleEditorValueChange:e7,handleEditorUpdateBreakpoints:tI,setUsers:eq,updateLanguageCallback:tt},tO=(0,p.useMemo)(()=>({handleBrowseHistoryDown:()=>eE(L.A.browseReplHistoryDown(n)),handleBrowseHistoryUp:()=>eE(L.A.browseReplHistoryUp(n)),handleReplValueChange:e=>eE(L.A.updateReplValue(e,n))}),[eE,n]),tR={output:Z,replValue:ee,handleReplEval:eN,usingSubst:es,handleBrowseHistoryDown:tO.handleBrowseHistoryDown,handleBrowseHistoryUp:tO.handleBrowseHistoryUp,handleReplValueChange:tO.handleReplValueChange,sourceChapter:e8.chapter,sourceVariant:e8.variant,externalLibrary:M.O.NONE,hidden:"subst_visualiser"===eG||"cse_machine"===eG,inputHidden:tw,replButtons:[tw?null:ti,ts],disableScrolling:t},tT=(0,p.useMemo)(()=>({tabs:[...eh?[{label:"Folder",body:(0,s.jsx)(eL,{workspaceLocation:"playground",basePath:eU.V[n]}),iconName:o.W.FOLDER_CLOSE,id:"folder"}]:[]]}),[eh,n]),tN={controlBarProps:{editorButtons:[te,e8.chapter===c.Chapter.FULL_JS?null:tm,tn,t?null:tg,e8.supports.multiFile?tb:null,tr,tl,es||ei||(0,P.f_)(e8.variant)?tc:(0,P.Kd)(e8.chapter)?td:null]},editorContainerProps:tL,handleSideContentHeightChange:(0,p.useCallback)(e=>eE((0,D.k1)(e,n)),[eE,n]),replProps:tR,sideBarProps:tT,sideContentProps:{selectedTabId:eG,tabs:{beforeDynamicTabs:tC,afterDynamicTabs:[]},workspaceLocation:n},sideContentIsResizeable:"subst_visualiser"!==eG&&"cse_machine"!==eG},tF={editorContainerProps:tL,replProps:tR,sideBarProps:tT,mobileSideContentProps:{mobileControlBarProps:{editorButtons:[te,tn,e8.chapter===c.Chapter.FULL_JS?null:tm,t?null:tg,e8.supports.multiFile?tb:null,tr,tl]},selectedTabId:eG,onChange:eJ,tabs:{beforeDynamicTabs:tj,afterDynamicTabs:[]},workspaceLocation:n}};return!h&&l?(0,s.jsx)("div",{className:d()("Playground",i.DARK,eQ&&"GreenScreen"),children:(0,s.jsx)(eO.A,{...tF})}):(0,s.jsx)("div",{className:d()("Playground",i.DARK,eQ&&"GreenScreen"),children:(0,s.jsx)(eP.A,{...tN})})},eW=eB;eW.displayName="Playground";let eH=eB}}]);
//# sourceMappingURL=27354.f5a13ed4.js.map